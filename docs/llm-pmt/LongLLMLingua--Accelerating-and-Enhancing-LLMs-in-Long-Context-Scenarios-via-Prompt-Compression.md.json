["```\npublic class MessageArchiveManagement\n    private static final long MILLISECONDS_IN_DAY = 24 * 00 *0;\n    public static final long_CUP = MCON_DAY\n    /.../\n          .(\"\",.getStart\n          add\n ifget() >0\n           Node end(\"\n            end.(\"\n            endNode.Value(\"\", Util.getTimestamp(query.getEnd\naddNode\n        }        if (.withid null && contact null && !isference\n           Node with(\"           .with\n           .Value(\"valuewith\n           .(\n        //    queryMessageive(connection, nextQuery\n            final(connectionProtocol(), query\n            synchronized (eries)\n            //    queries.add(nextQuery\n            }\n        }\n\n    public boolean queryInProgress( contact, OnLoaded\n    moreMessagesLoadedListener)\n       ized (eries)\n            (Query query : queries)\n                if(query.getWith().equals(contact.getUserId()))\n    if (query.onMoreMessagesLoaded == null &&MessagesListener\n    null) query.setOnMoreMessagesLoaded(Listener}\n                    return true;}}\n            return false;}}\n    private void finalizeQuery(Protocol protocol, Query query) {\n        synchronized (queries) {\n            .remove(query);\n        }\n        Contact contact = null;\n        if (query.getWith() != null) {\n            contact = protocol.getItemByUID(query.getWith());\n        }\n        if (contact != null) {\n\n```", "```\n        contact.setLastMessageTransitted(query.getEnd());\\n\n\n```", "```\n        if (contact.setLastMessageTransmitted(query.getEnd())) {\n\n```", "```\n        contact.removeQuery(query);\\n\n\n```"]