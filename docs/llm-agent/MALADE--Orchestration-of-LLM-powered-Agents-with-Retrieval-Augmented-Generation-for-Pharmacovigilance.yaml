- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 类别：未分类
- en: 'date: 2024-09-08 18:39:58'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：2024-09-08 18:39:58
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: 'MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance'
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MALADE：使用检索增强生成的 LLM 驱动代理系统用于药物监测
- en: 来源：[https://ar5iv.labs.arxiv.org/html/2408.01869](https://ar5iv.labs.arxiv.org/html/2408.01869)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://ar5iv.labs.arxiv.org/html/2408.01869](https://ar5iv.labs.arxiv.org/html/2408.01869)
- en: 'Jihye Choi  ¹, Nils Palumbo¹¹footnotemark: 1  ¹, Prasad Chalasani², Matthew
    M. Engelhard³,'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Jihye Choi ¹, Nils Palumbo¹¹脚注标记：1 ¹, Prasad Chalasani², Matthew M. Engelhard³，
- en: Somesh Jha^(1,2), Anivarya Kumar³, David Page³
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Somesh Jha^(1,2), Anivarya Kumar³, David Page³
- en: ¹University of Wisconsin-Madison, ²Langroid, ³Duke University Equal contribution,
    listed alphabetically by last name
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ¹威斯康星大学麦迪逊分校，²Langroid，³杜克大学 平等贡献，按姓氏字母顺序列出
- en: Abstract
  id: totrans-9
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In the era of Large Language Models (LLMs), given their remarkable text understanding
    and generation abilities, there is an unprecedented opportunity to develop new,
    LLM-based methods for trustworthy medical knowledge synthesis, extraction and
    summarization. This paper focuses on the problem of Pharmacovigilance (PhV), where
    the significance and challenges lie in identifying Adverse Drug Events (ADEs)
    from diverse text sources, such as medical literature, clinical notes, and drug
    labels. Unfortunately, this task is hindered by factors including variations in
    the terminologies of drugs and outcomes, and ADE descriptions often being buried
    in large amounts of narrative text. We present MALADE, the first effective collaborative
    multi-agent system powered by LLM with Retrieval Augmented Generation for ADE
    extraction from drug label data. This technique involves augmenting a query to
    an LLM with relevant information extracted from text resources, and instructing
    the LLM to compose a response consistent with the augmented data. MALADE is a
    general LLM-agnostic architecture, and its unique capabilities are: (1) leveraging
    a variety of external sources, such as medical literature, drug labels, and FDA
    tools (e.g., OpenFDA drug information API), (2) extracting drug-outcome association
    in a structured format along with the strength of the association, and (3) providing
    explanations for established associations. Instantiated with GPT-4 Turbo or GPT-4o,
    and FDA drug label data, MALADE demonstrates its efficacy with an Area Under ROC
    Curve of 0.90 against the OMOP Ground Truth table of ADEs. Our implementation
    leverages the [Langroid](https://github.com/langroid/langroid) multi-agent LLM
    framework and can be found at [https://github.com/jihyechoi77/malade](https://github.com/jihyechoi77/malade).'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在大型语言模型（LLMs）时代，鉴于其卓越的文本理解和生成能力，有前所未有的机会开发基于 LLM 的可靠医学知识综合、提取和总结新方法。本文关注药物监测（PhV）问题，其意义和挑战在于从各种文本来源（如医学文献、临床记录和药品标签）中识别不良药物事件（ADEs）。不幸的是，这一任务受到药物和结果术语变异以及
    ADE 描述通常被埋没在大量叙述文本中的因素的阻碍。我们提出了 MALADE，这是第一个有效的协作多代理系统，利用 LLM 和检索增强生成技术从药品标签数据中提取
    ADE。该技术包括将从文本资源中提取的相关信息增强查询，然后指示 LLM 生成与增强数据一致的响应。MALADE 是一个通用的 LLM 独立架构，其独特能力包括：（1）利用多种外部来源，如医学文献、药品标签和
    FDA 工具（例如，OpenFDA 药品信息 API），（2）以结构化格式提取药物-结果关联及其强度，（3）为确立的关联提供解释。MALADE 通过实例化
    GPT-4 Turbo 或 GPT-4o，并使用 FDA 药品标签数据，在 OMOP ADEs 真实表上表现出 0.90 的 ROC 曲线下面积，证明了其有效性。我们的实现利用了
    [Langroid](https://github.com/langroid/langroid) 多代理 LLM 框架，可以在 [https://github.com/jihyechoi77/malade](https://github.com/jihyechoi77/malade)
    找到。
- en: 1 Introduction
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1 介绍
- en: '![Refer to caption](img/7f14d5c4b7eb716bb9e8f8c1e77c2361.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/7f14d5c4b7eb716bb9e8f8c1e77c2361.png)'
- en: 'Figure 1: Real-world demonstration of our proposed multi-agent orchestration
    system, MALADE. Handling the user query, “Are ACE Inhibitors associated with Angioedema?”,
    involves a sequence of subtasks performed by three Agents: DrugFinder, DrugAgent,
    CategoryAgent (each instantiated with GPT-4 Turbo or GPT-4o). Each Agent generates
    a response and justification, which are validated by a corresponding Critic agent,
    whose feedback is used by the Agent to revise its response.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1：我们提出的多代理协调系统 MALADE 的实际演示。处理用户查询“ACE 抑制剂是否与血管性水肿相关？”涉及由三个代理（DrugFinder、DrugAgent、CategoryAgent，每个代理实例化为
    GPT-4 Turbo 或 GPT-4o）执行的一系列子任务。每个代理生成响应和理由，这些内容由相应的 Critic 代理进行验证，Critic 的反馈被用来修订代理的响应。
- en: 'Pharmacovigilance (PhV) is the science of identification and prevention of
    adverse drug events (ADEs) caused by pharmaceutical products after they are introduced
    to the market. PhV is of enormous importance to both the pharmaceutical industry
    and public health, as it aims to safeguard the well-being of patients by detecting
    new safety concerns and intervening when necessary. A central problem in PhV is
    ADE Extraction: given a drug category $C$. This task demands the analysis of a
    vast corpus of textual data sources from a variety of sources, such as patient
    medical records, clinical notes, social media, spontaneous reporting systems,
    drug labels, medical literature, and clinical trial reports. Besides the sheer
    volume of text from these sources, ADE extraction is further complicated by variability
    in the names of drugs and outcomes, and the fact that ADE descriptions are often
    buried in large amounts of narrative text [[14](#bib.bib14)].'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 药物警戒（PhV）是识别和预防药物上市后引发的不良药物事件（ADEs）的科学。药物警戒对于制药行业和公共健康具有极大的重要性，因为它旨在通过检测新的安全问题并在必要时进行干预，来保障患者的健康。药物警戒的一个核心问题是ADE提取：给定一个药物类别
    $C$。这一任务要求分析来自各种来源的大量文本数据，例如患者病历、临床记录、社交媒体、自发报告系统、药物标签、医学文献和临床试验报告。除了这些来源的大量文本外，ADE提取还因药物和结果名称的多样性以及ADE描述通常被埋在大量叙述文本中而变得更加复杂[[14](#bib.bib14)]。
- en: 'Traditionally, various classical natural language processing (NLP) and deep
    learning techniques have been used to address this problem [[22](#bib.bib22),
    [21](#bib.bib21), [35](#bib.bib35), [2](#bib.bib2)]. Compared to classical NLP
    methods, today’s best Large Language Models (LLMs) (and even weaker open-source/local
    LLMs [[36](#bib.bib36), [11](#bib.bib11)]) exhibit a significant advancement in
    text understanding and generation capabilities, and there is a great opportunity
    to use these models to not only improve existing ADE extraction methods, but also
    consider data sources that were previously not feasible to use. Recent attempts
    to apply LLMs to ADE Extraction only leverage off-the-shelf ChatGPT [[38](#bib.bib38)],
    with limited performance and inconsistent reasoning for their extraction rationales [[32](#bib.bib32)].
    These limitations stem primarily from two factors: (a) accurate ADE Extraction
    requires access to specific data sources which LLMs may not have “seen” during
    their pre-training, hence relying on an LLM’s “built-in” knowledge yields inaccurate
    results, and (b) LLMs, being probabilistic next-token predictors, may produce
    incorrect or unreliable results when used naively without carefully breaking down
    the task into simpler sub-tasks, or without mechanisms to validate and correct
    their responses.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，已经使用了各种经典的自然语言处理（NLP）和深度学习技术来解决这一问题[[22](#bib.bib22), [21](#bib.bib21),
    [35](#bib.bib35), [2](#bib.bib2)]。与经典NLP方法相比，如今最优秀的大型语言模型（LLMs）（甚至较弱的开源/本地LLMs[[36](#bib.bib36),
    [11](#bib.bib11)]）在文本理解和生成能力方面有了显著的进步，并且有很大的机会利用这些模型来改进现有的ADE提取方法，同时考虑以前无法使用的数据源。近期尝试将LLMs应用于ADE提取的工作仅仅利用了现成的ChatGPT[[38](#bib.bib38)]，其性能有限且提取理由的推理不一致[[32](#bib.bib32)]。这些限制主要源于两个因素：（a）准确的ADE提取需要访问LLMs在预训练期间可能未“见过”的特定数据源，因此依赖LLM的“内置”知识会导致不准确的结果，（b）LLMs作为概率性下一个词预测器，当未经过仔细分解任务或缺乏验证和纠正机制时，可能会产生不正确或不可靠的结果。
- en: 'In this paper, we introduce MALADE ¹¹1Pronounced like the French word malade
    meaning “sick” or “ill.”(Multiple Agents powered by LLMs for ADE Extraction),
    the first effective multi-agent Retrieval-Augmented Generation (RAG) system for
    ADE Extraction. Our approach leverages two key techniques to address the above
    two limitations respectively: (a) RAG, equipping an LLM with up-to-date knowledge
    by augmenting an input query with relevant portions of text data, and prompting
    the LLM to generate responses consistent with the augmented information [[15](#bib.bib15)];
    and (b) strategic orchestration of multiple LLM-based agents, each responsible
    for a relatively smaller sub-task of the overall ADE Extraction task [[41](#bib.bib41)].
    Specifically, our system has agents for these sub-tasks (see Figure [1](#S1.F1
    "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")): (1) identifying representative
    drugs for each drug category from a medical database (e.g., MIMIC-IV), (2) gathering
    information on side effects of those drugs from external text knowledge bases
    (e.g., FDA drug label database), and finally, (3) composing final answers summarizing
    the effect of the drug category on an adverse event. Each agent is assigned a
    specific sub-task and collaborates with others to accomplish the the ultimate
    goal of ADE identification. Furthermore, we enhance the reliability of our multi-agent
    system even further by pairing each agent with a critic agent, whose role is to
    verify the behaviors and responses of its counterpart.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '在本文中，我们介绍了 MALADE ¹¹（发音类似于法语单词 "malade"，意为“生病”或“虚弱”）（由 LLM 驱动的多代理系统用于 ADE 提取），这是第一个有效的多代理检索增强生成（RAG）系统，用于
    ADE 提取。我们的方法利用了两个关键技术来分别解决上述两个限制：（a）RAG，通过将输入查询与相关文本数据的部分内容增强，装备 LLM 以获取最新的知识，并促使
    LLM 生成与增强信息一致的响应[[15](#bib.bib15)]；（b）战略性地协调多个基于 LLM 的代理，每个代理负责整体 ADE 提取任务中的一个相对较小的子任务[[41](#bib.bib41)]。具体来说，我们的系统有以下子任务的代理（见图
    [1](#S1.F1 "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance)）：（1）从医学数据库（例如，MIMIC-IV）中识别每个药物类别的代表性药物，（2）从外部文本知识库（例如，FDA
    药物标签数据库）中收集这些药物的副作用信息，最后，（3）撰写总结药物类别对不良事件影响的最终答案。每个代理被分配一个特定的子任务，并与其他代理协作以实现 ADE
    识别的终极目标。此外，我们通过将每个代理与一个评论代理配对进一步提高了我们的多代理系统的可靠性，评论代理的角色是验证其对应代理的行为和响应。'
- en: The system, though applied here for ADE extraction specifically, illustrates
    how a Multi-Agent approach can be used to generate trustworthy, evidence-based
    summaries and confidence scores in response to challenging medical questions requiring
    synthesis of evidence from multiple sources of clinical knowledge and data. As
    such, MALADE may be viewed as a case study illustrating an approach that could
    later be applied to other problems in PhV, including identification of possible
    drug-to-drug interactions, as well as clinical problems outside of PhV, such as
    identifying known symptoms of a condition of interest documented in clinical notes.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管该系统在此专门应用于 ADE 提取，但它展示了如何使用多代理方法生成可靠的、基于证据的总结和置信度评分，以应对需要从多个临床知识和数据来源综合证据的挑战性医疗问题。因此，MALADE
    可以视为一个案例研究，说明了一种方法，这种方法可以在以后应用于药物警戒（PhV）中的其他问题，包括识别可能的药物间相互作用，以及药物警戒之外的临床问题，例如识别临床记录中记录的感兴趣病症的已知症状。
- en: In summary, our paper makes the following contributions.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，我们的论文做出了以下贡献。
- en: Precise Evaluation.
  id: totrans-19
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 精确评估。
- en: 'In contrast to simpler systems that only produce a binary label indicating
    whether or not a drug category $C$, our method produces distinct scores, including
    a confidence score that indicates how confident an LLM is about its label assignment.
    These scores permit a rigorous quantitative evaluation against the well-established
    Observational Medical Outcomes Partnership (OMOP) Ground Truth table of ADEs associated
    with common drug classes [[19](#bib.bib19)]. We achieve an Area Under the ROC
    Curve (AUC) of approximately 0.85 with GPT-4 Turbo, and 0.90 with GPT-4o (Section [5](#S5
    "5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")). To the best of our knowledge, this is the
    best performance among the baselines, even though the direct comparison may be
    limited ²²2Because none of the original clinical data-based analyses reached this
    high of accuracy, followup investigations have since argued that roughly this
    level is the best achievable by any method based on any sources for the OMOP task.
    In 2016, Gruber et al. [[6](#bib.bib6)] argued there were reproducible errors
    that could be blamed on the OMOP 2010 ground truth itself that could place a ceiling
    on the AUC achievable, and Hauben et al. [[7](#bib.bib7)] more specifically argued
    that on the negative-labeled drug event pairs the error in the ground truth should
    be estimated at 17%. There may be disagreement on varying strengths of different
    literature evidence, but if their estimate is exactly right, it could place a
    ceiling as low as 0.83 on the AUC achievable..'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 与仅产生一个指示药物类别 $C$ 是否存在的二元标签的简单系统相比，我们的方法产生了不同的分数，包括一个置信度分数，指示 LLM 对其标签分配的信心。这些分数允许对与常见药物类别相关的
    ADE 的公认的观察医学结果合作伙伴 (OMOP) 真实表进行严格的定量评估 [[19](#bib.bib19)]。我们使用 GPT-4 Turbo 达到了约
    0.85 的 ROC 曲线下面积 (AUC)，使用 GPT-4o 达到了 0.90 (第 [5](#S5 "5 实验 ‣ MALADE：使用检索增强生成的
    LLM 驱动代理的药物警戒") 节)。据我们所知，这是所有基准测试中表现最好的，尽管直接比较可能存在局限性²²2因为没有任何原始临床数据分析达到了如此高的准确性，因此后续研究指出，这一水平可能是基于
    OMOP 任务的任何方法所能实现的最佳水平。2016 年，Gruber 等人 [[6](#bib.bib6)] 认为 OMOP 2010 真实表中存在可重复的错误，可能会对
    AUC 的可达性设限，而 Hauben 等人 [[7](#bib.bib7)] 更具体地认为，在负标签药物事件对中，真实表中的误差应估计为 17%。尽管不同文献证据的强度可能存在分歧，但如果他们的估计完全准确，这可能会将
    AUC 的上限设置为 0.83。
- en: Grounded generation of responses and justifications.
  id: totrans-21
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 基于实际的生成响应和理由说明。
- en: 'The design of MALADE offers key features essential for high-stakes applications
    like ADE identification: (1) A structured format for drug-to-outcome associations,
    including scores indicating the strength of the association and rarity of the
    adverse event; this is important to ensure robust downstream processing of the
    extracted associations. (2) Justifications for the extracted drug-outcome associations,
    allowing human experts to understand and validate the associations. This is possible
    due to the RAG component of the MALADE architecture, which allows leveraging various
    external sources such as medical literature, drug labels, FDA tools (e.g., OpenFDA
    drug information API), as well as common clinical data sources such as OMOP or
    PCORI, and even specific EHR systems where available. (3) Observability, i.e., complete,
    detailed logs of inter-agent dialogs and intermediate steps; these are essential
    for debugging and auditing the system’s behavior. See Figure [1](#S1.F1 "Figure
    1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") for a real-world demonstration of
    MALADE.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: MALADE 的设计提供了对高风险应用（如 ADE 识别）至关重要的关键特性：(1) 一种结构化的药物与结果关联格式，包括指示关联强度和不良事件稀有性的分数；这对于确保提取的关联能够经过稳健的下游处理至关重要。(2)
    对提取的药物-结果关联的理由说明，使人工专家能够理解和验证这些关联。这得益于 MALADE 架构中的 RAG 组件，该组件允许利用各种外部资源，如医学文献、药物标签、FDA
    工具（如 OpenFDA 药物信息 API），以及常见的临床数据源，如 OMOP 或 PCORI，甚至在有条件的情况下，还包括特定的电子健康记录系统。(3)
    可观察性，即代理之间对话和中间步骤的完整、详细日志；这些对调试和审计系统行为至关重要。有关 MALADE 的实际演示请参见图 [1](#S1.F1 "图 1
    ‣ 1 引言 ‣ MALADE：使用检索增强生成的 LLM 驱动代理的药物警戒")。
- en: Generalizable Insights about Machine Learning in the Context of Healthcare.
  id: totrans-23
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 关于医疗保健背景下机器学习的可推广见解。
- en: 'Our proposed multi-agent architecture is agnostic to LLMs and data sources
    and is based on design primitives intended to be universal building blocks for
    the orchestration of multiple LLM-based agents (Section [3](#S3 "3 Preliminaries
    on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")). Hence, although MALADE is instantiated
    specifically for ADE identification, our design methodology provides a generalizable
    blueprint for the effective construction of multi-agent systems for trustworthy
    medical knowledge synthesis and summarization with wide-ranging medical applications.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '我们提出的多智能体架构对LLMs和数据源是不可知的，并且基于旨在成为多LLM智能体协调的通用设计原语（第[3](#S3 "3 Preliminaries
    on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance)节）。因此，尽管MALADE专门用于ADE识别，但我们的设计方法提供了一个可推广的蓝图，用于有效构建多智能体系统，以进行可靠的医学知识综合和总结，具有广泛的医学应用。'
- en: 2 Related Work
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2 相关工作
- en: The advent of highly-capable Large Language Models (LLMs) has sparked significant
    interest in applying these models to medical tasks, including diagnostics [[28](#bib.bib28)],
    medical question-answering [[29](#bib.bib29), [23](#bib.bib23)], and medical evidence
    summarization [[33](#bib.bib33)]. An important application area is pharmacovigilance,
    the science of identifying and preventing adverse drug events (ADEs) caused by
    pharmaceutical products after they are introduced to the market. The specific
    problem of ADE Extraction, namely, identifying whether a specific drug (or category)
    is associated with a specific adverse event, is a challenging task due to variations
    in drug and outcome terminologies, the presence of ADE descriptions in large amounts
    of narrative text, and the disparate sources of such text data, which can include
    patient medical records, clinical notes, drug labels, medical literature, clinical
    trials, message boards, social media. Prior research in this field, notably works
    drawing on large-scale research initiatives including Sentinel [[25](#bib.bib25)],
    OMOP [[27](#bib.bib27)], and OHDSI [[31](#bib.bib31)], has focused on developing
    new methods for causal discovery from purely observational data. Huang et al. [[10](#bib.bib10)]
    investigate the use of social forums for constructing predictive models of ADEs,
    focusing on the performance of different data processing techniques and BERT architectures.
    von Csefalvay [[37](#bib.bib37)] introduces a novel LLM, DAEDRA, for detecting
    regulatory-relevant outcomes from passive pharmacovigilance reports. Sorbello
    et al. [[30](#bib.bib30)] use LLMs like GPT to improve the capture of opioid drug
    and adverse event mentions from electronic health records. Finally, Sun et al. [[32](#bib.bib32)]
    investigate the performance of ChatGPT for extracting adverse events from medical
    text sources.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 高能力的大型语言模型（LLMs）的出现引发了对将这些模型应用于医学任务的重大兴趣，包括诊断[[28](#bib.bib28)]、医学问答[[29](#bib.bib29),
    [23](#bib.bib23)]和医学证据总结[[33](#bib.bib33)]。一个重要的应用领域是药物警戒，即识别和预防药品上市后引发的不良药物事件（ADEs）的科学。ADE提取的具体问题，即识别特定药物（或类别）是否与特定不良事件相关，是一项具有挑战性的任务，原因包括药物和结果术语的变异、大量叙述文本中存在ADE描述以及这些文本数据的来源多样，包括患者医疗记录、临床笔记、药品标签、医学文献、临床试验、留言板、社交媒体。该领域的前期研究，特别是基于大型研究计划如Sentinel[[25](#bib.bib25)]、OMOP[[27](#bib.bib27)]和OHDSI[[31](#bib.bib31)]的工作，集中于开发从纯观察数据中发现因果关系的新方法。黄等人[[10](#bib.bib10)]研究了社交论坛在构建ADE预测模型中的应用，关注不同数据处理技术和BERT架构的性能。von
    Csefalvay[[37](#bib.bib37)]介绍了一种新型LLM，DAEDRA，用于检测来自被动药物警戒报告的监管相关结果。Sorbello等人[[30](#bib.bib30)]使用像GPT这样的LLM来改进从电子健康记录中捕捉阿片类药物和不良事件提及的能力。最后，Sun等人[[32](#bib.bib32)]研究了ChatGPT在从医学文本来源中提取不良事件的性能。
- en: 'These early applications of LLMs to ADE Extraction are limited in at least
    one of two ways: (a) they either use only the bare LLM (such as ChatGPT, or its
    API) without access to any external APIs, tools, or knowledge bases [[38](#bib.bib38)].
    ADE extraction using only the LLM’s “built-in” knowledge (i.e., text it was exposed
    to during pre-training) is likely to be inaccurate and incomplete, since adverse
    events may be discovered in any new studies or reports; (b) all prior works use
    a single LLM (even when augmented with external data/tools) without any collaboration
    or feedback from other LLMs. Since LLMs are after all probabilistic next-token
    prediction models, there is no guarantee that the generated text is accurate or
    complete. The only way to improve the reliability of an LLM’s responses in this
    scenario is to either resort to elaborate prompting techniques [[40](#bib.bib40),
    [45](#bib.bib45)], or have a human (or an LLM [[18](#bib.bib18)]) in the loop
    to verify the generated text and iteratively refine the prompts until a satisfactory
    response is obtained.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这些早期将 LLM 应用于 ADE 提取的应用在以下至少一种方式上存在局限性：（a）它们要么仅使用裸 LLM（如 ChatGPT 或其 API），没有访问任何外部
    API、工具或知识库 [[38](#bib.bib38)]。仅使用 LLM 的“内置”知识（即其在预训练期间接触的文本）进行 ADE 提取可能不准确且不完整，因为不良事件可能会在任何新的研究或报告中被发现；（b）所有先前的工作都使用了单一
    LLM（即使使用了外部数据/工具进行增强），没有其他 LLM 的协作或反馈。由于 LLM 毕竟是基于概率的下一个令牌预测模型，因此无法保证生成的文本是准确或完整的。在这种情况下，提高
    LLM 回应可靠性的唯一方法是要么依赖复杂的提示技术 [[40](#bib.bib40), [45](#bib.bib45)]，要么由人工（或 LLM [[18](#bib.bib18)]）参与来验证生成的文本，并迭代地改进提示，直到获得令人满意的回应。
- en: 'To address these limitations, three paradigms have emerged in LLM practitioners’
    toolboxes. The first limitation is addressed by two techniques: Retrieval Augmented
    Generation (RAG) and tool-use. RAG addresses the knowledge limitations of LLMs
    by augmenting the input prompt or query with relevant information retrieved from
    external knowledge bases (using similarity based on vector embeddings, keywords,
    or a combination of both), and instructing the LLM to respond to the original
    query in a way that is consistent with the augmented data, and also to provide
    a justification for its response by citing the relevant external data  [[15](#bib.bib15)].
    Thus the RAG approach not only alleviates the limitations of relying only on an
    LLM’s pre-trained knowledge, but also provides evidence-citation ability, which
    is crucial to engender trust in the LLM’s responses, especially in high-stakes
    applications like medical decision-making. This approach has shown promise in
    enhancing LLM performance in biomedicine, particularly in literature information-seeking
    and clinical decision-making [[5](#bib.bib5), [12](#bib.bib12), [39](#bib.bib39),
    [46](#bib.bib46)]. The second technique, tool-use, involves instructing the LLM
    to produce structured text (typically JSON) which can then be easily parsed by
    downstream code to perform a variety of actions, including web-search, querying
    APIs for information, querying databases, and performing computations [[26](#bib.bib26),
    [16](#bib.bib16)].'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这些局限性，LLM 从业者的工具箱中出现了三种范式。第一个局限性通过两种技术得以解决：检索增强生成（RAG）和工具使用。RAG 通过从外部知识库中检索相关信息（使用基于向量嵌入、关键词或两者结合的相似性）来增强输入提示或查询，从而解决了
    LLM 知识的局限性，并指示 LLM 以与增强数据一致的方式回应原始查询，同时通过引用相关外部数据来为其回应提供 justification [[15](#bib.bib15)]。因此，RAG
    方法不仅缓解了仅依赖 LLM 预训练知识的局限性，还提供了证据引用能力，这对于在高风险应用（如医疗决策）中建立对 LLM 回应的信任至关重要。该方法在生物医学领域提升
    LLM 性能方面显示出了潜力，特别是在文献信息检索和临床决策中 [[5](#bib.bib5), [12](#bib.bib12), [39](#bib.bib39),
    [46](#bib.bib46)]。第二种技术，工具使用，涉及指示 LLM 生成结构化文本（通常是 JSON），然后下游代码可以轻松解析这些文本，以执行各种操作，包括网络搜索、查询
    API 获取信息、查询数据库和执行计算 [[26](#bib.bib26), [16](#bib.bib16)]。
- en: The emergence of multi-agent systems addresses the second limitation (of using
    single LLMs) – this approach aims to harness the collective capabilities of multiple
    LLMs [[43](#bib.bib43), [9](#bib.bib9)]. Such systems introduce cooperative learning
    and feedback mechanisms between LLM-based agents, which simulate human-like communication,
    consultation and debate processes, enabling them to tackle even more complex tasks
    than a single-agent with RAG. In medical reasoning tasks, for instance, multi-agent
    collaboration can mirror hospital consultation mechanisms [[34](#bib.bib34)].
    Our work extends this trajectory of research; to the best of our knowledge, our
    system MALADE is first effective multi-agent orchestration system with RAG and
    tool-use, tailored for a specific task in pharmacovigilance, namely ADE Extraction.
    In our approach, LLM-based agents collaborate, leveraging their collective expertise
    and the latest medical knowledge. This approach aims to improve the analysis of
    ADEs, offering a more robust and reliable system for pharmacovigilance.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 多代理系统的出现解决了使用单一LLM的第二个限制——这种方法旨在利用多个LLM的集体能力[[43](#bib.bib43), [9](#bib.bib9)]。这样的系统引入了LLM驱动的代理之间的协作学习和反馈机制，模拟了类似人类的沟通、咨询和辩论过程，使其能够处理比单一代理加RAG更复杂的任务。例如，在医学推理任务中，多代理协作可以模拟医院咨询机制[[34](#bib.bib34)]。我们的工作延续了这一研究轨迹；据我们所知，我们的系统MALADE是第一个有效的多代理编排系统，结合了RAG和工具使用，专为药物监测中的特定任务——不良反应事件提取量身定制。在我们的方法中，LLM驱动的代理协作，利用它们的集体专长和最新的医学知识。这种方法旨在改进不良反应事件的分析，为药物监测提供更强大和可靠的系统。
- en: 3 Preliminaries on LLM-based Agents
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3 LLM基础知识
- en: 'While today’s LLMs exhibit impressive capabilities, they remain constrained
    by technical and practical limitations such as brittleness, non-determinism, limited
    context window, inference costs, and latency [[17](#bib.bib17)], with the implication
    that one cannot simply give high-level instructions to an LLM and expect it to
    accomplish a complex task. Consequently, to best harness the capabilities of LLMs
    as components of a complex application, it is necessary to decompose the task
    into smaller sub-tasks and manage multiple LLM conversations, each with its own
    set of specifically-defined instructions, state, and data sources. This leads
    naturally to the notion of an agent as an LLM-powered entity responsible for a
    well-defined small sub-task. In Section [3.1](#S3.SS1 "3.1 Agent-oriented Programming
    ‣ 3 Preliminaries on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance"), we introduce the
    key abstractions and components needed for agent-oriented programming, and Section [3.2](#S3.SS2
    "3.2 Multi-Agent Orchestration ‣ 3 Preliminaries on LLM-based Agents ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    describes multi-agent orchestration. Our implementation leverages the open-source
    multi-agent LLM framework [Langroid](https://github/langroid/langroid) [[3](#bib.bib3)],
    which supports these abstractions and mechanisms.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '尽管今天的LLM展现出了令人印象深刻的能力，但它们仍然受到技术和实际限制的约束，如脆弱性、非确定性、有限的上下文窗口、推理成本和延迟[[17](#bib.bib17)]，这意味着不能仅仅给LLM提供高层次的指令并期望它完成复杂任务。因此，为了充分发挥LLM在复杂应用中的作用，有必要将任务拆解为更小的子任务，并管理多个LLM对话，每个对话都有自己特定的指令、状态和数据来源。这自然引出了代理的概念，即作为LLM驱动的实体，负责一个明确的小型子任务。在[3.1节](#S3.SS1
    "3.1 面向代理的编程 ‣ 3 LLM基础知识 ‣ MALADE: 用于药物监测的LLM驱动代理编排与检索增强生成")中，我们介绍了面向代理编程所需的关键抽象和组件，[3.2节](#S3.SS2
    "3.2 多代理编排 ‣ 3 LLM基础知识 ‣ MALADE: 用于药物监测的LLM驱动代理编排与检索增强生成")描述了多代理编排。我们的实现利用了开源的多代理LLM框架[Langroid](https://github/langroid/langroid)[[3](#bib.bib3)]，该框架支持这些抽象和机制。'
- en: 3.1 Agent-oriented Programming
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.1 面向代理的编程
- en: Agent, as an intelligent message transformer.
  id: totrans-33
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 代理，作为智能消息转换器。
- en: A natural and convenient abstraction in designing a complex LLM-powered system
    is the notion of an agent that is instructed to be responsible for a specific
    aspect of the overall task. In terms of code, an Agent is essentially a class
    representing an intelligent entity that can respond to messages, i.e., an agent
    is simply a message transformer. An agent typically encapsulates an (interface
    to an) LLM, and may also be equipped with so-called tools (as described below)
    and external documents/data (e.g., a vector database, as described below). Much
    like a team of humans, agents interact by exchanging messages, in a manner reminiscent
    of the actor framework in programming languages [[8](#bib.bib8)]. An orchestration
    mechanism is needed to manage the flow of messages between agents, to ensure that
    progress is made towards completion of the task, and to handle the inevitable
    cases where an agent deviates from instructions. In this work we adopt this multi-agent
    programming paradigm, where agents are first-class citizens, acting as message
    transformers, and communicate by exchanging messages.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 设计复杂LLM驱动系统时，自然且方便的抽象概念是将代理负责整体任务的特定方面。在代码层面，代理本质上是一个表示智能实体的类，它可以响应消息，即代理只是一个消息转换器。代理通常封装了一个（接口到一个）LLM，也可能配备了所谓的工具（如下面所述）和外部文档/数据（例如，下面所述的向量数据库）。类似于一个人类团队，代理通过交换消息进行互动，这种方式类似于编程语言中的演员框架[[8](#bib.bib8)]。需要一个协调机制来管理代理之间消息的流动，以确保任务的完成进度，并处理代理偏离指令的不可避免情况。在这项工作中，我们采用了这种多代理编程范式，其中代理是第一类公民，作为消息转换器，进行消息交换。
- en: To build useful applications with LLMs, we need to endow them with the ability
    to trigger actions (such as API calls, computations, database queries, etc) and
    access external documents. Tools and Retrieval Augmented Generation (RAG) provide
    these capabilities, described next.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要利用LLMs构建有用的应用程序，我们需要赋予它们触发操作（例如API调用、计算、数据库查询等）和访问外部文档的能力。工具和检索增强生成（RAG）提供了这些能力，接下来会描述。
- en: Tools, also known as functions or plugins.
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 工具，也称为函数或插件。
- en: 'An LLM is essentially a text transformer; i.e., in response to some input text
    (known as a prompt), it produces a response. Free-form text responses are ideal
    when we want to generate a description, answer, or summary for human consumption,
    or even a question for another agent to answer. However, in some cases, we would
    like the responses to trigger external actions, such as an API call, code execution,
    or a database query. In such cases, we would instruct the LLM to produce a structured
    output, typically in JSON format, with various pre-specified fields, such as code,
    an SQL query, parameters of an API call, and so on. These structured responses
    have come to be known as tools, and the LLM is said to use a tool when it produces
    a structured response corresponding to a specific tool. To elicit a tool response
    from an LLM, it needs to be instructed on the expected tool format and the conditions
    under which it should use the tool. To actually use a tool emitted by an LLM,
    a tool handler method must be defined as well. The tool handler for a given tool
    is triggered when it is recognized in the LLM’s response. See Appendix [A.1](#A1.SS1
    "A.1 Tool Use: Example ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for a description of the LLM’s interaction with a database.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 'LLM本质上是一个文本转换器；即，响应某些输入文本（称为提示），它会生成一个响应。自由格式的文本响应非常适合生成描述、回答或总结，以供人类阅读，甚至是为其他代理生成问题。然而，在某些情况下，我们希望响应触发外部操作，例如API调用、代码执行或数据库查询。在这种情况下，我们会指示LLM生成一个结构化输出，通常是JSON格式，其中包含各种预定义字段，如代码、SQL查询、API调用参数等。这些结构化响应被称为工具，当LLM生成对应于特定工具的结构化响应时，就说LLM使用了一个工具。为了从LLM中引发工具响应，需要指示预期的工具格式及其使用条件。要实际使用LLM发出的工具，还必须定义一个工具处理方法。工具处理方法在LLM的响应中识别到工具时触发。有关LLM与数据库互动的描述，请参见附录 [A.1](#A1.SS1
    "A.1 Tool Use: Example ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: 'Starting with the view of an LLM as a text transformer, it turns out that one
    can express the notion of an agent, a tool, and other related concepts in terms
    of different function signatures, as shown in Table [4](#A1.T4 "Table 4 ‣ A.3
    From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") in Appendix [A.3](#A1.SS3 "A.3 From LLM to Agent-Oriented
    Programming ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '从将 LLM 视为文本转换器的角度出发，可以发现可以用不同的函数签名来表达代理、工具和其他相关概念，如附录 [4](#A1.T4 "Table 4 ‣
    A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") 中所示。详细信息请参见附录 [A.3](#A1.SS3 "A.3 From LLM to Agent-Oriented
    Programming ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: Retrieval Augmented Generation (RAG).
  id: totrans-39
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 检索增强生成（RAG）。
- en: 'Using an LLM in isolation has two major constraints: (a) the responses are
    confined to the knowledge from its pre-training, hence cannot answer questions
    specific to private/enterprise documents, or up-to-date information past its training
    cutoff date; and (b) there is no way to verify the validity of the generated answers.
    RAG is the most popular technique to address both limitations by making LLMs generate
    responses based on specific documents or data and justify the answer by presenting
    source citations [[15](#bib.bib15)]. The basic idea of RAG is as follows: when
    a query $Q$ based ONLY on these passages, and indicate which passages support
    your answer”. See Appendix [A.2](#A1.SS2 "A.2 Retrieval Augmented Generation ‣
    Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance") for more details on
    RAG.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '单独使用 LLM 有两个主要限制：（a）响应仅限于其预训练中的知识，因此不能回答特定于私人/企业文档的问题，或在其训练截止日期之后的最新信息；（b）无法验证生成答案的有效性。RAG
    是解决这两种限制的最流行技术，通过使 LLM 基于特定文档或数据生成响应，并通过呈现源引用来证明答案 [[15](#bib.bib15)]。RAG 的基本思想如下：当查询
    $Q$ 基于这些段落时，表示哪些段落支持你的答案”。有关 RAG 的更多详细信息，请参见附录 [A.2](#A1.SS2 "A.2 Retrieval Augmented
    Generation ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: 3.2 Multi-Agent Orchestration
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.2 多代理协调
- en: As mentioned above, when building an LLM-based multi-agent system, an orchestration
    mechanism is critical to manage the flow of messages between agents, to ensure
    task progress, and handle deviations from instructions. In this work, we leverage
    a simple yet versatile orchestration mechanism that seamlessly handles user interaction,
    tool handling, and sub-task delegation.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，在构建基于 LLM 的多代理系统时，一个协调机制对于管理代理之间的消息流、确保任务进展以及处理指令偏差至关重要。在这项工作中，我们利用了一种简单而多功能的协调机制，该机制能够无缝地处理用户互动、工具操作和子任务委派。
- en: '![Refer to caption](img/cfeebba1beb363d37097a92c59571fb0.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/cfeebba1beb363d37097a92c59571fb0.png)'
- en: 'Figure 2: Example of how iteration among responder methods works when a task
    T has sub-tasks [T1, T2] and T1 has a sub-task T3.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2：当任务 T 具有子任务 [T1, T2] 且 T1 具有子任务 T3 时，响应方法之间迭代工作的示例。
- en: 'As in Figure [2](#S3.F2 "Figure 2 ‣ 3.2 Multi-Agent Orchestration ‣ 3 Preliminaries
    on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance"), the orchestration mechanism is encapsulated
    in a Task class that wraps an Agent, and one initiates a task by invoking its
    run method which has type signature string $\rightarrow$ string, identical to
    the type signature of an Agent’s own native “response” methods (corresponding
    to the LLM, tool-handler, and human user). The Task maintains a “current pending
    message” (CPM) to be acted on by one of the “responders” of the Task, which includes
    the agent’s own response methods as well as run methods of sub-tasks. The run
    method executes a series of “steps” until a task termination condition is reached.
    In each step, a valid response to the CPM is sought by iterating over the responders,
    and the CPM is updated with the response. See Appendix [A.4](#A1.SS4 "A.4 Detailed
    Description of Multi-Agent Orchestration ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for more details.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '如图[2](#S3.F2 "Figure 2 ‣ 3.2 Multi-Agent Orchestration ‣ 3 Preliminaries on
    LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")所示，协调机制被封装在一个Task类中，该类封装了一个Agent，通过调用其run方法（其类型签名为string
    $\rightarrow$ string，与Agent本身的“response”方法的类型签名相同）来启动任务（这些方法对应LLM、工具处理程序和人工用户）。Task保持一个“当前待处理消息”（CPM），由Task的一个“响应者”进行处理，其中包括代理的响应方法以及子任务的run方法。run方法执行一系列“步骤”，直到达到任务终止条件。在每一步中，通过迭代响应者来寻找对CPM的有效响应，并用响应更新CPM。有关详细信息，请参见附录[A.4](#A1.SS4
    "A.4 Detailed Description of Multi-Agent Orchestration ‣ Appendix A Agent-Oriented
    Programming ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")。'
- en: '4 MALADE: Proposed Multi-Agent System for ADE Extraction'
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '4 MALADE: 提议的多智能体系统用于ADE提取'
- en: 'In this section, we describe our RAG-based Multi-Agent architecture, MALADE,
    for identifying associations between drug categories and outcomes. We first give
    a high-level outline of the objectives of the key sub-tasks in Section [4.1](#S4.SS1
    "4.1 Objectives of Key Sub-tasks ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), and delve into their implementation details
    in Section [4.2](#S4.SS2 "4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent
    System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") - [4.5](#S4.SS5 "4.5 STEP 3: Labeling
    Drug Category-Outcome Associations ‣ 4 MALADE: Proposed Multi-Agent System for
    ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"). See Figure [1](#S1.F1 "Figure 1 ‣ 1 Introduction
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for an illustrative depiction of the overall pipeline.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '在本节中，我们描述了基于RAG的多智能体架构MALADE，用于识别药物类别与结果之间的关联。我们首先在第[4.1](#S4.SS1 "4.1 Objectives
    of Key Sub-tasks ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣
    MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")节中概述关键子任务的目标，并在第[4.2](#S4.SS2 "4.2 Agent-Critic Interaction
    ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")节和[4.5](#S4.SS5
    "4.5 STEP 3: Labeling Drug Category-Outcome Associations ‣ 4 MALADE: Proposed
    Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")节深入探讨其实施细节。有关整体流程的说明，请参见图[1](#S1.F1
    "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")。'
- en: 'We emphasize that developing a multi-agent RAG system tailored for ADE extraction
    is a highly non-trivial undertaking, requiring careful handling of several issues:
    (a) the complex structure of FDA label data, which can be challenging for naively
    applied RAG techniques; (b) the difficulty of correctly grouping prescribed drugs
    (e.g., assigning the appropriate National Drug Code) based on the varied text
    descriptions present in medical databases; (c) LLM brittleness such as deviation
    from instructions, hallucinations, and inaccurate or incorrect responses; (d)
    Infinite loops, fixed points, and deadlocks, which can arise in inter-agent interactions
    unless carefully managed.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们强调，开发一个针对ADE提取的多代理RAG系统是一项高度复杂的任务，需要仔细处理几个问题：（a）FDA标签数据的复杂结构，这对天真的RAG技术而言可能具有挑战性；（b）基于医学数据库中存在的不同文本描述正确分组处方药物（例如，分配适当的国家药物代码）的难度；（c）LLM的脆弱性，例如偏离指令、虚构和不准确或错误的响应；（d）在代理间互动中可能出现的无限循环、固定点和死锁，除非得到仔细管理。
- en: 4.1 Objectives of Key Sub-tasks
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.1 关键子任务的目标
- en: 'Our ultimate goal is to identify the risk of an adverse event associated with
    a drug category. We developed our system, MALADE, to be able to respond to questions
    of the form:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的**终极**目标是识别与药物类别相关的不良事件的风险。我们开发了我们的系统MALADE，以能够回答以下形式的问题：
- en: “Does drug category $C$ could be “angioedema”.
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: “药物类别$C$是否可以是‘血管神经性水肿’。
- en: 'Given a query of this form, the system executes the following steps: given
    $C$,'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 给定这样的查询，系统执行以下步骤：给定$C$，
- en: 'STEP 1:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'STEP 1:'
- en: Find the extensive list of drug names that belong to $C$ distinct drug names
    that are most commonly prescribed in a clinical database (e.g., MIMIC-IV).
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 查找属于$C$的广泛药物名称列表，这些药物名称是临床数据库（例如MIMIC-IV）中最常见的处方药物。
- en: 'STEP 2:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'STEP 2:'
- en: For each representative drug $D$. These summaries are generated by referring
    to up-to-date external pharmaceutical reference sources (e.g., FDA drug label
    database), which indicate potential adverse outcomes and evidence for the risks.
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于每种代表性药物$D$。这些总结是通过参考最新的外部药物参考来源（例如FDA药物标签数据库）生成的，这些来源指示了潜在的不良结果和风险证据。
- en: 'STEP 3:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'STEP 3:'
- en: CategoryAgent combines the drug-level information from STEP 2, and generates
    a structured report; consisting of a label (one of “increase”, “decrease”, or
    “no-effect”) indicating the potential effect of $C$, a confidence score for this
    label, structured descriptions of levels of risk, and strength of evidence.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: CategoryAgent结合了STEP 2中的药物级别信息，并生成一个结构化报告；包括一个标签（“increase”，“decrease”或“no-effect”之一），指示$C$的潜在效果，一个关于该标签的置信度分数，风险级别的结构化描述，以及证据的强度。
- en: Our system extracts the association between $C$. This construction is motivated
    by that the reference sources for drug label data, such as the FDA drug label
    database in our implementation, are typically structured by individual drugs rather
    than broad drug categories; hence necessitating STEP 1. It is important to note
    that applying our system to real patient data requires a complete list of drugs,
    including both brand and generic names, which can be used to map the actual prescribed
    drugs recorded in electronic health record (EHR) data to their corresponding categories.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的系统提取了$C$之间的关联。这种构建方式的动机在于，药物标签数据的参考来源（例如我们实现中的FDA药物标签数据库）通常是按单个药物而不是广泛的药物类别进行结构化的；因此需要STEP
    1。重要的是要注意，将我们的系统应用于真实患者数据需要一个完整的药物列表，包括品牌和通用名称，这些名称可以用来将电子健康记录（EHR）数据中记录的实际处方药物映射到其相应的类别。
- en: 'Each of DrugFinder, DrugAgent, and CategoryAgent is coupled with a Critic agent,
    which provides feedback on the primary agent’s output. The primary agent then
    regenerates its output based on this feedback. This Agent-Critic interaction continues
    until the Critic approves the agent’s response. This design pattern significantly
    enhances the reliability of our system, as detailed further in Section [4.2](#S4.SS2
    "4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance").'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 'DrugFinder、DrugAgent和CategoryAgent各自配有一个Critic代理，提供对主要代理输出的反馈。主要代理然后根据这些反馈重新生成其输出。这个Agent-Critic互动会持续进行，直到Critic批准代理的响应。这种设计模式显著提高了我们系统的可靠性，如在第[4.2](#S4.SS2
    "4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")节中进一步详细介绍。'
- en: 4.2 Agent-Critic Interaction
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.2 Agent-Critic互动
- en: This is the core multi-agent interaction pattern that underlies our system,
    and is reminiscent of Actor/Critic methods in reinforcement learning [[13](#bib.bib13)].
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们系统的核心多代理交互模式，类似于强化学习中的 Actor/Critic 方法[[13](#bib.bib13)]。
- en: Agent.
  id: totrans-63
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 代理。
- en: In an Agent-Critic pair, the Agent is the primary entity that handles external-facing
    input and output. It receives a specific goal, instructions on how to accomplish
    the goal, and access to tools and resources. In our context, the goal is generally
    a form of specialized question-answering; resources can be data sources, or even
    other agents or multi-agent systems, that the agent can draw upon when answering
    the question; tools are structured responses needed to trigger calls to APIs,
    database look-ups, or computations.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在代理-批评者对中，代理是处理面向外部输入和输出的主要实体。它接收一个特定的目标、实现目标的指令以及对工具和资源的访问。在我们的上下文中，目标通常是某种形式的专业问答；资源可以是数据源，甚至是其他代理或多代理系统，代理在回答问题时可以利用这些资源；工具是触发对API调用、数据库查询或计算所需的结构化响应。
- en: The primary function of the Agent is to construct a sequence of queries to these
    resources to fulfill its goal. The Agent is instructed to compose a semi-structured
    message consisting of its answer, its reasoning steps and a justification (citing
    sources where possible) of its answer in a semi-structured format, and seek feedback
    on these from the Critic, as below.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 代理的主要功能是构建一系列查询这些资源以实现其目标。代理被指示以半结构化的格式编写一个包含其答案、推理步骤和答案的合理性说明（尽可能引用来源）的半结构化消息，并从批评者那里寻求反馈，如下所示。
- en: Critic.
  id: totrans-66
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 批评者。
- en: 'This is another agent, paired with the one described above. The Critic’s role
    is to validate the Agent’s reasoning steps and compliance with instructions, and
    provide feedback to the Agent, which has been shown to improve the quality of
    LLM-generated outputs [[18](#bib.bib18)]. The Agent iterates on its response based
    on this feedback, until the Critic is satisfied, at which point the Agent signals
    completion and outputs the results (see Figure [3](#S4.F3 "Figure 3 ‣ Critic.
    ‣ 4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")).'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '这是另一个代理，与上述代理配对。批评者的角色是验证代理的推理步骤和遵循指令的情况，并向代理提供反馈，这已被证明能提高LLM生成输出的质量[[18](#bib.bib18)]。代理根据这些反馈迭代其回应，直到批评者满意为止，此时代理会发出完成信号并输出结果（见图[3](#S4.F3
    "Figure 3 ‣ Critic. ‣ 4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent
    System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")）。'
- en: While the Agent/Critic pattern may appear simple, this interaction is extremely
    powerful, and can significantly improve the reliability of the task completion.
    This synergistic relationship mirrors a pattern in interactive proof systems used
    in complexity theory; a prover (i.e., Agent) presents a solution, and a verifier
    (i.e., Critic) checks the validity of this solution. The verifier cannot solve
    the problem on its own but is capable of checking the prover’s solution efficiently,
    which is relatively easier [[1](#bib.bib1)]. This way, even if the Agent’s task
    is complex, the Critic can efficiently verify the correctness of the solution,
    thereby enhancing reliability.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管代理/批评者模式可能看起来简单，但这种交互极其强大，可以显著提高任务完成的可靠性。这种协同关系反映了复杂性理论中使用的交互式证明系统中的模式；证明者（即代理）提出一个解决方案，验证者（即批评者）检查该解决方案的有效性。验证者不能独立解决问题，但可以有效地检查证明者的解决方案，这相对更容易[[1](#bib.bib1)]。这样，即使代理的任务很复杂，批评者也可以有效地验证解决方案的正确性，从而提高可靠性。
- en: '![Refer to caption](img/6106dce5857082001f7d0d3ad10840b2.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/6106dce5857082001f7d0d3ad10840b2.png)'
- en: 'Figure 3: Real-world demonstration of Agent-Critic interactions in MALADE.
    Given the question of identifying the association between Benzodiazepines and
    Hip Fracture, we illustrate how CategoryAgent corrects its answers over iterations
    until the paired Critic is satisfied. See Appendix [3.3](#A3.SS1.SSS3 "3.3 CategoryAgent
    and Critic ‣ C.1 Successful Behavior ‣ Appendix C Detailed behavior of MALADE:
    Successful and Failed Behavior ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance") for full prompts between
    the two agents. Agents are instantiated using GPT-4 Turbo.'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3：MALADE 中 Agent-Critic 交互的现实世界演示。针对识别苯二氮卓类药物与髋部骨折之间的关联这一问题，我们展示了 CategoryAgent
    如何通过迭代纠正其答案，直到配对的 Critic 满意。有关两个代理之间的完整提示，请参见附录 [3.3](#A3.SS1.SSS3 "3.3 CategoryAgent
    和 Critic ‣ C.1 成功行为 ‣ 附录 C MALADE 的详细行为：成功与失败行为 ‣ MALADE：与检索增强生成的 LLM 驱动代理的协调")。代理使用
    GPT-4 Turbo 实例化。
- en: '4.3 STEP 1: Finding Representative Drugs'
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.3 第一步：寻找代表性药物
- en: We first construct a reasonably complete set of all drugs that can possibly
    belong to the category, by querying FDA’s NDC database, which contains records
    of specific drugs, tagged with pharmacological class information of various types
    (including chemical classes, mechanisms of action, and established pharmacologic
    classes). Specifically, we extract all drugs with names or classes matching the
    relevant search term or terms (e.g., “antibiotic” or any of the sub-categories
    considered by OMOP, for example, erythromycin). Since this list may contain some
    drugs that do not actually belong to the class (e.g., a search for “typical antipsychotics”
    returns atypical antipsychotics as well), we rely on an additional filtering phase
    to construct the final, reasonably accurate list of drugs in the category. For
    each drug $D$ in this “complete” list, we obtain its prescription rate via a SQL
    query to the MIMIC-IV prescriptions table.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先通过查询 FDA 的 NDC 数据库构建一个 reasonably complete 的所有可能属于该类别的药物集合，该数据库包含特定药物的记录，并标记有各种类型的药理学类别信息（包括化学类别、作用机制和已建立的药理类别）。具体而言，我们提取所有名称或类别与相关搜索词或词组匹配的药物（例如，“抗生素”或
    OMOP 考虑的任何子类别，如红霉素）。由于该列表可能包含一些实际上不属于该类别的药物（例如，搜索“典型抗精神病药物”也返回非典型抗精神病药物），因此我们依赖额外的过滤阶段来构建该类别药物的最终、
    reasonably accurate 列表。对于这个“完整”列表中的每个药物 $D$，我们通过 SQL 查询 MIMIC-IV 处方表获取其处方率。
- en: 'Note that we chose to implement the above two SQL query steps directly without
    using an LLM to generate the queries. This is an instance of an important design
    principle we adhere to in our system, which we call the LLM Minimization principle:
    for tasks that can be expressed deterministically and explicitly in a standard
    programming paradigm, handle them directly without using LLMs to enhance reliability
    and reduce token and latency costs.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我们选择直接实现上述两个 SQL 查询步骤，而不使用 LLM 生成查询。这是我们系统中遵循的一项重要设计原则，我们称之为 LLM 最小化原则：对于那些可以在标准编程范式中确定性和明确地表达的任务，直接处理这些任务而不使用
    LLM，以增强可靠性并减少令牌和延迟成本。
- en: DrugFinder.
  id: totrans-74
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: DrugFinder.
- en: 'Now that we have a reasonably complete list of candidate drug names that belong
    to the category of interest, along with their prescription rates, we want to identify
    three distinct, most commonly prescribed drugs that belong to the category. This
    task is complicated by several difficulties: the same drug may appear in this
    list with different names; some pairs of drugs may be essentially the same but
    only differ in formulation and delivery method, and a judgment must be made as
    to whether these are sufficiently different to be considered pharmacologically
    distinct; and some of these drugs may not actually belong to the category. This
    task thus requires a grouping operation, related to the task of identifying standardized
    drug codes from text descriptions, well known to be challenging [[14](#bib.bib14)].
    Hence, this is very difficult to explicitly define in a deterministic manner that
    covers all cases (unlike the above database tasks), and hence is well-suited to
    LLMs, particularly those such as GPT-4 Turbo which are known to have been trained
    on vast amounts of medical texts in general (and drug-related ones in particular).
    We assign this task to the DrugFinder, which is an Agent/Critic system where the
    Critic agent helps improve the paired agent’s output via iterative feedback; in
    particular, the Critic corrects the Agent when it incorrectly classifies drugs
    as pharmacologically distinct.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经有了一个相对完整的候选药物名称列表，这些药物属于我们关注的类别，并附有其处方率，我们想要识别出属于该类别的三种明显不同且最常处方的药物。这项任务复杂的原因有几个：相同的药物可能以不同的名称出现在这个列表中；一些药物对可能本质上是相同的，但仅在配方和给药方式上有所不同，需要判断这些差异是否足以使其在药理学上被认为是不同的；还有一些药物可能实际上不属于这个类别。因此，这项任务需要进行分组操作，这与从文本描述中识别标准化药物编码的任务相关，而这一任务被公认为具有挑战性[[14](#bib.bib14)]。因此，这很难以确定性的方式明确地定义以涵盖所有情况（不同于上述数据库任务），因此非常适合使用大型语言模型，特别是像GPT-4
    Turbo这样的模型，它们已知在一般医疗文本（尤其是药物相关文本）上进行了大量训练。我们将这项任务分配给DrugFinder，这是一个Agent/Critic系统，其中Critic代理通过迭代反馈帮助改进配对代理的输出；特别地，当Agent错误地将药物分类为药理学上不同的药物时，Critic会纠正Agent。
- en: '4.4 STEP 2: Identifying Drug-Outcome Associations'
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.4 步骤 2：识别药物-结果关联
- en: DrugAgent is an Agent/Critic system whose task is to identify whether a given
    drug has an established effect on the risk of a given outcome, based on FDA drug
    label database, and output a summary of relevant information, including the level
    of identified risk and the evidence for such an effect. This agent does not have
    direct access to the FDA Drug Label data, but can receive this information via
    another agent, FDAHandler. FDAHandler is equipped with tools to invoke the OpenFDA
    API for drug label data, and answers questions in the context of information retrieved
    based on the queries. Information received from this API is ingested into a vector
    database, so the agent first uses a tool to query this vector database, and only
    resorts to the OpenFDA API tool if the vector database does not contain the relevant
    information.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: DrugAgent是一个Agent/Critic系统，其任务是根据FDA药物标签数据库确定给定药物是否对某一特定结果的风险具有已建立的影响，并输出相关信息的总结，包括识别的风险水平和相关证据。该代理没有直接访问FDA药物标签数据的权限，但可以通过另一个代理FDAHandler获取这些信息。FDAHandler配备了调用OpenFDA
    API以获取药物标签数据的工具，并在基于查询检索到的信息的上下文中回答问题。通过该API接收到的信息被输入到向量数据库中，因此代理首先使用工具查询这个向量数据库，只有在向量数据库不包含相关信息时才会求助于OpenFDA
    API工具。
- en: '4.5 STEP 3: Labeling Drug Category-Outcome Associations'
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.5 步骤 3：标记药物类别-结果关联
- en: To identify the association between a drug category $C$?”. The results are sent
    to CategoryAgent, described next.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 识别药物类别 $C$ 的关联。结果将发送给下一个描述的CategoryAgent。
- en: 'CategoryAgent is an Agent/Critic system that performs the final classification
    step; its goal is to generate a label identifying whether a category of drugs
    increases or decreases the risk of a condition, or has no effect. In addition
    to the label, CategoryAgent produces a number of additional outputs, all of which
    are combined into a JSON-structured string, including: (a) a confidence score
    in [0,1], indicating the confidence in the assigned label, (c) strength of evidence,
    one of “none”, “weak”, or “strong”, and (d) frequency of the effect, one of “none,”
    “rare”, or “common”. In this sense, DrugAgent serves as a function of the following
    type: [string] $\rightarrow$ {‘‘non-'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: CategoryAgent是一个执行最终分类步骤的Agent/Critic系统；其目标是生成一个标签，用于识别某种药物类别是否增加或减少了某种病症的风险，或者没有影响。除了标签之外，CategoryAgent还生成多个附加输出，所有这些输出都合并成一个JSON结构字符串，包括：（a）一个[0,1]范围内的置信度分数，表示对分配标签的信心，（c）证据的强度，可能是“none”、“weak”或“strong”，以及（d）效果的频率，可能是“none”、“rare”或“common”。从这个意义上说，DrugAgent作为以下类型的函数：[string] $\rightarrow$ {‘‘non-
- en: 'e’’,‘‘weak’’,‘‘strong’’} $\times$ {‘‘none’’,‘‘rare,’’,‘‘common’’}. The structured
    output of CategoryAgent facilitates downstream post-processing to produce a final
    evaluation, with no further LLM involvement (Section [5.1](#S5.SS1 "5.1 Evaluation
    Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")).'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 'e’’,‘‘weak’’,‘‘strong’’} $\times$ {‘‘none’’,‘‘rare,’’,‘‘common’’}。CategoryAgent的结构化输出有助于下游后处理，生成最终评估，无需进一步的LLM介入（第[5.1节](#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")）。'
- en: 5 Experiments
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5 实验
- en: 'This paper presents MALADE, the first LLM-based multi-agent architecture that
    is capable of producing a structured report with characterizations and scores
    related to the risk of an adverse health outcome $H$, based on FDA drug label
    data. We evaluate our method against a widely used benchmark, the OMOP Evaluation
    Ground Truth task [[19](#bib.bib19)], henceforth referred to as the OMOP ADE task
    (Section [5.1](#S5.SS1 "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")),
    to answer the following three research questions:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '本文介绍了MALADE，这是首个基于LLM的多代理架构，能够基于FDA药物标签数据生成包含与不良健康结果风险相关的特征和评分的结构化报告。我们将我们的方法与一个广泛使用的基准——OMOP评估真实任务[[19](#bib.bib19)]进行比较，以下简称OMOP
    ADE任务（第[5.1节](#S5.SS1 "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")），以回答以下三个研究问题：'
- en: 'RQ1:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'RQ1:'
- en: 'How effectively does MALADE identify ADEs? (Section [5.2](#S5.SS2 "5.2 RQ1:
    MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"))'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'MALADE识别ADE的效果如何？（第[5.2节](#S5.SS2 "5.2 RQ1: MALADE effectively identifies ADEs
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")）'
- en: 'RQ2:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'RQ2:'
- en: 'Does Agent-Critic interaction, the core design pattern underlying MALADE, effectively
    enhance the reliability of the system? (Section [5.3](#S5.SS3 "5.3 RQ2: Agent-Critic
    interaction enhances reliability ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"))'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'Agent-Critic交互，即MALADE的核心设计模式，是否有效地提高了系统的可靠性？（第[5.3节](#S5.SS3 "5.3 RQ2: Agent-Critic
    interaction enhances reliability ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")）'
- en: 'RQ3:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'RQ3:'
- en: 'What useful insights do the justifications by MALADE provide for further system
    improvement? (Section [5.4](#S5.SS4 "5.4 RQ3: MALADE provides justifications that
    are aligned with human expert reasoning, and help understand its failure modes
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"))'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'MALADE的论证提供了哪些有用的见解，以便进一步改进系统？（第[5.4节](#S5.SS4 "5.4 RQ3: MALADE provides justifications
    that are aligned with human expert reasoning, and help understand its failure
    modes ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")）'
- en: 5.1 Evaluation Setup
  id: totrans-90
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.1 评估设置
- en: 'The objective of OMOP ADE task is to assign one of three labels (“increase,”
    “decrease,” and “no-effect”) to each ($C$) pairs are deemed sufficiently certain
    to be used in the evaluation. The authors of OMOP ADE task mark certain pairs
    as uncertain, to which we assign “no-effect” labels with the special restriction
    that it should not be used in the evaluation. See Appendix [B.3](#A2.SS3 "B.3
    OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for further details.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: OMOP ADE任务的目标是为每对（$C$）分配三种标签之一（“increase”，“decrease”和“no-effect”），这些对被认为足够确定用于评估。OMOP
    ADE任务的作者将某些对标记为不确定，我们将其分配为“no-effect”标签，并且有特别的限制，不应在评估中使用。有关更多详细信息，请参见附录 [B.3](#A2.SS3
    "B.3 OMOP ADE任务详细信息 ‣ 附录B MALADE实施详细描述 ‣ MALADE：用于药物警戒的LLM增强生成的协调")。
- en: '![Refer to caption](img/93538aa9ae315ee5127608c08727dbf2.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/93538aa9ae315ee5127608c08727dbf2.png)'
- en: 'Figure 4: Ground truth (left) vs. predictions by MALADE (right) for OMOP ADE
    task. Red, green, and white cells represent “increase”, “decrease”, and “no-effect”
    labels, respectively.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图4：OMOP ADE任务中MALADE的预测（右）与真实情况（左）的对比。红色、绿色和白色单元格分别表示“increase”、“decrease”和“no-effect”标签。
- en: Metrics.
  id: totrans-94
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 指标。
- en: 'For quantitative evaluation, we convert the task into binary classification
    with two different focuses of analysis: (1) classifying effect vs no-effect, where
    the labels “increase” and “decrease” are considered the positive class, and “no-effect”
    is the negative class (namely, effect-based classification); and (2) classifying
    ADE vs. non-ADE, where only “increase” is considered the positive class, and the
    other two labels are the negative class (namely, ADE-based classification). For
    both choices, we report AUC and F1 scores, which are common evaluation metrics
    for binary classification [[19](#bib.bib19), [2](#bib.bib2)]. Corresponding to
    the above two binary-classification methods, this results in “effect-based AUC,
    F1” and “ADE-based AUC, F1.” The AUC metric captures how well the scores produced
    by MALADE discriminate between the classes, while the F1 score assesses the accuracy
    of the assigned labels in classifying both positive and negative instances.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 对于定量评估，我们将任务转换为二分类问题，并关注两个不同的分析方向：(1) 分类效应与无效应，其中“increase”和“decrease”被视为正类，而“no-effect”是负类（即基于效应的分类）；(2)
    分类ADE与非ADE，其中只有“increase”被视为正类，其他两个标签为负类（即基于ADE的分类）。对于这两种选择，我们报告AUC和F1分数，这些是二分类的常见评估指标[[19](#bib.bib19),
    [2](#bib.bib2)]。对应上述两种二分类方法，这导致“基于效应的AUC，F1”和“基于ADE的AUC，F1”。AUC指标捕捉了MALADE生成的分数在区分类别方面的效果，而F1分数评估了在分类正负实例时分配标签的准确性。
- en: '5.2 RQ1: MALADE effectively identifies ADEs'
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.2 RQ1：MALADE有效识别ADE
- en: 'In the evaluations of MALADE, we consider two LLMs, GPT-4 Turbo and GPT-4o.
    For GPT-4o, we limit the number of rounds of feedback from Critics to 5, after
    which it is required to accept. Figure [4](#S5.F4 "Figure 4 ‣ 5.1 Evaluation Setup
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance") compares the ground truth labels of OMOP ADE
    task with ADE labels identified by MALADE (with GPT-4 Turbo). Considering the
    uncertainty inherent in the label of certain (drug category, outcome) pairs [[19](#bib.bib19)],
    these indicate strong performance on the task. See Figure [10](#A2.F10 "Figure
    10 ‣ B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance") of Appendix [B](#A2
    "Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for results on GPT-4o. We also present the confusion matrix of the MALADE labels
    in Figure [5](#S5.F5 "Figure 5 ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣
    5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance").'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '在MALADE的评估中，我们考虑了两个LLM，GPT-4 Turbo和GPT-4o。对于GPT-4o，我们将来自Critics的反馈轮次数限制为5轮，此后必须接受。图[4](#S5.F4
    "Figure 4 ‣ 5.1 评估设置 ‣ 5 实验 ‣ MALADE: 通过检索增强生成的LLM驱动代理的编排进行药物警戒")比较了OMOP ADE任务的真实标签与MALADE（使用GPT-4
    Turbo）识别的ADE标签。考虑到某些（药物类别，结果）对固有的不确定性[[19](#bib.bib19)]，这些结果表明任务表现强劲。有关GPT-4o的结果，请参见附录[B](#A2
    "附录 B MALADE实现的详细描述 ‣ MALADE: 通过检索增强生成的LLM驱动代理的编排进行药物警戒")中的图[10](#A2.F10 "Figure
    10 ‣ B.4 GPT-4 Turbo标签后处理的有效性 ‣ 附录 B MALADE实现的详细描述 ‣ MALADE: 通过检索增强生成的LLM驱动代理的编排进行药物警戒")。我们还在图[5](#S5.F5
    "Figure 5 ‣ 5.2 RQ1: MALADE有效识别ADEs ‣ 5 实验 ‣ MALADE: 通过检索增强生成的LLM驱动代理的编排进行药物警戒")中展示了MALADE标签的混淆矩阵。'
- en: 'Moreover, we report the performance of MALADE in terms of AUC and F1 metrics
    (see Table [1](#S5.T1 "Table 1 ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣
    5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")). Recall that CategoryAgent outputs a confidence
    score ranging from 0 to 1 for its predicted labels, namely ”increase,” ”no-effect,”
    or ”decrease.”. This score reflects the agent’s certainty regarding the accuracy
    of the predicted outcome. For quantitative evaluation as in Table [1](#S5.T1 "Table
    1 ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we transform these tripartite label-confidence scores into binary classification
    probabilities, suitable for effect-based or adverse drug event (ADE)-based analysis.
    Converting the three-class labels to a binary format requires a clear method for
    correlating each confidence score with a probabilistic value for the respective
    binary classification task.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '此外，我们报告了MALADE在AUC和F1指标上的表现（见表格[1](#S5.T1 "Table 1 ‣ 5.2 RQ1: MALADE有效识别ADEs
    ‣ 5 实验 ‣ MALADE: 通过检索增强生成的LLM驱动代理的编排进行药物警戒")）。请记住，CategoryAgent为其预测标签（即“增加”，“无效”或“减少”）输出一个从0到1的置信度分数。该分数反映了代理对预测结果准确性的确定性。对于定量评估，如表格[1](#S5.T1
    "Table 1 ‣ 5.2 RQ1: MALADE有效识别ADEs ‣ 5 实验 ‣ MALADE: 通过检索增强生成的LLM驱动代理的编排进行药物警戒")，我们将这些三类标签置信度分数转换为二分类概率，适用于基于效果或不良药物事件（ADE）的分析。将三类标签转换为二进制格式需要一种明确的方法，将每个置信度分数与相应的二分类任务的概率值相关联。'
- en: 'The three labels exhibit a natural progression: “decrease”, “no-effect”, and
    “increase” imply an ascending likelihood that a drug category is associated with
    the adverse outcome of interest, signifying a rising probability score for the
    positive class in ADE-based classification. Furthermore, an increase in confidence
    of ”no-effect” or ”decrease” corresponds to a decrease in the ADE score, while
    an increase in confidence of the ”increase” label corresponds to an increase in
    the ADE score. These observations guide us in formulating an intuitive conversion
    of the label-confidence scores into ADE probability scores; taking $(1-c_{\text{de}})/3,(2-c_{\text{no}})/3,$,
    respectively.'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这三个标签展示了自然的进展： “减少”，“无效” 和 “增加” 暗示药物类别与所关注的不良结果相关的可能性逐步上升，标志着在基于 ADE 的分类中正类的概率得分逐渐上升。此外，“无效”或“减少”的置信度增加对应于
    ADE 分数的下降，而“增加”标签的置信度增加对应于 ADE 分数的上升。这些观察结果指导我们将标签置信度分数直观地转换为 ADE 概率分数；具体为 $(1-c_{\text{de}})/3,(2-c_{\text{no}})/3,$。
- en: 'The results in Table [1](#S5.T1 "Table 1 ‣ 5.2 RQ1: MALADE effectively identifies
    ADEs ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") indicate that the confidence scores
    output by the model are well-calibrated. We observe that MALADE performs well
    both at distinguishing ADEs from non-ADEs and at identifying the presence/absence
    of an effect in general. We include ROC curves and sensitivity vs. specificity
    curves in Figure [11](#A2.F11 "Figure 11 ‣ B.4 Effectiveness of Label Postprocessing
    with GPT-4 Turbo ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣
    MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") and Figure [12](#A2.F12 "Figure 12 ‣ B.4 Effectiveness
    of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") of Appendix [B](#A2 "Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance"), respectively. We
    conduct experiments with additional scoring functions, in particular, the model’s
    estimates of the probabilities that $C$; see Appendix [B.1](#A2.SS1.SSS0.Px3 "STEP3:
    labeling the association between each drug category and each outcome. ‣ B.1 Prompts
    to Each Agent ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '表 [1](#S5.T1 "表 1 ‣ 5.2 RQ1: MALADE 有效识别 ADE ‣ 5 实验 ‣ MALADE：与检索增强生成的 LLM 驱动代理的药物监测")
    中的结果表明模型输出的置信度分数已得到很好的校准。我们观察到 MALADE 在区分 ADE 与非 ADE 以及识别效应的存在/缺失方面表现良好。我们在附录
    [B](#A2 "附录 B 详细描述 MALADE 实现 ‣ MALADE：与检索增强生成的 LLM 驱动代理的药物监测") 的图 [11](#A2.F11
    "图 11 ‣ B.4 GPT-4 Turbo 的标签后处理效果 ‣ 附录 B MALADE 实现的详细描述 ‣ MALADE：与检索增强生成的 LLM 驱动代理的药物监测")
    和图 [12](#A2.F12 "图 12 ‣ B.4 GPT-4 Turbo 的标签后处理效果 ‣ 附录 B MALADE 实现的详细描述 ‣ MALADE：与检索增强生成的
    LLM 驱动代理的药物监测") 中包括了 ROC 曲线和敏感度与特异度曲线。我们还进行了一些额外的评分函数实验，特别是模型对概率 $C$ 的估计；详见附录
    [B.1](#A2.SS1.SSS0.Px3 "步骤 3：标记每种药物类别与每种结果的关联 ‣ B.1 每个代理的提示 ‣ 附录 B MALADE 实现的详细描述")。'
- en: '![Refer to caption](img/3fbed822bc3510a65af17d47e6204471.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/3fbed822bc3510a65af17d47e6204471.png)'
- en: ((a))
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/8e5a6d1b6fa68aaefbeb3244f0a310bc.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/8e5a6d1b6fa68aaefbeb3244f0a310bc.png)'
- en: ((b))
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 5: Confusion matrix for MALADE.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5：MALADE 的混淆矩阵。
- en: 'Model Metric Effect-based ADE-based GPT-4o AUC with confidence 0.883 0.903
    GPT-4o F1 score 0.600 0.560 GPT-4 Turbo AUC with confidence 0.831 0.851 GPT-4
    Turbo F1 score ^†^†footnotemark: 0.609 0.556'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '模型 评估指标 基于效应 基于 ADE GPT-4o 置信度下的 AUC 0.883 0.903 GPT-4o F1 分数 0.600 0.560 GPT-4
    Turbo 置信度下的 AUC 0.831 0.851 GPT-4 Turbo F1 分数 ^†^†footnotemark: 0.609 0.556'
- en: 'Table 1: Quantitative evaluation of MALADE. “Effect-based” captures the classification
    between the presence and the absence of any ADE, while “ADE-based” represent’s
    the ability of MALADE to distinguish drugs with increased risk from those with
    decreased risk or no effect.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1：MALADE 的定量评估。“基于效应”捕捉了 ADE 存在与缺失之间的分类，而 “基于 ADE” 代表了 MALADE 区分风险增加的药物与风险降低或无效药物的能力。
- en: '⁴⁴footnotetext: We observe that GPT-4 Turbo tends to assign “increase” rather
    confidently even when the evidence is weak. To further enhance the reliability
    of the assigned labels, we take an additional postprocessing step; replacing unreliable
    predictions with “no-effect”. See Appendix [B.4](#A2.SS4 "B.4 Effectiveness of
    Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed Descriptions on MALADE
    Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance") for detailed discussions on label postprocessing.'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '⁴⁴脚注：我们观察到，即使证据较弱，GPT-4 Turbo也倾向于相当自信地分配“增加”。为了进一步提高分配标签的可靠性，我们采取了额外的后处理步骤；用“无效”替代不可靠的预测。有关标签后处理的详细讨论，请参见附录 [B.4](#A2.SS4
    "B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: '5.3 RQ2: Agent-Critic interaction enhances reliability'
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.3 RQ2：代理-评论者互动提升可靠性
- en: Critics RAG Confidence AUC F1 Score ADE Effect ADE Effect ✓ ✓ 0.851 0.831 0.556
    0.609 $\times$ 0.920 0.926 0.556 0.636
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 评论者 RAG 置信度 AUC F1 分数 ADE 效果 ADE 效果 ✓ ✓ 0.851 0.831 0.556 0.609 $\times$ 0.920
    0.926 0.556 0.636
- en: 'Table 2: Ablation results on MALADE.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 表 2：MALADE的消融结果。
- en: Agent Correction DrugAgent 4.24 % CategoryAgent 44.52 %
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 代理修正药物代理 4.24% 类别代理 44.52%
- en: 'Table 3: Percentage of agent responses corrected by the Critic.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 表 3：由评论者修正的代理响应百分比。
- en: 'Our primary tool to analyze the effectiveness of the Agent-Critic pattern in
    MALADE is by ablation; in particular, we evaluate modified versions of MALADE,
    with and without feedback from the Critic components of DrugAgent and CategoryAgent,
    with and without RAG for FDAHandler. The results are shown in Table [3](#S5.T3
    "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance").'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '我们分析MALADE中代理-评论者模式有效性的主要工具是消融；特别是，我们评估了MALADE的修改版本，包括和不包括药物代理和类别代理的评论者反馈，以及FDAHandler的有无RAG。结果见表 [3](#S5.T3
    "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")。'
- en: 'We observe that, both in the case with and without RAG, Critics improve the
    quality of the confidence scores, increasing both ADE-based and Effect-based AUCs.
    We additionally observe strong performance without RAG (in which case Critics
    slightly improve AUCs but decrease F1 scores), suggesting that GPT-4’s internal
    medical knowledge is frequently sufficient for the OMOP ADE task. However, to
    ensure that MALADE is a realistic prototype for future pharmacovigilance systems,
    we consider only instances of MALADE with RAG for our main analysis; LLM-based
    systems without RAG are prone to hallucinations, and are limited by a static pool
    of information to draw upon. They lack the ability to produce citations, which
    is vital for trust in these systems, particularly in the medical domain. Integrating
    RAG enables the system to access and leverage the most current information from
    (for example) FDA label data, ensuring the system’s responses are grounded with
    the up-to-date knowledge available. Refer to Appendix [D](#A4 "Appendix D Ablations
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for further details on ablation results and discussions.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '我们观察到，无论是否使用RAG，评论者都提高了置信度分数的质量，增加了基于ADE和效果的AUC。我们还观察到，即使没有RAG（在这种情况下评论者略微提高了AUC，但F1分数下降），性能依然很强，这表明GPT-4的内部医学知识通常足以应对OMOP
    ADE任务。然而，为了确保MALADE是未来药物监测系统的现实原型，我们主要分析了使用RAG的MALADE实例；没有RAG的LLM系统容易产生幻觉，且受限于静态信息池。这些系统缺乏提供引用的能力，这在医学领域尤其重要。整合RAG使系统能够访问和利用最新的信息（例如FDA标签数据），确保系统的响应基于最新的知识。有关消融结果和讨论的更多详细信息，请参见附录 [D](#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")。'
- en: 'We continue our investigation of the effectiveness of Agent-Critic interaction
    by analyzing the frequency of Critic interventions to rectify errors in Agent
    responses. We identify corrections made by the Critic as examples in which the
    Agent and Critic engaged in more than one round of interaction. Results are shown
    in Table [3](#S5.T3 "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction enhances reliability
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance").'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '我们通过分析 Critic 干预纠正 Agent 响应中的错误的频率，继续调查 Agent-Critic 交互的有效性。我们将 Critic 进行的修正标识为
    Agent 和 Critic 进行了多轮交互的例子。结果见表[3](#S5.T3 "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction
    enhances reliability ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: 'We find that the frequency with which the Critic catches a flaw varies significantly
    by Agent. CategoryAgent in particular incurs errors, necessitating the help of
    the Critic and is generally corrected due to flaws in its medical reasoning, hence
    the Critic can directly prevent an incorrect response. In the example of an actual
    run of MALADE(Figure [3](#S4.F3 "Figure 3 ‣ Critic. ‣ 4.2 Agent-Critic Interaction
    ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")),
    when asked about the effects of benzodiazepines on hip fracture, CategoryAgent
    first answered “no-effect”, which was flagged as an error, as the sedative and
    muscle relaxant properties of benzodiazepines can increase the risk of falls and
    hence hip fractures, and as DrugAgent had noted that traumatic fractures were
    listed as an ADE in the drug labels. This feedback was forwarded to CategoryAgent
    and used to revise its answer to “increase”. We find that DrugAgent generally
    produces reliable responses; however note that it occasionally makes no calls
    to the Critic, hence the Agent fails to validate its answer. We observe that this
    can occur when the FDA drug label does not contain information related to the
    condition, and the Agent concludes that no validation is necessary.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '我们发现 Critic 捕捉到缺陷的频率因代理而异。特别是 CategoryAgent 经常出现错误，需要 Critic 的帮助，并且通常由于医学推理中的缺陷而得到纠正，因此
    Critic 可以直接防止不正确的回答。在实际运行 MALADE 的例子中（图[3](#S4.F3 "Figure 3 ‣ Critic. ‣ 4.2 Agent-Critic
    Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")），当被问及苯二氮平类药物对髋部骨折的影响时，CategoryAgent
    首先回答“无效”，这被标记为错误，因为苯二氮平类药物的镇静和肌肉松弛特性可以增加跌倒的风险，从而导致髋部骨折，并且 DrugAgent 已指出创伤性骨折在药物标签中列为
    ADE。该反馈被转发给 CategoryAgent，并用于将其回答修正为“增加”。我们发现 DrugAgent 通常提供可靠的回答；但注意它偶尔不调用 Critic，因此
    Agent 未能验证其答案。我们观察到，当 FDA 药物标签不包含与该情况相关的信息时，这种情况可能会发生，并且 Agent 认为不需要验证。'
- en: '5.4 RQ3: MALADE provides justifications that are aligned with human expert
    reasoning, and help understand its failure modes'
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '5.4 RQ3: MALADE 提供的理由与人类专家的推理一致，并帮助理解其失败模式'
- en: We extract the justifications produced by CategoryAgent from a full run of MALADE
    for OMOP ADE task for review by a clinician. We observe that the agent exhibits
    valid medical reasoning in most cases, in particular, $85\%$ of its justifications
    align with the reasoning of the clinician.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从 MALADE 的全面运行中提取了 CategoryAgent 产生的理由，以供临床医生审查。我们观察到，代理在大多数情况下展现了有效的医学推理，特别是$85\%$的理由与临床医生的推理一致。
- en: More importantly, examining the provided justifications helps us understand
    the common patterns of failures and provides guidance on the further improvement
    of the system. For instance, CategoryAgent occasionally assigns “increase” to
    drug categories based on weak evidence, overestimating its strength It may also
    overlook risks not explicitly mentioned in the drug label data, particularly when
    DrugAgent fails to provide sufficient context. In addition, CategoryAgent may
    fail to identify potential therapeutic effects not specified in the drug label
    data in association with a condition. We observe that it does not recognize the
    antihistamine properties of tricyclic antidepressants. In one case, evidence against
    gastric and duodenal ulcers caused by alendronate led CategoryAgent to dismiss
    results regarding esophageal ulcers.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 更重要的是，检查提供的理由帮助我们理解失败的常见模式，并提供进一步改进系统的指导。例如，CategoryAgent偶尔会根据弱证据将“增加”分配给药物类别，过高估计其强度。它也可能忽略药物标签数据中未明确提到的风险，特别是当DrugAgent未能提供足够的背景时。此外，CategoryAgent可能未能识别药物标签数据中未明确指定的与条件相关的潜在治疗效果。我们观察到，它未能识别三环类抗抑郁药的抗组胺特性。在一个案例中，反对阿仑膦酸盐引起的胃和十二指肠溃疡的证据导致CategoryAgent忽略了关于食管溃疡的结果。
- en: 'While MALADE exhibits correct medical reasoning in general and hence achieves
    strong and reliable performance on ADE identification, we highlight that understanding
    its failures is essential for its further improvements, as discussed in Section [6](#S6
    "6 Discussion ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"). Extracts from the logs showing both correct
    and incorrect behavior by MALADE are in Appendix [C](#A3 "Appendix C Detailed
    behavior of MALADE: Successful and Failed Behavior ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").
    See Appendix [B.5](#A2.SS5 "B.5 Discussion of Justifications Produced by DrugFinder
    ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for a discussion of the justifications produced by DrugFinder.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '虽然MALADE在一般情况下表现出正确的医学推理，因此在ADE识别方面实现了强大而可靠的性能，但我们强调，了解其失败对进一步改进至关重要，正如第[6](#S6
    "6 讨论 ‣ MALADE: 基于LLM的代理与检索增强生成在药物监测中的协调")节中讨论的那样。MALADE的日志摘录显示了其正确和不正确的行为，详见附录[C](#A3
    "附录 C MALADE的详细行为: 成功与失败行为 ‣ MALADE: 基于LLM的代理与检索增强生成在药物监测中的协调")。有关DrugFinder产生的理由的讨论请参见附录[B.5](#A2.SS5
    "B.5 DrugFinder产生的理由讨论 ‣ 附录 B MALADE实施的详细描述 ‣ MALADE: 基于LLM的代理与检索增强生成在药物监测中的协调")。'
- en: 6 Discussion
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6 讨论
- en: Generalizable insights about collaborative LLM-powered agents in the context
    of healthcare.
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 关于在医疗保健背景下协作LLM驱动代理的可推广见解。
- en: We have observed the strong performance of MALADE for ADE extraction, indicating
    the potential of multi-agent systems toward broader PhV application. Importantly,
    the principles guiding the design of our system, including 1) the Agent-Critic
    interaction, 2) the decomposition of a complex task into sub-tasks, and 3) LLM
    minimization, are quite general. These principles extend beyond PhV, and can be
    applied to many other problems in clinical medicine which require trustworthy,
    automated responses to challenging questions that must be answered based on multiple
    competing, and potentially conflicting, sources of knowledge or data. Thus, MALADE
    may be viewed not only as a system for ADE extraction, but also as a roadmap for
    development of other multi-agent systems that generate precise, evidence-based
    responses to such questions.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们观察到MALADE在ADE提取方面表现出色，显示了多代理系统在更广泛的PhV应用中的潜力。重要的是，指导我们系统设计的原则，包括1) 代理-评论员交互，2)
    将复杂任务分解为子任务，以及3) LLM最小化，都是相当通用的。这些原则超越了PhV，可以应用于临床医学中的许多其他问题，这些问题需要对基于多个竞争且可能冲突的知识或数据源的挑战性问题作出可信赖的自动化响应。因此，MALADE不仅可以被视为ADE提取系统，还可以被视为开发其他生成准确、基于证据的响应的多代理系统的路线图。
- en: General principle 1) Agent-Critic interaction.
  id: totrans-125
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 原则1) 代理-评论员交互。
- en: 'The Agent/Critic pattern, as discussed in Section [4](#S4 "4 MALADE: Proposed
    Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance"), is essential to the
    design of our system, and serves as a powerful tool to enhance accuracy of an
    LLM-based system. Indeed, we have observed several instances where the Critic
    corrected the parent Agent’s initial response, as in the example mentioned in
    Section [4.2](#S4.SS2 "4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent
    System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance"). However, we should note that if
    improperly configured, Critics can be harmful to the performance of a system,
    both in terms of efficiency (since the repeated rounds of interaction between
    the Agent and Critic can significantly increase token cost and runtime), and reliability.
    Since a Critic strictly enforces the provided guidelines, incorrect guidelines
    can significantly harm performance; in some cases, excessively strict requirements
    can lead to infinite loops, as the Agent and Critic will deadlock, neither able
    to satisfy the other’s requirements. We observed this effect in early versions
    of MALADE; resolving the infinite loop issue required specific instructions listing
    acceptable behavior. For instance, the Critic for DrugAgent needed to be explicitly
    told to accept statements that the effect of a drug was uncertain due to a lack
    of information from the FDA labels; without this, infinite loops occurred in some
    drug-outcome combinations.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '如第[4](#S4 "4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")节讨论的Agent/Critic模式，对我们系统的设计至关重要，并且作为增强基于LLM系统准确性的有力工具。实际上，我们观察到Critic在多个实例中纠正了父Agent的初始回应，如第[4.2](#S4.SS2
    "4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")节中提到的例子。然而，我们应当注意，如果配置不当，Critic可能会对系统的性能产生负面影响，包括效率（因为Agent和Critic之间的重复交互会显著增加token成本和运行时间）和可靠性。由于Critic严格执行提供的指南，不正确的指南可能会显著损害性能；在某些情况下，过于严格的要求可能会导致无限循环，因为Agent和Critic将陷入僵局，无法满足对方的要求。我们在MALADE的早期版本中观察到了这一效果；解决无限循环问题需要具体的指令列出可接受的行为。例如，DrugAgent的Critic需要明确告知接受由于缺乏FDA标签信息导致药物效果不确定的声明；否则，在某些药物-结果组合中会发生无限循环。'
- en: General principle 2) Decomposition of a complex task.
  id: totrans-127
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 通用原则 2) 复杂任务的分解。
- en: 'The principle of decomposition, mirroring the analogous principle of general
    software development, is the Unix philosophy as applied to multi-agent systems.
    Individual agents should be minimal, in that they should “do one thing and do
    it well”. This decomposition principle is evident in the hierarchy of specialized
    agents in the design of MALADE (i.e., DrugFinder, DrugAgent, and CategoryAgent
    taking charge of each sub-task in Section [4.3](#S4.SS3 "4.3 STEP 1: Finding Representative
    Drugs ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    - [4.5](#S4.SS5 "4.5 STEP 3: Labeling Drug Category-Outcome Associations ‣ 4 MALADE:
    Proposed Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")). In addition
    to promoting modularity and maintainability, decomposition also promotes reliability,
    especially when combined with another key design principle, LLM only when necessary.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '分解原则，类似于通用软件开发的原则，是Unix哲学在多智能体系统中的应用。单个智能体应当是最小化的，即它们应当“做一件事，并且做到最好”。这一分解原则在MALADE的设计中明显可见（即，DrugFinder、DrugAgent和CategoryAgent负责第[4.3](#S4.SS3
    "4.3 STEP 1: Finding Representative Drugs ‣ 4 MALADE: Proposed Multi-Agent System
    for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")节中的每个子任务 - [4.5](#S4.SS5 "4.5 STEP
    3: Labeling Drug Category-Outcome Associations ‣ 4 MALADE: Proposed Multi-Agent
    System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")）。除了促进模块化和可维护性，分解还促进了可靠性，特别是当与另一个关键设计原则“仅在必要时使用LLM”结合时。'
- en: General principle 3) LLM only when necessary.
  id: totrans-129
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 通用原则 3) 仅在必要时使用LLM。
- en: 'As LLMs have surprising capabilities, one might be tempted to take an “LLM-maximalist”
    approach, where LLMs are responsible for all aspects of the task. Unfortunately,
    this can be both costly and unreliable, since using proprietary LLMs (e.g., GPT-4)
    behind paid APIs incurs a significant “token cost” as well as “time cost” (due
    to the latency of the responses API calls). Instead, we carefully identified deterministic,
    well-defined algorithmic parts of the task and performed these in standard code.
    We relied on LLM-powered agents only for the specific tasks requiring language
    understanding, reasoning, and text generation. This principle guides key choices
    in MALADE: for instance, to retrieve prescription frequencies of drugs in a category,
    instead of having an LLM generate the needed SQL queries to the MIMIC-IV database,
    we observed that these queries are a simple function of the list of drugs, and
    directly generated the query in standard code. A similar choice was made for the
    FDA API queries to retrieve drug labels.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 LLM 具有惊人的能力，可能会有人倾向于采取“LLM 极大化”的方法，即将任务的所有方面都交给 LLM 负责。不幸的是，这可能既昂贵又不可靠，因为使用专有的
    LLM（例如，GPT-4）通过付费 API 会产生显著的“令牌成本”以及“时间成本”（由于响应 API 调用的延迟）。相反，我们仔细识别了任务中确定性强、定义明确的算法部分，并在标准代码中执行这些部分。我们仅在需要语言理解、推理和文本生成的特定任务中依赖
    LLM 驱动的智能体。这个原则指导了 MALADE 的关键选择：例如，为了检索某一类别药物的处方频率，我们没有让 LLM 生成所需的 SQL 查询来访问 MIMIC-IV
    数据库，而是观察到这些查询是药物列表的简单函数，并在标准代码中直接生成了查询。FDA API 查询以检索药物标签时也做了类似的选择。
- en: 'Such “LLM only when necessary” principle also illustrates the key utility of
    tool-use (also known as function-calling): in addition to providing the LLM the
    ability to perform external actions and to retrieve external data, it allows offloading
    execution of complex code from the LLM, hence dramatically reducing cost and increasing
    reliability. A multi-agent orchestration system, in this sense, can be seen as
    control flow for the LLM.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 这种“仅在必要时使用 LLM”的原则还说明了工具使用（也称为函数调用）的关键作用：除了赋予 LLM 执行外部操作和检索外部数据的能力外，它还允许将复杂代码的执行卸载出
    LLM，从而大幅度降低成本并提高可靠性。从这个角度来看，多智能体编排系统可以被视为 LLM 的控制流。
- en: Limitations and Future Work.
  id: totrans-132
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 限制与未来工作。
- en: 'One key limitation of MALADE is that we rely entirely on textual FDA label
    data. In particular, if the information is not specifically included in the label
    data, MALADE cannot reliably identify the strength of any associations raised
    in the data. This resulted in several flawed predictions, as discussed in Section [5.4](#S5.SS4
    "5.4 RQ3: MALADE provides justifications that are aligned with human expert reasoning,
    and help understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").
    To remedy this, we envision that extracting ADEs from EHR data is a promising
    direction for future work. As a first step, this would enable estimating the rarity
    of certain adverse events noted without further detail in the label data; in principle,
    a multi-agent system with access to EHR data may be able to identify ADEs directly.
    This would require the LLM to perform causal discovery from historical data (answering,
    “Is the drug causing this event?”).'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 'MALADE 的一个关键限制是我们完全依赖文本 FDA 标签数据。特别是，如果信息未特别包含在标签数据中，MALADE 无法可靠地识别数据中提出的任何关联的强度。这导致了几次预测错误，如第[5.4](#S5.SS4
    "5.4 RQ3: MALADE provides justifications that are aligned with human expert reasoning,
    and help understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")节中讨论的那样。为了解决这个问题，我们设想从电子健康记录（EHR）数据中提取不良事件（ADEs）是未来工作的一个有前途的方向。作为第一步，这将使我们能够估计标签数据中没有进一步细节的某些不良事件的稀有性；原则上，具有访问
    EHR 数据的多智能体系统可能能够直接识别 ADEs。这将要求 LLM 从历史数据中进行因果发现（回答“这种药物是否导致了这一事件？”）。'
- en: Another interesting avenue for future work is a detailed evaluation with local,
    open-source LLMs such as LlaMA [[36](#bib.bib36)], Grok [[42](#bib.bib42)], and
    Mistral [[11](#bib.bib11)], which have privacy and cost advantages over the proprietary
    LLMs (such as GPT-4, Claude, and variants) behind paid APIs. Unfortunately, our
    initial experiments with local LLMs exhibited many failure modes due to deviation
    from instructions and incorrect tool use. These are in principle possible to remedy
    by further breaking down tasks into simpler subtasks, and more sophisticated multi-agent
    validation and correction mechanisms.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个有趣的未来工作方向是与本地开源LLMs如LlaMA [[36](#bib.bib36)], Grok [[42](#bib.bib42)] 和 Mistral [[11](#bib.bib11)]
    进行详细评估，这些LLMs在隐私和成本方面相较于付费API背后的专有LLMs（如GPT-4、Claude及其变体）具有优势。不幸的是，我们对本地LLMs的初步实验显示出许多由于偏离指令和不正确工具使用的失败模式。这些问题原则上可以通过进一步将任务分解为更简单的子任务，以及更复杂的多代理验证和纠正机制来解决。
- en: Besides these broad limitations and avenues of future work, a few specific improvements
    are possible. Our system requires some minimal human input at the initial step,
    in particular, the names of the drug categories must be put into the form expected
    by the FDA’s databases; in particular, acronyms are expanded and plurals and punctuation
    are removed. This task is quite likely amenable to LLMs, which are capable of
    acronym identification and could attempt additional transformations for more robust
    output (for example, identifying all synonyms of a pharmacological class; the
    union of the drugs identified with each search would then be forwarded to DrugFinder).
    In addition, increased usage of structured input and output is a potential enhancement;
    for example, DrugAgent’s reliability might be enhanced by replacing the free-form
    text output, using instructions enforcing the presence of certain information,
    such as the reliability of information and the risk.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些广泛的限制和未来工作的途径外，还有一些具体的改进是可能的。我们的系统在初始步骤需要一些最小的人为输入，特别是药物类别的名称必须按照FDA数据库的预期格式填写；特别地，缩写需要扩展，复数和标点符号需要移除。这个任务很可能适合LLMs，因为它们能够识别缩写，并可以尝试额外的转换以获得更稳健的输出（例如，识别药理类别的所有同义词；然后将每次搜索识别出的药物的并集转发给DrugFinder）。此外，增加结构化输入和输出的使用是一个潜在的增强；例如，通过用指令强制某些信息的存在（如信息的可靠性和风险）来替换自由格式的文本输出，可能会提高DrugAgent的可靠性。
- en: 7 Conclusion
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7 结论
- en: 'We consider the problem of ADE Extraction from FDA Drug Labels, a key task
    in Pharmacovigilance (PhV), and propose a solution using MALADE, based on collaboration
    among multiple LLM-powered agents equipped with Retrieval Augmented Generation
    (RAG). Our system goes significantly beyond simplistic techniques that only produce
    a binary label of presence/absence of association between a drug category and
    an ADE: it produces a structured report containing justification for the generated
    label, and scores characterizing probability of occurrence, confidence, strength
    of evidence, and rarity of the association between a drug category and an ADE.
    The scores permit rigorous quantitative evaluation of the system’s performance
    against the widely-used OMOP Ground Truth table of ADEs, and the results are impressive.
    We introduce the agent/critic pattern, a powerful and general design pattern for
    reliable multi-agent systems. We hope that our multi-agent architecture and guiding
    principles will inspire future work on multi-agent approaches to broader PhV and
    general medical tasks.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们考虑了从FDA药物标签中提取ADE的问题，这是药物警戒（PhV）的一个关键任务，并提出了一种使用MALADE的解决方案，该方案基于多个配备了检索增强生成（RAG）的LLM驱动的代理之间的协作。我们的系统显著超越了仅仅生成药物类别和ADE之间关联的二元标签的简单技术：它生成了包含生成标签的理由的结构化报告，并评分以表征药物类别和ADE之间关联的发生概率、信心、证据强度和稀有性。这些评分允许对系统的性能进行严格的定量评估，与广泛使用的OMOP
    Ground Truth ADE表的结果令人印象深刻。我们介绍了代理/评论模式，这是一种强大且通用的设计模式，适用于可靠的多代理系统。我们希望我们的多代理架构和指导原则能激发未来对多代理方法在更广泛的药物警戒和一般医学任务中的应用的研究。
- en: References
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参考文献
- en: '[1] László Babai. Trading group theory for randomness. In Proceedings of the
    seventeenth annual ACM symposium on Theory of computing, pages 421–429, 1985.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[1] László Babai. Trading group theory for randomness. In Proceedings of the
    seventeenth annual ACM symposium on Theory of computing, pages 421–429, 1985.'
- en: '[2] Samuel Bayer, Cheryl Clark, Oanh Dang, John Aberdeen, Sonja Brajovic, Kimberley
    Swank, Lynette Hirschman, and Robert Ball. Ade eval: an evaluation of text processing
    systems for adverse event extraction from drug labels for pharmacovigilance. Drug
    safety, 44:83–94, 2021.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[2] Samuel Bayer, Cheryl Clark, Oanh Dang, John Aberdeen, Sonja Brajovic, Kimberley
    Swank, Lynette Hirschman, 和 Robert Ball。Ade eval：一种从药物标签中提取不良事件的文本处理系统评估。药物安全性，44：83–94，2021年。'
- en: '[3] Prasad Chalasani, Nils Palumbo, Mohannad Alhanahnah, and Somesh Jha. Langroid:
    Multi-agent framework for llm applications. [https://github.com/langroid/langroid](https://github.com/langroid/langroid),
    2023.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3] Prasad Chalasani, Nils Palumbo, Mohannad Alhanahnah, 和 Somesh Jha。Langroid：用于
    llm 应用的多代理框架。 [https://github.com/langroid/langroid](https://github.com/langroid/langroid)，2023年。'
- en: '[4] Jeff Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova. Bert:
    Pre-training of deep bidirectional transformers for language understanding. In
    Proceedings of the 2019 Conference of the North American Chapter of the Association
    for Computational Linguistics: Human Language Technologies, 2019.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[4] Jeff Devlin, Ming-Wei Chang, Kenton Lee, 和 Kristina Toutanova。BERT：用于语言理解的深度双向转换器的预训练。在2019年北美计算语言学协会人类语言技术会议论文集中，2019年。'
- en: '[5] Giacomo Frisoni, Miki Mizutani, Gianluca Moro, and Lorenzo Valgimigli.
    Bioreader: a retrieval-enhanced text-to-text transformer for biomedical literature.
    In Proceedings of the 2022 conference on empirical methods in natural language
    processing, pages 5770–5793, 2022.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[5] Giacomo Frisoni, Miki Mizutani, Gianluca Moro, 和 Lorenzo Valgimigli。Bioreader：一种用于生物医学文献的检索增强型文本到文本转换器。在2022年自然语言处理实证方法会议论文集中，第5770–5793页，2022年。'
- en: '[6] Susan Gruber, Aloka Chakravarty, Susan R Heckbert, Mark Levenson, David
    Martin, Jennifer C Nelson, Bruce M Psaty, Simone Pinheiro, Christian G Reich,
    Sengwee Toh, et al. Design and analysis choices for safety surveillance evaluations
    need to be tuned to the specifics of the hypothesized drug–outcome association.
    Pharmacoepidemiology and drug safety, 25(9):973–981, 2016.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[6] Susan Gruber, Aloka Chakravarty, Susan R Heckbert, Mark Levenson, David
    Martin, Jennifer C Nelson, Bruce M Psaty, Simone Pinheiro, Christian G Reich,
    Sengwee Toh 等。安全监测评估的设计和分析选择需要针对假设的药物-结果关联的具体情况进行调整。药物流行病学与药物安全性，25(9)：973–981，2016年。'
- en: '[7] Manfred Hauben, Jeffrey K Aronson, and Robin E Ferner. Evidence of misclassification
    of drug–event associations classified as gold standard ‘negative controls’ by
    the observational medical outcomes partnership (omop). Drug safety, 39:421–432,
    2016.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[7] Manfred Hauben, Jeffrey K Aronson, 和 Robin E Ferner。观察医学结果合作伙伴（omop）将药物-事件关联误分类为黄金标准‘负控制’的证据。药物安全性，39：421–432，2016年。'
- en: '[8] Carl Hewitt. Actor model. arXiv:1008.1459 [cs.PL], Aug 2010. arXiv: 1008.1459.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[8] Carl Hewitt。Actor 模型。arXiv:1008.1459 [cs.PL]，2010年8月。arXiv: 1008.1459。'
- en: '[9] Sirui Hong, Mingchen Zhuge, Jonathan Chen, Xiawu Zheng, Yuheng Cheng, Jinlin
    Wang, Ceyao Zhang, Zili Wang, Steven Ka Shing Yau, Zijuan Lin, Liyang Zhou, Chenyu
    Ran, Lingfeng Xiao, Chenglin Wu, and Jürgen Schmidhuber. MetaGPT: Meta programming
    for multi-agent collaborative framework. In The Twelfth International Conference
    on Learning Representations, 2024.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[9] Sirui Hong, Mingchen Zhuge, Jonathan Chen, Xiawu Zheng, Yuheng Cheng, Jinlin
    Wang, Ceyao Zhang, Zili Wang, Steven Ka Shing Yau, Zijuan Lin, Liyang Zhou, Chenyu
    Ran, Lingfeng Xiao, Chenglin Wu, 和 Jürgen Schmidhuber。MetaGPT：用于多代理协作框架的元编程。在第十二届国际学习表征会议上，2024年。'
- en: '[10] Jhih-Yuan Huang, Wei-Po Lee, and King-Der Lee. Predicting adverse drug
    reactions from social media posts: Data balance, feature selection and deep learning.
    Healthcare, 10(4), 2022.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[10] Jhih-Yuan Huang, Wei-Po Lee, 和 King-Der Lee。预测社交媒体帖子中的不良药物反应：数据平衡、特征选择和深度学习。《医疗保健》，10(4)，2022年。'
- en: '[11] Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford,
    Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel,
    Guillaume Lample, Lucile Saulnier, et al. Mistral 7B. arXiv preprint arXiv:2310.06825,
    2023.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[11] Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford,
    Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel,
    Guillaume Lample, Lucile Saulnier 等。Mistral 7B。arXiv 预印本 arXiv:2310.06825，2023年。'
- en: '[12] Qiao Jin, Robert Leaman, and Zhiyong Lu. Retrieve, summarize, and verify:
    how will chatgpt affect information seeking from the medical literature? Journal
    of the American Society of Nephrology, 34(8):1302–1304, 2023.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[12] Qiao Jin, Robert Leaman, 和 Zhiyong Lu。检索、总结和验证：chatgpt 将如何影响从医学文献中寻求信息？《美国肾脏学会杂志》，34(8)：1302–1304，2023年。'
- en: '[13] Vijay Konda and John Tsitsiklis. Actor-critic algorithms. Advances in
    neural information processing systems, 12, 1999.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[13] Vijay Konda 和 John Tsitsiklis。Actor-critic 算法。神经信息处理系统进展，12，1999年。'
- en: '[14] Huyen Le, Ru Chen, Stephen Harris, Hong Fang, Beverly Lyn-Cook, Huixiao
    Hong, Weigong Ge, Paul Rogers, Weida Tong, and Wen Zou. Rxnorm for drug name normalization:
    a case study of prescription opioids in the fda adverse events reporting system.
    Frontiers in Bioinformatics, 3, 2024.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[14] Huyen Le, Ru Chen, Stephen Harris, Hong Fang, Beverly Lyn-Cook, Huixiao
    Hong, Weigong Ge, Paul Rogers, Weida Tong, 和 Wen Zou. 用于药物名称标准化的Rxnorm：FDA不良事件报告系统中处方阿片类药物的案例研究。《生物信息学前沿》，3，2024年。'
- en: '[15] Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
    Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel,
    et al. Retrieval-augmented generation for knowledge-intensive nlp tasks. Advances
    in Neural Information Processing Systems, 33:9459–9474, 2020.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[15] Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
    Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel
    等. 用于知识密集型NLP任务的检索增强生成。《神经信息处理系统进展》，33:9459–9474，2020年。'
- en: '[16] Minghao Li, Yingxiu Zhao, Bowen Yu, Feifan Song, Hangyu Li, Haiyang Yu,
    Zhoujun Li, Fei Huang, and Yongbin Li. API-bank: A comprehensive benchmark for
    tool-augmented LLMs. In Houda Bouamor, Juan Pino, and Kalika Bali, editors, Proceedings
    of the 2023 Conference on Empirical Methods in Natural Language Processing, pages
    3102–3116, Singapore, December 2023\. Association for Computational Linguistics.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[16] Minghao Li, Yingxiu Zhao, Bowen Yu, Feifan Song, Hangyu Li, Haiyang Yu,
    Zhoujun Li, Fei Huang, 和 Yongbin Li. API-bank: 工具增强LLM的综合基准。见 Houda Bouamor, Juan
    Pino, 和 Kalika Bali 编，《2023年自然语言处理经验方法会议论文集》，第3102–3116页，新加坡，2023年12月。计算语言学协会。'
- en: '[17] Percy Liang, Rishi Bommasani, Tony Lee, Dimitris Tsipras, Dilara Soylu,
    Michihiro Yasunaga, Yian Zhang, Deepak Narayanan, Yuhuai Wu, Ananya Kumar, et al.
    Holistic evaluation of language models. Transactions on Machine Learning Research,
    2023. Featured Certification, Expert Certification.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[17] Percy Liang, Rishi Bommasani, Tony Lee, Dimitris Tsipras, Dilara Soylu,
    Michihiro Yasunaga, Yian Zhang, Deepak Narayanan, Yuhuai Wu, Ananya Kumar 等. 语言模型的整体评估。《机器学习研究交易》，2023年。特色认证，专家认证。'
- en: '[18] Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah
    Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, Shashank Gupta,
    Bodhisattwa Prasad Majumder, Katherine Hermann, Sean Welleck, Amir Yazdanbakhsh,
    and Peter Clark. Self-refine: Iterative refinement with self-feedback. In A. Oh,
    T. Naumann, A. Globerson, K. Saenko, M. Hardt, and S. Levine, editors, Advances
    in Neural Information Processing Systems, volume 36, pages 46534–46594\. Curran
    Associates, Inc., 2023.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[18] Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah
    Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, Shashank Gupta,
    Bodhisattwa Prasad Majumder, Katherine Hermann, Sean Welleck, Amir Yazdanbakhsh,
    和 Peter Clark. Self-refine: 自我反馈的迭代精炼。见 A. Oh, T. Naumann, A. Globerson, K. Saenko,
    M. Hardt, 和 S. Levine 编，《神经信息处理系统进展》，第36卷，第46534–46594页。Curran Associates, Inc.,
    2023年。'
- en: '[19] David Madigan and Patrick Ryan. Learning from observational databases:
    Lessons from omop and ohdsi. 2015.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[19] David Madigan 和 Patrick Ryan. 从观察数据库中学习：来自OMOP和OHDSI的经验教训。2015年。'
- en: '[20] Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg S Corrado, and Jeff Dean.
    Distributed representations of words and phrases and their compositionality. Advances
    in neural information processing systems, 26, 2013.'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[20] Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg S Corrado, 和 Jeff Dean.
    单词和短语的分布式表示及其组合性。《神经信息处理系统进展》，26，2013年。'
- en: '[21] Justin Mower, Devika Subramanian, and Trevor Cohen. Learning predictive
    models of drug side-effect relationships from distributed representations of literature-derived
    semantic predications. Journal of the American Medical Informatics Association,
    25(10):1339–1350, 2018.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[21] Justin Mower, Devika Subramanian, 和 Trevor Cohen. 从文献衍生的语义预言的分布表示中学习药物副作用关系的预测模型。《美国医学信息学会杂志》，25(10):1339–1350，2018年。'
- en: '[22] Sriraam Natarajan, Vishal Bangera, Tushar Khot, Jose Picado, Anurag Wazalwar,
    Vitor Santos Costa, David Page, and Michael Caldwell. Markov logic networks for
    adverse drug event extraction from text. Knowledge and information systems, 51:435–457,
    2017.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[22] Sriraam Natarajan, Vishal Bangera, Tushar Khot, Jose Picado, Anurag Wazalwar,
    Vitor Santos Costa, David Page, 和 Michael Caldwell. 用于从文本中提取不良药物事件的马尔可夫逻辑网络。《知识与信息系统》，51:435–457，2017年。'
- en: '[23] Harsha Nori, Nicholas King, Scott Mayer McKinney, Dean Carignan, and Eric
    Horvitz. Capabilities of gpt-4 on medical challenge problems. arXiv preprint arXiv:2303.13375,
    2023.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[23] Harsha Nori, Nicholas King, Scott Mayer McKinney, Dean Carignan, 和 Eric
    Horvitz. GPT-4在医学挑战问题上的能力。arXiv预印本 arXiv:2303.13375，2023年。'
- en: '[24] Jeffrey Pennington, Richard Socher, and Christopher Manning. Glove: Global
    vectors for word representation. In Proceedings of the 2014 conference on empirical
    methods in natural language processing (EMNLP), pages 1532–1543, 2014.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[24] Jeffrey Pennington, Richard Socher, 和 Christopher Manning。《Glove：全球词向量表示》。在2014年自然语言处理实证方法会议（EMNLP）论文集中，第1532–1543页，2014年。'
- en: '[25] Richard Platt, Marcus Wilson, K Arnold Chan, Joshua S Benner, Janet Marchibroda,
    and Mark McClellan. The new sentinel network—improving the evidence of medical-product
    safety. New England Journal of Medicine, 361(7):645–647, 2009.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[25] Richard Platt, Marcus Wilson, K Arnold Chan, Joshua S Benner, Janet Marchibroda,
    和 Mark McClellan。《新哨兵网络——提升医疗产品安全证据》。新英格兰医学杂志，361(7):645–647，2009年。'
- en: '[26] Jingqing Ruan, YiHong Chen, Bin Zhang, Zhiwei Xu, Tianpeng Bao, Hangyu
    Mao, Ziyue Li, Xingyu Zeng, Rui Zhao, et al. Tptu: Task planning and tool usage
    of large language model-based ai agents. In NeurIPS 2023 Foundation Models for
    Decision Making Workshop, 2023.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[26] Jingqing Ruan, YiHong Chen, Bin Zhang, Zhiwei Xu, Tianpeng Bao, Hangyu
    Mao, Ziyue Li, Xingyu Zeng, Rui Zhao等人。《Tptu：基于大型语言模型的AI代理的任务规划和工具使用》。在NeurIPS
    2023决策制定基础模型研讨会上，2023年。'
- en: '[27] Patrick B Ryan, Martijn J Schuemie, Emily Welebob, Jon Duke, Sarah Valentine,
    and Abraham G Hartzema. Defining a reference set to support methodological research
    in drug safety. Drug safety, 36:33–47, 2013.'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[27] Patrick B Ryan, Martijn J Schuemie, Emily Welebob, Jon Duke, Sarah Valentine,
    和 Abraham G Hartzema。《定义参考集以支持药物安全的研究方法》。药物安全，36:33–47，2013年。'
- en: '[28] Karan Singhal, Shekoofeh Azizi, Tao Tu, S Sara Mahdavi, Jason Wei, Hyung Won
    Chung, Nathan Scales, Ajay Tanwani, Heather Cole-Lewis, Stephen Pfohl, et al.
    Large language models encode clinical knowledge. Nature, 620(7972):172–180, 2023.'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[28] Karan Singhal, Shekoofeh Azizi, Tao Tu, S Sara Mahdavi, Jason Wei, Hyung
    Won Chung, Nathan Scales, Ajay Tanwani, Heather Cole-Lewis, Stephen Pfohl等人。《大型语言模型编码临床知识》。自然，620(7972):172–180，2023年。'
- en: '[29] Karan Singhal, Tao Tu, Juraj Gottweis, Rory Sayres, Ellery Wulczyn, Le Hou,
    Kevin Clark, Stephen Pfohl, Heather Cole-Lewis, Darlene Neal, et al. Towards expert-level
    medical question answering with large language models. arXiv preprint arXiv:2305.09617,
    2023.'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[29] Karan Singhal, Tao Tu, Juraj Gottweis, Rory Sayres, Ellery Wulczyn, Le
    Hou, Kevin Clark, Stephen Pfohl, Heather Cole-Lewis, Darlene Neal等人。《利用大型语言模型实现专家级医学问答》。arXiv预印本
    arXiv:2305.09617，2023年。'
- en: '[30] Alfred Sorbello, Syed Arefinul Haque, Rashedul Hasan, Richard Jermyn,
    Ahmad Hussein, Alex Vega, Krzysztof Zembrzuski, Anna Ripple, and Mitra Ahadpour.
    Artificial intelligence–enabled software prototype to inform opioid pharmacovigilance
    from electronic health records: Development and usability study. JMIR AI, 2:e45000,
    Jul 2023.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[30] Alfred Sorbello, Syed Arefinul Haque, Rashedul Hasan, Richard Jermyn,
    Ahmad Hussein, Alex Vega, Krzysztof Zembrzuski, Anna Ripple, 和 Mitra Ahadpour。《人工智能支持的软件原型用于通过电子健康记录进行阿片类药物监测：开发与可用性研究》。JMIR
    AI，2:e45000，2023年7月。'
- en: '[31] Paul E Stang, Patrick B Ryan, Judith A Racoosin, J Marc Overhage, Abraham G
    Hartzema, Christian Reich, Emily Welebob, Thomas Scarnecchia, and Janet Woodcock.
    Advancing the science for active surveillance: rationale and design for the observational
    medical outcomes partnership. Annals of internal medicine, 153(9):600–606, 2010.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[31] Paul E Stang, Patrick B Ryan, Judith A Racoosin, J Marc Overhage, Abraham
    G Hartzema, Christian Reich, Emily Welebob, Thomas Scarnecchia, 和 Janet Woodcock。《推动主动监测科学的发展：观察性医学结果合作伙伴关系的理由和设计》。内科学年鉴，153(9):600–606，2010年。'
- en: '[32] Zhaoyue Sun, Gabriele Pergola, Byron Wallace, and Yulan He. Leveraging
    ChatGPT in pharmacovigilance event extraction: An empirical study. In Yvette Graham
    and Matthew Purver, editors, Proceedings of the 18th Conference of the European
    Chapter of the Association for Computational Linguistics (Volume 2: Short Papers),
    pages 344–357, St. Julian’s, Malta, March 2024\. Association for Computational
    Linguistics.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[32] Zhaoyue Sun, Gabriele Pergola, Byron Wallace, 和 Yulan He。《在药物监测事件提取中利用ChatGPT：一项实证研究》。在Yvette
    Graham和Matthew Purver编著的《第18届欧洲计算语言学协会会议论文集（第2卷：短文）》中，第344–357页，马耳他圣朱利安，2024年3月。计算语言学协会。'
- en: '[33] Liyan Tang, Zhaoyi Sun, Betina Idnay, Jordan G Nestor, Ali Soroush, Pierre A
    Elias, Ziyang Xu, Ying Ding, Greg Durrett, Justin F Rousseau, et al. Evaluating
    large language models on medical evidence summarization. npj Digital Medicine,
    6(1):158, 2023.'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[33] Liyan Tang, Zhaoyi Sun, Betina Idnay, Jordan G Nestor, Ali Soroush, Pierre
    A Elias, Ziyang Xu, Ying Ding, Greg Durrett, Justin F Rousseau等人。《评估大型语言模型在医学证据总结中的应用》。npj数字医学，6(1):158，2023年。'
- en: '[34] Xiangru Tang, Anni Zou, Zhuosheng Zhang, Yilun Zhao, Xingyao Zhang, Arman
    Cohan, and Mark Gerstein. Medagents: Large language models as collaborators for
    zero-shot medical reasoning. arXiv preprint arXiv:2311.10537, 2023.'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[34] 唐向如、邹安妮、张卓生、赵逸伦、张兴耀、阿尔曼·科汉和马克·格斯坦。Medagents：作为零样本医学推理协作伙伴的大语言模型。arXiv
    预印本 arXiv:2311.10537，2023。'
- en: '[35] Mert Tiftikci, Arzucan Özgür, Yongqun He, and Junguk Hur. Machine learning-based
    identification and rule-based normalization of adverse drug reactions in drug
    labels. BMC bioinformatics, 20:1–9, 2019.'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[35] Mert Tiftikci、Arzucan Özgür、Yongqun He 和 Junguk Hur。基于机器学习的药物标签中不良药物反应的识别与规则基础的标准化。BMC
    生物信息学，20:1–9，2019。'
- en: '[36] Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne
    Lachaux, Timothée Lacroix, Baptiste Rozière, Naman Goyal, Eric Hambro, Faisal
    Azhar, et al. Llama: Open and efficient foundation language models. arXiv preprint
    arXiv:2302.13971, 2023.'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[36] Hugo Touvron、Thibaut Lavril、Gautier Izacard、Xavier Martinet、Marie-Anne
    Lachaux、Timothée Lacroix、Baptiste Rozière、Naman Goyal、Eric Hambro、Faisal Azhar
    等。Llama：开放且高效的基础语言模型。arXiv 预印本 arXiv:2302.13971，2023。'
- en: '[37] Chris von Csefalvay. Daedra: A language model for predicting outcomes
    in passive pharmacovigilance reporting. arXiv preprint arXiv:2402.10951, 2024.'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[37] Chris von Csefalvay。Daedra：用于预测被动药物安全报告中结果的语言模型。arXiv 预印本 arXiv:2402.10951，2024。'
- en: '[38] H. Wang, Y.J. Ding, and Y. Luo. Future of chatgpt in pharmacovigilance.
    Drug Safety, 46:711–713, 2023.'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[38] 王浩、丁跃军和罗扬。ChatGPT 在药物安全监测中的未来。药物安全，46:711–713，2023。'
- en: '[39] Yubo Wang, Xueguang Ma, and Wenhu Chen. Augmenting black-box llms with
    medical textbooks for clinical question answering. arXiv preprint arXiv:2309.02233,
    2023.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[39] 王宇博、马雪光和陈文虎。通过医学教科书增强黑箱 LLMs 以回答临床问题。arXiv 预印本 arXiv:2309.02233，2023。'
- en: '[40] Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed Chi,
    Quoc V Le, Denny Zhou, et al. Chain-of-thought prompting elicits reasoning in
    large language models. Advances in neural information processing systems, 35:24824–24837,
    2022.'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[40] Jason Wei、Xuezhi Wang、Dale Schuurmans、Maarten Bosma、Fei Xia、Ed Chi、Quoc
    V Le、Denny Zhou 等。链式思考提示在大语言模型中引发推理。神经信息处理系统进展，35:24824–24837，2022。'
- en: '[41] Qingyun Wu, Gagan Bansal, Jieyu Zhang, Yiran Wu, Shaokun Zhang, Erkang
    Zhu, Beibin Li, Li Jiang, Xiaoyun Zhang, and Chi Wang. Autogen: Enabling next-gen
    llm applications via multi-agent conversation framework. arXiv preprint arXiv:2308.08155,
    2023.'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[41] 吴清云、班加恩、张洁玉、吴怡然、张绍坤、朱尔康、李贝宾、姜力、张晓云和王驰。Autogen：通过多代理对话框架启用下一代 LLM 应用。arXiv
    预印本 arXiv:2308.08155，2023。'
- en: '[42] xAI. grok-1.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[42] xAI。grok-1。'
- en: '[43] Zhiheng Xi, Wenxiang Chen, Xin Guo, Wei He, Yiwen Ding, Boyang Hong, Ming
    Zhang, Junzhe Wang, Senjie Jin, Enyu Zhou, et al. The rise and potential of large
    language model based agents: A survey. arXiv preprint arXiv:2309.07864, 2023.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[43] 习志恒、陈文祥、郭欣、何伟、丁怡文、洪博阳、张明、王俊哲、金森杰、周恩宇等。基于大语言模型的智能体的崛起与潜力：综述。arXiv 预印本 arXiv:2309.07864，2023。'
- en: '[44] Miao Xiong, Zhiyuan Hu, Xinyang Lu, YIFEI LI, Jie Fu, Junxian He, and
    Bryan Hooi. Can LLMs express their uncertainty? an empirical evaluation of confidence
    elicitation in LLMs. In The Twelfth International Conference on Learning Representations,
    2024.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[44] 缪雄、胡志远、卢欣阳、李亦飞、傅洁、何俊贤和布赖恩·霍伊。LLMs 能否表达它们的不确定性？对 LLMs 中信心引导的实证评估。第十二届国际学习表示大会，2024。'
- en: '[45] Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Tom Griffiths, Yuan
    Cao, and Karthik Narasimhan. Tree of thoughts: Deliberate problem solving with
    large language models. Advances in Neural Information Processing Systems, 36,
    2024.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[45] 姚顺宇、俞巅、杰弗里·赵、伊扎克·沙夫兰、汤姆·格里菲斯、曹媛和卡尔提克·纳拉辛汉。思维树：与大语言模型进行深思熟虑的问题解决。神经信息处理系统进展，36，2024。'
- en: '[46] Cyril Zakka, Rohan Shad, Akash Chaurasia, Alex R. Dalal, Jennifer L. Kim,
    Michael Moor, Robyn Fong, Curran Phillips, Kevin Alexander, Euan Ashley, Jack
    Boyd, Kathleen Boyd, Karen Hirsch, Curt Langlotz, Rita Lee, Joanna Melia, Joanna
    Nelson, Karim Sallam, Stacey Tullis, Melissa Ann Vogelsong, John Patrick Cunningham,
    and William Hiesinger. Almanac — retrieval-augmented language models for clinical
    medicine. NEJM AI, 1(2):AIoa2300068, 2024.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[46] Cyril Zakka、Rohan Shad、Akash Chaurasia、Alex R. Dalal、Jennifer L. Kim、Michael
    Moor、Robyn Fong、Curran Phillips、Kevin Alexander、Euan Ashley、Jack Boyd、Kathleen
    Boyd、Karen Hirsch、Curt Langlotz、Rita Lee、Joanna Melia、Joanna Nelson、Karim Sallam、Stacey
    Tullis、Melissa Ann Vogelsong、John Patrick Cunningham 和 William Hiesinger。年鉴——用于临床医学的检索增强语言模型。NEJM
    AI，1(2):AIoa2300068，2024。'
- en: Supplementary Material
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录材料
- en: 'Section [A](#A1 "Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    includes an in-depth description of the core primitives of our multi-agent framework.
    Section [B](#A2 "Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    offers the experimental details, including the system prompts for each agent,
    the details on our OMOP evaluation, and discussions of the postprocessing of the
    generated scores and justifications. In Section [C](#A3 "Appendix C Detailed behavior
    of MALADE: Successful and Failed Behavior ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"), we analyze
    both successful and unsuccessful instances of MALADE, presenting comprehensive
    logs for selected examples. Section [D](#A4 "Appendix D Ablations ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    presents an ablation study that evaluates the individual contributions of key
    components to the overall system efficacy; namely, the iterative refinement facilitated
    by Agent-Critic interactions, and the integration of external knowledge through
    RAG. Finally, in Section [E](#A5 "Appendix E Variance of MALADE’s outputs ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we assess how much the variance of numerical outputs by the random sampling of
    LLMs affects the variance of scores output by the entire MALADE system.'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '部分 [A](#A1 "附录 A 面向代理的编程 ‣ MALADE: 通过检索增强生成的 LLM 驱动代理的编排用于药物警戒") 包含了我们多代理框架核心原语的深入描述。部分 [B](#A2
    "附录 B MALADE 实现的详细描述 ‣ MALADE: 通过检索增强生成的 LLM 驱动代理的编排用于药物警戒") 提供了实验细节，包括每个代理的系统提示、我们的
    OMOP 评估细节以及生成的分数和理由的后处理讨论。在部分 [C](#A3 "附录 C MALADE 的详细行为：成功与失败行为 ‣ MALADE: 通过检索增强生成的
    LLM 驱动代理的编排用于药物警戒") 中，我们分析了 MALADE 的成功与失败实例，并展示了选定示例的详细日志。部分 [D](#A4 "附录 D 消融实验
    ‣ MALADE: 通过检索增强生成的 LLM 驱动代理的编排用于药物警戒") 展示了一个消融研究，评估了关键组件对整体系统效能的个体贡献；即由代理-批评家互动促进的迭代改进以及通过
    RAG 整合外部知识。最后，在部分 [E](#A5 "附录 E MALADE 输出的方差 ‣ MALADE: 通过检索增强生成的 LLM 驱动代理的编排用于药物警戒")
    中，我们评估了 LLM 随机采样产生的数值输出的方差对整个 MALADE 系统输出分数方差的影响。'
- en: Appendix A Agent-Oriented Programming
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 A 面向代理的编程
- en: This section describes the core abstractions needed to implement a complex LLM-based
    application such as MALADE. The open-source multi-agent LLM framework [langroid](https://github.com/langroid/langroid) [[3](#bib.bib3)]
    has an elegant, intuitive and flexible implementation of these abstractions, and
    MALADE is built on top of this library.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了实现复杂的基于 LLM 的应用程序（如 MALADE）所需的核心抽象。开源的多代理 LLM 框架 [langroid](https://github.com/langroid/langroid)
    [[3](#bib.bib3)] 优雅、直观且灵活地实现了这些抽象，MALADE 基于此库构建。
- en: 'A.1 Tool Use: Example'
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1 工具使用：示例
- en: 'As a simple example, a SQL query tool can be specified as a JSON structure
    with a sql field (containing the SQL query) and a db field (containing the name
    of the database). The LLM may be instructed with a system prompt of the form:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个简单的例子，SQL 查询工具可以被指定为一个包含 sql 字段（包含 SQL 查询）和 db 字段（包含数据库名称）的 JSON 结构。LLM
    可能会被指示使用如下形式的系统提示：
- en: When the user asks a question about employees,use the SQLTool described in the below schema,and the results of this tool will be sent back to you, and you can use theseto respond to the user’s question, or correct your SQL queryif there is a syntax error.The
    tool handler would detect this specific tool in the LLM’s response, parse this
    JSON structure, extract the sql and db fields, run the query on the specified
    database, and return the result if the query ran successfully, otherwise return
    an error message. Depending on how the multi-agent system is organized, the query
    result or error message may be handled by the same agent (i.e., its LLM), which
    may either summarize the results in narrative form, or revise the query if the
    error message indicates a syntax error.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户询问有关员工的问题时，请使用下面模式中描述的 SQLTool，工具的结果将发送回给你，你可以使用这些结果来回答用户的问题，或者如果有语法错误则修正
    SQL 查询。工具处理程序会检测到 LLM 响应中的特定工具，解析该 JSON 结构，提取 sql 和 db 字段，在指定的数据库上运行查询，并在查询成功时返回结果，否则返回错误信息。根据多代理系统的组织方式，查询结果或错误消息可能由同一代理（即其
    LLM）处理，该代理可能会以叙述形式总结结果，或在错误消息表明语法错误时修正查询。
- en: A.2 Retrieval Augmented Generation
  id: totrans-192
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2 检索增强生成
- en: 'RAG involves two phases: (a) a ingestion phase, where documents are sharded
    into reasonable-size chunks and ingested into a suitable type of document-store,
    and (b) a query phase, where top-$k$ nearest-neighbors of this vector (based on
    cosine similarity) are found from the vector database, and their corresponding
    document chunks are retrieved.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: RAG 涉及两个阶段：（a）摄取阶段，将文档分割成合理大小的块，并存入合适类型的文档存储中；（b）查询阶段，从向量数据库中找到与该向量最接近的前-$k$
    个邻居（基于余弦相似度），并检索它们对应的文档块。
- en: '![Refer to caption](img/b79f5a107404ae6915591c937d9b5f00.png)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/b79f5a107404ae6915591c937d9b5f00.png)'
- en: 'Figure 6: A simple agent with RAG. During the ingestion phase, documents are
    sharded into document chunks. At the query phase, top-$k$ chunks most relevant
    to the original query are retrieved, based on lexical relevance and semantic relevance.
    Now we prompt the LLM with the augmented query to ground its response to the documents.'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6：一个简单的 RAG 代理。在摄取阶段，文档被分割成文档块。在查询阶段，基于词汇相关性和语义相关性，检索与原始查询最相关的前-$k$ 个块。现在我们用扩展查询来提示
    LLM，使其回答基于这些文档。
- en: A.3 From LLM to Agent-Oriented Programming
  id: totrans-196
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.3 从 LLM 到面向代理的编程
- en: 'If we view an LLM as a function with signature string $\rightarrow$ string,
    it is possible to express the concept of an agent, tool, and other constructs
    in terms of derived function signatures, as shown in Table [4](#A1.T4 "Table 4
    ‣ A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance").'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '如果我们将 LLM 视为具有签名 string $\rightarrow$ string 的函数，则可以用派生函数签名来表达代理、工具和其他构造的概念，如表 [4](#A1.T4
    "表 4 ‣ A.3 从 LLM 到面向代理的编程 ‣ 附录 A 面向代理的编程 ‣ MALADE: 用于药物监测的 LLM 驱动代理的协调") 所示。'
- en: '| Function Description | Function Signature |'
  id: totrans-198
  prefs: []
  type: TYPE_TB
  zh: '| 函数描述 | 函数签名 |'
- en: '| --- | --- |'
  id: totrans-199
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| LLM | string  $\rightarrow$ string    string for the original query. |'
  id: totrans-200
  prefs: []
  type: TYPE_TB
  zh: '| LLM | string  $\rightarrow$ string    string 用于原始查询。 |'
- en: '| Chat interface | [string]  $\times$ string    [string] is for previous messages⁵⁵5Note
    that in reality, separator tokens are added to distinguish messages, and the messages
    are tagged with metadata indicating the sender, among other things.. |'
  id: totrans-201
  prefs: []
  type: TYPE_TB
  zh: '| 聊天界面 | [string]  $\times$ string    [string] 用于以前的消息⁵⁵5 请注意，在实际情况中，分隔符令牌被添加以区分消息，消息被标记上包括发送者在内的元数据。
    |'
- en: '| Agent | string  $\times$ string    string is for system prompt. |'
  id: totrans-202
  prefs: []
  type: TYPE_TB
  zh: '| 代理 | string  $\times$ string    string 用于系统提示。 |'
- en: '| Agent with tool | string  $\times$ string |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '| 带工具的代理 | string  $\times$ string |'
- en: '| Parser with type T | string $\rightarrow$ T |'
  id: totrans-204
  prefs: []
  type: TYPE_TB
  zh: '| 带类型 T 的解析器 | string $\rightarrow$ T |'
- en: '| Callback with type T | T $\rightarrow$ string |'
  id: totrans-205
  prefs: []
  type: TYPE_TB
  zh: '| 带类型 T 的回调 | T $\rightarrow$ string |'
- en: '| General Agent with state type S | S $\times$ string |'
  id: totrans-206
  prefs: []
  type: TYPE_TB
  zh: '| 带状态类型 S 的通用代理 | S $\times$ string |'
- en: 'Table 4: From LLM to agent-oriented programming. An LLM is essentially a message
    transformer. Adding “tool” (or function calling) capability to LLM requires a
    parser and a callback that performs arbitrary computation and returns a string.
    The serialized instances of T correspond to a language $L$, this allows the LLM
    to express the intention to execute Callback with arbitrary instances of T. Finally,
    we incorporate state by making Agent and Callback transducers, and have the general
    form in the last row.'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 表 4：从 LLM 到面向代理的编程。LLM 本质上是一个消息转换器。给LLM添加“工具”（或函数调用）能力需要一个解析器和一个执行任意计算并返回字符串的回调。T
    的序列化实例对应于一个语言 $L$，这允许 LLM 表达执行带有任意 T 实例的回调的意图。最后，我们通过使 Agent 和 Callback 成为变换器来结合状态，并在最后一行中得出通用形式。
- en: A.4 Detailed Description of Multi-Agent Orchestration
  id: totrans-208
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4 多代理协调的详细描述
- en: 'When building an LLM-based multi-agent system, an orchestration mechanism is
    critical to manage the flow of messages between agents, to ensure task progress,
    and handle deviations from instructions. In this work, we leverage [Langroid](https://github.com/langroid/langroid)’s
    simple yet versatile orchestration mechanism that seamlessly handles:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建基于LLM的多代理系统时，协调机制对于管理代理之间消息流、确保任务进展和处理指令偏差至关重要。在这项工作中，我们利用了[Langroid](https://github.com/langroid/langroid)的简单而多功能的协调机制，它可以无缝处理：
- en: •
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: user interaction
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 用户交互
- en: •
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: tool handling
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 工具处理
- en: •
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: sub-task delegation
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 子任务委派
- en: 'Recall that we view an agent as a message transformer; it may transform an
    incoming message using one of its three “native” responder methods, all of which
    have the same function signature: string $\rightarrow$ string:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，我们将代理视为消息转换器；它可以使用其三种“本地”响应方法之一来转换传入的消息，这些方法都有相同的函数签名：字符串 $\rightarrow$
    字符串：
- en: •
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: llm_response returns the LLM’s response to the input message. Whenever this
    method is invoked, the agent updates its dialog history (typically consisting
    of alternating user and LLM messages).
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`llm_response` 返回LLM对输入消息的响应。每当调用此方法时，代理会更新其对话历史（通常包含交替的用户和LLM消息）。'
- en: •
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: user_response prompts the user for input and returns their response.
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`user_response` 提示用户输入并返回他们的响应。'
- en: •
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: agent_response by default only handles a “tool message,” i.e., one that contains
    an llm-generated structured response, performs any requested actions, and returns
    the result as a string. An agent_response method can have other uses besides handling
    tool messages, such as handling scenarios where an LLM “forgot” to use a tool,
    or used a tool incorrectly, and so on.
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`agent_response` 默认仅处理“工具消息”，即包含LLM生成的结构化响应的消息，执行任何请求的操作，并将结果作为字符串返回。`agent_response`
    方法除了处理工具消息外，还可以有其他用途，例如处理LLM“忘记”使用工具的情况，或错误地使用工具等。'
- en: To see why it is useful to have these responder methods, consider first a simple
    example of creating a basic chat loop with the user. It is trivial to create such
    a loop by alternating between user_response and llm_response . Now suppose we
    instruct the agent to either directly answer the user’s question or perform a
    web-search. Then it is possible that sometimes the llm_response will produce a
    ”tool message”, say WebSearchTool, which we would handle with the agent_response method.
    This requires a slightly different, and more involved, way of iterating among
    the agent’s responder methods. From a coding perspective, it is useful to hide
    the actual iteration logic by wrapping an Agent class in a separate class, which
    we call a Task, which encapsulates all of the orchestration logic. Users of the
    Task class can then define the agent, tools, and any sub-tasks, wrap the agent
    in a task object of class Task, and simply call task.run(), letting the Task class
    deal with the details of orchestrating the agent’s responder methods, determining
    task completion, and invoking sub-tasks.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解这些响应方法为何有用，请首先考虑一个简单的例子，即创建一个基本的用户聊天循环。通过在 `user_response` 和 `llm_response`
    之间交替，创建这样的循环非常简单。现在假设我们指示代理直接回答用户的问题或执行网络搜索。那么有可能 `llm_response` 会产生一个“工具消息”，例如
    WebSearchTool，我们将使用 `agent_response` 方法处理。这需要一种稍微不同且更复杂的方式来在代理的响应方法之间进行迭代。从编码的角度来看，通过将代理类包装在一个单独的类中（我们称之为
    Task）来隐藏实际的迭代逻辑是很有用的，这个 Task 类封装了所有的协调逻辑。Task 类的用户可以定义代理、工具和任何子任务，将代理包装在 Task
    类的任务对象中，并简单地调用 `task.run()`，让 Task 类处理协调代理响应方法的细节、确定任务完成情况并调用子任务。
- en: 'The orchestration mechanism of a Task  object works as follows. When a task
    object is created from an agent, a sequence of eligible responders is created,
    which includes the agent’s three “native” responder agents in the sequence: agent_response ,
    llm_response , user_response . The type signature of the run is string $\rightarrow$
    string, just like the Agent’s native responder methods, and this is the key to
    seamless delegation of tasks to sub-tasks. A list of subtasks can be added to
    a task  object via task.add_sub_tasks([t1, t2, ... ]), where t1, t2, ... are other
    Task objects. The result of this is that the run method of each sub-task is appended
    to the sequence of eligible responders in the parent task object.'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: '`Task` 对象的编排机制如下。当一个任务对象由代理创建时，会创建一个合格响应者的序列，其中包括代理的三个“原生”响应者：agent_response、llm_response、user_response。`run`
    的类型签名是 string $\rightarrow$ string，就像代理的原生响应者方法一样，这对于将任务无缝委派给子任务至关重要。可以通过 `task.add_sub_tasks([t1,
    t2, ... ])` 将子任务列表添加到 `Task` 对象中，其中 t1、t2、... 是其他 `Task` 对象。结果是，每个子任务的 `run` 方法会被附加到父任务对象中合格响应者的序列中。'
- en: A task always maintains a current pending message (CPM), which is the latest
    message ”awaiting” a valid response from a responder. At a high level the run
    method of a task attempts to repeatedly find a valid response to the CPM, until
    the task is done. This is achieved by repeatedly invoking the step method, which
    represents a ”turn” in the conversation. The step method sequentially tries the
    eligible responders from the beginning of the eligible-responders list, until
    it finds a valid response, defined as a non-null or terminating message (i.e.
    one that signals that the task is done). In particular, this step() algorithm
    implies that a Task delegates to a sub-task only if the task’s native responders
    have no valid response.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 任务始终维护一个当前待处理消息（CPM），这是最新的“等待”响应者有效响应的消息。在高层次上，任务的 `run` 方法尝试重复寻找对 CPM 的有效响应，直到任务完成。这是通过重复调用
    `step` 方法来实现的，`step` 方法代表对话中的一个“回合”。`step` 方法依次尝试合格响应者列表中的响应者，直到找到有效响应，有效响应被定义为非空或终止消息（即，表示任务已完成的消息）。特别地，这种
    `step()` 算法意味着一个 `Task` 只有在任务的原生响应者没有有效响应时才委派给子任务。
- en: 'There are a few simple rules that govern how step works: (a) a responder entity
    (either a native entity or a sub-task) cannot respond if it just responded in
    the previous step (this prevents a responder from ”talking to itself”, (b) when
    a response contains ”DONE” the task is ready to exit and return the CPM as the
    result of the task, (c) when an entity ”in charge” of the task has a null response,
    the task is considered finished and ready to exit, (d) if the response of an entity
    or subtask is a structured message containing a recipient field, then the specified
    recipient task or entity will be the only one eligible to respond at the next
    step.'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些简单的规则来指导 `step` 的工作：(a) 如果响应者实体（无论是原生实体还是子任务）在上一步刚刚响应过，它不能再次响应（这防止了响应者“自言自语”），(b)
    当响应包含“DONE”时，任务准备退出并将 CPM 作为任务的结果返回，(c) 当任务的“负责人”实体有空响应时，任务被认为已完成并准备退出，(d) 如果某个实体或子任务的响应是包含收件人字段的结构化消息，那么指定的收件人任务或实体将是下一个步骤中唯一合格的响应者。
- en: Once a valid response is found in a step, the CPM is updated to this response,
    and the next step starts the search for a valid response from the beginning of
    the eligible responders list. When a response signals that the task is done (e.g.
    contains the special string ”DONE”), the run method returns the CPM as the result
    of the task. This is a highly simplified account of the orchestration mechanism,
    and the actual implementation is more involved.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦在一个步骤中找到有效响应，CPM 会更新为该响应，接下来的步骤将从合格响应者列表的开始处开始搜索有效响应。当响应信号表明任务已完成（例如，包含特殊字符串“DONE”）时，`run`
    方法将 CPM 作为任务的结果返回。这是编排机制的高度简化描述，实际实现要复杂得多。
- en: The above simple design is surprising powerful and can support a wide variety
    of task structures, including trees and DAGs. As a simple illustrative example,
    tool-handling has a natural implementation. The LLM is instructed to use a certain
    JSON-structured message as a tool, and thus the llm_response method can produce
    a structured message. This structured message is then handled by the agent_response method,
    and the resulting message updates the CPM. The llm_response method then becomes
    eligible to respond again, and the process continues.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 上述简单设计非常强大，能够支持多种任务结构，包括树结构和有向无环图（DAG）。作为一个简单的示例，工具处理具有自然实现。LLM 被指示使用某个 JSON
    结构的消息作为工具，因此 llm_response 方法可以生成结构化消息。然后，由 agent_response 方法处理该结构化消息，结果消息更新 CPM。然后，llm_response
    方法再次变得可以响应，过程继续。
- en: 'Figure [2](#S3.F2 "Figure 2 ‣ 3.2 Multi-Agent Orchestration ‣ 3 Preliminaries
    on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") shows a schematic of the task orchestration
    and delegation mechanism.'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: '图[2](#S3.F2 "图 2 ‣ 3.2 多代理协调 ‣ 3 基于 LLM 的代理的初步工作 ‣ MALADE: 利用检索增强生成的 LLM 驱动代理的药物警戒")
    显示了任务协调和委托机制的示意图。'
- en: Appendix B Detailed Descriptions on MALADE Implementation
  id: totrans-230
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 B MALADE 实施的详细描述
- en: B.1 Prompts to Each Agent
  id: totrans-231
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.1 对每个代理的提示
- en: 'STEP1: finding representative drugs under each drug category.'
  id: totrans-232
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 第一步：在每个药物类别下寻找代表性药物。
- en: 'This is the full prompt to DrugFinder:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 DrugFinder 的完整提示：
- en: You  are  a  helpful  assistant  with  general  medical  and  pharmacological  knowledge.  I  will  provide  you  with  a  list  of  drugs,  and  the  result  of  a  query  on  a  medical  database  with  their  usage  rates;  your  goal  is  to  find  N  representative  drugs  in  category  \{cat\}  out  of  the  provided  drugs.Prefer  generic  names  if  possible,  and  do  not  include  both  a  brand  and  generic  name  for  the  same  drug  in  your  list.If  possible,  prefer  drugs  with  different  active  ingredients(i.e.  avoid  derivatives  of  a  drug  already  in  the  list),keeping  your  choices  to  the  most  basic  variant  of  a  given  drugfrom  the  list  (use  the  total  prescription  rate  of  variants  of  the  same  base  drug  to  select  the  top  drugs);  disregard  this  if  you  cannot  find  N  with  this  restriction.  If  fewer  than  N  meet  the  conditions,  you  may  include  fewer  than  N  (but  never  more).The  names  of  the  selected  representatives  must  EXACTLY  match  one  of  the  provided  drugs;  choose  the  names  from  the  original  list,  not  the  database  query.You  must  provide  your  final  answer  with  the  ‘final_answer‘  tool/function;  make  sure  to  clearly  state  my  question,  as  well  as  the  reasoning  used  to  derive  the  answer.  Include  the  requirements  on  your  answer  in  the  ‘question‘  field.Once  the  critic  is  satisfied  with  your  answer,  send  me  the  answer  with  the  ‘submit_answer‘  tool/function.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 你是一个具备一般医学和药理学知识的有用助手。我将提供一份药物清单，以及医疗数据库中这些药物的使用率查询结果；你的目标是从提供的药物中找到 N 个代表性的药物类别\{cat\}。如果可能，优先选择通用名称，并且在你的清单中不要同时包含同一药物的品牌和通用名称。如果可能，优先选择具有不同活性成分的药物（即避免选择已经在列表中的药物的衍生物），保持你的选择为列表中某一药物的最基本变体（使用同一基础药物的变体的总处方率来选择顶级药物）；如果在这种限制下无法找到
    N 个药物，则忽略此限制。如果满足条件的药物少于 N 个，你可以包括少于 N 个（但绝对不能超过）。所选择的代表性药物的名称必须完全匹配提供的药物之一；从原始列表中选择名称，而不是数据库查询。你必须使用“final_answer”工具/功能提供最终答案；确保清楚地说明我的问题，以及推导答案的理由。将答案的要求包含在“question”字段中。一旦评论者对你的答案感到满意，使用“submit_answer”工具/功能将答案发送给我。
- en: 'This is the full prompt to the Critic agent:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 Critic 代理的完整提示：
- en: You  are  also  an  expert  in  medical  and  pharmacological  reasoning.Your  goal  is  to  ensure  that  the  selected  drugs  are  distinct  members  of  the  category  \{cat\}  of  drugs.  You  will  consider  information  provided  directly  to  the  user  to  be  reliable  (for  example,  this  might  include  prescription  rates  and  a  complete  list  of  drugs  in  category  \{cat\}).  Unless  this  contradicts  your  pharmacological  knowledge,  the  user’s  choices  of  representatives  for  a  category  are  acceptable  unless  they  do  not  represent  the  basic  form  of  a  given  drug.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 你也是医学和药理推理的专家。你的目标是确保所选药物是类别\{cat\}中不同的成员。你会将直接提供给用户的信息视为可靠（例如，这可能包括处方率和类别\{cat\}中的完整药物列表）。除非这与您的药理知识相矛盾，否则用户选择的类别代表是可以接受的，前提是它们能代表给定药物的基本形式。
- en: 'STEP2: identifying the interaction between each drug and each outcome.'
  id: totrans-237
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: STEP2：识别每种药物与每个结果之间的相互作用。
- en: Below is the full prompt to DrugAgent.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是DrugAgent的完整提示。
- en: 'You  will  receive  questions  involving  medical  data.You  are  experienced  in  general  medical  reasoning,  but  must  consult  references  for  any  specific  medical  knowledge  required  to  answer  my  questions.You  have  access  to  ‘FDAHandler‘,  who  will  answer  questions  you  ask  about  specific  drugs  using  FDA  data.  You  must  use  the  ‘recipient_message‘  tool/function  to  ask  these  questions,  and  the  ‘intended_recipient‘  MUST  be  ‘FDAHandler‘  anytime  you  use  this  tool.Ensure  that  you  ask  FDAHandler  for  the  specific  information  you  need.As  some  potential  complications  are  listed  in  FDA  labels  as  lacking  a  verified  causal  relationship,  make  certain  that  your  final  answer  expresses  the  degree  of  reliability  of  your  answer.  Similarly,  make  sure  to  clearly  express  the  degree  of  risk  associated  (i.e.  is  the  condition  a  rare  or  a  common  side  effect,  or  does  a  drug  rarely  or  frequently  result  in  reduced  risk  of  a  condition).If  FDAHandler  cannot  answer  your  question  then  your  answershould  be  {NO_ANSWER},  because  the  FDA  label  data  does  notspecify  the  answer.  If  FDAHandler  answers  with  {NO_ANSWER}that  means  that  the  FDA  label  for  the  drug  does  notcontain  the  information  requested  (and,  in  particular,  itmeans  that  it  does  not  mention  the  condition);  hence,  youranswer  should  be  {NO_ANSWER}.  This  indicates  that  theremay  not  be  any  effect  on  the  risk  of  the  condition,  make  sure  to  explain  this  in  your  justification.IMPORTANT:  if  multiple  attempts  fail  to  retrieve  any  relevant  information,  there  is  no  need  to  continue  asking  questions  to  FDAHandler;  assume  that  the  information  is  not  in  the  FDA  labels  and  so  FDAHandler  cannot  answer.You  MUST  specifically  tell  the  critic  why  you  could  notfind  an  answer  to  the  question;  be  sure  to  specify  thatthe  FDAHandler  answered  with  {NO_ANSWER}  if  that  is  the  reason.You  must  provide  your  final  answer  with  the  ‘final_answer‘tool/function;  make  sure  to  clearly  state  my  question,  thereasoning  used  to  derive  the  answer,  including  the  questions  asked  to  FDAHandler  and  a  summary  of  the  results,  as  well  as  your  final  answer  in  the  ‘answer‘  field.Once  the  critic  is  satisfied  with  your  answer,  say  {DONE},and  give  me  the  answer  and  justification  for  it.  Make  sureto  provide  your  answer  again,  do  not  just  use  the  answersent  to  the  critic.  Include  any  relevant  details  provided  by  FDAAgent.If  the  critic  is  satisfied  and  your  answer  is  {NO_ANSWER},say  {DONE}  {NO_ANSWER}  and  provide  a  justification.IMPORTANT:  say  {DONE}  specifically,  not  DONE.'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 你将接收涉及医学数据的问题。你在一般医学推理方面经验丰富，但必须查阅参考资料来回答我的具体医学知识问题。你可以访问‘FDAHandler’，他将使用FDA数据回答你关于特定药物的问题。你必须使用‘recipient_message’工具/功能来提问这些问题，并且每次使用此工具时，‘intended_recipient’必须是‘FDAHandler’。确保你向FDAHandler询问你需要的具体信息。由于某些潜在并发症在FDA标签中被列为缺乏验证的因果关系，确保你的最终回答表达出答案的可靠程度。类似地，确保明确表达与之相关的风险程度（即，是否是罕见或常见的副作用，或药物是否少见或频繁地减少某种病症的风险）。如果FDAHandler无法回答你的问题，那么你的回答应为{NO_ANSWER}，因为FDA标签数据未指定答案。如果FDAHandler回答为{NO_ANSWER}，则意味着药物的FDA标签不包含所请求的信息（特别是，未提及该情况）；因此，你的回答应为{NO_ANSWER}。这表示可能对该病症的风险没有任何影响，请在你的说明中解释这一点。重要提示：如果多次尝试未能获取任何相关信息，则无需继续向FDAHandler提问；假设信息不在FDA标签中，因此FDAHandler无法回答。你必须具体告诉Critic你无法找到问题答案的原因；如果FDAHandler回答为{NO_ANSWER}，一定要明确说明。你必须使用‘final_answer’工具/功能提供你的最终答案；确保清楚说明我的问题、得出答案的推理，包括向FDAHandler提出的问题以及结果摘要，以及在‘answer’字段中的最终答案。一旦Critic对你的答案感到满意，就说{DONE}，并给出答案和理由。确保再次提供你的答案，不仅仅是使用发送给Critic的答案。包括FDAAgent提供的任何相关细节。如果Critic满意且你的答案是{NO_ANSWER}，则说{DONE}
    {NO_ANSWER}并提供理由。重要提示：一定要说{DONE}，而不是DONE。
- en: 'This is the full prompt to the Critic agent:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 这是对Critic代理的完整提示：
- en: You  are  also  experienced  in  medical  reasoning,  and  have  general  medical  knowledge.  Unless  the  responses  are  inconsistent  with  your  medical  (or  common-sense)  knowledge,  you  generally  trust  responses  from  FDAHandler.The  answer  should  express  the  strength  of  evidence  for  the  answer  and  the  magnitude  of  the  effect.  If  the  user  states  that  FDAAgent  does  not  have  this  information,  you  should  accept  it.If  the  answer  given  contains  {NO_ANSWER},  accept  it  as  long  as  the  answer  clearly  expresses  why  it  was  not  possible  to  answer  the  question.  If  it  states  that  this  is  because  FDAHandler  responded  with  {NO_ANSWER},  you  should  accept  it  as  sufficient  justification.Otherwise,  ask  the  user  to  express  whether  FDAHandler  responded  with  {NO_ANSWER},  and,  if  not,  to  state  why  it  was  not  possible  to  answer  the  question.  If  it  does  so,  the  answer  is  acceptable  and  the  other  requirements  need  not  be  enforced.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 你在医学推理方面也有经验，并且拥有一般的医学知识。除非回应与您的医学（或常识）知识不一致，否则您通常信任FDAHandler的回应。答案应该表达出回答的证据强度和效果的大小。如果用户声明FDAAgent没有这些信息，你应该接受这个声明。如果给出的答案包含{NO_ANSWER}，只要答案清楚地表达了为什么无法回答问题，你应该接受它。如果答案中说明这是因为FDAHandler回应了{NO_ANSWER}，你应该接受这个作为充分的理由。否则，要求用户说明FDAHandler是否回应了{NO_ANSWER}，如果没有，说明为什么无法回答问题。如果确实如此，则答案是可接受的，其他要求无需强制执行。
- en: 'In this case, the Critic agent similarly behaves as a medical expert; in general,
    the Critic must always behave as if proficient with any task that the orchestrator
    agent will do; this is specified as: “You are also experienced in medical reasoning,
    and have general medical knowledge. Unless the responses are inconsistent with
    your medical (or common-sense) knowledge, you generally trust responses from FDAHandler.”'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，批评代理人类似于医学专家；一般来说，批评者必须始终表现得对协调者代理人将要做的任何任务都很熟练；这被规定为：“你在医学推理方面也有经验，并且拥有一般的医学知识。除非回应与您的医学（或常识）知识不一致，否则您通常信任FDAHandler的回应。”
- en: It is told to trust the agents’ responses as any necessary validation of the
    responses from the two agents should happen on their side; the criticism should
    focus on the orchestrator itself.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 据说应该信任代理人的回应，因为对两个代理人的回应进行的任何必要验证应该在他们那一方完成；批评应集中在协调者本身。
- en: 'Below is the full prompt to FDAHandler:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是FDAHandler的完整提示：
- en: 'You  will  try  your  best  to  answer  my  questions,  in  this  order  of  preference:1.  Ask  me  for  some  relevant  text,  and  I  will  send  you.Use  the  ‘relevant_extracts‘  tool/function-call  for  this  purpose.Once  you  receive  the  text,  you  can  use  it  to  answer  my  question.If  the  question  asks  for  information  about  a  specific  drug,  make  sure  to  begin  by  including  that  drug  in  the  ‘filter_drugs‘  field.  If  I  say  {NO_ANSWER},  it  means  I  found  no  relevant  docs,  and  you  can  try  the  next  step,  using  a  web  search.2.  If  you  are  still  unable  to  answer,  you  can  use  the  ‘relevant_search_extracts‘  tool/function-call  to  get  some  text  from  a  web  search.  Once  you  receive  the  text,  you  can  use  it  to  answer  my  question.  If  you  need  to  identify  the  drugs  in  a  category,  use  the  ‘drug_category_search‘  tool/function-call  instead.3.  If  you  are  still  unable  to  answer,  and  used  ‘filter_drugs‘  in  your  initial  attempt  with  ‘relevant_extracts‘,  try  again  without  a  filter.4.  If  you  still  can’t  answer,  simply  say  {DONE}  {NO_ANSWER}If  given  a  question  asking  about  a  drug  "X  and  Y",  this  is  acombination  drug,  so  your  initial  searches  should  be  for  "X  and  Y"  not  "X"  or  "Y".If  asked  a  question  about  drugs  in  broad  category,  make  to  consider  EVERY  drug  in  the  category,  and  in  particular,  if  the  question  asks  for  which  drugs  in  the  category  something  is  true,  make  CERTAIN  that  your  answer  correctly  lists  ALL  drugs  in  the  category  where  the  condition  holds.IMPORTANT:  some  fields  in  the  FDA  label  data  retrievedby  ‘relevant_search_extracts’  and  ‘relevant_extracts‘  have  the  level  of  reliability  of  information  specified  prior  to  it  (for  example,  statements  of  the  level  of  reliability  may  precede  each  section  of  adverse  reactions,  the  immediately  preceding  such  statement  is  the  one  that  corresponds  to  any  given  reported  interaction).  Make  certain  that  your  answer  reflects  the  specified  level  of  reliability.Similarly,  when  asked  about  the  effect  of  a  drug  on  a  condition,  ALWAYS  express  the  magitude  of  the  effect  (i.e.  how  frequently  the  drug  results  in  the  condition  or  how  frequently  the  drug  improves  the  condition);  whenever  possible,  make  sure  to  explicitly  state  whether  a  condition  is  rarely  or  commonly  reported.ANSWER  FORMAT:ALWAYS  present  your  answer  in  one  of  the  below  2  formats:1.  In  case  you  COULD  NOT  find  an  answer:{DONE}  {NO_ANSWER}2.  In  case  you  ARE  able  to  find  an  answer:{DONE}ANSWER:  [Your  concise  answer,  with  a  brief  summary  of  necessary  context.  ALWAYS  clarify  the  level  of  reliability  of  the  information,  if  specified  in  the  extracts.  If  applicable,  ALWAYS  express  the  magnitude  of  any  increase  or  decrease  in  risk  and  any  associated  information.]SOURCE:  aspirin  labelEXTRACT_START_END:  Aspirin  can  cause  ...  with  any  medicine.For  the  EXTRACT_START_END,  ONLY  show  up  to  the  first  3  words  and  last  3  words.'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 你将尽力回答我的问题，按照以下优先顺序：1. 向我请求一些相关文本，我会将其发送给你。请使用‘relevant_extracts’工具/函数调用来实现这个目的。一旦你收到文本，你可以利用它来回答我的问题。如果问题询问关于某种特定药物的信息，请确保在‘filter_drugs’字段中包含该药物。如果我说{NO_ANSWER}，这意味着我没有找到相关文档，你可以尝试下一步，即进行网络搜索。2.
    如果你仍然无法回答，你可以使用‘relevant_search_extracts’工具/函数调用从网络搜索中获取一些文本。一旦你收到文本，你可以利用它来回答我的问题。如果你需要识别某个类别中的药物，请使用‘drug_category_search’工具/函数调用。3.
    如果你仍然无法回答，并且在初始尝试中使用了‘filter_drugs’和‘relevant_extracts’，请尝试不使用过滤器。4. 如果你仍然无法回答，请简单地说{DONE}
    {NO_ANSWER} 如果被问及药物“X和Y”，这是一种组合药物，因此你的初始搜索应为“X和Y”而不是“X”或“Y”。如果被问及广泛类别中的药物，请考虑该类别中的每一种药物，特别是如果问题询问在类别中哪些药物符合某种情况，请确保你的答案正确列出所有符合条件的药物。重要：从‘relevant_search_extracts’和‘relevant_extracts’中检索的FDA标签数据中的某些字段具有信息的可靠性级别，该级别在其前面指定（例如，可靠性级别的声明可能位于不良反应的每一部分之前，紧接着的声明是对应任何给定报告的相互作用的声明）。请确保你的答案反映了指定的可靠性级别。同样，当被问及药物对某种情况的影响时，始终表达效果的大小（即药物导致该情况的频率或药物改善该情况的频率）；每当可能时，请明确说明某种情况是罕见还是常见。答案格式：总是以以下两种格式之一呈现你的答案：1.
    如果你无法找到答案：{DONE} {NO_ANSWER} 2. 如果你能够找到答案：{DONE}答案：[你的简洁回答，附带必要背景的简要总结。如果提取的文档中指定了信息的可靠性级别，请始终澄清该级别。如果适用，始终表达任何风险的增加或减少的程度及任何相关信息。]来源：阿司匹林标签提取开始结束：阿司匹林可能导致...与任何药物。对于提取开始结束，仅显示前三个单词和后三个单词。
- en: 'STEP3: labeling the association between each drug category and each outcome.'
  id: totrans-246
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 步骤3：标记每个药物类别与每个结果之间的关联。
- en: 'This is the full prompt to CategoryAgent:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 这是给类别代理的完整提示：
- en: 'You  are  experienced  in  general  medical  reasoning  and  have  general  medical  knowledge.You  will  be  provided  a  list  of  passages  answering,  for  each  of  a  set  of  drugs  X,  whether  drug  X  increases  or  decreases  the  risk  of  {condition}.  They  all  belong  to  category  {cat_name}.You  must  provide  your  final  answer  with  the  ‘final_answer‘  tool/function;  make  sure  to  clearly  state  my  question,  the  reasoning  used  to  derive  the  answer,including  the  evidence  from  the  passages,  as  well  as  your  final  answer  in  the  ‘answer‘  field.Once  the  critic  is  satisfied,  submit  your  answer  with  the  ‘category_effect‘  tool,  making  sure  that  the  answer,  ‘label‘,  is  one  of  the  following:  "increase,"  "decrease,"  or  "no-effect,"  and  make  sure  to  include  your  justification.  DO  NOT  use  this  tool  before  you  have  used  the  ‘final_answer‘  tool  and  have  had  your  answer  accepted  by  the  critic.Your  ‘justification‘  must  clearly  express  the  magnitude  of  risk  indicated  and  the  strength  of  evidence.  Provide  a  ‘confidence‘  value  between  0  and  1  indicating  the  confidence  in  your  assigned  ‘label‘  and  a  ‘probability‘  value  indicating  the  probability  that  the  drug  will  cause  the  condition  (or  prevent  the  condition)  in  a  given  patient.Express  the  frequency  that  the  drug  has  an  effect  as  either  "none,"  "rare,"  or  "common"  with  the  ‘frequency‘  field  and  express  the  strength  of  ‘evidence‘  as  either  "strong"  (for  example,  evidence  is  strong  when  shown  in  a  cal  trial)  or  "weak"  (for  example,  this  applies  to  purely  correlational  evidence)  or  "none"  if  no  evidence  exists.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 你在一般医学推理方面经验丰富，具备一般医学知识。你将获得一份文献列表，这些文献回答了针对一组药物X中的每种药物，药物X是否增加或减少了{condition}的风险。所有这些药物都属于类别{cat_name}。你必须使用‘final_answer’工具/功能提供你的最终答案；确保明确说明我的问题、推导答案的推理，包括文献中的证据，以及在‘answer’字段中给出你的最终答案。一旦审稿人满意，使用‘category_effect’工具提交你的答案，确保答案‘label’是以下之一：“increase”，“decrease”或“no-effect”，并且要包含你的理由。在使用‘category_effect’工具之前，不要使用此工具。你的‘justification’必须清晰地表达风险的大小以及证据的强度。提供一个介于0和1之间的‘confidence’值，表示你对所分配的‘label’的信心，以及一个‘probability’值，表示药物在特定患者中导致（或预防）该疾病的概率。使用‘frequency’字段表示药物产生效果的频率，可以是“none”，“rare”或“common”，并且将‘evidence’的强度表示为“strong”（例如，当在临床试验中显示证据时）或“weak”（例如，这适用于纯粹的相关证据），如果没有证据，则表示“none”。
- en: 'This is the full prompt to the Critic agent:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 这是给批评者代理的完整提示：
- en: You  are  also  experienced  in  medical  reasoning,  and  have  general  medical  knowledge.  Unless  the  responses  are  inconsistent  with  your  medical  (or  common-sense)  knowledge,  you  generally  trust  responses  from  FDAHandler.  Similarly,  you  trust  that  the  user’s  statements  about  passages  are  correct  without  the  need  to  review  them  directly.The  answer  provided  should  indicate  an  increase,  decrease,  or  no  effect  on  the  risk,  and  must  be  no  effect  if  no  evidence  linking  the  drug  category  to  the  risk  of  the  condition  exists.The  answer  should  be  drawn  from  the  specified  passages,  hence,  the  absence  of  information  related  to  a  condition  in  the  FDA  data  for  all  drugs  in  a  category  should  be  enough  to  conclude  that  there  is  no  effect  for  that  drug.The  answer  should  express  the  degree  of  certainty  and  the  magnitude  of  change  in  risk,  ensure  that  the  provided  answer  is  consistent  with  the  evidence.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 你在医学推理方面也很有经验，具备一般医学知识。除非回答与你的医学（或常识）知识不一致，否则你通常会信任FDAHandler提供的回答。同样，你信任用户对文献的陈述是正确的，无需直接审查这些文献。提供的答案应表示风险的增加、减少或无效，如果没有证据将药物类别与该疾病的风险联系起来，则必须为无效。答案应从指定的文献中得出，因此，FDA数据中所有药物类别与某疾病相关信息的缺失应足以得出该药物无效的结论。答案应表达确定性程度和风险变化的大小，并确保提供的答案与证据一致。
- en: B.2 Probability-based scoring
  id: totrans-251
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.2 基于概率的评分
- en: 'In addition to the confidence-based scoring discussed in Section [5](#S5 "5
    Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), we consider probability-based scoring. In
    particular, we ask the model to specify the probability of an evant, specifically,
    the event that a drug in category $C$.'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '除了第[5](#S5 "5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")节中讨论的基于信心的评分外，我们还考虑了基于概率的评分。特别是，我们要求模型指定事件的概率，具体来说，即类别$C$中的药物事件。'
- en: '![Refer to caption](img/d8fb292abf97ce84a21b46b89df6e32e.png)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/d8fb292abf97ce84a21b46b89df6e32e.png)'
- en: 'Figure 7: Derivation of ADE Scores from Event Probability. The x-axis represents
    the LLM’s output probability estimate, and the color indicates the mapping for
    the corresponding set of labels.'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 图 7：从事件概率推导ADE评分。x轴表示LLM的输出概率估计，颜色表示对应标签集的映射。
- en: 'As in Section [5](#S5 "5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"), we must derive
    confidence scores in ADE and effects from the output probability estimate; as
    the probability is already in terms of the probability of any effect, either harmful
    or beneficial, we use the probability directly for Effect AUC. For ADE AUC, we
    use the tranformation shown in Figure [7](#A2.F7 "Figure 7 ‣ B.2 Probability-based
    scoring ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '如第[5](#S5 "5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")节所述，我们必须从输出概率估计中推导ADE和效果的信心评分；由于概率已经是任何效果的概率，无论是有害还是有益，因此我们直接使用该概率计算效果AUC。对于ADE
    AUC，我们使用图[7](#A2.F7 "Figure 7 ‣ B.2 Probability-based scoring ‣ Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")中所示的变换。'
- en: We make the assumption that, if the LLM specifies a probability $p$ with a label
    other than “decrease,” that probability expresses the probability of a harmful
    effect. Hence, the derived score decreases linearly with increasing probability
    when the label is “decrease,” and increases linearly when the label is anything
    else. With this assumption, we additionally maintain the semantic ordering of
    the LLM’s implied confidence in ADE, and hence this is a well-defined confidence
    score.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设，如果LLM指定了一个概率$p$，并且标签不是“减少”，那么该概率表示有害效果的概率。因此，当标签为“减少”时，衍生的评分会随着概率的增加而线性降低，而当标签为其他任何内容时，评分会线性增加。基于这一假设，我们还保持了LLM对ADE的隐含信心的语义排序，因此这是一个定义明确的信心评分。
- en: Model Metric Effect-based ADE-based GPT-4o AUC with confidence 0.8833 0.9034
    GPT-4o AUC with probability 0.6715 0.6534 GPT-4 Turbo AUC with confidence 0.8306
    0.8514 GPT-4 Turbo AUC with probability 0.8058 0.7935
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 模型指标 基于效果的 ADE 基于 ADE 的 GPT-4o 信心的 AUC 0.8833 0.9034 GPT-4o 概率的 AUC 0.6715 0.6534
    GPT-4 Turbo 信心的 AUC 0.8306 0.8514 GPT-4 Turbo 概率的 AUC 0.8058 0.7935
- en: 'Table 5: Comparison of confidence and probability based scoring for MALADE.
    “Effect-based” captures the classification between the presence and the absence
    of any ADE, while “ADE-based” represent’s the ability of MALADE to distinguish
    drugs with increased risk from those with decreased risk or no effect.'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 表 5：MALADE的信心评分和概率评分比较。 “基于效果”捕捉了ADE的存在与缺失之间的分类，而“基于ADE”则表示MALADE区分药物的风险增加与风险减少或无效应的能力。
- en: 'The results with probability-based scoring are shown in Table [5](#A2.T5 "Table
    5 ‣ B.2 Probability-based scoring ‣ Appendix B Detailed Descriptions on MALADE
    Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), we observe that the probabilities are less
    reliable (unsurprising as the FDA label data does not always contain the information
    necessary for a reliable estimate). See Appendix [D](#A4 "Appendix D Ablations
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for further discussion on the potential unreliability
    of the probability estimates.'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '使用基于概率的评分结果见表[5](#A2.T5 "Table 5 ‣ B.2 Probability-based scoring ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")，我们观察到概率的可靠性较差（这并不意外，因为FDA标签数据并不总是包含进行可靠估计所需的信息）。有关概率估计潜在不可靠性的进一步讨论，请参见附录[D](#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")。'
- en: '| Drug Categories | ACE Inhibitors, Amphotericin B, Antibiotics (Erythromycin,
    Sulfonamide, Tetracycline), |'
  id: totrans-260
  prefs: []
  type: TYPE_TB
  zh: '| 药物类别 | ACE抑制剂、两性霉素B、抗生素（红霉素、磺胺类、四环素） |'
- en: '| Antiepileptics (Carbamazepine, Phenytoin), Benzodiazepines, Beta blockers,
    |'
  id: totrans-261
  prefs: []
  type: TYPE_TB
  zh: '| 抗癫痫药（卡马西平、苯妥英钠）、苯二氮卓类药物、β-adrenergic拮抗剂 |'
- en: '| Bisphosphonates (Alendronate), Tricyclic antidepressants, Typical antipsychotics,
    Warfarin |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
  zh: '| 双膦酸盐（阿仑膦酸钠）、三环类抗抑郁药、典型抗精神病药物、华法林 |'
- en: '| Outcome | Angioedema, Aplastic anemia, Acute liver injury, Bleeding, Hip
    fracture, |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| 结果 | 血管性水肿、再生障碍性贫血、急性肝损伤、出血、髋骨骨折 |'
- en: '| Hospitalization, Myocardial infarction, Mortality after myocardial infarction,
    |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| 住院、心肌梗塞、心肌梗塞后的死亡率 |'
- en: '| Renal failure, Gastrointestinal ulcer hospitalization |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
  zh: '| 肾衰竭、胃肠道溃疡住院 |'
- en: 'Table 6: OMOP drug categories and conditions. Parenthesized lists contain the
    subcategories of the broad drug category considered.'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 表6：OMOP药物类别和条件。括号内的列表包含了被考虑的广义药物类别的子类别。
- en: B.3 OMOP ADE task Details
  id: totrans-267
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.3 OMOP ADE任务详细信息
- en: '![Refer to caption](img/442cf69d88a27e77644a69b8842d6dbc.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/442cf69d88a27e77644a69b8842d6dbc.png)'
- en: 'Figure 8: OMOP ground truth.'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 图8：OMOP实际情况。
- en: 'The ground truth for the OMOP ADE task is shown in Figure [8](#A2.F8 "Figure
    8 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance"). As noted in Section [5.1](#S5.SS1 "5.1 Evaluation Setup
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), while the OMOP ADE task permits only three
    output labels for the effect of a drug category on an outcome, some drug category,
    outcome pairs are considered uncertain (which we treat as a “no-effect” label
    which is not used in evaluation). In Figure [8](#A2.F8 "Figure 8 ‣ B.3 OMOP ADE
    task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    the “No Effect” cells considered reliable are shown in blue, while the uncertain
    “no-effect” cells are those in white. In particular, the cells in white are not
    used in evaluation (i.e., for AUC computation, confusion matrices, and F1 scores).
    The cells used for evaluation are shown in red, blue, and green.'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 'OMOP ADE任务的实际情况如图[8](#A2.F8 "Figure 8 ‣ B.3 OMOP ADE task Details ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")所示。如第[5.1](#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")节所述，虽然OMOP ADE任务仅允许为药物类别对结果的影响提供三个输出标签，但某些药物类别和结果对被认为是不确定的（我们将其视为“无效”标签，该标签不用于评估）。在图[8](#A2.F8
    "Figure 8 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE
    Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")中，被认为可靠的“无效”单元格用蓝色显示，而不确定的“无效”单元格用白色显示。特别地，白色单元格在评估中不使用（即用于AUC计算、混淆矩阵和F1分数）。用于评估的单元格用红色、蓝色和绿色显示。'
- en: 'Table [7](#A2.T7 "Table 7 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance") present the representatives
    selected for each category of drugs, respectively, produced by GPT-4 Turbo.'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: '表[7](#A2.T7 "Table 7 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions
    on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")展示了由GPT-4 Turbo生成的每类药物的代表性药物。'
- en: '| Drug or Drug Category | Representative Drug(s) |'
  id: totrans-272
  prefs: []
  type: TYPE_TB
  zh: '| 药物或药物类别 | 代表药物 |'
- en: '| --- | --- |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| ACE Inhibitors | Lisinopril, Captopril, and Enalapril Maleate |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
  zh: '| ACE抑制剂 | 利辛普、卡普普、依那普利马来酸盐 |'
- en: '| Amphotericin B | Ambisome, Amphotericin B, and Abelcet |'
  id: totrans-275
  prefs: []
  type: TYPE_TB
  zh: '| 两性霉素B | Ambisome、两性霉素B和Abelcet |'
- en: '| Erythromycin | Erythromycin, Erythromycin Ethylsuccinate, and Erythromycin
    |'
  id: totrans-276
  prefs: []
  type: TYPE_TB
  zh: '| 红霉素 | 红霉素、红霉素乙酯和红霉素 |'
- en: '| Sulfonamides | Silver Sulfadiazine, Bactrim, and Sulfadiazine |'
  id: totrans-277
  prefs: []
  type: TYPE_TB
  zh: '| 磺胺类 | 银磺胺嘧啶、百服宁和磺胺嘧啶 |'
- en: '| Tetracyclines | Doxycycline Hyclate, Tigecycline, and Minocycline |'
  id: totrans-278
  prefs: []
  type: TYPE_TB
  zh: '| 四环素类 | 多西环素、替加环素和米诺环素 |'
- en: '| Carbamazepine | Carbamazepine |'
  id: totrans-279
  prefs: []
  type: TYPE_TB
  zh: '| 卡马西平 | 卡马西平 |'
- en: '| Phenytoin | Phenytoin Sodium, Phenytoin, and Extended Phenytoin Sodium |'
  id: totrans-280
  prefs: []
  type: TYPE_TB
  zh: '| 苯妥英钠 | 苯妥英钠、苯妥英和延长释药苯妥英钠 |'
- en: '| Benzodiazepines | Lorazepam, Diazepam, and Clonazepam |'
  id: totrans-281
  prefs: []
  type: TYPE_TB
  zh: '| 苯二氮卓类药物 | 洛拉西泮、地西泮和氯硝西泮 |'
- en: '| Beta Blockers | Metoprolol Tartrate, Labetalol, and Atenolol |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
  zh: '| β-adrenergic拮抗剂 | 美托洛尔酒石酸盐、拉贝洛尔和阿莫洛尔 |'
- en: '| Alendronate | Alendronate Sodium and Alendronate |'
  id: totrans-283
  prefs: []
  type: TYPE_TB
  zh: '| 阿仑膦酸钠 | 阿仑膦酸钠和阿仑膦酸 |'
- en: '| Tricyclics | Doxepin HCL, Desipramine, and Amitriptyline HCL |'
  id: totrans-284
  prefs: []
  type: TYPE_TB
  zh: '| 三环类药物 | 多塞平HCL、去甲基帕罗西汀和阿米替林HCL |'
- en: '| Typical Antipsychotics | Haloperidol, Thiothixene, and Pimozide |'
  id: totrans-285
  prefs: []
  type: TYPE_TB
  zh: '| 常见抗精神病药物 | 氟哌啶醇、硫噻吨和匹莫齐特 |'
- en: '| Warfarin | Warfarin |'
  id: totrans-286
  prefs: []
  type: TYPE_TB
  zh: '| 华法林 | 华法林 |'
- en: 'Table 7: Drug Representatives selected for each OMOP category (or subcategory).'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '表7: 为每个OMOP类别（或子类别）选择的药物代表。'
- en: B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo
  id: totrans-288
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.4 使用GPT-4 Turbo的标签后处理效果
- en: 'In this subsection, we illustrate that the postprocessing of labels in Section [5.1](#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance") significantly improves
    the accuracy of ADE identification by MALADE instantiated with GPT-4 Turbo.'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 在本小节中，我们说明了第[5.1](#S5.SS1 "5.1 评估设置 ‣ 5 实验 ‣ MALADE：使用检索增强生成技术的LLM驱动代理的协调")节中标签的后处理显著提高了使用GPT-4
    Turbo实例化的MALADE的ADE识别准确性。
- en: We take an additional postprocessing step to further enhance the quality of
    the assigned labels, replacing unreliable predictions with “no-effect,” unless
    stated otherwise. Specifically, we consider outputs for which the LLM reported
    weak evidence and rare incidences of effects as unreliable. Additionally, we deem
    outputs for which the LLM selected small round numbers for the probability (i.e., 0.1
    and 0.01) as unreliable, as such values are often chosen in the absence of strong
    evidence, resembling typical human preferences for round numbers. We apply this
    postprocessing except in the case of AUC, as uncertainty should be reflected directly
    in the confidence scores.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 我们采取了额外的后处理步骤，以进一步提升分配标签的质量，将不可靠的预测替换为“无效”，除非另有说明。具体来说，我们将LLM报告的证据薄弱和效果发生率稀少的输出视为不可靠。此外，我们将LLM选择的小整数概率（即0.1和0.01）视为不可靠，因为这些值通常是在缺乏强有力证据的情况下选择的，类似于人们对整数的典型偏好。我们应用这种后处理，AUC情况除外，因为不确定性应直接体现在置信度评分中。
- en: 'We obtain an effect-based F1 score of 0.5294 without postprocessing, and 0.6087
    with postprocessing. We obtain an ADE-based F1 score of 0.4828 without postprocessing,
    and 0.5556 with postprocessing. Figures [9](#A2.F9 "Figure 9 ‣ B.4 Effectiveness
    of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") and [9](#A2.F9 "Figure 9 ‣ B.4 Effectiveness
    of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") show the confusion matrices and predictions,
    respectively, of MALADE without postprocessing on GPT-4 Turbo (compared to the
    results in Section [5.2](#S5.SS2 "5.2 RQ1: MALADE effectively identifies ADEs
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")).'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: '在未进行后处理的情况下，我们获得了基于效果的F1分数为0.5294，进行后处理后的F1分数为0.6087。我们获得了基于ADE的F1分数为0.4828，进行后处理后的F1分数为0.5556。图[9](#A2.F9
    "图 9 ‣ B.4 使用GPT-4 Turbo的标签后处理效果 ‣ 附录B MALADE实现的详细描述 ‣ MALADE：使用检索增强生成技术的LLM驱动代理的协调")和[9](#A2.F9
    "图 9 ‣ B.4 使用GPT-4 Turbo的标签后处理效果 ‣ 附录B MALADE实现的详细描述 ‣ MALADE：使用检索增强生成技术的LLM驱动代理的协调")分别展示了MALADE在GPT-4
    Turbo上未经过后处理的混淆矩阵和预测（与第[5.2](#S5.SS2 "5.2 RQ1: MALADE有效识别ADE ‣ 5 实验 ‣ MALADE：使用检索增强生成技术的LLM驱动代理的协调")节中的结果相比）。'
- en: '![Refer to caption](img/ea5960d9a609bdeb2c6ed3d9530347a4.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/ea5960d9a609bdeb2c6ed3d9530347a4.png)'
- en: ((a))
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/b88311383d8784beb799057ae1c649af.png)'
  id: totrans-294
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/b88311383d8784beb799057ae1c649af.png)'
- en: ((b))
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 9: Results with GPT-4 Turbo, without postprocessing.'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '图9: 使用GPT-4 Turbo的结果，未经过后处理。'
- en: '![Refer to caption](img/d03da1de9bb5bc7bd6d15e0a003acb6a.png)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/d03da1de9bb5bc7bd6d15e0a003acb6a.png)'
- en: 'Figure 10: Predictions of MALADE run on GPT-4o.'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: '图10: MALADE在GPT-4o上的预测结果。'
- en: '![Refer to caption](img/e98596315e262f7e517fa2b51b407f43.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/e98596315e262f7e517fa2b51b407f43.png)'
- en: ((a))
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/fed276c0b900a0f7633664690c62e0ff.png)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/fed276c0b900a0f7633664690c62e0ff.png)'
- en: ((b))
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 11: ROC curves for MALADE on OMOP'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: '图11: MALADE在OMOP上的ROC曲线'
- en: '![Refer to caption](img/023409053019d716bfcdd1b72649e294.png)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/023409053019d716bfcdd1b72649e294.png)'
- en: ((a))
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/cdf7d29db203ee68390fbf0c41238471.png)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/cdf7d29db203ee68390fbf0c41238471.png)'
- en: ((b))
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 12: Sensitivity vs. specificity curves for MALADE on OMOP'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 图12：MALADE在OMOP上的灵敏度与特异性曲线
- en: B.5 Discussion of Justifications Produced by DrugFinder
  id: totrans-309
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.5 DrugFinder生成的理由讨论
- en: 'As in Section [5.4](#S5.SS4 "5.4 RQ3: MALADE provides justifications that are
    aligned with human expert reasoning, and help understand its failure modes ‣ 5
    Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), we extract the justifications produced by
    DrugFinder in a run of MALADE for review by a clinician. The most common flaw
    in its reasoning is that DrugFinder frequently fails to recognize OMOP categories
    which consist of a single drug; beyond that, the agent’s justifications are generally
    correct, with only one significant other error occurring.'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: '如第[5.4节](#S5.SS4 "5.4 RQ3: MALADE提供的理由与人类专家推理一致，并帮助理解其失败模式 ‣ 5 实验 ‣ MALADE：利用增强生成技术的LLM驱动代理的协调")所述，我们提取了DrugFinder在MALADE运行中的理由供临床医生审阅。其推理中最常见的缺陷是DrugFinder经常无法识别仅由一种药物组成的OMOP类别；除此之外，代理的理由通常是正确的，仅发生了一次较大的其他错误。'
- en: This error isn’t directly caused by DrugFinder, but, rather, was a result of
    our OpenFDA retrieval process failing to identify certain common typical antipsychotics,
    for example, fluphenazine is labeled as a phenothiazine in the National Drug Code
    DB but not as a typical antipsychotic; hence a more robust search, taking subcategories
    into account, for drugs in a category is needed.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 这个错误不是由DrugFinder直接引起的，而是由于我们的OpenFDA检索过程未能识别某些常见的典型抗精神病药物。例如，氟奋乃静在国家药物代码数据库中被标记为酚噻嗪类药物，但不是典型抗精神病药物；因此，需要更全面的搜索，将子类别考虑在内，以便为一个类别中的药物提供更可靠的搜索结果。
- en: 'Appendix C Detailed behavior of MALADE: Successful and Failed Behavior'
  id: totrans-312
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录C MALADE的详细行为：成功和失败的行为
- en: C.1 Successful Behavior
  id: totrans-313
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.1 成功行为
- en: For an example of a successful run of MALADE, consider the effect of ACE inhibitors
    on agioedema. As we will see, DrugAgent will retrieve the reports of ADEs from
    the FDA labels, and CategoryAgent will conclude that they are strong evidence
    for increased risk.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 以MALADE成功运行的例子为例，考虑ACE抑制剂对血管神经性水肿的影响。如我们将看到的，DrugAgent将从FDA标签中检索ADE报告，而CategoryAgent将得出这些报告是增加风险的有力证据。
- en: 3.1 DrugAgent Step
  id: totrans-315
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1 DrugAgent步骤
- en: This step will be run three times, for each of the representative drugs (Lisinopril,
    Captopril, and Enalapril Maleate). We’ll show the results for Lisinopril.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 此步骤将对每种代表性药物（利辛普利、卡普普利和美托普利）运行三次。我们将展示利辛普利的结果。
- en: The original question to DrugAgent is “Does LISINOPRIL increase or decrease
    the risk of angioedema?”
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 对DrugAgent提出的原始问题是“利辛普利是否增加或减少了血管神经性水肿的风险？”
- en: 'As DrugAgent requires evidence from the drug labels to answer the question,
    the agent immediately asks FDAHandler, specifying it as the recipient of the message
    using a tool call, as follows:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 由于DrugAgent需要来自药物标签的证据来回答问题，代理立即向FDAHandler提出请求，使用工具调用将其指定为消息的接收者，如下所示：
- en: FUNC: {  "name": "relevant_extracts",  "to": "",  "arguments": {    "query": "Does LISINOPRIL increase the risk of angioedema?",    "filter_drugs": [      "Lisinopril"    ]  }}
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: FUNC: {  "name": "relevant_extracts",  "to": "",  "arguments": {    "query": "利辛普利是否增加了血管神经性水肿的风险？",    "filter_drugs": [      "利辛普利"    ]  }}
- en: 'The agent searches its vector DB for relevant passages from the drug’s label,
    using another tool call:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 代理程序在其向量数据库中搜索与药物标签相关的段落，使用另一种工具调用：
- en: FUNC: {  "name": "relevant_extracts",  "to": "",  "arguments": {    "query": "Does LISINOPRIL increase the risk of angioedema?",    "filter_drugs": [      "Lisinopril"    ]  }}
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: FUNC: {  "name": "relevant_extracts",  "to": "",  "arguments": {    "query": "利辛普利是否增加了血管神经性水肿的风险？",    "filter_drugs": [      "利辛普利"    ]  }}
- en: 'A large number of passages are retrieved, including:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 检索到大量段落，包括：
- en: 'LISINOPRIL: warnings: WARNINGS General Lisinopril Anaphylactoid and Possibly Related Reactions: Presumably because angiotensin-converting enzyme inhibitors affect the metabolism of eicosanoids and polypeptides, including endogenous bradykinin, patients receiving ACE inhibitors (including lisinopril and hydrochlorothiazide tablets) may be subject to a variety of adverse reactions, some of them serious. Head and Neck Angioedema: Angioedema of the face, extremities, lips, tongue, glottis and/or larynx has been reported rarely in patients treated with angiotensin converting enzyme inhibitors, including lisinopril. ACE inhibitors have been associated with a higher rate of angioedema in Black than in non-Black patients.with
    which FDAHandler produces its answer, stating that it is done:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 'LISINOPRIL：警告：警告 一般利辛诺普利 过敏反应及可能相关反应：由于血管紧张素转化酶抑制剂可能影响类花生酸和多肽的代谢，包括内源性缓激肽，接受ACE抑制剂（包括利辛诺普利和氢氯噻吨片）的患者可能会出现多种不良反应，其中一些可能是严重的。头部和颈部水肿：在接受血管紧张素转化酶抑制剂治疗的患者中，面部、四肢、嘴唇、舌头、喉头和/或喉咙的水肿报告较少。ACE抑制剂在黑人患者中的水肿发生率高于非黑人患者。 '
- en: ANSWER: Yes, LISINOPRIL has been associated with an increased risk of angioedema. Angioedema of the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL.  This can occur at any time during treatment. The incidence of angioedema is higher in Black patients compared to non-Black patients. In very rare cases, fatalities have been reported due to angioedema associated with laryngeal edema or tongue edema. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor.  Intestinal angioedema has also been reported in patients treated with ACE inhibitors, presenting with abdominal pain, with or without nausea or vomiting.SOURCE: LISINOPRIL labelEXTRACT_START_END: Head and Neck Angioedema: Angioedema of the face...associated with laryngeal edema or tongue edema.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '回答：是的，利辛诺普利与增加水肿的风险相关。面部、四肢、嘴唇、舌头、喉头和/或喉咙的水肿在接受血管紧张素转化酶抑制剂（包括利辛诺普利）的患者中报告较少。此情况可能在治疗期间的任何时间发生。水肿在黑人患者中的发生率高于非黑人患者。在极少数情况下，因喉部水肿或舌部水肿引起的水肿已报告导致死亡。具有与ACE抑制剂治疗无关的水肿病史的患者在接受ACE抑制剂时可能面临更高的水肿风险。肠道水肿也在接受ACE抑制剂治疗的患者中报告，表现为腹痛，伴或不伴恶心或呕吐。来源：利辛诺普利标签提取开始结束：头部和颈部水肿：面部...与喉部水肿或舌部水肿相关。 '
- en: 'DrugAgent expresses its reasoning in structured form, which is sent to the
    Critic:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: DrugAgent以结构化形式表达其推理，并将其发送给批评者：
- en: FUNC: {  "name": "final_answer",  "to": "",  "arguments": {    "question": "Does LISINOPRIL increase or decrease the risk of angioedema?",    "steps": [      "I asked FDAHandler if LISINOPRIL increases the risk of angioedema.",      "FDAHandler confirmed that LISINOPRIL has been associated with      an increased risk of angioedema. Angioedema involving the face,      extremities, lips, tongue, glottis, and/or larynx has been      reported rarely in patients treated with angiotensin-converting      enzyme inhibitors, including LISINOPRIL. The incidence is higher      in Black patients compared to non-Black patients, and very rare      cases have resulted in fatalities. Patients with a history of      angioedema unrelated to ACE-inhibitor therapy may be at      increased risk of angioedema while receiving an ACE      inhibitor. Intestinal angioedema has also been reported rarely."    ],    "answer": "LISINOPRIL increases the risk of angioedema."  }}
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC：{ "name": "final_answer", "to": "", "arguments": { "question": "利辛诺普利是否增加或降低水肿的风险？",
    "steps": [ "我问FDAHandler利辛诺普利是否增加水肿的风险。", "FDAHandler确认利辛诺普利与增加水肿风险相关。面部、四肢、嘴唇、舌头、喉头和/或喉咙的水肿在接受血管紧张素转化酶抑制剂（包括利辛诺普利）的患者中报告较少。该发生率在黑人患者中高于非黑人患者，且极少数病例已导致死亡。具有与ACE抑制剂治疗无关的水肿病史的患者在接受ACE抑制剂治疗时可能面临更高的水肿风险。肠道水肿也在接受ACE抑制剂治疗的患者中偶有报告。"
    ], "answer": "利辛诺普利增加水肿的风险。" }}'
- en: This is processed into natural language form before being forwarded to the LLM.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 这被处理成自然语言形式，然后转发给LLM。
- en: Question: Does LISINOPRIL increase or decrease the risk of angioedema?        -----        Reasoning:1. I asked FDAHandler if LISINOPRIL increases the risk of angioedema.2. FDAHandler confirmed that LISINOPRIL has been associated with an increased risk of angioedema. Angioedema involving the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL. The incidence is higher in Black patients compared to non-Black patients, and very rare cases have resulted in fatalities. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor. Intestinal angioedema has also been reported rarely.        -----        Final answer: LISINOPRIL increases the risk of angioedema.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：**利辛普普是否增加或减少了水肿的风险？** -------- 理由：1. 我询问了FDAHandler是否利辛普普增加了水肿的风险。2. FDAHandler确认利辛普普与增加的水肿风险相关。面部、四肢、嘴唇、舌头、喉头和/或喉部的水肿在使用血管紧张素转换酶抑制剂（包括利辛普普）的患者中极少见。黑人患者中的发生率高于非黑人患者，且极少数病例导致死亡。与ACE抑制剂治疗无关的水肿历史患者在接受ACE抑制剂时可能有增加的水肿风险。肠道水肿也有极少数报告。
    -------- 最终回答：利辛普普增加了水肿的风险。
- en: 'The Critic has no feedback (which indicates acceptance):'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 批评者没有反馈（这表明接受）：
- en: FUNC: {  "name": "feedback",  "to": "",  "arguments": {    "critique": "" }}
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "feedback", "to": "", "arguments": { "critique": "" } }'
- en: 'As with the structured description of the reasoning steps, this is processed
    into natural language:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 与推理步骤的结构化描述一样，这也被处理成自然语言：
- en: Your reasoning is valid, no feedback was provided.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 你的推理是有效的，没有提供反馈。
- en: From here on, we will show only the natural language form for these steps. The
    agent then outputs its answer to the original question, with the additional context
    from FDAHandler.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 从现在起，我们只展示这些步骤的自然语言形式。然后，代理人会根据FDAHandler的额外背景输出对原始问题的回答。
- en: LISINOPRIL increases the risk of angioedema. This has been confirmed by FDAHandler, who referenced the LISINOPRIL label indicating that angioedema of the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL. The incidence of angioedema is higher in Black patients compared to non-Black patients, and in very rare cases, fatalities have been reported due to angioedema associated with laryngeal edema or tongue edema. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor. Intestinal angioedema has also been reported rarely in patients treated with ACE inhibitors.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: **利辛普普**增加了水肿的风险。这已被FDAHandler确认，FDAHandler引用了利辛普普标签，说明使用血管紧张素转换酶抑制剂（包括利辛普普）的患者，面部、四肢、嘴唇、舌头、喉头和/或喉部的水肿报告较少。水肿在黑人患者中的发生率高于非黑人患者，在非常少见的情况下，由于喉部水肿或舌头水肿引发的水肿导致了死亡。历史上与ACE抑制剂治疗无关的水肿患者在接受ACE抑制剂时可能有增加的水肿风险。也有极少数患者在接受ACE抑制剂治疗时报告了肠道水肿。
- en: 3.2 CategoryAgent Step
  id: totrans-335
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2 类别代理步骤
- en: 'Together with the query “Does the angiotensin converting enzyme inhibitor category
    of drugs increase the risk of angioedema, decrease it, or is there no clear effect?”
    the agent is provided with the information from the outputs from the last step,
    for each of the three drugs, as follows:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 结合查询“**血管紧张素转换酶抑制剂类别的药物是否增加了水肿的风险、降低了风险，还是没有明确的效果？**”，代理人提供了上一步输出的信息，每种药物如下：
- en: Passages:                1. Drug LISINOPRIL: LISINOPRIL increases the risk of angioedema. This has been confirmed by FDAHandler, who referenced the LISINOPRIL label indicating that angioedema of the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL. The incidence of angioedema is higher in Black patients compared to non-Black patients, and in very rare cases, fatalities have been reported due to angioedema associated with laryngeal edema or tongue edema. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor. Intestinal angioedema has also been reported rarely in patients treated with ACE inhibitors.2. Drug CAPTOPRIL: CAPTOPRIL increases the risk of angioedema. This has been reported in approximately one in 1000 patients, and can involve various parts of the body including extremities, face, lips, mucous membranes, tongue, glottis, or larynx. Fatal airway obstruction has occurred in some cases, and the risk is higher in black patients compared to non-black patients.3. Drug ENALAPRIL MALEATE: The final answer to the question "Does ENALAPRIL MALEATE increase or decrease the risk of angioedema?" is that ENALAPRIL MALEATE increases the risk of angioedema. This information is based on the response from FDAHandler, which referenced the ENALAPRIL MALEATE label indicating that angioedema has been reported in patients receiving the drug. The incidence is higher in black patients compared to non-black patients, and angioedema associated with laryngeal edema can be fatal. If angioedema occurs, treatment with ENALAPRIL MALEATE should be discontinued and appropriate therapy instituted immediately.                ---------                Does the angiotensin converting enzyme inhibitor category of drugs increase the risk of angioedema, decrease it, or is there no clear effect?
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 文献：                1. 药物 **LISINOPRIL**：**LISINOPRIL** 增加了血管性水肿的风险。这已被 FDAHandler
    确认，FDAHandler 参考了 **LISINOPRIL** 标签，指出在接受包括 **LISINOPRIL** 在内的血管紧张素转换酶抑制剂治疗的患者中，面部、肢体、嘴唇、舌头、声门和/或喉部的血管性水肿被报告的很少。与非黑患者相比，黑患者的血管性水肿发生率较高，在非常罕见的情况下，由于喉部水肿或舌头水肿相关的血管性水肿，已报告发生过死亡。曾有血管性水肿病史但与
    ACE 抑制剂治疗无关的患者，在接受 ACE 抑制剂治疗时可能面临增加的血管性水肿风险。接受 ACE 抑制剂治疗的患者中也有极少数报告了肠道血管性水肿。2.
    药物 **CAPTOPRIL**：**CAPTOPRIL** 增加了血管性水肿的风险。这在大约千分之一的患者中被报告过，并且可能涉及身体的各个部分，包括肢体、面部、嘴唇、粘膜、舌头、声门或喉部。在某些病例中发生了致命的气道阻塞，黑患者的风险高于非黑患者。3.
    药物 **ENALAPRIL MALEATE**：关于“**ENALAPRIL MALEATE** 是否增加或减少血管性水肿的风险？”的问题，最终答案是 **ENALAPRIL
    MALEATE** 增加了血管性水肿的风险。这一信息基于 FDAHandler 的回应，FDAHandler 参考了 **ENALAPRIL MALEATE**
    标签，指出在接受该药物治疗的患者中已经报告了血管性水肿。黑患者的发生率高于非黑患者，与喉部水肿相关的血管性水肿可能是致命的。如果发生血管性水肿，应立即停用
    **ENALAPRIL MALEATE** 并采取适当的治疗。                ---------                血管紧张素转换酶抑制剂类别的药物是否增加了血管性水肿的风险、降低了风险，还是没有明显的影响？
- en: 'CategoryAgent immediately concludes that ACE inhibitors increase the risk of
    angioedema, and sends its reasoning to the Critic:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: '**CategoryAgent** 立即得出结论，ACE 抑制剂增加了血管性水肿的风险，并将其推理发送给 Critic：'
- en: Question: Does the angiotensin converting enzyme inhibitor category of drugs increase the risk of angioedema, decrease it, or is there no clear effect?        -----        Reasoning:        1. All three passages provided indicate that the respective angiotensin converting enzyme inhibitors (LISINOPRIL, CAPTOPRIL, and ENALAPRIL MALEATE) increase the risk of angioedema.2. Passage 1 states that LISINOPRIL increases the risk of angioedema, with rare reports of angioedema in patients treated with ACE inhibitors, including LISINOPRIL.3. Passage 2 indicates that CAPTOPRIL increases the risk of angioedema, with an incidence reported in approximately one in 1000 patients.4. Passage 3 confirms that ENALAPRIL MALEATE increases the risk of angioedema, as reported in patients receiving the drug.5. The increased risk of angioedema is consistent across all three drugs mentioned, which are part of the angiotensin converting enzyme inhibitor category.6. The evidence is strong as it is based on drug labels and FDAHandler references, which are authoritative sources.        -----        Final answer: The angiotensin converting enzyme inhibitor category of drugs increases the risk of angioedema.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：血管紧张素转化酶抑制剂类别药物是否增加血管性水肿的风险，减少它，还是没有明确的效果？        -----        推理：        1.
    所提供的所有三段都表明各自的血管紧张素转化酶抑制剂（LISINOPRIL、CAPTOPRIL和ENALAPRIL MALEATE）会增加血管性水肿的风险。2.
    第一段指出LISINOPRIL增加血管性水肿的风险，ACE抑制剂（包括LISINOPRIL）治疗的患者中有少量血管性水肿报告。3. 第二段指出CAPTOPRIL增加血管性水肿的风险，发生率约为每1000名患者中有1例。4.
    第三段确认ENALAPRIL MALEATE增加血管性水肿的风险，已在接受该药物的患者中报告。5. 提到的所有三种药物的血管性水肿风险增加是一致的，这些药物都属于血管紧张素转化酶抑制剂类别。6.
    证据是强有力的，因为它基于药物标签和FDA处理程序的参考，这些都是权威来源。        -----        最终答案：血管紧张素转化酶抑制剂类别药物增加血管性水肿的风险。
- en: 'The critic approves:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 评论员批准：
- en: Feedback: The reasoning provided is sound and consistent with medical knowledge. Angiotensin converting enzyme inhibitors are known to increase the risk of angioedema. The user has correctly identified that all three passages from the FDA data indicate an increased risk of angioedema with the use of LISINOPRIL, CAPTOPRIL, and ENALAPRIL MALEATE, which are all ACE inhibitors. The conclusion that the ACE inhibitor category of drugs increases the risk of angioedema is supported by the evidence provided and is in line with established medical understanding.        If any flaws in the reasoning used to produce your answer were identified, you must try again.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈：提供的推理是合理的，并且与医学知识一致。已知血管紧张素转化酶抑制剂会增加血管性水肿的风险。用户正确识别了FDA数据中的所有三段都指示使用LISINOPRIL、CAPTOPRIL和ENALAPRIL
    MALEATE会增加血管性水肿的风险，这些都是ACE抑制剂。ACE抑制剂类别药物增加血管性水肿风险的结论得到了提供的证据支持，并且符合已建立的医学理解。如果在产生答案时使用的推理中发现任何缺陷，你必须重新尝试。
- en: 'And the agent outputs “increase” with very high confidence:'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 代理输出“增加”，置信度非常高：
- en: FUNC: {  "name": "category_effect_tool",  "to": "",  "arguments": {    "label": "increase",    "confidence": 1,    "probability": 0.001,    "frequency": "rare",    "evidence": "strong",    "justification": "The evidence from FDAHandler and drug labels for LISINOPRIL, CAPTOPRIL, and ENALAPRIL MALEATE consistently reports an increased risk of angioedema with the use of these ACE inhibitors. The incidence of angioedema is reported as rare, with occurrences such as one in 1000 patients for CAPTOPRIL. The evidence is considered strong due to the authoritative nature of the sources."  }}
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: FUNC: {  "name": "category_effect_tool",  "to": "",  "arguments": {    "label": "increase",    "confidence": 1,    "probability": 0.001,    "frequency": "rare",    "evidence": "strong",    "justification": "来自FDA处理程序和LISINOPRIL、CAPTOPRIL及ENALAPRIL
    MALEATE药物标签的证据一致报告这些ACE抑制剂使用时，血管性水肿的风险增加。血管性水肿的发生率被报告为罕见，例如CAPTOPRIL的患者为每1000人中有1例。由于来源的权威性，这些证据被认为是强有力的。"  }}
- en: 3.3 CategoryAgent and Critic
  id: totrans-344
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3 类别代理和评论员
- en: Here we present the full prompt of interactions between CategoryAgent and Critic,
    given the task of identifying the association between “benzodiazepine” and “hip
    fracture”.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我们展示了类别代理和评论员之间的完整互动提示，任务是识别“苯二氮䓬类药物”和“髋部骨折”之间的关联。
- en: 'At round 1, the output from CategoryAgent:'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 在第一轮中，类别代理的输出：
- en: 'Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information  on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  butdoes  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Since  none  of  the  provided  passages  offer  conclusive  evidence  regarding  the  effect  of  benzodiazepineson  the  risk  of  hip  fracture,  we  cannot  determine  if  the  category  as  a  whole  has  a  clear  effecton  hip  fracture  risk.-----Final  answer:  There  is  no  clear  effect  of  the  benzodiazepine  category  of  drugs  on  the  risk  of  hip  fracturebased  on  the  provided  passages.'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：苯二氮平类药物是否会增加髋部骨折的风险、降低风险，还是没有明确的效果？-----推理：1. FDA 对劳拉西泮的标签没有说明有关髋部骨折风险的信息。2.
    FDA 对地西泮的标签也没有提供关于髋部骨折风险的信息。3. FDA 对氯硝西泮的标签提到“创伤性骨折”作为一种不常见的不良事件，但没有确立与髋部骨折的因果关系或提供有关髋部骨折风险的具体数据。4.
    由于提供的段落中没有确凿证据表明苯二氮平类药物对髋部骨折风险的影响，我们不能确定这一类别整体上是否对髋部骨折风险有明确影响。-----最终答案：根据提供的段落，苯二氮平类药物对髋部骨折风险没有明确影响。
- en: 'Feedback by Critic:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 评论者反馈：
- en: The  reasoning  provided  is  flawed.  While  it  is  correct  that  the  FDA  label  for  Lorazepam  and  Diazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture,  the  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label  should  not  be  dismissed.  Benzodiazepines  are  known  to  cause  sedation  and  muscle  relaxation,  which  can  lead  to  an  increased  risk  of  falls,  and  consequently,  hip  fractures,  especially  in  the  elderly.  The  presence  of  ’fracture  traumatic’  as  an  adverse  event  in  the  Clonazepam  label  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.  Therefore,  the  conclusion  should  reflect  a  potential  increase  in  the  risk  of  hip  fracture  associated  with  benzodiazepines,  even  if  the  evidence  is  not  conclusive  for  a  causal  relationship.If  any  flaws  in  the  reasoning  used  to  produce  your  answer  were  identified,  you  must  try  again.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 提供的推理存在缺陷。虽然劳拉西泮和地西泮的 FDA 标签确实没有说明有关髋部骨折风险的信息，但氯硝西泮标签中提到的“创伤性骨折”作为一种不常见的不良事件不应被忽视。苯二氮平类药物已知会导致镇静和肌肉放松，这可能增加跌倒的风险，从而增加髋部骨折的风险，特别是在老年人中。氯硝西泮标签中提到的“创伤性骨折”作为不良事件表明苯二氮平的使用可能与骨折有关。因此，结论应反映苯二氮平类药物可能增加髋部骨折的风险，即使证据尚不充分证明因果关系。如果发现了用于得出答案的推理中的任何缺陷，你必须重新尝试。
- en: 'At round 2, the corrected output from CategoryAgent:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二轮中，CategoryAgent 提供的修正输出：
- en: 'Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,  or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information  on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  butdoes  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Considering  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.5.  The  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label,  while  not  conclusive,  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.6.  Given  the  plausible  mechanism  and  the  mention  of  fractures  as  an  adverse  event  for  Clonazepam,  it  is  reasonable  to  infer  that  benzodiazepines  may  potentially  increase  the  risk  of  hip  fracture,  even  though  the  evidence  is  not  definitive  for  a  causal  relationship.-----Final  answer:  The  benzodiazepine  category  of  drugs  may  potentially  increase  the  risk  of  hip  fracture,  although  the  evidence  is  not  definitive  for  a  causal  relationship  based  on  the  provided  passages.'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：苯二氮卓类药物是否增加了髋部骨折的风险，减少了风险，还是没有明确的效果？-----推理：1.  洛拉西泮的FDA标签未说明有关髋部骨折风险的信息。2.  地西泮的FDA标签数据未提供有关髋部骨折风险的信息。3.  克隆氮卓的FDA标签提到“骨折创伤”作为一种不常见的不良事件，但没有确立与髋部骨折的因果关系，也未提供有关髋部骨折风险的具体数据。4.  考虑到苯二氮卓类药物的药理作用，包括镇静和肌肉放松，这些药物可能通过增加跌倒风险进而增加髋部骨折的风险，尤其是在老年人中，存在一种合理的机制。5.  虽然克隆氮卓标签中提到的“骨折创伤”作为不常见的不良事件并不确凿，但它暗示了苯二氮卓类药物使用与骨折之间可能存在联系。6.  鉴于合理的机制和克隆氮卓作为不良事件提到骨折的情况，可以推测苯二氮卓类药物可能会增加髋部骨折的风险，尽管证据不足以确立因果关系。-----最终答案：苯二氮卓类药物可能会增加髋部骨折的风险，尽管基于提供的资料，证据不足以确立因果关系。
- en: 'Feedback by Critic:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 批评者反馈：
- en: The  revised  reasoning  is  more  accurate  in  acknowledging  the  potential  risk  increase  for  hip  fractures  associated  with  benzodiazepines,  given  the  pharmacological  effects  and  the  mention  of  ’fracture  traumatic’  as  an  adverse  event  for  Clonazepam.  However,  the  final  answer  should  still  reflect  a  degree  of  uncertainty  due  to  the  lack  of  conclusive  evidence.  It  would  be  more  appropriate  to  state  that  there  is  a  potential  increase  in  the  risk  of  hip  fracture  with  benzodiazepine  use,  but  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship.If  any  flaws  in  the  reasoning  used  to  produce  your  answer  were  identified,  you  must  try  again.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 修订后的推理在确认苯二氮卓类药物可能增加髋部骨折风险方面更为准确，考虑到了药理作用以及克隆氮卓提到的“骨折创伤”作为不良事件。然而，最终答案仍应反映出一定的不确定性，因为缺乏确凿的证据。更合适的表述是，苯二氮卓类药物使用可能增加髋部骨折的风险，但证据不足以确立因果关系。如果在产生你答案的推理中发现任何缺陷，你必须重新尝试。
- en: 'At round 3, the corrected output from CategoryAgent:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 在第3轮中，CategoryAgent提供了更正的输出：
- en: 'Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information  on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  but  does  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Considering  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.5.  The  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label,  while  not  conclusive,  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.6.  Given  the  plausible  mechanism  and  the  mention  of  fractures  as  an  adverse  event  for  Clonazepam,it  is  reasonable  to  infer  that  benzodiazepines  may  potentially  increase  the  risk  of  hip  fracture,  even  though  the  evidence  is  not  definitive  for  a  causal  relationship.7.  However,  due  to  the  lack  of  conclusive  evidence,  the  final  answer  should  reflect  uncertainty  regarding  the  causal  relationship  between  benzodiazepine  use  and  hip  fracture  risk.-----Final  answer:  There  is  a  potential  increase  in  the  risk  of  hip  fracture  associated  with  benzodiazepine  use,  but  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship  based  on  the  provided  passages.'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：苯二氮平类药物是否会增加髋部骨折的风险，减少风险，还是没有明显效果？-----推理：1. FDA 对 Lorazepam 的标签没有具体说明关于髋部骨折风险的信息。2.
    FDA 对 Diazepam 的标签没有提供髋部骨折风险的信息。3. FDA 对 Clonazepam 的标签提到‘创伤性骨折’作为一种不常见的副作用，但没有建立与髋部骨折的因果关系，也没有提供关于髋部骨折风险的具体数据。4.
    考虑到苯二氮平类药物的药理作用，包括镇静和肌肉放松，这些药物可能通过增加跌倒的风险而增加髋部骨折的风险，尤其是在老年人中。5. Clonazepam 标签中提到的‘创伤性骨折’作为不常见的副作用，虽然没有定论，但暗示苯二氮平类药物使用与骨折之间可能存在联系。6.
    鉴于可能的机制和 Clonazepam 标签中提到的骨折作为副作用，合理推测苯二氮平类药物可能会增加髋部骨折的风险，尽管证据不足以确定因果关系。7. 然而，由于缺乏确凿证据，最终答案应反映出对苯二氮平类药物使用与髋部骨折风险之间因果关系的不确定性。-----最终答案：苯二氮平类药物的使用可能会增加髋部骨折的风险，但证据不足以基于所提供的内容明确建立因果关系。
- en: 'Feedback by Critic:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 评论反馈：
- en: Your reasoning is valid, no feedback was provided.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 你的推理是有效的，没有提供反馈。
- en: 'Final output by CategoryAgent:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 分类代理的最终输出：
- en: '"label":  "increase","confidence":  0.6,"probability":  0.1,"frequency":  "rare","evidence":  "weak","justification":  "The  FDA  label  for  Clonazepam  lists  ’fracture  traumatic’  as  an  infrequent  adverse  event,  suggesting  a  potential  link  between  benzodiazepine  use  and  fractures.Given  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.  However,  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship,  and  the  FDA  labels  for  Lorazepam  and  Diazepam  do  not  provide  specific  information  regarding  hip  fracture  risk."'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: '"标签": "增加", "信心": 0.6, "概率": 0.1, "频率": "稀少", "证据": "较弱", "理由": "FDA 对 Clonazepam
    的标签列出了‘创伤性骨折’作为不常见的副作用，暗示苯二氮平类药物使用与骨折之间可能存在潜在联系。考虑到苯二氮平类药物的药理作用，包括镇静和肌肉放松，这些药物可能通过增加跌倒的风险而增加髋部骨折的风险，尤其是在老年人中。然而，证据不足以明确建立因果关系，FDA
    对 Lorazepam 和 Diazepam 的标签没有提供关于髋部骨折风险的具体信息。"'
- en: C.2 Failed Behavior
  id: totrans-360
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.2 失败的行为
- en: MALADE, however, fails to identify the effect of alendronate on gastrointestinal
    ulcer hospitalization. In particular, DrugAgent misinterprets a statement in the
    FDA labels indicating a lack of evidence in clinical trials and forwards an overly
    broad statement that indicates that clinical trials failed to show evidence of
    an effect to CategoryAgent; hence CategoryAgent outputs the incorrect prediction
    of “No Effect.”
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，MALADE 未能确定阿仑膦酸盐对胃肠道溃疡住院的影响。特别是，DrugAgent 错误解读了 FDA 标签中的一个声明，该声明表示临床试验中缺乏证据，并向
    CategoryAgent 转发了一个过于宽泛的声明，表明临床试验未能显示出效果的证据；因此，CategoryAgent 输出了错误的“无效”预测。
- en: 3.1 DrugAgent Step
  id: totrans-362
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1 DrugAgent 步骤
- en: This step was run twice, for each of the representative drugs, Alendronate Sodium
    and Alendronate (noting that in this case only one drug should have been selected).
    We’ll consider the results for Alendronate.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 这一步骤运行了两次，对每种代表药物进行了处理，阿仑膦酸钠和阿仑膦酸盐（注意在这种情况下应只选择一种药物）。我们将考虑阿仑膦酸盐的结果。
- en: The original question to DrugAgent is “Does ALENDRONATE SODIUM increase or decrease
    the risk of gastrointestinal ulcer hospitalization?”
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 对 DrugAgent 的原始问题是：“阿仑膦酸钠是否会增加或减少胃肠道溃疡住院的风险？”
- en: 'DrugAgent queries FDAHandler:'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: DrugAgent 查询 FDAHandler：
- en: 'FUNC: {  "name": "recipient_message",  "to": "",  "arguments": {    "intended_recipient": "FDAHandler",    "content": "Does ALENDRONATE SODIUM increase    the risk of gastrointestinal ulcer hospitalization?"  }}which
    queries the FDA label database with:'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "recipient_message", "to": "", "arguments": { "intended_recipient":
    "FDAHandler", "content": "阿仑膦酸钠是否会增加胃肠道溃疡住院的风险？" }} 这查询了 FDA 标签数据库：'
- en: 'FUNC: {  "name": "relevant_search_extracts",  "to": "",  "arguments": {    "query": "Does ALENDRONATE increase the risk of gastrointestinal ulcer hospitalization?",    "drug": "ALENDRONATE"  }}which
    returns a number of passages from the FDA labels, including:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "relevant_search_extracts", "to": "", "arguments": { "query":
    "阿仑膦酸盐是否会增加胃肠道溃疡住院的风险？", "drug": "阿仑膦酸盐" }} 这返回了来自 FDA 标签的一些段落，包括：'
- en: ALENDRONATE: warnings_and_cautions: 1 Upper Gastrointestinal Adverse Reactions BINOSTO, like other bisphosphonates administered orally, may cause local irritation of the upper gastrointestinal mucosa. Because of these possible irritant effects and a potential for worsening of the underlying disease, caution should be used when BINOSTO is given to patients with active upper gastrointestinal problems (such as known Barrett’s esophagus, dysphagia, other esophageal diseases, gastritis, duodenitis, or ulcers). Esophageal adverse experiences, such as esophagitis, esophageal ulcers and esophageal erosions, occasionally with bleeding and rarely followed by esophageal stricture or perforation, have been reported in patients receiving treatment with oral bisphosphonates including alendronate sodium. In some cases these have been severe and required hospitalization.and
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 阿仑膦酸盐：警告和注意事项：1 上消化道不良反应 BINOSTO 像其他口服双膦酸盐一样，可能会引起上消化道黏膜的局部刺激。由于这些可能的刺激效应和潜在的基础病加重风险，当
    BINOSTO 给有活动性上消化道问题的患者（如已知的 Barrett 食管、吞咽困难、其他食管疾病、胃炎、十二指肠炎或溃疡）时应谨慎。已报告接受口服双膦酸盐治疗的患者中，包括阿仑膦酸钠在内，偶尔出现食管不良反应，如食管炎、食管溃疡和食管糜烂，偶尔伴有出血，且极少发生食管狭窄或穿孔。在一些病例中，这些情况已变得严重并需要住院。
- en: ALENDRONATE: warnings_and_cautions: There have been post-marketing reports of gastric and duodenal ulcers with oral bisphosphonate use, some severe and with complications, although no increased risk was observed in controlled clinical trials.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 阿仑膦酸盐：警告和注意事项：已报告口服双膦酸盐使用后出现胃部和十二指肠溃疡，其中一些严重且伴有并发症，尽管在对照临床试验中未观察到增加的风险。
- en: 'Using these, FDAHandler responds with:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些信息，FDAHandler 回复：
- en: ANSWER: Alendronate, like other bisphosphonates administered orally, may cause local irritation of the upper gastrointestinal mucosa. Esophageal adverse experiences such as esophagitis, esophageal ulcers, and esophageal erosions, occasionally with bleeding and rarely followed by esophageal stricture or perforation, have been reported in patients receiving treatment with alendronate sodium. In some cases, these have been severe and required hospitalization. There have also been post-marketing reports of gastric and duodenal ulcers with oral bisphosphonate use, some severe and with complications, although no increased risk was observed in controlled clinical trials.SOURCE: ALENDRONATE labelEXTRACT_START_END: ...esophageal erosions, occasionally with bleeding and rarely followed by... ...gastric and duodenal ulcers with oral bisphosphonate use, some severe...
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 回答：阿仑膦酸盐（Alendronate）与其他口服双膦酸盐一样，可能会引起上消化道粘膜的局部刺激。已报告使用阿仑膦酸钠治疗的患者中出现食管不良反应，如食管炎、食管溃疡和食管糜烂，偶尔伴有出血，极少情况下会出现食管狭窄或穿孔。在一些病例中，这些反应较为严重，需要住院治疗。市场后也有关于口服双膦酸盐使用导致胃部和十二指肠溃疡的报告，有些溃疡较为严重并伴有并发症，尽管在受控临床试验中并未观察到风险增加。来源：阿仑膦酸盐标签提取开始结束：...食管糜烂，偶尔伴有出血，极少情况下...
    ...口服双膦酸盐使用导致的胃部和十二指肠溃疡，有些严重...
- en: 'DrugAgent now concludes that the effect is uncertain, and sends its reasoning
    to the Critic. Here is where the error occurs: the phrasing “However, no increased
    risk was observed in controlled clinical trials.” is overly broad and suggests
    that alendronate was shown not to increase the risk of all gastrointestinal ulcers
    in clinical trials, while, in reality, that was shown only for gastric and duodenal
    ulcers specifically. This will lead to the incorrect prediction by CategoryAgent.'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 药物代理人现在认为效果不确定，并将其推理发送给批评者。在这里发生了错误：表述“然而，在受控临床试验中并未观察到风险增加。”过于笼统，暗示阿仑膦酸盐在临床试验中未被证明会增加所有胃肠道溃疡的风险，而实际上这仅对胃部和十二指肠溃疡的风险进行了研究。这将导致分类代理人的错误预测。
- en: 'Question: Does ALENDRONATE increase or decrease the risk of        gastrointestinal ulcer hospitalization?        -----        Reasoning:        1. I asked FDAHandler whether ALENDRONATE increases the risk        of gastrointestinal ulcer hospitalization.2. FDAHandler responded that Alendronate can cause local irritation ofthe upper gastrointestinal mucosa and has been associated withesophageal adverse experiences such as esophagitis, esophageal ulcers,and erosions, occasionally with bleeding and rarely followed byesophageal stricture or perforation, which have requiredhospitalization in some cases. There have also been post-marketingreports of gastric and duodenal ulcers with oral bisphosphonate use,some severe and with complications. However, no increased risk was observedin controlled clinical trials.        -----        Final answer: Alendronate may increase the risk of        gastrointestinal ulcer hospitalization, as it has been        associated with severe esophageal adverse experiences and        post-marketing reports of gastric and duodenal ulcers that        required hospitalization in some cases. However, it is        important to note that no increased risk was observed in        controlled clinical trials, indicating that while there is a potential risk,        it may not be common.As
    the critic is unaware of the failure to correctly summarize the output from FDAHandler,
    it concludes that the answer is justified, returning no feedback; DrugAgent recieves:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：阿仑膦酸盐是否增加或减少了胃肠道溃疡住院的风险？ ----- 理由： 1. 我向FDA处理者询问阿仑膦酸盐是否增加胃肠道溃疡住院的风险。2. FDA处理者回应称，阿仑膦酸盐可能会引起上消化道粘膜的局部刺激，并且与食管不良反应（如食管炎、食管溃疡和食管糜烂）有关，这些反应偶尔伴有出血，极少情况下可能会出现食管狭窄或穿孔，需要在一些病例中住院治疗。市场后也有关于口服双膦酸盐使用导致胃部和十二指肠溃疡的报告，有些溃疡较为严重并伴有并发症。然而，受控临床试验中并未观察到风险增加。
    ----- 最终回答：阿仑膦酸盐可能会增加胃肠道溃疡住院的风险，因为它与严重的食管不良反应以及市场后报告的胃部和十二指肠溃疡有关，这些情况在一些病例中需要住院治疗。然而，值得注意的是，受控临床试验中并未观察到风险增加，这表明虽然存在潜在风险，但可能并不常见。由于批评者未能正确总结FDA处理者的输出，导致答案被认为是合理的，没有提供反馈；药物代理人接收：
- en: 'Your reasoning is valid, no feedback was provided.and it outputs the answer
    with the flawed statement:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 你的理由是有效的，没有提供反馈。它输出的答案含有瑕疵的陈述：
- en: Alendronate  may  increase  the  risk  of  gastrointestinal  ulcer  hospitalization,  as  it  has  been  associated  with  severe  esophageal  adverse  experiences  and  post-marketing  reports  of  gastric  and  duodenal  ulcers  that  required  hospitalization  in  some  cases.However,  it  is  important  to  note  that  no  increased  risk  was  observed  in  controlled  clinical  trials,  indicating  that  while  there  is  a  potential  risk,  it  may  not  be  common.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh:  阿仑膦酸盐可能增加胃肠道溃疡住院的风险，因为它与严重的食管不良反应以及一些病例中需要住院治疗的胃和十二指肠溃疡的市场后报告有关。然而，重要的是要注意，在对照临床试验中没有观察到增加的风险，这表明虽然存在潜在风险，但可能不常见。
- en: 3.2 CategoryAgent step
  id: totrans-376
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2 CategoryAgent 步骤
- en: 'The question posed to CategoryAgent with the results from DrugAgent is as follows:'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 提交给 CategoryAgent 的问题与来自 DrugAgent 的结果如下：
- en: Passages:                1. Drug ALENDRONATE SODIUM: ALENDRONATE SODIUM has been associated with gastrointestinal adverse effects that can be severe and may lead to hospitalization, such as esophageal ulcers and erosions. However, it is important to note that while there have been post-marketing reports of severe gastric and duodenal ulcers with complications, no increased risk of gastrointestinal ulcer hospitalization was observed in controlled clinical trials. Therefore, while there is a potential risk, the degree of reliability of this association is not fully established, and the risk of hospitalization due to gastrointestinal ulcers appears to be rare.2. Drug ALENDRONATE: Alendronate may increase the risk of gastrointestinal ulcer hospitalization, as it has been associated with severe esophageal adverse experiences and post-marketing reports of gastric and duodenal ulcers that required hospitalization in some cases. However, it is important to note that no increased risk was observed in controlled clinical trials, indicating that while there is a potential risk, it may not be common.                ---------                Does the alendronate category of drugs increase the risk of gastrointestinal ulcer hospitalization, decrease it, or is there no clear effect?
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 段落：1. 药物阿仑膦酸钠：阿仑膦酸钠与可能严重且可能导致住院的胃肠道不良反应有关，如食管溃疡和糜烂。然而，重要的是要注意，尽管有市场后报告称存在严重的胃和十二指肠溃疡并有并发症，但在对照临床试验中未观察到胃肠道溃疡住院的增加风险。因此，尽管存在潜在风险，但这种关联的可靠程度尚未完全建立，且由于胃肠道溃疡导致住院的风险似乎较少。2.
    药物阿仑膦酸盐：阿仑膦酸盐可能增加胃肠道溃疡住院的风险，因为它与严重的食管不良反应以及一些病例中需要住院治疗的胃和十二指肠溃疡的市场后报告有关。然而，重要的是要注意，在对照临床试验中没有观察到增加的风险，这表明虽然存在潜在风险，但可能不常见。
    --------- 阿仑膦酸盐类别的药物是否增加了胃肠道溃疡住院的风险，减少了风险，还是没有明显效果？
- en: 'Given the overly broad statement from DrugAgent regarding clinical trial evidence,
    CategoryAgent immediately concludes that there is no clear effect and sends its
    reasoning steps to the Critic:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于 DrugAgent 关于临床试验证据的表述过于笼统，CategoryAgent 立即得出没有明确效果的结论，并将其推理步骤发送给 Critic：
- en: 'Question:  Does  the  alendronate  category  of  drugs  increase  the  risk  of  gastrointestinal  ulcer  hospitalization,  decrease  it,  or  is  there  no  clear  effect?-----Reasoning:1.  Both  passages  mention  that  alendronate  and  alendronate  sodium  have  been  associated  with  gastrointestinal  adverse  effects,  including  severe  gastric  and  duodenal  ulcers.2.  Both  passages  also  note  that  these  associations  come  from  post-marketing  reports,  which  are  less  controlled  than  clinical  trials.3.  Passage  1  states  that  no  increased  risk  of  gastrointestinal  ulcer  hospitalization  was  observed  in  controlled  clinical  trials  for  alendronate  sodium.4.  Passage  2  similarly  notes  that  for  alendronate,  no  increased  risk  was  observed  in  controlled  clinical  trials.5.  Both  passages  conclude  that  while  there  is  a  potential  risk,  the  risk  of  hospitalization  due  to  gastrointestinal  ulcers  appears  to  be  rare  and  may  not  be  common.6.  The  evidence  suggests  that  while  there  are  reports  of  severe  cases,  the  controlled  clinical  trials  did  not  show  an  increased  risk,  indicating  that  the  effect  is  not  consistent  or  well-established.-----Final  answer:  There  is  no  clear  effect  of  the  alendronate  category  of  drugs  on  the  risk  of  gastrointestinal  ulcer  hospitalization.'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：阿仑膦酸盐类别的药物是否增加了胃肠道溃疡住院的风险，减少了风险，还是没有明显效果？-----推理：1. 两篇文献均提到阿仑膦酸盐和阿仑膦酸钠与胃肠道不良反应有关，包括严重的胃和十二指肠溃疡。2.
    两篇文献还指出，这些关联来自市场后报告，这些报告的控制程度低于临床试验。3. 文献1 表示，在受控临床试验中未观察到阿仑膦酸钠增加胃肠道溃疡住院的风险。4.
    文献2 同样指出，对于阿仑膦酸盐，受控临床试验中未观察到增加风险。5. 两篇文献得出结论，虽然存在潜在风险，但由于胃肠道溃疡住院的风险似乎很少见，可能并不常见。6.
    证据表明，尽管有严重病例的报告，但受控临床试验未显示风险增加，表明效果不一致或未确立。-----最终回答：阿仑膦酸盐类别的药物对胃肠道溃疡住院的风险没有明显效果。
- en: 'and the Critic approves:'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 且评论者批准：
- en: Feedback: The reasoning provided is consistent with the information from the passages. It correctly identifies that while there are post-marketing reports of gastrointestinal adverse effects, controlled clinical trials did not show an increased risk of gastrointestinal ulcer hospitalization for drugs in the alendronate category. The conclusion that there is no clear effect on the risk of gastrointestinal ulcer hospitalization is supported by the evidence provided. Therefore, there are no flaws in the reasoning process.        If any flaws in the reasoning used to produce your answer were identified,        you must try again.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈：所提供的推理与文献中的信息一致。它正确地识别出虽然有关于胃肠道不良反应的市场后报告，但受控临床试验并未显示阿仑膦酸盐类别的药物会增加胃肠道溃疡住院的风险。结论是，阿仑膦酸盐类别的药物对胃肠道溃疡住院风险没有明显影响，这一点得到了所提供证据的支持。因此，推理过程没有缺陷。如果发现了任何推理缺陷，你必须重新尝试。
- en: 'Finally, CategoryAgent outputs the incorrect final label, with high confidence:'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，CategoryAgent 输出了错误的最终标签，且信心很高：
- en: FUNC: {  "name": "category_effect_tool",  "to": "",  "arguments": {    "label": "no-effect",    "confidence": 0.8,    "probability": 0.05,    "frequency": "rare",    "evidence": "weak",    "justification": "The alendronate category of drugs has been associated with gastrointestinal adverse effects in post-marketing reports, but controlled clinical trials did not show an increased risk of gastrointestinal ulcer hospitalization. The evidence suggests a potential risk, but it is not consistent or well-established, and the risk of hospitalization due to gastrointestinal ulcers appears to be rare and may not be common."  }}
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "category_effect_tool", "to": "", "arguments": { "label": "no-effect",
    "confidence": 0.8, "probability": 0.05, "frequency": "rare", "evidence": "weak",
    "justification": "阿仑膦酸盐类别的药物在市场后报告中与胃肠道不良反应有关，但受控临床试验未显示胃肠道溃疡住院的风险增加。证据表明可能存在风险，但并不一致或确立，且由于胃肠道溃疡住院的风险似乎很少见，可能不常见。"
    }}'
- en: Appendix D Ablations
  id: totrans-385
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 D 消融
- en: 'The objective of our ablation study is to examine the individual impact of
    two principal elements on our system’s performance:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的消融研究的目标是考察两个主要因素对系统性能的单独影响：
- en: (1)
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (1)
- en: the iterative refinement process among multiple agents (i.e., Agent-Critic interaction)
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 多个代理之间的迭代优化过程（即 Agent-Critic 互动）。
- en: (2)
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （2）
- en: the incorporation of external knowledge via RAG.
  id: totrans-390
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通过 RAG 纳入外部知识。
- en: We do not conduct an ablation of our multi-agent design as MALADE cannot be
    naturally expressed as a single-agent system; while expressing all agents and
    control flow of MALADE in a single highly complex agent is possible in principle,
    it is not straightforward to achieve that with any level of reliability.
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 我们没有对我们的多代理设计进行消融，因为 MALADE 无法自然地表现为一个单代理系统；虽然原则上可以在一个高度复杂的代理中表达所有代理和 MALADE
    的控制流程，但要在任何可靠的程度上实现这一点并不简单。
- en: 'For (1), we evaluate the system’s performance with and without the involvement
    of the Critics paired with DrugAgent and CategoryAgent, respectively, by toggling
    them on and off individually. Refer to the first two columns in Table [8](#A4.T8
    "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance"). For compuational
    reasons we do not ablate the critic on DrugFinder.'
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: '对于（1），我们通过分别打开和关闭与 DrugAgent 和 CategoryAgent 配对的 Critics 来评估系统的性能。请参阅表格[8](#A4.T8
    "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance)中的前两列。由于计算原因，我们没有在 DrugFinder
    上进行 Critic 的消融。'
- en: 'For (2), we substitute FDAHandler with a simple agent which answers the questions
    from DrugAgent purely based on LLM’s internal knowledge and generates responses
    in a similar output format as FDAHandler.m Refer to the third column, labeled
    as “RAG”, in Table [8](#A4.T8 "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: '对于（2），我们用一个简单的代理替代 FDAHandler，该代理根据 LLM 的内部知识回答 DrugAgent 的问题，并以类似于 FDAHandler
    的输出格式生成响应。请参阅表格[8](#A4.T8 "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")中的第三列，标记为“RAG”。'
- en: 'Results are obtained by the OMOP ADE task evaluation with the corresponding
    modified versions of MALADE, all of which were run with GPT-4 Turbo. To alleviate
    the computational burden of ablations, when an ablated system’s configuration
    is identical to MALADE’s (i.e., Critics on all agents and RAG enabled) up to a
    given step of the pipeline, we retain the output originally produced by MALADE.
    We address the effects of variance due to random sampling from the LLM in Appendix [E](#A5
    "Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"). We maintain
    consistency with the evaluation metrics and output label post-processing as detailed
    in Section [5.1](#S5.SS1 "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    reporting ADE and effect-based AUC scores (with both the output confidence scores
    and probabilities) and ADE- and effect-based F1 scores.'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: '结果是通过 OMOP ADE 任务评估得到的，使用了相应的 MALADE 修改版本，所有版本都在 GPT-4 Turbo 上运行。为了减轻消融的计算负担，当一个消融系统的配置与
    MALADE 的配置（即所有代理上都有 Critics 和启用了 RAG）在管道的给定步骤之前相同，我们保留 MALADE 原本产生的输出。我们在附录[E](#A5
    "Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")中讨论了由于随机抽样 LLM
    导致的方差效应。我们保持与评估指标和输出标签后处理的一致性，如第[5.1](#S5.SS1 "5.1 Evaluation Setup ‣ 5 Experiments
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")节所述，报告 ADE 和基于效果的 AUC 分数（包括输出置信度分数和概率）以及基于 ADE 和效果的 F1
    分数。'
- en: Critics RAG ADE-based AUC Effect-based AUC F1 Score DrugAgent CategoryAgent
    Confidence Probability Probability (Modified) Confidence Probability Probability
    (Modified) ADE Effect ✓ ✓ ✓ 0.8514 0.7935 0.8043 0.8306 0.8058 0.8151 0.5556 0.6087
    ✓ $\times$ 0.9203 0.7428 0.8563 0.9256 0.7800 0.8771 0.5556 0.6364
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: Critics RAG ADE-based AUC Effect-based AUC F1 Score DrugAgent CategoryAgent
    Confidence Probability Probability (Modified) Confidence Probability Probability
    (Modified) ADE Effect ✓ ✓ ✓ 0.8514 0.7935 0.8043 0.8306 0.8058 0.8151 0.5556 0.6087
    ✓ $\times$ 0.9203 0.7428 0.8563 0.9256 0.7800 0.8771 0.5556 0.6364
- en: 'Table 8: Ablation results on MALADE.'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8：MALADE 的消融结果。
- en: 'Results in Table [8](#A4.T8 "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    show that, in the case with RAG, the best results are obtained with the Critic
    on CategoryAgent active but the Critic on DrugAgent disabled (row 3); this suggests
    that the feedback from CategoryAgent’s Critic is important for producing the most
    reliable results, but that DrugAgent’s Critic may reduce the performance of MALADE.
    The case with a Critic on DrugAgent but not CategoryAgent does not confirm this
    hypothesis (row 2), however, showing slightly improved confidence scores and F1
    scores, but much worse results in terms of probabilities compared to full MALADE
    (row 1). Compared to this case, removing the DrugAgent’s Critic worsens results
    with the exception of probability-based evaluations; hence, it is difficult to
    confidently determine from these results whether DrugAgent’s Critic is helpful
    or harmful. The extremely strong results in the case with the Critic on CategoryAgent
    active but the Critic on DrugAgent disabled do, however, appear to outweigh the
    improvements observed in the second row, suggesting that the Critic on CategoryAgent
    does in fact improve the overall reliability of MALADE.'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: '表[8](#A4.T8 "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")中的结果表明，在RAG的情况下，最佳结果是在激活CategoryAgent的Critic但禁用DrugAgent的Critic时获得的（第3行）；这表明，来自CategoryAgent的Critic的反馈对于产生最可靠的结果是重要的，但DrugAgent的Critic可能会降低MALADE的性能。然而，DrugAgent的Critic处于启用状态而CategoryAgent的Critic处于禁用状态的情况并没有确认这一假设（第2行），尽管显示了稍微改进的置信度分数和F1分数，但在概率方面的结果却比完整的MALADE（第1行）差得多。与这种情况相比，移除DrugAgent的Critic使结果变差，除了基于概率的评估；因此，从这些结果中很难自信地确定DrugAgent的Critic是有益还是有害。然而，在激活CategoryAgent的Critic而禁用DrugAgent的Critic的情况下，观察到的极其强劲的结果似乎超过了第二行的改进，这表明CategoryAgent的Critic确实提高了MALADE的整体可靠性。'
- en: The results without RAG show, slightly improved AUCs in the presence of DrugAgent’s
    Critic; CategoryAgent’s Critic, on the other hand, reduces F1 scores and slightly
    reduces probability-based AUCs.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 没有RAG的结果显示，在DrugAgent的Critic存在的情况下，AUC略有改善；另一方面，CategoryAgent的Critic减少了F1分数，并略微降低了基于概率的AUC。
- en: 'Despite strong performance observed with probability-based metrics with some
    settings, these results suggest that direct estimates of effect probabilities
    may not be reliable measures in future pharmacovigilance systems; to see this,
    compare the columns labeled “Probability” and “Probability (Modified).” The “Probability
    (Modified)” column is the same as “Probability” except that output probabilities
    are incremented by 1 when the label is “increase” for ADE-based AUC and “increase”
    or “decrease” for effect-based AUC. In the ADE case, this modification enforces
    the separation between the derived scores from samples GPT-4 Turbo labeled as
    increasing risk and as having no effect; the improved results observed indicate
    that GPT-4’s probability estimates are not consistent: substantial numbers of
    “no-effect” cells are assigned higher probabilities of an effect occurring as
    compared to cells where GPT-4 itself identifies increased risk.'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管在某些设置下使用基于概率的指标观察到了强劲的表现，但这些结果表明，直接估计的效果概率可能在未来的药物监测系统中并不是可靠的衡量标准；要验证这一点，可以比较标记为“Probability”和“Probability
    (Modified)”的列。“Probability (Modified)”列与“Probability”列相同，只是当标签为“increase”时，对于基于ADE的AUC，以及当标签为“increase”或“decrease”时，对于基于效果的AUC，输出的概率会增加1。在ADE的情况下，这种修改强制区分了GPT-4
    Turbo标记为增加风险和无效的样本之间的派生分数；观察到的改进结果表明，GPT-4的概率估计并不一致：与GPT-4自己识别出增加风险的单元格相比，许多“无效”单元格被分配了更高的效果发生概率。
- en: Appendix E Variance of MALADE’s outputs
  id: totrans-400
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录E MALADE输出的方差
- en: We wish to evaluate how much random sampling from LLM outputs affects MALADE’s
    outputs, and, in particular, given the potential unreliability of numerical outputs
    produced by LLMs [[44](#bib.bib44)], how much variance there is in MALADE’s output
    confidence scores. Moreover, we aim to understand whether key components of MALADE’s
    design, namely Critic agents and RAG, affect these numerical outputs, and, in
    particular, affect their consistency, as well as whether variance in the outputs
    by the first two agents in MALADE’s pipeline (DrugFinder and DrugAgent) is a significant
    contributor to the overall variance of these outputs.
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望评估LLM输出的随机抽样对MALADE输出的影响，特别是考虑到LLM生成的数值输出的潜在不可靠性[[44](#bib.bib44)]，MALADE的输出置信度得分的方差有多大。此外，我们旨在了解MALADE设计中的关键组件，即Critic代理和RAG，是否影响这些数值输出，特别是是否影响它们的一致性，以及MALADE管道中前两个代理（DrugFinder和DrugAgent）输出的方差是否对这些输出的总体方差有显著贡献。
- en: 'We proceed by selecting three representative cells from the OMOP table, restricting
    ourselves to the cells used for evaluation and, to ensure a well-defined ground
    truth label for each representative, to drug categories without subcategories.
    Each representative corresponds to one of the three ground truth labels (increased
    risk, decreased risk, and no effect). We then run ten trials on each cell with
    ablated versions of MALADE (constructed as in Appendix [D](#A4 "Appendix D Ablations
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance"); however, we only consider enabling or disabling Critics
    on all agents, including DrugFinder here). The results are shown in Figure [13](#A5.F13
    "Figure 13 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance");
    these experiments were run with GPT-4 Turbo.'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过从OMOP表中选择三个代表性单元进行研究，仅限于用于评估的单元，并且为了确保每个代表性单元有一个明确定义的真实标签，我们选择没有子类别的药物类别。每个代表性单元对应三个真实标签之一（增加风险、减少风险和无效应）。然后，我们对每个单元进行十次试验，使用MALADE的消融版本（构造方法见附录 [D](#A4
    "附录 D 消融 ‣ MALADE：利用检索增强生成技术进行药物警戒的LLM驱动代理的协调")；然而，我们仅考虑在所有代理（包括DrugFinder）上启用或禁用Critics。结果如图 [13](#A5.F13
    "图 13 ‣ 附录 E MALADE输出的方差 ‣ MALADE：利用检索增强生成技术进行药物警戒的LLM驱动代理的协调")所示；这些实验使用了GPT-4
    Turbo。
- en: '![Refer to caption](img/fbed2728c7c5dd37203a8e419892decc.png)'
  id: totrans-403
  prefs: []
  type: TYPE_IMG
  zh: '![请参阅说明](img/fbed2728c7c5dd37203a8e419892decc.png)'
- en: 'Figure 13: Histograms of confidence in ADE produced by ablations of MALADE.'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13：MALADE消融版本生成的ADE置信度直方图。
- en: We observe that in all cases, MALADE maintains a clear separation between the
    confidences for each ground truth label, with the sole exception being the case
    with RAG but without Critics; that case is the only one in which we observe any
    samples with incorrect labels; the variance is similarly increased significantly
    in that case.
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 我们观察到，在所有情况下，MALADE都保持了每个真实标签的置信度之间的明显分离，唯一的例外是没有Critics的RAG情况；在这种情况下，我们仅观察到样本有错误标签；同时，这种情况的方差也显著增加。
- en: '![Refer to caption](img/32ed18b9f18640fb8974daaf97b80817.png)'
  id: totrans-406
  prefs: []
  type: TYPE_IMG
  zh: '![请参阅说明](img/32ed18b9f18640fb8974daaf97b80817.png)'
- en: 'Figure 14: Histograms of confidence in ADE produced by MALADE with the outputs
    of each initial sequence of agents in the pipeline held fixed.'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14：MALADE生成的ADE置信度直方图，其中管道中每个初始序列的代理输出保持不变。
- en: Next, we investigate how the variance in the outputs of DrugFinder and DrugAgent
    contribute to the overall variance of MALADE. We compare the variance of MALADE’s
    outputs with the initial steps of the pipeline held fixed; They indicate that
    holding the initial steps of the pipeline fixed does not substantially reduce
    variance and that CategoryAgent is the primary source of variance in MALADE. However,
    note that the variance for “no-effect” is, somewhat surprisingly, highest with
    the outputs of DrugFinder and DrugAgent held constant. We observe that the variance
    in the representative drugs affects output confidence, in particular, it affects
    mean confidence in ADEs for the “no effect” representative. With the representatives
    held fixed, that mean confidence is higher (or, equivalently, mean confidence
    in “no effect” is lower) compared to the case in which we resample representatives
    in each trial.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们探讨DrugFinder和DrugAgent输出的方差如何影响MALADE的总体方差。我们将MALADE的输出方差与固定初始步骤的管道进行比较；结果表明，固定管道的初始步骤并不会显著减少方差，而CategoryAgent是MALADE方差的主要来源。然而，值得注意的是，“无效”情况下的方差，令人有些意外，最高出现在DrugFinder和DrugAgent的输出保持不变时。我们观察到代表药物的方差影响输出置信度，特别是它影响“无效”代表的ADE的平均置信度。当代表药物保持不变时，该平均置信度更高（或者说，“无效”的平均置信度更低），与我们在每次试验中重新抽样代表药物的情况相比。
- en: '|  | Critics and RAG | Critics only | RAG only |'
  id: totrans-409
  prefs: []
  type: TYPE_TB
  zh: '|  | 评论和RAG | 仅评论 | 仅RAG |'
- en: '| --- | --- | --- | --- |'
  id: totrans-410
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Critics only | $<$ | — | — |'
  id: totrans-411
  prefs: []
  type: TYPE_TB
  zh: '| 仅评论 | $<$ | — | — |'
- en: '| RAG only | $<$ | — |'
  id: totrans-412
  prefs: []
  type: TYPE_TB
  zh: '| 仅RAG | $<$ | — |'
- en: '| Neither critics nor RAG | $<$ |'
  id: totrans-413
  prefs: []
  type: TYPE_TB
  zh: '| 既不是评论也不是RAG | $<$ |'
- en: 'Table 9: Relationship of mean confidence in ADE for “decrease” for ablated
    versions of MALADE, with p-values.'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 表9：MALADE去除版本的“减少”情况下的ADE平均置信度关系，以及p值。
- en: '|  | Critics and RAG | Critics only | RAG only |'
  id: totrans-415
  prefs: []
  type: TYPE_TB
  zh: '|  | 评论和RAG | 仅评论 | 仅RAG |'
- en: '| --- | --- | --- | --- |'
  id: totrans-416
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Critics only | $<$ | — | — |'
  id: totrans-417
  prefs: []
  type: TYPE_TB
  zh: '| 仅评论 | $<$ | — | — |'
- en: '| RAG only | $$> | — |'
  id: totrans-418
  prefs: []
  type: TYPE_TB
  zh: '| 仅RAG | $$> | — |'
- en: '| Neither critics nor RAG | $<$ |'
  id: totrans-419
  prefs: []
  type: TYPE_TB
  zh: '| 既不是评论也不是RAG | $<$ |'
- en: 'Table 10: Relationship of mean confidence in ADE for “no-effect” for ablated
    versions of MALADE, with p-values.'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 表10：MALADE去除版本的“无效”情况下的ADE平均置信度关系，以及p值。
- en: '|  | Critics and RAG | Critics only | RAG only |'
  id: totrans-421
  prefs: []
  type: TYPE_TB
  zh: '|  | 评论和RAG | 仅评论 | 仅RAG |'
- en: '| --- | --- | --- | --- |'
  id: totrans-422
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Critics only | $<$ | — | — |'
  id: totrans-423
  prefs: []
  type: TYPE_TB
  zh: '| 仅评论 | $<$ | — | — |'
- en: '| RAG only | 
    |'
  id: totrans-425
  prefs: []
  type: TYPE_TB
  zh: '| 既不是评论也不是RAG | 
    |'
- en: 'Table 11: Relationship of mean confidence in ADE for “increase” for ablated
    versions of MALADE, with p-values.'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 表11：MALADE去除版本的“增加”情况下的ADE平均置信度关系，以及p值。
- en: 'Now, to understand the significance of these effects, we will perform paired
    t-tests for each pair of ablated variants of MALADE, for each representative.
    The results for “decrease” are in Table [9](#A5.T9 "Table 9 ‣ Appendix E Variance
    of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance"), results for “no-effect” are shown
    in Table [10](#A5.T10 "Table 10 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    and results for “increase” are shown in Table [11](#A5.T11 "Table 11 ‣ Appendix
    E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance"). Overall, we have that
    the mean confidence in ADE for the representative for “decrease” is lowest (i.e.
    the confidence in “decrease” is highest) in the case with neither Critics nor
    RAG, and we have that confidence in ADE for the representative of “no-effect”
    is lower (and so confidence in “no-effect” is higher) in the case that we have
    neither Critics nor RAG as compared to the cases with both Critics and RAG and
    RAG alone and, in addition, that confidence in ADE is increased (with RAG alone
    as compared with Critics alone, all with p-values below 0.05 for each pair.'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: '现在，为了理解这些效应的显著性，我们将对每一对 MALADE 的消融变体进行配对 t 检验，针对每个代表。“减少”的结果见表[9](#A5.T9 "表
    9 ‣ 附录 E MALADE 输出的方差 ‣ MALADE: 由 LLM 驱动的代理与检索增强生成用于药物监测的协调")，“无效”的结果见表[10](#A5.T10
    "表 10 ‣ 附录 E MALADE 输出的方差 ‣ MALADE: 由 LLM 驱动的代理与检索增强生成用于药物监测的协调")，“增加”的结果见表[11](#A5.T11
    "表 11 ‣ 附录 E MALADE 输出的方差 ‣ MALADE: 由 LLM 驱动的代理与检索增强生成用于药物监测的协调")。总体而言，“减少”代表的
    ADE 平均置信度在既无 Critics 也无 RAG 的情况下最低（即“减少”的置信度最高），并且“无效”代表的 ADE 置信度在既无 Critics 也无
    RAG 的情况下较低（因此“无效”的置信度较高），相较于同时有 Critics 和 RAG 以及仅有 RAG 的情况。此外，仅有 RAG 的 ADE 置信度（与仅有
    Critics 的情况相比）增加，所有配对的 p 值均低于 0.05。'
- en: With p-values below 0.1, we additionally have that mean confidence in ADE for
    “decrease” is decreased in the case with RAG alone as compared to the case with
    both Critics and RAG, confidence in ADE is increased with RAG alone as compared
    to critics and RAG, and, finally, that confidence in ADE for “increase” is increased
    with neither Critics nor RAG as compared to Critics alone.
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 当 p 值低于 0.1 时，我们还发现“减少”情况中仅有 RAG 的 ADE 平均置信度低于同时有 Critics 和 RAG 的情况，而仅有 RAG
    的 ADE 置信度高于 Critics 和 RAG 的情况，最后，“增加”情况中仅有 Critics 的 ADE 置信度高于既无 Critics 也无 RAG
    的情况。
- en: 'Note that, while, as seen in Figure [13](#A5.F13 "Figure 13 ‣ Appendix E Variance
    of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance"), by far the largest absolute shift
    in confidence occurs between RAG alone and all others for the “no-effect” representative,
    the large variance observed in that case is responsible for the reduced significance.'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: '请注意，如图[13](#A5.F13 "图 13 ‣ 附录 E MALADE 输出的方差 ‣ MALADE: 由 LLM 驱动的代理与检索增强生成用于药物监测的协调")所示，尽管“无效”代表中的置信度绝对变化最大发生在仅有
    RAG 与其他所有情况之间，但在这种情况下观察到的大方差导致了显著性的降低。'
- en: Extrapolating from these representative samples, these results suggest that
    MALADE without RAG or Critics performs at least as well as any other configuration
    (with a p-value $<0.05$.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 从这些代表性样本中推断，这些结果表明没有 RAG 或 Critics 的 MALADE 至少表现得与任何其他配置一样好（p 值 $<0.05$）。
- en: 'As discussed in Section [5.3](#S5.SS3 "5.3 RQ2: Agent-Critic interaction enhances
    reliability ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance"), we consider RAG an essential
    component of a generalizable pharmacovigilance system. Hence, we focus on the
    results in the case with RAG, in which case these results suggest that the Critic
    components of MALADE improve reliability.'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '如第[5.3节](#S5.SS3 "5.3 RQ2: Agent-Critic interaction enhances reliability ‣
    5 Experiments ‣ MALADE: 由 LLM 驱动的代理与检索增强生成用于药物监测的协调")所述，我们认为 RAG 是一个通用药物监测系统的重要组成部分。因此，我们专注于
    RAG 情况下的结果，这些结果表明 MALADE 的 Critic 组件提高了可靠性。'
