<!--yml
category: 未分类
date: 2025-01-11 11:42:29
-->

# Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning

> 来源：[https://arxiv.org/html/2412.20505/](https://arxiv.org/html/2412.20505/)

Hang Ni, Yuzhi Wang, Hao Liu

###### Abstract

Urban regeneration presents significant challenges within the context of urbanization, requiring adaptive approaches to tackle evolving needs. Leveraging advancements in large language models (LLMs), we propose Cyclical Urban Planning (CUP), a new paradigm that continuously generates, evaluates, and refines urban plans in a closed-loop. Specifically, our multi-agent LLM-based framework consists of three key components: (1) Planning, where LLM agents generate and refine urban plans based on contextual data; (2) Living, where agents simulate the behaviors and interactions of residents, modeling life in the urban environment; and (3) Judging, which involves evaluating plan effectiveness and providing iterative feedback for improvement. The cyclical process enables a dynamic and responsive planning approach. Experiments on the real-world dataset demonstrate the effectiveness of our framework as a continuous and adaptive planning process.

## Introduction

With rapid urbanization over the past few decades, many existing urban configurations have become inadequate for current needs, necessitating continuous urban regeneration to create more livable environments (Qian et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib11)). Traditional urban planning methods include a top-down paradigm dominated by governments and urban planners, as well as a participatory paradigm that emphasizes collaborative decision-making with public citizens (Li et al. [2020](https://arxiv.org/html/2412.20505v1#bib.bib7)). To improve effectiveness, recent research has increasingly focused on leveraging machine learning (ML) techniques (Zheng et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib18); Wang et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib15); Qian et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib11)). More recently, the remarkable generalization abilities of large language models (LLMs) have led to the emergence of LLM-empowered multi-agent frameworks as powerful tools for urban planning (Zhou et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib19)).

Despite these advancements, existing urban planning methods face significant limitations in adapting to the continuous and dynamic changes characteristic of urban environments. Conventional planning approaches often rely on static, one-time interventions that lack the flexibility to accommodate evolving community needs or respond to unforeseen circumstances. To address this limitation, we propose cyclical urban planning (CUP), a novel paradigm that emphasizes long-term, iterative plan regeneration. CUP aims to establish a closed-loop planning process where urban plans are continually evaluated, refined, and adapted, thereby ensuring responsiveness to changing urban dynamics (Chigbu et al. [2016](https://arxiv.org/html/2412.20505v1#bib.bib2); Ramezani and Nooraie [2023](https://arxiv.org/html/2412.20505v1#bib.bib12)).

However, a fundamental challenge within CUP is how to effectively evaluate and improve urban plans throughout this iterative process (Oliveira and Pinho [2010](https://arxiv.org/html/2412.20505v1#bib.bib8); Wang et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib15)). Quality of life (QOL), encompassing both quantitative and qualitative measures of residents’ well-being, is a key metric used to assess the effectiveness of urban plans. However, traditional evaluation methods, such as observational studies and resident surveys, are often labor-intensive and time-consuming (Santos and Martins [2007](https://arxiv.org/html/2412.20505v1#bib.bib13); Wang et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib15)), which limits their scalability and restricts the frequency of assessment. While agent-based modeling (ABM) has emerged as a computational alternative to automate parts of the evaluation process (Hosseinali, Alesheikh, and Nourian [2013](https://arxiv.org/html/2412.20505v1#bib.bib5); González-Méndez et al. [2021](https://arxiv.org/html/2412.20505v1#bib.bib4)), ABM approaches typically rely on rigid, predefined rules or narrowly-focused ML models. This rigidity hinders their capacity to adapt to complex and diverse urban scenarios (Gao et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib3)).

In this paper, we propose an LLM-empowered multi-agent framework for CUP that integrates three iterative phases in a closed-loop: (1) Planning, where LLM agents collaboratively generate and refine urban plans involving both planners and residents; (2) Living, where the LLM-based ABM simulates residents’ behaviors and interactions to monitor urban life; and (3) Judging, which automatically evaluates the QOL and generates recommendations for improving the urban plan in the next planning cycle. We validate our approach through a case study on the Huilongguan community in Beijing, demonstrating its effectiveness in enhancing urban planning outcomes.

![Refer to caption](img/a73386369d6a8472928f04506f8ddb9e.png)

Figure 1: Framework overview.

## Related Work

Urban Planning. Traditional urban planning approaches, including both top-down and participatory methods, have been foundational but face limitations in adaptability and scalability (Taylor [1998](https://arxiv.org/html/2412.20505v1#bib.bib14); Arnstein [1969](https://arxiv.org/html/2412.20505v1#bib.bib1); Lane [2005](https://arxiv.org/html/2412.20505v1#bib.bib6)). Recent works have introduced machine learning (ML) to enhance urban planning by automating decision-making processes and improving scalability (Zheng et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib18); Wang et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib15); Qian et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib11)). The rise of large language models (LLMs) has further advanced urban planning capabilities, enabling complex multi-agent collaboration for consensus-building (Zhou et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib19)). However, existing approaches focus primarily on one-time planning efforts, lacking the iterative, closed-loop nature needed for adaptive urban planning (Chigbu et al. [2016](https://arxiv.org/html/2412.20505v1#bib.bib2); Ramezani and Nooraie [2023](https://arxiv.org/html/2412.20505v1#bib.bib12)).

LLM-based Simulation. Agent-based modeling (ABM) has long been used to simulate complex urban dynamics by modeling interactions between agents (Hosseinali, Alesheikh, and Nourian [2013](https://arxiv.org/html/2412.20505v1#bib.bib5); González-Méndez et al. [2021](https://arxiv.org/html/2412.20505v1#bib.bib4)). LLMs have emerged as powerful tools to enhance these simulations, offering human-like reasoning, interpretability, and adaptability across diverse urban scenarios (Gao et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib3)). LLM-based simulations have been applied in various contexts such as social networks, mobility patterns, and urban activity modeling (Park et al. [2022](https://arxiv.org/html/2412.20505v1#bib.bib10); Wang et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib16); Yan et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib17)). In this work, we leverage LLM-based ABM to simulate residents’ mobility and social behaviors, providing a more holistic understanding of urban life.

## Methodology

Problem statement. Given an urban region $\mathcal{A}$ partitioned into smaller areas $\{a_{1},a_{2},\dots,a_{N_{a}}\}\in\mathcal{A}$, where $N_{a}$ is the total number of areas, we define an urban plan as a mapping $P:\mathcal{A}\rightarrow\mathcal{U}$. Each area $a_{i}$ is assigned a land-use type $u_{i}=P(a_{i})\in\mathcal{U}$, where $\mathcal{U}$ represents the set of land-use types. The objective is to iteratively refine the urban plan $P$ by continuously evaluating its impact on urban dynamics and adjusting land-use assignments accordingly.

Framework overview. Figure [1](https://arxiv.org/html/2412.20505v1#Sx1.F1 "Figure 1 ‣ Introduction ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning") illustrates the overall workflow of our cyclical urban planning framework, including Planning, Living, and Judging. The process initiates with Planning module which iteratively refines the urban plan by incorporating feedback and suggestions derived from previous evaluations. This is followed by the Living phase, where the lives of the resident agents are simulated, capturing their mobility and social behaviors under the current plan. Finally, the Judging phase evaluates the plan’s impact on urban quality of life (QOL) and provides recommendations for further adjustments. These phases are repeated in a closed loop, ensuring the urban plan is continuously adapted and optimized to respond to changing conditions and evolving resident needs.

Profiling. Our framework entails three kinds of LLM agents: planner $\mathbf{P}$, judger $\mathbf{J}$ and residents $\mathbf{R}_{i},\ i=1,2,...,N_{r}$, which are assigned with specific role-playing profiles. The planner agent is responsible for integrating the discussion results, iterative suggestions for improvements, and his high-level planning expert knowledge together to draft and revise an urban plan. Also, we steer the judger agent to reflect on the quantitative and qualitative analysis results and offer feedback for plan renewal.

Resident agents are essential for our workflow in terms of collaborative decision-making in planning, living simulation, and qualitative surveys during judging, making it pressing to tailor resident profiling techniques. Specifically, we use the LLM to automatically and separately profile the residents, free from expensive manual profiling and exceeding context token limits when the number of residents scales up. For the profiling of each resident, we first sample the basic attributes (*e.g.*, age, gender, etc.) from demographic data to align with real-world population distribution. Then, we utilize prompt chaining to gradually generate the agent’s personality, occupation, hobbies, and even lifestyle and pursuits, ensuring the profile’s coherence and richness. Besides, the attributes generated for previous residents are avoided when profiling the following residents, to constrain the profile repetition.

Planning. The planning phase intends to recurrently generate and refine an urban plan with the aid of the superior capability of LLMs. Inspired by (Zhou et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib19)), we implement the planning process by incorporating both urban planner and public participation for effectiveness, which caters to the needs of both the planner and resident agents, which is elucidated in Figure [1](https://arxiv.org/html/2412.20505v1#Sx1.F1 "Figure 1 ‣ Introduction ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning")(a). The workflow of planning at the $i$-th iteration is introduced below:

|  | $\displaystyle\tilde{P}_{k}$ | $\displaystyle=\mathbf{P}.\text{plan}(K,P_{k-1},S_{k-1}),$ |  | (1) |
|  | $\displaystyle D_{k}$ | $\displaystyle=\text{discuss}(\{\mathbf{R}_{i}\}_{i=0}^{N_{r}},P_{k-1}),$ |  | (2) |
|  | $\displaystyle P_{k}$ | $\displaystyle=\mathbf{P}.\text{plan}(K,\tilde{P}_{k},S_{k-1},D_{k}).$ |  | (3) |

In particular, the planner agent first modifies the previous plan $P_{k-1}$ with expert knowledge $K$ and suggestions from the last iteration $S_{k-1}$. Then, the resident agents are nudged into a discussion to balance the diverging interests, motivated by their profiles and previous living experiences (if $k\geq 2$). Finally, the discussion result $D_{k}$ is summarized and leveraged by the planner to polish the plan further. Note that $P_{0}$ is initiated with some vacant areas to be determined (*i.e.*, except for residential areas) in the first iteration.

Living. The living stage embraces LLM-empowered ABM as an alternative to the traditional resource-intensive monitoring paradigm, which includes two principal components: (1) Mobility behavior simulation that emulates the residents’ daily living trajectories and feelings in the region (shown in Figure [1](https://arxiv.org/html/2412.20505v1#Sx1.F1 "Figure 1 ‣ Introduction ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning")(b.1)). (2) Social behavior simulation that imitates the propagation process of residents’ experiences and opinions towards the region through social media (depicted in Figure [1](https://arxiv.org/html/2412.20505v1#Sx1.F1 "Figure 1 ‣ Introduction ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning")(b.2)). The updating formulas of living at time $t$ are exhibited as follows (we omit the iteration subscript $k$ for clarity):

|  | $\displaystyle M_{i}(t),L_{i}(t),N_{i}(t)=\mathbf{R}_{i}.\text{live}(M_{i}(t-1)% ,E(t-1)),$ |  | (4) |
|  | $\displaystyle E(t)=\text{sync}(E(t-1),\{L_{i}(t),N_{i}(t)\}_{i=0}^{N_{r}}),$ |  | (5) |

where $L_{i}$ denotes the mobility behavior (*i.e.*, geographic location of $\mathbf{R}_{i}$), $N_{i}$ denotes the social behavior (*i.e.*, posts or comments published by $\mathbf{R}_{i}$ in the social media). Each resident is equipped with a dynamic memory pool $M(t)$ to record the agent’s living experience. The evolving environment $E(t)=\{E_{R}(t),E_{S}(t)\}$ is the combination of physical region and social media during residents’ living, which are synchronously updated.

In specific, to serve the simulation above, we refer to (Park et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib9)) to design the agent architecture during living simulation. For each living step, the resident first perceives the occurrences in the environment and then plans the next behavior (*i.e.*, mobility and social behaviors) for potential execution. The agent is also prodded to reflect on his experience to yield high-level thoughts. The memory pool is curated to store the events, behaviors, and thoughts, as well as facilitate effective planning and reflecting through memory retrieval.

Judging. The judging procedure resorts to LLM to provide reality-oriented evaluation and offer comments on plan improvements, according to both quantitative and qualitative analysis of the living simulation, as described in Figure [1](https://arxiv.org/html/2412.20505v1#Sx1.F1 "Figure 1 ‣ Introduction ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning")(c). The workflow of judging is formulated as follows:

|  | $\displaystyle Q_{k,1}$ | $\displaystyle=\text{automatic}(P_{k},E_{k}(T),\{\mathbf{R}_{i}\}_{i=0}^{N_{r}}),$ |  | (6) |
|  | $\displaystyle Q_{k,2}$ | $\displaystyle=\text{interview}(\{\mathbf{R}_{i}\}_{i=0}^{N_{r}}),$ |  | (7) |
|  | $\displaystyle R_{k}$ | $\displaystyle=\text{Avg}(Q_{k,1},Q_{k,2}),$ |  | (8) |
|  | $\displaystyle S_{k}$ | $\displaystyle=\mathbf{J}.\text{suggest}(Q_{k,1},Q_{k,2}).$ |  | (9) |

To investigate the planned efficacy, we follow (Zhou et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib19)) and conduct the quantitative statistics for the urban plan $P_{k}$ by automatic measures such as accessibility (*i.e.*, average coverage of various land-uses) and ecology (*i.e.*, the coverage of greening land-uses). Additionally, we implement qualitative interviews for the residents through a questionnaire, to gather the living experience scores (percentage scale). Note that we only use part of QOL metrics in this ongoing work, the comprehensive assessment dimensions will be considered in future work. Afterwards, we collect the quantitative and qualitative analysis results $Q_{k,1},Q_{k,2}$ to report the overall validity of the current plan $P_{k}$ as $R_{k}$. Furthermore, we harness the judger agent to deliberate over the suggestions for plan improvements $S_{k}$.

## Experiment

Experimental setup. Following (Zheng et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib18); Zhou et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib19)), we test our framework on Huilongguan community which is 3.74km² region located $33\text{km}$ north of Beijing’s city center. In the experiments, we use GPT-4o and set the temperature as 0 for stability. We generate 30 resident agents beforehand and implement our framework for 3 iterations. For each iteration, we simulate for one day, where the time granularity of the simulation is one minute. To prove our superiority, we compare the framework to a random planning method, a deep reinforcement learning (DRL)-based method (Zheng et al. [2023](https://arxiv.org/html/2412.20505v1#bib.bib18)), and a multi-agent LLM-based method (Zhou et al. [2024](https://arxiv.org/html/2412.20505v1#bib.bib19)). Note that the MA-LLM method instantiates our framework with only one iteration, evaluated by subsequent living and judging processes. The four evaluation metrics originate from the judging procedure, including Accessibility, Ecology, and Experience.

Table 1: Planning efficacy (%).

 | Method | Access. | Ecology | Experi. |
| Random | 61.67 | 50.00 | 65.17 |
| DRL | 66.25 | 56.67 | 64.23 |
| MA-LLM (Ours${}_{-1st})$ | 65.00 | 73.33 | 65.03 |
| Ours[-2nd] | 62.50 | 56.67 | 66.6 |
| Ours[-3rd] | 64.17 | 53.33 | 69.03 | 

Results. The comparison of our framework and two baselines are reported in Table [1](https://arxiv.org/html/2412.20505v1#Sx4.T1 "Table 1 ‣ Experiment ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning"). We summarize our observations as follows: First, our framework generally outperforms baselines in Experience metric, and the effectiveness gradually increases with the number of cycles, which arrives at 69.03% after 3 iterations indicating the average living experience score reaches 69.03 among residents. Such results reveal that our framework can effectively balance the residents’ requirements and holds the potential to enhance the residents’ living experience in a continuous manner relying on iterative plan refinement. Second, from the quantitative perspective, the DRL-based method achieves the best performance in Accessibility since DRL is tailored to optimize for higher macro-accessibility. In addition, we observe the outcome decline of our framework during cycling in Accessibility and Ecology metrics, which possibly stem from the conflicts between quantitative and qualitative factors. Therefore we speculate that the boost of subjective human well-being ought to undertake the sacrifice of the valid spatial layout of land uses.

![Refer to caption](img/63b59195385d35b24741366792fc9f5f.png)

Figure 2: Case study of $\mathbf{R}_{19}$.

Case study. To assess whether our resident agents generate reliable behaviors and feedback and contribute to plan renovations, we study the participation of $\mathbf{R}_{19}$ during the cycling of our framework (Figure [2](https://arxiv.org/html/2412.20505v1#Sx4.F2 "Figure 2 ‣ Experiment ‣ Planning, Living and Judging: A Multi-agent LLM-based Framework for Cyclical Urban Planning")). Briefly, the elderly gardener looks forward to more open spaces close to home. He shares his wishes on social media and gets support from $\mathbf{R}_{16}$. During the subsequent interview and discussion, he insists on such desires, and finally $a_{12}$ is approved to be altered into an open space.

## Conclusion and Future Work

In this paper, we propose a LLM-based framework for CUP by iterating planning, living, and judging. The experiments in Huilongguan, Beijing showcase our framework’s superiority in cyclically encouraging the residents’ well-being. Further, a case study is presented to probe the believable behaviors and iterative feedback of resident agents. Future efforts will be devoted to enhancing the fidelity and scalability of planning and living and enriching the evaluation aspects of judging. Moreover, we will apply our system in larger urban regions and more planning tasks (*i.e.*, road, infrastructure, etc.) with more resident agents, assessed by more comprehensive QOL evaluation metrics.

## References

*   Arnstein (1969) Arnstein, S. R. 1969. A ladder of citizen participation. *Journal of the American Institute of planners*, 35(4): 216–224.
*   Chigbu et al. (2016) Chigbu, U. E.; Haub, O.; Mabikke, S.; Antonio, D.; and Espinoza, J. 2016. Tenure responsive land use planning: a guide for country level implementation. *UN-Habitat: Nairobi, Kenya*.
*   Gao et al. (2024) Gao, C.; Lan, X.; Li, N.; Yuan, Y.; Ding, J.; Zhou, Z.; Xu, F.; and Li, Y. 2024. Large language models empowered agent-based modeling and simulation: A survey and perspectives. *Humanities and Social Sciences Communications*, 11(1): 1–24.
*   González-Méndez et al. (2021) González-Méndez, M.; Olaya, C.; Fasolino, I.; Grimaldi, M.; and Obregón, N. 2021. Agent-based modeling for urban development planning based on human needs. Conceptual basis and model formulation. *Land Use Policy*, 101: 105110.
*   Hosseinali, Alesheikh, and Nourian (2013) Hosseinali, F.; Alesheikh, A. A.; and Nourian, F. 2013. Agent-based modeling of urban land-use development, case study: Simulating future scenarios of Qazvin city. *Cities*, 31: 105–113.
*   Lane (2005) Lane, M. B. 2005. Public participation in planning: an intellectual history. *Australian geographer*, 36(3): 283–299.
*   Li et al. (2020) Li, X.; Zhang, F.; Hui, E. C.-m.; and Lang, W. 2020. Collaborative workshop and community participation: A new approach to urban regeneration in China. *Cities*, 102: 102743.
*   Oliveira and Pinho (2010) Oliveira, V.; and Pinho, P. 2010. Evaluation in urban planning: Advances and prospects. *Journal of planning literature*, 24(4): 343–361.
*   Park et al. (2023) Park, J. S.; O’Brien, J.; Cai, C. J.; Morris, M. R.; Liang, P.; and Bernstein, M. S. 2023. Generative agents: Interactive simulacra of human behavior. In *Proceedings of the 36th annual acm symposium on user interface software and technology*, 1–22.
*   Park et al. (2022) Park, J. S.; Popowski, L.; Cai, C.; Morris, M. R.; Liang, P.; and Bernstein, M. S. 2022. Social simulacra: Creating populated prototypes for social computing systems. In *Proceedings of the 35th Annual ACM Symposium on User Interface Software and Technology*, 1–18.
*   Qian et al. (2023) Qian, K.; Mao, L.; Liang, X.; Ding, Y.; Gao, J.; Wei, X.; Guo, Z.; and Li, J. 2023. AI Agent as Urban Planner: Steering Stakeholder Dynamics in Urban Planning via Consensus-based Multi-Agent Reinforcement Learning. *arXiv preprint arXiv:2310.16772*.
*   Ramezani and Nooraie (2023) Ramezani, S.; and Nooraie, H. 2023. A comparative study of participatory land-use planning and the theory of the right to the city. *GeoJournal*, 88(5): 5173–5203.
*   Santos and Martins (2007) Santos, L. D.; and Martins, I. 2007. Monitoring urban quality of life: The Porto experience. *Social Indicators Research*, 80: 411–425.
*   Taylor (1998) Taylor, N. 1998. Urban planning theory since 1945.
*   Wang et al. (2023) Wang, D.; Fu, Y.; Liu, K.; Chen, F.; Wang, P.; and Lu, C.-T. 2023. Automated urban planning for reimagining city configuration via adversarial learning: quantification, generation, and evaluation. *ACM Transactions on Spatial Algorithms and Systems*, 9(1): 1–24.
*   Wang et al. (2024) Wang, J.; Jiang, R.; Yang, C.; Wu, Z.; Onizuka, M.; Shibasaki, R.; Koshizuka, N.; and Xiao, C. 2024. Large language models as urban residents: An llm agent framework for personal mobility generation. *arXiv preprint arXiv:2402.14744*.
*   Yan et al. (2024) Yan, Y.; Zeng, Q.; Zheng, Z.; Yuan, J.; Feng, J.; Zhang, J.; Xu, F.; and Li, Y. 2024. OpenCity: A Scalable Platform to Simulate Urban Activities with Massive LLM Agents. *arXiv preprint arXiv:2410.21286*.
*   Zheng et al. (2023) Zheng, Y.; Lin, Y.; Zhao, L.; Wu, T.; Jin, D.; and Li, Y. 2023. Spatial planning of urban communities via deep reinforcement learning. *Nature Computational Science*, 3(9): 748–762.
*   Zhou et al. (2024) Zhou, Z.; Lin, Y.; Jin, D.; and Li, Y. 2024. Large language model for participatory urban planning. *arXiv preprint arXiv:2402.17161*.