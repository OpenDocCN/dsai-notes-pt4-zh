- en: <!--yml
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: <!--yml
- en: 'category: 未分类'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 分类：未分类
- en: 'date: 2025-01-11 12:21:08'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 日期：2025-01-11 12:21:08
- en: -->
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: -->
- en: 'MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance'
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MALADE：基于大语言模型（LLM）驱动的药物警戒系统的代理协同与检索增强生成
- en: 来源：[https://arxiv.org/html/2408.01869/](https://arxiv.org/html/2408.01869/)
  id: totrans-5
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 来源：[https://arxiv.org/html/2408.01869/](https://arxiv.org/html/2408.01869/)
- en: 'Jihye Choi  ¹, Nils Palumbo¹¹footnotemark: 1  ¹, Prasad Chalasani², Matthew
    M. Engelhard³,'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Jihye Choi ¹，Nils Palumbo¹¹脚注标记：1 ¹，Prasad Chalasani²，Matthew M. Engelhard³，
- en: Somesh Jha^(1,2), Anivarya Kumar³, David Page³
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Somesh Jha^(1,2)，Anivarya Kumar³，David Page³
- en: ¹University of Wisconsin-Madison, ²Langroid, ³Duke University Equal contribution,
    listed alphabetically by last name
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ¹威斯康星大学麦迪逊分校，²Langroid，³杜克大学平等贡献，按姓氏字母顺序列出
- en: Abstract
  id: totrans-9
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In the era of Large Language Models (LLMs), given their remarkable text understanding
    and generation abilities, there is an unprecedented opportunity to develop new,
    LLM-based methods for trustworthy medical knowledge synthesis, extraction and
    summarization. This paper focuses on the problem of Pharmacovigilance (PhV), where
    the significance and challenges lie in identifying Adverse Drug Events (ADEs)
    from diverse text sources, such as medical literature, clinical notes, and drug
    labels. Unfortunately, this task is hindered by factors including variations in
    the terminologies of drugs and outcomes, and ADE descriptions often being buried
    in large amounts of narrative text. We present MALADE, the first effective collaborative
    multi-agent system powered by LLM with Retrieval Augmented Generation for ADE
    extraction from drug label data. This technique involves augmenting a query to
    an LLM with relevant information extracted from text resources, and instructing
    the LLM to compose a response consistent with the augmented data. MALADE is a
    general LLM-agnostic architecture, and its unique capabilities are: (1) leveraging
    a variety of external sources, such as medical literature, drug labels, and FDA
    tools (e.g., OpenFDA drug information API), (2) extracting drug-outcome association
    in a structured format along with the strength of the association, and (3) providing
    explanations for established associations. Instantiated with GPT-4 Turbo or GPT-4o,
    and FDA drug label data, MALADE demonstrates its efficacy with an Area Under ROC
    Curve of 0.90 against the OMOP Ground Truth table of ADEs. Our implementation
    leverages the [Langroid](https://github.com/langroid/langroid) multi-agent LLM
    framework and can be found at [https://github.com/jihyechoi77/malade](https://github.com/jihyechoi77/malade).'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在大语言模型（LLMs）时代，鉴于它们出色的文本理解和生成能力，开发基于LLM的可信医疗知识合成、提取和总结的新方法成为前所未有的机会。本文聚焦于药物警戒（PhV）问题，挑战在于从各种文本源（如医学文献、临床记录和药物标签）中识别不良药物事件（ADE）。不幸的是，这项任务受到药物和结果术语差异、ADE描述常常被埋藏在大量叙述性文本中的因素的阻碍。我们提出了MALADE，这是第一个有效的多代理协作系统，利用LLM与检索增强生成技术，从药物标签数据中提取ADE。该技术通过从文本资源中提取相关信息，增强查询到LLM，并指示LLM根据增强的数据编写一致的响应。MALADE是一个通用的LLM独立架构，其独特的能力包括：（1）利用各种外部资源，如医学文献、药物标签和FDA工具（如OpenFDA药物信息API），（2）提取药物-结果关联并以结构化格式呈现及其关联强度，（3）提供已建立关联的解释。通过GPT-4
    Turbo或GPT-4o实例化，并利用FDA药物标签数据，MALADE在与OMOP真实数据表的ADE比较中，ROC曲线下的面积为0.90，证明了其有效性。我们的实现利用了[Langroid](https://github.com/langroid/langroid)多代理LLM框架，相关代码可在[https://github.com/jihyechoi77/malade](https://github.com/jihyechoi77/malade)找到。
- en: 1 Introduction
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1 引言
- en: '![Refer to caption](img/0979cfbdeca304b754b9fcf4af1f7bf3.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/0979cfbdeca304b754b9fcf4af1f7bf3.png)'
- en: 'Figure 1: Real-world demonstration of our proposed multi-agent orchestration
    system, MALADE. Handling the user query, “Are ACE Inhibitors associated with Angioedema?”,
    involves a sequence of subtasks performed by three Agents: DrugFinder, DrugAgent,
    CategoryAgent (each instantiated with GPT-4 Turbo or GPT-4o). Each Agent generates
    a response and justification, which are validated by a corresponding Critic agent,
    whose feedback is used by the Agent to revise its response.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 图1：我们提出的多代理协同系统MALADE的真实世界演示。处理用户查询“ACE抑制剂是否与血管性水肿相关？”涉及三个代理的任务序列：DrugFinder、DrugAgent、CategoryAgent（每个代理都实例化为GPT-4
    Turbo或GPT-4o）。每个代理生成一个响应和理由，并由相应的批评代理进行验证，批评代理的反馈被用来帮助代理修正其响应。
- en: 'Pharmacovigilance (PhV) is the science of identification and prevention of
    adverse drug events (ADEs) caused by pharmaceutical products after they are introduced
    to the market. PhV is of enormous importance to both the pharmaceutical industry
    and public health, as it aims to safeguard the well-being of patients by detecting
    new safety concerns and intervening when necessary. A central problem in PhV is
    ADE Extraction: given a drug category $C$ and an adverse event $E$, determine
    whether (and how strongly) $C$ is associated with $E$. This task demands the analysis
    of a vast corpus of textual data sources from a variety of sources, such as patient
    medical records, clinical notes, social media, spontaneous reporting systems,
    drug labels, medical literature, and clinical trial reports. Besides the sheer
    volume of text from these sources, ADE extraction is further complicated by variability
    in the names of drugs and outcomes, and the fact that ADE descriptions are often
    buried in large amounts of narrative text [[14](https://arxiv.org/html/2408.01869v1#bib.bib14)].'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 药物警戒（PhV）是识别和预防药物引发的不良事件（ADEs）的科学，这些事件通常发生在药品投放市场后。药物警戒对制药行业和公共卫生都具有巨大的重要性，因为它旨在通过发现新的安全问题并在必要时进行干预来保护患者的福祉。药物警戒中的一个核心问题是ADE提取：给定一个药物类别$C$和一个不良事件$E$，确定$C$与$E$之间是否（以及多强烈）存在关联。这项任务需要分析来自各种来源的大量文本数据，例如患者病历、临床记录、社交媒体、自发报告系统、药品标签、医学文献和临床试验报告。除了这些来源所提供的海量文本外，ADE提取还受到药物和结果名称的变化性，以及ADE描述通常隐藏在大量叙述性文本中的复杂性[[14](https://arxiv.org/html/2408.01869v1#bib.bib14)]。
- en: 'Traditionally, various classical natural language processing (NLP) and deep
    learning techniques have been used to address this problem [[22](https://arxiv.org/html/2408.01869v1#bib.bib22),
    [21](https://arxiv.org/html/2408.01869v1#bib.bib21), [35](https://arxiv.org/html/2408.01869v1#bib.bib35),
    [2](https://arxiv.org/html/2408.01869v1#bib.bib2)]. Compared to classical NLP
    methods, today’s best Large Language Models (LLMs) (and even weaker open-source/local
    LLMs [[36](https://arxiv.org/html/2408.01869v1#bib.bib36), [11](https://arxiv.org/html/2408.01869v1#bib.bib11)])
    exhibit a significant advancement in text understanding and generation capabilities,
    and there is a great opportunity to use these models to not only improve existing
    ADE extraction methods, but also consider data sources that were previously not
    feasible to use. Recent attempts to apply LLMs to ADE Extraction only leverage
    off-the-shelf ChatGPT [[38](https://arxiv.org/html/2408.01869v1#bib.bib38)], with
    limited performance and inconsistent reasoning for their extraction rationales [[32](https://arxiv.org/html/2408.01869v1#bib.bib32)].
    These limitations stem primarily from two factors: (a) accurate ADE Extraction
    requires access to specific data sources which LLMs may not have “seen” during
    their pre-training, hence relying on an LLM’s “built-in” knowledge yields inaccurate
    results, and (b) LLMs, being probabilistic next-token predictors, may produce
    incorrect or unreliable results when used naively without carefully breaking down
    the task into simpler sub-tasks, or without mechanisms to validate and correct
    their responses.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，已经使用了各种经典的自然语言处理（NLP）和深度学习技术来解决这个问题[[22](https://arxiv.org/html/2408.01869v1#bib.bib22),
    [21](https://arxiv.org/html/2408.01869v1#bib.bib21), [35](https://arxiv.org/html/2408.01869v1#bib.bib35),
    [2](https://arxiv.org/html/2408.01869v1#bib.bib2)]。与经典的NLP方法相比，今天最先进的大型语言模型（LLMs）（甚至较弱的开源/本地LLMs[[36](https://arxiv.org/html/2408.01869v1#bib.bib36),
    [11](https://arxiv.org/html/2408.01869v1#bib.bib11)]）在文本理解和生成能力方面展现了显著的进步，借助这些模型，不仅可以改善现有的ADE提取方法，还可以考虑以前无法使用的数据来源。最近将LLMs应用于ADE提取的尝试仅依赖于现成的ChatGPT[[38](https://arxiv.org/html/2408.01869v1#bib.bib38)]，但其表现有限且提取的推理理由不一致[[32](https://arxiv.org/html/2408.01869v1#bib.bib32)]。这些局限性主要来源于两个因素：（a）准确的ADE提取需要访问特定的数据源，而LLMs在预训练过程中可能并未“见过”这些数据，因此依赖LLM的“内置”知识会导致不准确的结果；（b）LLMs作为概率性下一词预测器，在任务未被仔细拆解为更简单的子任务，或缺乏验证和修正机制的情况下，可能会生成不正确或不可靠的结果。
- en: 'In this paper, we introduce MALADE ¹¹1Pronounced like the French word malade
    meaning “sick” or “ill.”(Multiple Agents powered by LLMs for ADE Extraction),
    the first effective multi-agent Retrieval-Augmented Generation (RAG) system for
    ADE Extraction. Our approach leverages two key techniques to address the above
    two limitations respectively: (a) RAG, equipping an LLM with up-to-date knowledge
    by augmenting an input query with relevant portions of text data, and prompting
    the LLM to generate responses consistent with the augmented information [[15](https://arxiv.org/html/2408.01869v1#bib.bib15)];
    and (b) strategic orchestration of multiple LLM-based agents, each responsible
    for a relatively smaller sub-task of the overall ADE Extraction task [[41](https://arxiv.org/html/2408.01869v1#bib.bib41)].
    Specifically, our system has agents for these sub-tasks (see Figure [1](https://arxiv.org/html/2408.01869v1#S1.F1
    "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")): (1) identifying representative
    drugs for each drug category from a medical database (e.g., MIMIC-IV), (2) gathering
    information on side effects of those drugs from external text knowledge bases
    (e.g., FDA drug label database), and finally, (3) composing final answers summarizing
    the effect of the drug category on an adverse event. Each agent is assigned a
    specific sub-task and collaborates with others to accomplish the the ultimate
    goal of ADE identification. Furthermore, we enhance the reliability of our multi-agent
    system even further by pairing each agent with a critic agent, whose role is to
    verify the behaviors and responses of its counterpart.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我们介绍了MALADE ¹¹（发音类似于法语单词“malade”，意为“生病的”或“有病的”）（由LLM驱动的多代理用于ADE提取），这是第一个有效的多代理检索增强生成（RAG）系统用于ADE提取。我们的方法利用了两项关键技术，分别解决了上述两项限制：（a）RAG，通过将相关文本数据的部分内容增强输入查询，使LLM具备最新知识，并促使LLM生成与增强信息一致的回答[[15](https://arxiv.org/html/2408.01869v1#bib.bib15)]；（b）多个基于LLM的代理的战略性协调，每个代理负责总体ADE提取任务中的一个相对较小的子任务[[41](https://arxiv.org/html/2408.01869v1#bib.bib41)]。具体来说，我们的系统具有以下子任务的代理（见图[1](https://arxiv.org/html/2408.01869v1#S1.F1
    "图1 ‣ 1 引言 ‣ MALADE：基于检索增强生成的LLM驱动代理的协调，用于药物安全性监测")）：（1）从医学数据库（例如MIMIC-IV）中识别每个药物类别的代表性药物，（2）从外部文本知识库（例如FDA药品标签数据库）收集这些药物的副作用信息，最后，（3）编写总结药物类别对不良事件影响的最终答案。每个代理被分配一个特定的子任务，并与其他代理协作完成ADE识别的最终目标。此外，我们通过将每个代理与一个评论代理配对，进一步提高了多代理系统的可靠性，评论代理的角色是验证其对应代理的行为和响应。
- en: The system, though applied here for ADE extraction specifically, illustrates
    how a Multi-Agent approach can be used to generate trustworthy, evidence-based
    summaries and confidence scores in response to challenging medical questions requiring
    synthesis of evidence from multiple sources of clinical knowledge and data. As
    such, MALADE may be viewed as a case study illustrating an approach that could
    later be applied to other problems in PhV, including identification of possible
    drug-to-drug interactions, as well as clinical problems outside of PhV, such as
    identifying known symptoms of a condition of interest documented in clinical notes.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 本系统虽然在这里专门应用于ADE提取，但展示了如何使用多代理方法生成可信的、基于证据的总结和置信度评分，以应对需要综合多个临床知识和数据源的医学问题。因此，MALADE可以被视为一个案例研究，展示了一种方法，未来可以应用于药物安全性（PhV）中的其他问题，包括药物间相互作用的识别，以及PhV以外的临床问题，例如识别临床记录中记录的某种疾病已知症状。
- en: In summary, our paper makes the following contributions.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，我们的论文做出了以下贡献。
- en: Precise Evaluation.
  id: totrans-19
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 精确评估。
- en: 'In contrast to simpler systems that only produce a binary label indicating
    whether or not a drug category $C$ is associated with an adverse event $E$, our
    method produces distinct scores, including a confidence score that indicates how
    confident an LLM is about its label assignment. These scores permit a rigorous
    quantitative evaluation against the well-established Observational Medical Outcomes
    Partnership (OMOP) Ground Truth table of ADEs associated with common drug classes [[19](https://arxiv.org/html/2408.01869v1#bib.bib19)].
    We achieve an Area Under the ROC Curve (AUC) of approximately 0.85 with GPT-4
    Turbo, and 0.90 with GPT-4o (Section [5](https://arxiv.org/html/2408.01869v1#S5
    "5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")). To the best of our knowledge, this is the
    best performance among the baselines, even though the direct comparison may be
    limited ²²2Because none of the original clinical data-based analyses reached this
    high of accuracy, followup investigations have since argued that roughly this
    level is the best achievable by any method based on any sources for the OMOP task.
    In 2016, Gruber et al. [[6](https://arxiv.org/html/2408.01869v1#bib.bib6)] argued
    there were reproducible errors that could be blamed on the OMOP 2010 ground truth
    itself that could place a ceiling on the AUC achievable, and Hauben et al. [[7](https://arxiv.org/html/2408.01869v1#bib.bib7)]
    more specifically argued that on the negative-labeled drug event pairs the error
    in the ground truth should be estimated at 17%. There may be disagreement on varying
    strengths of different literature evidence, but if their estimate is exactly right,
    it could place a ceiling as low as 0.83 on the AUC achievable..'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 与那些仅生成二元标签以指示某药物类别 $C$ 是否与不良事件 $E$ 相关的简单系统不同，我们的方法生成了不同的得分，包括一个置信度得分，表明大型语言模型（LLM）对其标签分配的信心。这些得分允许对已建立的观察性医学结局合作（OMOP）药物类别相关的不良药物事件（ADEs）真相表进行严格的定量评估[[19](https://arxiv.org/html/2408.01869v1#bib.bib19)]。我们在GPT-4
    Turbo上取得了约0.85的ROC曲线下的面积（AUC），在GPT-4o上则为0.90（章节[5](https://arxiv.org/html/2408.01869v1#S5
    "5 实验 ‣ MALADE：基于LLM的药物警戒系统的增强生成与检索的协同作用")）。据我们所知，这是基准中最佳的表现，尽管直接比较可能有限²²2因为没有任何原始临床数据分析达到如此高的准确率，后续研究指出大约这个水平是基于任何来源的OMOP任务所能达到的最佳水平。2016年，Gruber等人[[6](https://arxiv.org/html/2408.01869v1#bib.bib6)]认为，OMOP
    2010年真相本身可能存在可重复的错误，这可能会限制AUC的上限，而Hauben等人[[7](https://arxiv.org/html/2408.01869v1#bib.bib7)]则更具体地指出，在负标签的药物事件对中，真相中的错误应该估计为17%。不同文献证据的强度可能存在争议，但如果他们的估计是完全正确的，它可能会将AUC的上限限制在0.83。
- en: Grounded generation of responses and justifications.
  id: totrans-21
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 基于事实生成的响应和论证。
- en: 'The design of MALADE offers key features essential for high-stakes applications
    like ADE identification: (1) A structured format for drug-to-outcome associations,
    including scores indicating the strength of the association and rarity of the
    adverse event; this is important to ensure robust downstream processing of the
    extracted associations. (2) Justifications for the extracted drug-outcome associations,
    allowing human experts to understand and validate the associations. This is possible
    due to the RAG component of the MALADE architecture, which allows leveraging various
    external sources such as medical literature, drug labels, FDA tools (e.g., OpenFDA
    drug information API), as well as common clinical data sources such as OMOP or
    PCORI, and even specific EHR systems where available. (3) Observability, i.e., complete,
    detailed logs of inter-agent dialogs and intermediate steps; these are essential
    for debugging and auditing the system’s behavior. See Figure [1](https://arxiv.org/html/2408.01869v1#S1.F1
    "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance") for a real-world demonstration
    of MALADE.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 'MALADE的设计提供了高风险应用（如ADE识别）所需的关键功能：(1) 一种结构化的药物-结果关联格式，包括指示关联强度和不良事件稀有性的分数；这对于确保提取的关联能够经过稳健的后续处理至关重要。(2)
    提取的药物-结果关联的理由，使得人类专家能够理解和验证这些关联。这得益于MALADE架构中的RAG组件，它可以利用各种外部资源，如医学文献、药品标签、FDA工具（例如OpenFDA药物信息API）、以及常见的临床数据源，如OMOP或PCORI，甚至特定的EHR系统（如有提供）。（3）可观察性，即完整的、详细的代理对话和中间步骤日志；这些对于调试和审计系统行为至关重要。请参见图[1](https://arxiv.org/html/2408.01869v1#S1.F1
    "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")，了解MALADE的实际应用示例。'
- en: Generalizable Insights about Machine Learning in the Context of Healthcare.
  id: totrans-23
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 在医疗保健背景下，关于机器学习的可推广见解。
- en: 'Our proposed multi-agent architecture is agnostic to LLMs and data sources
    and is based on design primitives intended to be universal building blocks for
    the orchestration of multiple LLM-based agents (Section [3](https://arxiv.org/html/2408.01869v1#S3
    "3 Preliminaries on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")). Hence, although
    MALADE is instantiated specifically for ADE identification, our design methodology
    provides a generalizable blueprint for the effective construction of multi-agent
    systems for trustworthy medical knowledge synthesis and summarization with wide-ranging
    medical applications.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '我们提出的多代理架构对LLM和数据源是无关的，基于设计原语，旨在作为多LLM代理编排的通用构建模块（见第[3](https://arxiv.org/html/2408.01869v1#S3
    "3 Preliminaries on LLM-based Agents ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")节）。因此，尽管MALADE是专门为ADE识别而设计，但我们的设计方法提供了一种可推广的蓝图，用于有效构建面向可信医疗知识合成和总结的多代理系统，具有广泛的医学应用。'
- en: 2 Related Work
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2 相关工作
- en: The advent of highly-capable Large Language Models (LLMs) has sparked significant
    interest in applying these models to medical tasks, including diagnostics [[28](https://arxiv.org/html/2408.01869v1#bib.bib28)],
    medical question-answering [[29](https://arxiv.org/html/2408.01869v1#bib.bib29),
    [23](https://arxiv.org/html/2408.01869v1#bib.bib23)], and medical evidence summarization [[33](https://arxiv.org/html/2408.01869v1#bib.bib33)].
    An important application area is pharmacovigilance, the science of identifying
    and preventing adverse drug events (ADEs) caused by pharmaceutical products after
    they are introduced to the market. The specific problem of ADE Extraction, namely,
    identifying whether a specific drug (or category) is associated with a specific
    adverse event, is a challenging task due to variations in drug and outcome terminologies,
    the presence of ADE descriptions in large amounts of narrative text, and the disparate
    sources of such text data, which can include patient medical records, clinical
    notes, drug labels, medical literature, clinical trials, message boards, social
    media. Prior research in this field, notably works drawing on large-scale research
    initiatives including Sentinel [[25](https://arxiv.org/html/2408.01869v1#bib.bib25)],
    OMOP [[27](https://arxiv.org/html/2408.01869v1#bib.bib27)], and OHDSI [[31](https://arxiv.org/html/2408.01869v1#bib.bib31)],
    has focused on developing new methods for causal discovery from purely observational
    data. Huang et al. [[10](https://arxiv.org/html/2408.01869v1#bib.bib10)] investigate
    the use of social forums for constructing predictive models of ADEs, focusing
    on the performance of different data processing techniques and BERT architectures.
    von Csefalvay [[37](https://arxiv.org/html/2408.01869v1#bib.bib37)] introduces
    a novel LLM, DAEDRA, for detecting regulatory-relevant outcomes from passive pharmacovigilance
    reports. Sorbello et al. [[30](https://arxiv.org/html/2408.01869v1#bib.bib30)]
    use LLMs like GPT to improve the capture of opioid drug and adverse event mentions
    from electronic health records. Finally, Sun et al. [[32](https://arxiv.org/html/2408.01869v1#bib.bib32)]
    investigate the performance of ChatGPT for extracting adverse events from medical
    text sources.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 高效能的大型语言模型（LLMs）的出现引起了人们在医疗任务中应用这些模型的极大兴趣，包括诊断[[28](https://arxiv.org/html/2408.01869v1#bib.bib28)]、医疗问答[[29](https://arxiv.org/html/2408.01869v1#bib.bib29),
    [23](https://arxiv.org/html/2408.01869v1#bib.bib23)]，以及医学证据总结[[33](https://arxiv.org/html/2408.01869v1#bib.bib33)]。一个重要的应用领域是药物警戒学，它是识别和预防药品上市后引发的不良药物事件（ADEs）的科学。ADE提取的具体问题，即识别某个特定药物（或类别）是否与某种特定的不良事件相关，是一项具有挑战性的任务，因为药物和结果术语的变化、在大量叙述性文本中存在ADE描述，以及这些文本数据的来源差异，包括患者病历、临床笔记、药品标签、医学文献、临床试验、论坛、社交媒体等。该领域的先前研究，尤其是基于大规模研究计划的工作，如Sentinel[[25](https://arxiv.org/html/2408.01869v1#bib.bib25)]、OMOP[[27](https://arxiv.org/html/2408.01869v1#bib.bib27)]和OHDSI[[31](https://arxiv.org/html/2408.01869v1#bib.bib31)]，集中于从纯观察性数据中开发新的因果发现方法。黄等[[10](https://arxiv.org/html/2408.01869v1#bib.bib10)]研究了使用社交论坛构建ADE预测模型的方法，重点是不同数据处理技术和BERT架构的性能。von
    Csefalvay[[37](https://arxiv.org/html/2408.01869v1#bib.bib37)]介绍了一种新的大型语言模型DAEDRA，用于从被动药物警戒报告中检测与监管相关的结果。Sorbello等[[30](https://arxiv.org/html/2408.01869v1#bib.bib30)]使用类似GPT的LLMs来提高从电子健康记录中捕捉阿片类药物和不良事件提及的效果。最后，Sun等[[32](https://arxiv.org/html/2408.01869v1#bib.bib32)]研究了ChatGPT在从医学文本来源中提取不良事件的表现。
- en: 'These early applications of LLMs to ADE Extraction are limited in at least
    one of two ways: (a) they either use only the bare LLM (such as ChatGPT, or its
    API) without access to any external APIs, tools, or knowledge bases [[38](https://arxiv.org/html/2408.01869v1#bib.bib38)].
    ADE extraction using only the LLM’s “built-in” knowledge (i.e., text it was exposed
    to during pre-training) is likely to be inaccurate and incomplete, since adverse
    events may be discovered in any new studies or reports; (b) all prior works use
    a single LLM (even when augmented with external data/tools) without any collaboration
    or feedback from other LLMs. Since LLMs are after all probabilistic next-token
    prediction models, there is no guarantee that the generated text is accurate or
    complete. The only way to improve the reliability of an LLM’s responses in this
    scenario is to either resort to elaborate prompting techniques [[40](https://arxiv.org/html/2408.01869v1#bib.bib40),
    [45](https://arxiv.org/html/2408.01869v1#bib.bib45)], or have a human (or an LLM [[18](https://arxiv.org/html/2408.01869v1#bib.bib18)])
    in the loop to verify the generated text and iteratively refine the prompts until
    a satisfactory response is obtained.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: LLM 在 ADE 提取中的早期应用至少在以下两方面存在局限：（a）它们仅使用裸 LLM（例如 ChatGPT 或其 API），没有访问任何外部 API、工具或知识库[[38](https://arxiv.org/html/2408.01869v1#bib.bib38)]。仅使用
    LLM 的“内置”知识（即其在预训练期间接触的文本）进行 ADE 提取，可能不准确且不完整，因为不良事件可能在新的研究或报告中被发现；（b）所有先前的工作仅使用单一的
    LLM（即使增加了外部数据/工具），没有其他 LLM 的协作或反馈。由于 LLM 毕竟是基于概率的下一个词预测模型，因此无法保证生成的文本是准确或完整的。在这种情况下，提升
    LLM 响应可靠性的唯一方法是依赖复杂的提示技术[[40](https://arxiv.org/html/2408.01869v1#bib.bib40),
    [45](https://arxiv.org/html/2408.01869v1#bib.bib45)]，或让人类（或 LLM [[18](https://arxiv.org/html/2408.01869v1#bib.bib18)]）参与其中，验证生成的文本并迭代优化提示，直到获得令人满意的响应。
- en: 'To address these limitations, three paradigms have emerged in LLM practitioners’
    toolboxes. The first limitation is addressed by two techniques: Retrieval Augmented
    Generation (RAG) and tool-use. RAG addresses the knowledge limitations of LLMs
    by augmenting the input prompt or query with relevant information retrieved from
    external knowledge bases (using similarity based on vector embeddings, keywords,
    or a combination of both), and instructing the LLM to respond to the original
    query in a way that is consistent with the augmented data, and also to provide
    a justification for its response by citing the relevant external data  [[15](https://arxiv.org/html/2408.01869v1#bib.bib15)].
    Thus the RAG approach not only alleviates the limitations of relying only on an
    LLM’s pre-trained knowledge, but also provides evidence-citation ability, which
    is crucial to engender trust in the LLM’s responses, especially in high-stakes
    applications like medical decision-making. This approach has shown promise in
    enhancing LLM performance in biomedicine, particularly in literature information-seeking
    and clinical decision-making [[5](https://arxiv.org/html/2408.01869v1#bib.bib5),
    [12](https://arxiv.org/html/2408.01869v1#bib.bib12), [39](https://arxiv.org/html/2408.01869v1#bib.bib39),
    [46](https://arxiv.org/html/2408.01869v1#bib.bib46)]. The second technique, tool-use,
    involves instructing the LLM to produce structured text (typically JSON) which
    can then be easily parsed by downstream code to perform a variety of actions,
    including web-search, querying APIs for information, querying databases, and performing
    computations [[26](https://arxiv.org/html/2408.01869v1#bib.bib26), [16](https://arxiv.org/html/2408.01869v1#bib.bib16)].'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应对这些局限，LLM 实践者的工具箱中出现了三种范式。第一个局限通过两种技术得到了应对：检索增强生成（RAG）和工具使用。RAG 通过从外部知识库检索相关信息（基于向量嵌入、关键词或两者的组合进行相似性匹配）来增强输入提示或查询，从而解决了
    LLM 知识的局限，并指导 LLM 以与增强数据一致的方式响应原始查询，同时通过引用相关外部数据提供其响应的依据[[15](https://arxiv.org/html/2408.01869v1#bib.bib15)]。因此，RAG
    方法不仅缓解了仅依赖 LLM 预训练知识的局限，还提供了证据引用能力，这对于增强 LLM 响应的可信度至关重要，特别是在医疗决策等高风险应用中。这一方法在提升
    LLM 在生物医学领域的表现方面展现了前景，尤其是在文献信息检索和临床决策中[[5](https://arxiv.org/html/2408.01869v1#bib.bib5),
    [12](https://arxiv.org/html/2408.01869v1#bib.bib12), [39](https://arxiv.org/html/2408.01869v1#bib.bib39),
    [46](https://arxiv.org/html/2408.01869v1#bib.bib46)]。第二种技术是工具使用，涉及指导 LLM 生成结构化文本（通常是
    JSON 格式），然后可以被下游代码轻松解析以执行各种操作，包括网页搜索、查询 API 获取信息、查询数据库和进行计算[[26](https://arxiv.org/html/2408.01869v1#bib.bib26),
    [16](https://arxiv.org/html/2408.01869v1#bib.bib16)]。
- en: The emergence of multi-agent systems addresses the second limitation (of using
    single LLMs) – this approach aims to harness the collective capabilities of multiple
    LLMs [[43](https://arxiv.org/html/2408.01869v1#bib.bib43), [9](https://arxiv.org/html/2408.01869v1#bib.bib9)].
    Such systems introduce cooperative learning and feedback mechanisms between LLM-based
    agents, which simulate human-like communication, consultation and debate processes,
    enabling them to tackle even more complex tasks than a single-agent with RAG.
    In medical reasoning tasks, for instance, multi-agent collaboration can mirror
    hospital consultation mechanisms [[34](https://arxiv.org/html/2408.01869v1#bib.bib34)].
    Our work extends this trajectory of research; to the best of our knowledge, our
    system MALADE is first effective multi-agent orchestration system with RAG and
    tool-use, tailored for a specific task in pharmacovigilance, namely ADE Extraction.
    In our approach, LLM-based agents collaborate, leveraging their collective expertise
    and the latest medical knowledge. This approach aims to improve the analysis of
    ADEs, offering a more robust and reliable system for pharmacovigilance.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 多智能体系统的出现解决了使用单一LLM的第二个局限性——这种方法旨在利用多个LLM的集体能力[[43](https://arxiv.org/html/2408.01869v1#bib.bib43),
    [9](https://arxiv.org/html/2408.01869v1#bib.bib9)]。此类系统引入了LLM驱动的智能体之间的合作学习和反馈机制，模拟人类之间的沟通、咨询和辩论过程，使其能够解决比单一智能体配合RAG更为复杂的任务。例如，在医学推理任务中，多智能体协作可以模拟医院的会诊机制[[34](https://arxiv.org/html/2408.01869v1#bib.bib34)]。我们的研究扩展了这一研究轨迹；据我们所知，我们的系统MALADE是首个有效结合RAG和工具使用的多智能体协调系统，专为药物警戒中的特定任务——即ADE提取——量身定制。在我们的方法中，基于LLM的智能体协作，利用它们的集体专长和最新的医学知识。此方法旨在改善ADE分析，为药物警戒提供更强大、更可靠的系统。
- en: 3 Preliminaries on LLM-based Agents
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3 LLM驱动智能体的初步知识
- en: 'While today’s LLMs exhibit impressive capabilities, they remain constrained
    by technical and practical limitations such as brittleness, non-determinism, limited
    context window, inference costs, and latency [[17](https://arxiv.org/html/2408.01869v1#bib.bib17)],
    with the implication that one cannot simply give high-level instructions to an
    LLM and expect it to accomplish a complex task. Consequently, to best harness
    the capabilities of LLMs as components of a complex application, it is necessary
    to decompose the task into smaller sub-tasks and manage multiple LLM conversations,
    each with its own set of specifically-defined instructions, state, and data sources.
    This leads naturally to the notion of an agent as an LLM-powered entity responsible
    for a well-defined small sub-task. In Section [3.1](https://arxiv.org/html/2408.01869v1#S3.SS1
    "3.1 Agent-oriented Programming ‣ 3 Preliminaries on LLM-based Agents ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we introduce the key abstractions and components needed for agent-oriented programming,
    and Section [3.2](https://arxiv.org/html/2408.01869v1#S3.SS2 "3.2 Multi-Agent
    Orchestration ‣ 3 Preliminaries on LLM-based Agents ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    describes multi-agent orchestration. Our implementation leverages the open-source
    multi-agent LLM framework [Langroid](https://github/langroid/langroid) [[3](https://arxiv.org/html/2408.01869v1#bib.bib3)],
    which supports these abstractions and mechanisms.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管当今的LLM展现了令人印象深刻的能力，但它们仍然受到技术和实践局限性的制约，如脆弱性、非确定性、有限的上下文窗口、推理成本和延迟[[17](https://arxiv.org/html/2408.01869v1#bib.bib17)]，这意味着不能仅仅给LLM一个高层次的指令并指望它完成复杂任务。因此，为了最好地利用LLM作为复杂应用的组件，有必要将任务分解成更小的子任务，并管理多个LLM会话，每个会话都有自己专门定义的指令、状态和数据源。这自然引出了智能体的概念，智能体是一个由LLM驱动的实体，负责一个明确的小型子任务。在[3.1节](https://arxiv.org/html/2408.01869v1#S3.SS1
    "3.1 面向智能体的编程 ‣ 3 LLM驱动智能体的初步知识 ‣ MALADE：药物警戒中的LLM驱动智能体协调与检索增强生成")中，我们介绍了面向智能体编程所需的关键抽象和组件，[3.2节](https://arxiv.org/html/2408.01869v1#S3.SS2
    "3.2 多智能体协调 ‣ 3 LLM驱动智能体的初步知识 ‣ MALADE：药物警戒中的LLM驱动智能体协调与检索增强生成")描述了多智能体协调。我们的实现利用了开源的多智能体LLM框架[Langroid](https://github/langroid/langroid)[[3](https://arxiv.org/html/2408.01869v1#bib.bib3)]，该框架支持这些抽象和机制。
- en: 3.1 Agent-oriented Programming
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.1 面向智能体的编程
- en: Agent, as an intelligent message transformer.
  id: totrans-33
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 智能体，作为一个智能消息转换器。
- en: A natural and convenient abstraction in designing a complex LLM-powered system
    is the notion of an agent that is instructed to be responsible for a specific
    aspect of the overall task. In terms of code, an Agent is essentially a class
    representing an intelligent entity that can respond to messages, i.e., an agent
    is simply a message transformer. An agent typically encapsulates an (interface
    to an) LLM, and may also be equipped with so-called tools (as described below)
    and external documents/data (e.g., a vector database, as described below). Much
    like a team of humans, agents interact by exchanging messages, in a manner reminiscent
    of the actor framework in programming languages [[8](https://arxiv.org/html/2408.01869v1#bib.bib8)].
    An orchestration mechanism is needed to manage the flow of messages between agents,
    to ensure that progress is made towards completion of the task, and to handle
    the inevitable cases where an agent deviates from instructions. In this work we
    adopt this multi-agent programming paradigm, where agents are first-class citizens,
    acting as message transformers, and communicate by exchanging messages.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在设计复杂的LLM驱动系统时，一个自然且方便的抽象概念是“代理”的概念，指的是被指派负责任务某一特定方面的实体。从代码角度来看，代理本质上是一个类，代表一个智能实体，能够响应消息，也就是说，代理就是一个消息转换器。代理通常封装一个（接口到）LLM，并且可能还配备所谓的工具（如下面所述）和外部文档/数据（例如，下面所描述的向量数据库）。就像一组人类团队，代理通过交换消息进行互动，这种互动方式类似于编程语言中的演员框架[[8](https://arxiv.org/html/2408.01869v1#bib.bib8)]。需要一个编排机制来管理代理之间消息的流动，以确保任务进展并最终完成，并处理代理偏离指令的不可避免情况。在本研究中，我们采用了这种多代理编程范式，其中代理是第一公民，作为消息转换器，通过交换消息进行通信。
- en: To build useful applications with LLMs, we need to endow them with the ability
    to trigger actions (such as API calls, computations, database queries, etc) and
    access external documents. Tools and Retrieval Augmented Generation (RAG) provide
    these capabilities, described next.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 为了构建有用的LLM应用，我们需要赋予它们触发操作（如API调用、计算、数据库查询等）和访问外部文档的能力。工具和检索增强生成（RAG）提供了这些功能，接下来会介绍。
- en: Tools, also known as functions or plugins.
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 工具，也称为功能或插件。
- en: 'An LLM is essentially a text transformer; i.e., in response to some input text
    (known as a prompt), it produces a response. Free-form text responses are ideal
    when we want to generate a description, answer, or summary for human consumption,
    or even a question for another agent to answer. However, in some cases, we would
    like the responses to trigger external actions, such as an API call, code execution,
    or a database query. In such cases, we would instruct the LLM to produce a structured
    output, typically in JSON format, with various pre-specified fields, such as code,
    an SQL query, parameters of an API call, and so on. These structured responses
    have come to be known as tools, and the LLM is said to use a tool when it produces
    a structured response corresponding to a specific tool. To elicit a tool response
    from an LLM, it needs to be instructed on the expected tool format and the conditions
    under which it should use the tool. To actually use a tool emitted by an LLM,
    a tool handler method must be defined as well. The tool handler for a given tool
    is triggered when it is recognized in the LLM’s response. See Appendix [A.1](https://arxiv.org/html/2408.01869v1#A1.SS1
    "A.1 Tool Use: Example ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for a description of the LLM’s interaction with a database.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 'LLM本质上是一个文本转换器；也就是说，在响应某些输入文本（称为提示）时，它会生成一个响应。当我们希望生成一个描述、答案或摘要供人类阅读，甚至是给另一个代理提出问题时，自由形式的文本响应是理想的。然而，在某些情况下，我们希望响应能够触发外部操作，例如API调用、代码执行或数据库查询。在这种情况下，我们会指示LLM生成一个结构化输出，通常是JSON格式，包含各种预定义字段，如代码、SQL查询、API调用的参数等。这些结构化响应被称为工具，当LLM生成与特定工具对应的结构化响应时，就称LLM在使用该工具。为了让LLM生成工具响应，需要对工具格式和使用条件进行指示。为了实际使用LLM生成的工具，必须定义一个工具处理方法。当LLM响应中识别到某个工具时，相应的工具处理程序会被触发。有关LLM与数据库交互的描述，请参见附录[A.1](https://arxiv.org/html/2408.01869v1#A1.SS1
    "A.1 Tool Use: Example ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: 'Starting with the view of an LLM as a text transformer, it turns out that one
    can express the notion of an agent, a tool, and other related concepts in terms
    of different function signatures, as shown in Table [4](https://arxiv.org/html/2408.01869v1#A1.T4
    "Table 4 ‣ A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented
    Programming ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance") in Appendix [A.3](https://arxiv.org/html/2408.01869v1#A1.SS3
    "A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance").'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '从将 LLM 视为文本转换器的角度出发，事实证明可以通过不同的函数签名来表达代理、工具和其他相关概念，如附录 [A.3](https://arxiv.org/html/2408.01869v1#A1.SS3
    "A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") 中的表格 [4](https://arxiv.org/html/2408.01869v1#A1.T4 "Table
    4 ‣ A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") 所示。'
- en: Retrieval Augmented Generation (RAG).
  id: totrans-39
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 检索增强生成（RAG）。
- en: 'Using an LLM in isolation has two major constraints: (a) the responses are
    confined to the knowledge from its pre-training, hence cannot answer questions
    specific to private/enterprise documents, or up-to-date information past its training
    cutoff date; and (b) there is no way to verify the validity of the generated answers.
    RAG is the most popular technique to address both limitations by making LLMs generate
    responses based on specific documents or data and justify the answer by presenting
    source citations [[15](https://arxiv.org/html/2408.01869v1#bib.bib15)]. The basic
    idea of RAG is as follows: when a query $Q$ is made to an LLM-agent, a set of
    $k$ documents (or portions thereof) $D=\{d_{1},d_{2},\ldots,d_{k}\}$ most “relevant”
    to the query are retrieved from a document-store, and the original query $Q$ is
    augmented with $D$ to a new prompt of the form, “Given the passages below: [$d_{1}$,
    $d_{2}$, …, $d_{k}$], answer this question: $Q$ based ONLY on these passages,
    and indicate which passages support your answer”. See Appendix [A.2](https://arxiv.org/html/2408.01869v1#A1.SS2
    "A.2 Retrieval Augmented Generation ‣ Appendix A Agent-Oriented Programming ‣
    MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for more details on RAG.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '单独使用 LLM 存在两个主要限制：（a）响应仅限于其预训练中的知识，因此无法回答特定于私有/企业文档或其训练截止日期之后的最新信息的问题；（b）无法验证生成答案的有效性。RAG
    是解决这两个限制的最流行技术，它通过使 LLM 基于特定文档或数据生成响应，并通过展示源引用来验证答案[[15](https://arxiv.org/html/2408.01869v1#bib.bib15)]。RAG
    的基本思想如下：当向 LLM-智能体提出查询 $Q$ 时，从文档存储中检索与查询最“相关”的一组 $k$ 个文档（或其部分）$D=\{d_{1},d_{2},\ldots,d_{k}\}$，并将原始查询
    $Q$ 与 $D$ 一起扩展为新提示，形式为：“给定以下段落：[$d_{1}$, $d_{2}$, …, $d_{k}$]，仅基于这些段落回答此问题：$Q$，并指明哪些段落支持你的答案”。有关
    RAG 的更多细节，请参见附录 [A.2](https://arxiv.org/html/2408.01869v1#A1.SS2 "A.2 Retrieval
    Augmented Generation ‣ Appendix A Agent-Oriented Programming ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: 3.2 Multi-Agent Orchestration
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.2 多智能体协调
- en: As mentioned above, when building an LLM-based multi-agent system, an orchestration
    mechanism is critical to manage the flow of messages between agents, to ensure
    task progress, and handle deviations from instructions. In this work, we leverage
    a simple yet versatile orchestration mechanism that seamlessly handles user interaction,
    tool handling, and sub-task delegation.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如上所述，在构建基于 LLM 的多智能体系统时，一个协调机制对于管理智能体之间的信息流、确保任务进展以及处理偏离指令的情况至关重要。在这项工作中，我们利用了一个简单而多功能的协调机制，能够无缝处理用户交互、工具操作和子任务委派。
- en: '![Refer to caption](img/ad74670b97ebc52adbb907656a3869d0.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/ad74670b97ebc52adbb907656a3869d0.png)'
- en: 'Figure 2: Example of how iteration among responder methods works when a task
    T has sub-tasks [T1, T2] and T1 has a sub-task T3.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2：当任务 T 有子任务 [T1, T2] 且 T1 有子任务 T3 时，响应方法之间迭代的示例。
- en: 'As in Figure [2](https://arxiv.org/html/2408.01869v1#S3.F2 "Figure 2 ‣ 3.2
    Multi-Agent Orchestration ‣ 3 Preliminaries on LLM-based Agents ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    the orchestration mechanism is encapsulated in a Task class that wraps an Agent,
    and one initiates a task by invoking its run method which has type signature string
    $\rightarrow$ string, identical to the type signature of an Agent’s own native
    “response” methods (corresponding to the LLM, tool-handler, and human user). The
    Task maintains a “current pending message” (CPM) to be acted on by one of the
    “responders” of the Task, which includes the agent’s own response methods as well
    as run methods of sub-tasks. The run method executes a series of “steps” until
    a task termination condition is reached. In each step, a valid response to the
    CPM is sought by iterating over the responders, and the CPM is updated with the
    response. See Appendix [A.4](https://arxiv.org/html/2408.01869v1#A1.SS4 "A.4 Detailed
    Description of Multi-Agent Orchestration ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for more details.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如图[2](https://arxiv.org/html/2408.01869v1#S3.F2 "图 2 ‣ 3.2 多代理协同 ‣ 3 基于LLM的代理初步介绍
    ‣ MALADE：用于药物监测的LLM驱动代理协同与检索增强生成")所示，协同机制被封装在一个Task类中，该类包装了一个Agent，并且通过调用其`run`方法来启动任务，该方法的类型签名为string
    $\rightarrow$ string，这与Agent自身本地“响应”方法的类型签名相同（对应于LLM、工具处理程序和人工用户）。Task维护一个“当前待处理消息”（CPM），该消息将由Task的一个“响应者”执行，包括代理自己的响应方法以及子任务的运行方法。`run`方法执行一系列“步骤”，直到达到任务终止条件。在每个步骤中，通过迭代响应者来寻找对CPM的有效响应，并用该响应更新CPM。更多细节请参见附录[A.4](https://arxiv.org/html/2408.01869v1#A1.SS4
    "A.4 多代理协同的详细描述 ‣ 附录A 代理导向编程 ‣ MALADE：用于药物监测的LLM驱动代理协同与检索增强生成")。
- en: '4 MALADE: Proposed Multi-Agent System for ADE Extraction'
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4 MALADE：提议的多代理系统用于ADE提取
- en: 'In this section, we describe our RAG-based Multi-Agent architecture, MALADE,
    for identifying associations between drug categories and outcomes. We first give
    a high-level outline of the objectives of the key sub-tasks in Section [4.1](https://arxiv.org/html/2408.01869v1#S4.SS1
    "4.1 Objectives of Key Sub-tasks ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), and delve into their implementation details
    in Section [4.2](https://arxiv.org/html/2408.01869v1#S4.SS2 "4.2 Agent-Critic
    Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    - [4.5](https://arxiv.org/html/2408.01869v1#S4.SS5 "4.5 STEP 3: Labeling Drug
    Category-Outcome Associations ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"). See Figure [1](https://arxiv.org/html/2408.01869v1#S1.F1
    "Figure 1 ‣ 1 Introduction ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance") for an illustrative depiction
    of the overall pipeline.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 本节我们描述了基于RAG的多代理架构MALADE，用于识别药物类别与结果之间的关联。我们首先在第[4.1](https://arxiv.org/html/2408.01869v1#S4.SS1
    "4.1 关键子任务的目标 ‣ 4 MALADE：提议的多代理系统用于ADE提取 ‣ MALADE：用于药物监测的LLM驱动代理协同与检索增强生成")节中给出关键子任务目标的高层次概述，并在第[4.2](https://arxiv.org/html/2408.01869v1#S4.SS2
    "4.2 代理与评论员的互动 ‣ 4 MALADE：提议的多代理系统用于ADE提取 ‣ MALADE：用于药物监测的LLM驱动代理协同与检索增强生成")节到第[4.5](https://arxiv.org/html/2408.01869v1#S4.SS5
    "4.5 步骤3：标注药物类别-结果关联 ‣ 4 MALADE：提议的多代理系统用于ADE提取 ‣ MALADE：用于药物监测的LLM驱动代理协同与检索增强生成")节深入探讨其实现细节。有关整个流程的示意图，请参见图[1](https://arxiv.org/html/2408.01869v1#S1.F1
    "图 1 ‣ 1 引言 ‣ MALADE：用于药物监测的LLM驱动代理协同与检索增强生成")。
- en: 'We emphasize that developing a multi-agent RAG system tailored for ADE extraction
    is a highly non-trivial undertaking, requiring careful handling of several issues:
    (a) the complex structure of FDA label data, which can be challenging for naively
    applied RAG techniques; (b) the difficulty of correctly grouping prescribed drugs
    (e.g., assigning the appropriate National Drug Code) based on the varied text
    descriptions present in medical databases; (c) LLM brittleness such as deviation
    from instructions, hallucinations, and inaccurate or incorrect responses; (d)
    Infinite loops, fixed points, and deadlocks, which can arise in inter-agent interactions
    unless carefully managed.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们强调，开发一个专门用于不良药物事件（ADE）提取的多代理 RAG 系统是一项非常复杂的任务，需要仔细处理多个问题：（a）FDA标签数据的复杂结构，这对于天真应用的RAG技术来说可能是一个挑战；（b）基于医疗数据库中不同文本描述正确分组处方药物的困难（例如，分配适当的国家药品代码）；（c）大型语言模型（LLM）的脆弱性，如偏离指令、幻觉、以及不准确或错误的回答；（d）无限循环、固定点和死锁，这些问题可能会在代理之间的交互中出现，除非得到精心管理。
- en: 4.1 Objectives of Key Sub-tasks
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.1 关键子任务的目标
- en: 'Our ultimate goal is to identify the risk of an adverse event associated with
    a drug category. We developed our system, MALADE, to be able to respond to questions
    of the form:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的最终目标是识别与某一药物类别相关的不良事件的风险。我们开发了我们的系统 MALADE，以能够响应以下形式的问题：
- en: “Does drug category $C$ increases the risk of a specific (adverse) health outcome
    $H$, decrease it, or is there no clear effect?. And what is the evidence?” For
    instance, $C$ could be “ACE inhibitors”, and $H$ could be “angioedema”.
  id: totrans-51
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: “药物类别$C$是否增加特定（不良）健康结果$H$的风险，减少它，还是没有明显效果？证据是什么？”例如，$C$可能是“ACE抑制剂”，$H$可能是“血管性水肿”。
- en: 'Given a query of this form, the system executes the following steps: given
    $C$ and $H$,'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 给定这种形式的查询，系统执行以下步骤：给定$C$和$H$，
- en: '{adjustwidth}'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '{adjustwidth}'
- en: 1cm
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 1厘米
- en: 'STEP 1:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步：
- en: Find the extensive list of drug names that belong to $C$ by searching the FDA’s
    National Drug Code (NDC) database. Among them, DrugFinder identifies drugs $D$
    representing each category; top-$k$ distinct drug names that are most commonly
    prescribed in a clinical database (e.g., MIMIC-IV).
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通过搜索FDA的国家药品代码（NDC）数据库，找到属于$C$的药物名称的广泛列表。在这些药物中，DrugFinder识别出代表每个类别的药物$D$；在临床数据库（例如MIMIC-IV）中最常见的前$k$个药物名称。
- en: 'STEP 2:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二步：
- en: For each representative drug $D$ in $C$, DrugAgent generates a free-form (i.e., unstructured)
    text summary about the effect of $D$ on $H$. These summaries are generated by
    referring to up-to-date external pharmaceutical reference sources (e.g., FDA drug
    label database), which indicate potential adverse outcomes and evidence for the
    risks.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于类别$C$中的每个代表性药物$D$，DrugAgent生成关于$D$对$H$影响的自由形式（即非结构化）文本摘要。这些摘要通过参考最新的外部药学参考来源（例如FDA药物标签数据库）生成，后者指出潜在的不良结果和风险证据。
- en: 'STEP 3:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第三步：
- en: CategoryAgent combines the drug-level information from STEP 2, and generates
    a structured report; consisting of a label (one of “increase”, “decrease”, or
    “no-effect”) indicating the potential effect of $C$ on the risk of $H$, a confidence
    score for this label, structured descriptions of levels of risk, and strength
    of evidence.
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: CategoryAgent结合第二步中的药物级信息，生成结构化报告；报告包括一个标签（“增加”、“减少”或“无效”之一），指示$C$对$H$风险的潜在影响，一个关于此标签的置信度评分，风险级别的结构化描述，以及证据强度。
- en: Our system extracts the association between $C$ and $H$ by establishing the
    associations between each drug within $C$ and $H$, rather than directly linking
    $C$ to $H$. This construction is motivated by that the reference sources for drug
    label data, such as the FDA drug label database in our implementation, are typically
    structured by individual drugs rather than broad drug categories; hence necessitating
    STEP 1. It is important to note that applying our system to real patient data
    requires a complete list of drugs, including both brand and generic names, which
    can be used to map the actual prescribed drugs recorded in electronic health record
    (EHR) data to their corresponding categories.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的系统通过建立$C$内每个药物与$H$之间的关联，提取$C$与$H$之间的关系，而不是直接将$C$与$H$关联。这个构建的动机是，药物标签数据的参考来源（例如我们实现中的FDA药物标签数据库）通常按单独药物而非广泛药物类别来构建；因此需要第一步。需要注意的是，将我们的系统应用于真实患者数据需要一个完整的药物清单，包括品牌名和通用名，这些药物清单可以用于将电子健康记录（EHR）数据中记录的实际处方药物映射到它们对应的类别。
- en: 'Each of DrugFinder, DrugAgent, and CategoryAgent is coupled with a Critic agent,
    which provides feedback on the primary agent’s output. The primary agent then
    regenerates its output based on this feedback. This Agent-Critic interaction continues
    until the Critic approves the agent’s response. This design pattern significantly
    enhances the reliability of our system, as detailed further in Section [4.2](https://arxiv.org/html/2408.01869v1#S4.SS2
    "4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE
    Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance").'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 每个DrugFinder、DrugAgent和CategoryAgent都与一个批评者代理配对，后者对主代理的输出提供反馈。主代理随后根据这些反馈重新生成其输出。代理-批评者互动持续进行，直到批评者批准代理的响应为止。这种设计模式显著提高了我们系统的可靠性，进一步的细节请见第[4.2](https://arxiv.org/html/2408.01869v1#S4.SS2
    "4.2 代理-批评者互动 ‣ 4 MALADE：用于ADE提取的多代理系统 ‣ MALADE：基于LLM的代理与检索增强生成的药物监测协调")节。
- en: 4.2 Agent-Critic Interaction
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.2 代理-批评者互动
- en: This is the core multi-agent interaction pattern that underlies our system,
    and is reminiscent of Actor/Critic methods in reinforcement learning [[13](https://arxiv.org/html/2408.01869v1#bib.bib13)].
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这是支撑我们系统的核心多代理互动模式，类似于强化学习中的演员/批评者方法[[13](https://arxiv.org/html/2408.01869v1#bib.bib13)]。
- en: Agent.
  id: totrans-65
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 代理。
- en: In an Agent-Critic pair, the Agent is the primary entity that handles external-facing
    input and output. It receives a specific goal, instructions on how to accomplish
    the goal, and access to tools and resources. In our context, the goal is generally
    a form of specialized question-answering; resources can be data sources, or even
    other agents or multi-agent systems, that the agent can draw upon when answering
    the question; tools are structured responses needed to trigger calls to APIs,
    database look-ups, or computations.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在代理-批评者对中，代理是处理外部输入和输出的主要实体。它接收一个特定目标、关于如何完成该目标的指令，以及对工具和资源的访问。在我们的上下文中，目标通常是一种专门化的问答形式；资源可以是数据源，甚至是其他代理或多代理系统，代理可以在回答问题时引用这些资源；工具是需要触发API调用、数据库查询或计算的结构化响应。
- en: The primary function of the Agent is to construct a sequence of queries to these
    resources to fulfill its goal. The Agent is instructed to compose a semi-structured
    message consisting of its answer, its reasoning steps and a justification (citing
    sources where possible) of its answer in a semi-structured format, and seek feedback
    on these from the Critic, as below.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 代理的主要功能是构建一系列查询，向这些资源提问以实现其目标。代理被指示以半结构化格式编写一个包含其答案、推理步骤和答案的理由（尽可能引用来源）的半结构化消息，并向批评者寻求这些内容的反馈，如下所示。
- en: Critic.
  id: totrans-68
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 批评者。
- en: 'This is another agent, paired with the one described above. The Critic’s role
    is to validate the Agent’s reasoning steps and compliance with instructions, and
    provide feedback to the Agent, which has been shown to improve the quality of
    LLM-generated outputs [[18](https://arxiv.org/html/2408.01869v1#bib.bib18)]. The
    Agent iterates on its response based on this feedback, until the Critic is satisfied,
    at which point the Agent signals completion and outputs the results (see Figure [3](https://arxiv.org/html/2408.01869v1#S4.F3
    "Figure 3 ‣ Critic. ‣ 4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent
    System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")).'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这是另一个代理，与上面描述的代理配对。批评者的角色是验证代理的推理步骤和指令遵从性，并向代理提供反馈，已证明这种反馈可以提高LLM生成的输出质量[[18](https://arxiv.org/html/2408.01869v1#bib.bib18)]。代理根据这些反馈迭代其响应，直到批评者满意，此时代理发出完成信号并输出结果（见图[3](https://arxiv.org/html/2408.01869v1#S4.F3
    "图 3 ‣ 批评者。 ‣ 4.2 代理-批评者互动 ‣ 4 MALADE：用于ADE提取的多代理系统 ‣ MALADE：基于LLM的代理与检索增强生成的药物监测协调")）。
- en: While the Agent/Critic pattern may appear simple, this interaction is extremely
    powerful, and can significantly improve the reliability of the task completion.
    This synergistic relationship mirrors a pattern in interactive proof systems used
    in complexity theory; a prover (i.e., Agent) presents a solution, and a verifier
    (i.e., Critic) checks the validity of this solution. The verifier cannot solve
    the problem on its own but is capable of checking the prover’s solution efficiently,
    which is relatively easier [[1](https://arxiv.org/html/2408.01869v1#bib.bib1)].
    This way, even if the Agent’s task is complex, the Critic can efficiently verify
    the correctness of the solution, thereby enhancing reliability.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管代理/评论员模式看起来简单，但这种交互非常强大，能够显著提高任务完成的可靠性。这种协同关系类似于复杂性理论中交互式证明系统中的模式；证明者（即代理）提出一个解决方案，验证者（即评论员）检查该解决方案的有效性。验证者无法单独解决问题，但能够高效地检查证明者的解决方案，这相对容易[[1](https://arxiv.org/html/2408.01869v1#bib.bib1)]。通过这种方式，即使代理的任务很复杂，评论员也能高效地验证解决方案的正确性，从而增强可靠性。
- en: '![Refer to caption](img/2d4c9b30dd560a1ebed95bfbf09cd3bb.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明文字](img/2d4c9b30dd560a1ebed95bfbf09cd3bb.png)'
- en: 'Figure 3: Real-world demonstration of Agent-Critic interactions in MALADE.
    Given the question of identifying the association between Benzodiazepines and
    Hip Fracture, we illustrate how CategoryAgent corrects its answers over iterations
    until the paired Critic is satisfied. See Appendix [3.3](https://arxiv.org/html/2408.01869v1#A3.SS1.SSS3
    "3.3 CategoryAgent and Critic ‣ C.1 Successful Behavior ‣ Appendix C Detailed
    behavior of MALADE: Successful and Failed Behavior ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for full prompts between the two agents. Agents are instantiated using GPT-4 Turbo.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3：MALADE 中代理-评论员交互的真实世界演示。给定识别苯二氮䓬类药物与髋部骨折之间关联的问题，我们展示了 CategoryAgent 如何在迭代过程中纠正其答案，直到配对的评论员满意为止。有关两个代理之间的完整提示，请参见附录
    [3.3](https://arxiv.org/html/2408.01869v1#A3.SS1.SSS3 "3.3 CategoryAgent 和评论员
    ‣ C.1 成功行为 ‣ 附录 C MALADE 的详细行为：成功和失败行为 ‣ MALADE：使用检索增强生成的 LLM 驱动代理的协调")。代理是使用
    GPT-4 Turbo 实例化的。
- en: '4.3 STEP 1: Finding Representative Drugs'
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.3 步骤 1：查找代表性药物
- en: We first construct a reasonably complete set of all drugs that can possibly
    belong to the category, by querying FDA’s NDC database, which contains records
    of specific drugs, tagged with pharmacological class information of various types
    (including chemical classes, mechanisms of action, and established pharmacologic
    classes). Specifically, we extract all drugs with names or classes matching the
    relevant search term or terms (e.g., “antibiotic” or any of the sub-categories
    considered by OMOP, for example, erythromycin). Since this list may contain some
    drugs that do not actually belong to the class (e.g., a search for “typical antipsychotics”
    returns atypical antipsychotics as well), we rely on an additional filtering phase
    to construct the final, reasonably accurate list of drugs in the category. For
    each drug $D$ in this “complete” list, we obtain its prescription rate via a SQL
    query to the MIMIC-IV prescriptions table.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先通过查询 FDA 的 NDC 数据库，构建一个合理完整的所有可能属于该类别的药物集合，NDC 数据库包含特定药物的记录，并标注了各种类型的药理学类别信息（包括化学类别、作用机制和已确立的药理学类别）。具体而言，我们提取所有名称或类别与相关搜索词或术语匹配的药物（例如，“抗生素”或
    OMOP 考虑的任何子类别，例如红霉素）。由于该列表可能包含一些实际上不属于该类别的药物（例如，搜索“典型抗精神病药”时也会返回非典型抗精神病药），因此我们依赖额外的过滤阶段来构建最终合理准确的药物类别列表。对于此“完整”列表中的每个药物
    $D$，我们通过 SQL 查询 MIMIC-IV 处方表来获取其处方率。
- en: 'Note that we chose to implement the above two SQL query steps directly without
    using an LLM to generate the queries. This is an instance of an important design
    principle we adhere to in our system, which we call the LLM Minimization principle:
    for tasks that can be expressed deterministically and explicitly in a standard
    programming paradigm, handle them directly without using LLMs to enhance reliability
    and reduce token and latency costs.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我们选择直接实现上述两个 SQL 查询步骤，而没有使用大型语言模型（LLM）来生成查询。这体现了我们系统中遵循的一个重要设计原则，我们称之为 LLM
    最小化原则：对于可以用标准编程范式明确表达的确定性任务，直接处理它们，而不使用 LLM，以增强可靠性并减少令牌和延迟成本。
- en: DrugFinder.
  id: totrans-76
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: DrugFinder。
- en: 'Now that we have a reasonably complete list of candidate drug names that belong
    to the category of interest, along with their prescription rates, we want to identify
    three distinct, most commonly prescribed drugs that belong to the category. This
    task is complicated by several difficulties: the same drug may appear in this
    list with different names; some pairs of drugs may be essentially the same but
    only differ in formulation and delivery method, and a judgment must be made as
    to whether these are sufficiently different to be considered pharmacologically
    distinct; and some of these drugs may not actually belong to the category. This
    task thus requires a grouping operation, related to the task of identifying standardized
    drug codes from text descriptions, well known to be challenging [[14](https://arxiv.org/html/2408.01869v1#bib.bib14)].
    Hence, this is very difficult to explicitly define in a deterministic manner that
    covers all cases (unlike the above database tasks), and hence is well-suited to
    LLMs, particularly those such as GPT-4 Turbo which are known to have been trained
    on vast amounts of medical texts in general (and drug-related ones in particular).
    We assign this task to the DrugFinder, which is an Agent/Critic system where the
    Critic agent helps improve the paired agent’s output via iterative feedback; in
    particular, the Critic corrects the Agent when it incorrectly classifies drugs
    as pharmacologically distinct.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经拥有了一份合理完整的候选药物名称列表，并且这些药物属于我们关注的类别，同时也列出了它们的处方率，我们希望识别出属于该类别的三种最常见的处方药物。这个任务复杂在几个方面：同一种药物可能以不同的名称出现在列表中；有些药物对的配方和给药方式可能有所不同，但它们在本质上是相同的，必须判断这些差异是否足够大，足以被视为药理学上不同；并且其中一些药物可能实际上不属于该类别。因此，这个任务需要进行分组操作，类似于从文本描述中识别标准化药物代码的任务，众所周知这是一个具有挑战性的任务[[14](https://arxiv.org/html/2408.01869v1#bib.bib14)]。因此，这个任务很难用确定性的方式明确定义，无法涵盖所有情况（不同于上述数据库任务），因此非常适合使用大语言模型（LLM），特别是像
    GPT-4 Turbo 这样已知在大量医学文本（尤其是药物相关文本）上进行了训练的模型。我们将这个任务分配给 DrugFinder，这是一个代理/批评者系统，其中批评者代理通过迭代反馈帮助改进配对代理的输出；特别是，当配对代理错误地将药物分类为药理学上不同的药物时，批评者会纠正它。
- en: '4.4 STEP 2: Identifying Drug-Outcome Associations'
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.4 步骤 2：识别药物-结果关联
- en: DrugAgent is an Agent/Critic system whose task is to identify whether a given
    drug has an established effect on the risk of a given outcome, based on FDA drug
    label database, and output a summary of relevant information, including the level
    of identified risk and the evidence for such an effect. This agent does not have
    direct access to the FDA Drug Label data, but can receive this information via
    another agent, FDAHandler. FDAHandler is equipped with tools to invoke the OpenFDA
    API for drug label data, and answers questions in the context of information retrieved
    based on the queries. Information received from this API is ingested into a vector
    database, so the agent first uses a tool to query this vector database, and only
    resorts to the OpenFDA API tool if the vector database does not contain the relevant
    information.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: DrugAgent 是一个代理/批评者系统，任务是基于 FDA 药品标签数据库，识别某个给定药物是否对某个给定结果的风险有已知影响，并输出相关信息的总结，包括识别的风险级别和这种影响的证据。该代理无法直接访问
    FDA 药品标签数据，但可以通过另一个代理 FDAHandler 获取这些信息。FDAHandler 配备了调用 OpenFDA API 获取药品标签数据的工具，并根据查询返回基于检索信息的答案。通过该
    API 接收到的信息会被导入到向量数据库中，因此该代理首先使用工具查询该向量数据库，仅在向量数据库中没有相关信息时，才会使用 OpenFDA API 工具。
- en: '4.5 STEP 3: Labeling Drug Category-Outcome Associations'
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.5 步骤 3：标注药物类别-结果关联
- en: 'To identify the association between a drug category $C$ and an adverse health
    outcome $H$, we concurrently run a batch of queries³³3For any OMOP drug categories
    which contain multiple sub-categories, we execute the full process for each sub-category
    (identifying a set of representatives for each sub-category), merging the outputs
    of the classification agent, taking the highest risk indicated for any sub-category
    as the risk for the full category. to copies of DrugAgent, one for each drug $D$
    in the category, of the form: “Does drug $D$ increase or decrease the risk of
    condition $H$?”. The results are sent to CategoryAgent, described next.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了识别药物类别 $C$ 与不良健康结果 $H$ 之间的关联，我们同时运行一批查询³³3对于包含多个子类别的 OMOP 药物类别，我们会为每个子类别执行完整过程（为每个子类别识别代表性药物），合并分类代理的输出，并将任何子类别的最高风险作为整个类别的风险。查询将被发送到
    CategoryAgent，下面将描述该过程。
- en: 'CategoryAgent is an Agent/Critic system that performs the final classification
    step; its goal is to generate a label identifying whether a category of drugs
    increases or decreases the risk of a condition, or has no effect. In addition
    to the label, CategoryAgent produces a number of additional outputs, all of which
    are combined into a JSON-structured string, including: (a) a confidence score
    in [0,1], indicating the confidence in the assigned label, (c) strength of evidence,
    one of “none”, “weak”, or “strong”, and (d) frequency of the effect, one of “none,”
    “rare”, or “common”. In this sense, DrugAgent serves as a function of the following
    type: [string] $\rightarrow$ {‘‘increase’’,‘‘decrease’’,‘‘no-effect’’} $\times$ [0,1] $\times$ {‘‘non-'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: CategoryAgent 是一个代理/评论系统，执行最终的分类步骤；其目标是生成一个标签，标识某一类药物是否增加或减少某种病症的风险，或没有任何影响。除了标签外，CategoryAgent
    还会生成若干额外输出，这些输出都被合并成一个 JSON 结构的字符串，包括：(a) 一个置信度分数，范围在 [0,1] 之间，表示分配的标签的置信度，(c)
    证据强度，分为“none”（无）、“weak”（弱）或“strong”（强），以及 (d) 效应频率，分为“none”（无）、“rare”（罕见）或“common”（常见）。从这个意义上说，DrugAgent
    的功能类型如下：[string] $\rightarrow$ {‘‘increase’’（增加）,‘‘decrease’’（减少）,‘‘no-effect’’（无效）} $\times$ [0,1] $\times$ {‘‘none’’（无）,
    ‘‘rare’’（罕见）, ‘‘common’’（常见）}。
- en: 'e’’,‘‘weak’’,‘‘strong’’} $\times$ {‘‘none’’,‘‘rare,’’,‘‘common’’}. The structured
    output of CategoryAgent facilitates downstream post-processing to produce a final
    evaluation, with no further LLM involvement (Section [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")).'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: e’’,‘‘weak’’,‘‘strong’’} $\times$ {‘‘none’’（无）,‘‘rare’’（罕见）,‘‘common’’（常见）}。CategoryAgent
    的结构化输出便于下游后处理，以生成最终评估，无需进一步的 LLM 参与（见第 [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1
    "5.1 评估设置 ‣ 5 实验 ‣ MALADE：基于大语言模型的多代理架构在药物警戒中的应用") 节）。
- en: 5 Experiments
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5 实验
- en: 'This paper presents MALADE, the first LLM-based multi-agent architecture that
    is capable of producing a structured report with characterizations and scores
    related to the risk of an adverse health outcome $H$ from a drug category $C$,
    based on FDA drug label data. We evaluate our method against a widely used benchmark,
    the OMOP Evaluation Ground Truth task [[19](https://arxiv.org/html/2408.01869v1#bib.bib19)],
    henceforth referred to as the OMOP ADE task (Section [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")), to answer the following
    three research questions: {adjustwidth}1cm'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 本文介绍了 MALADE，这是第一个基于大语言模型（LLM）的多代理架构，能够生成与药物类别 $C$ 对不良健康结果 $H$ 风险相关的结构化报告，包括表征和分数，基于
    FDA 药物标签数据。我们通过广泛使用的基准 OMOP 评估基准任务 [[19](https://arxiv.org/html/2408.01869v1#bib.bib19)]，以下简称
    OMOP ADE 任务（见第 [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1 "5.1 评估设置 ‣ 5
    实验 ‣ MALADE：基于大语言模型的多代理架构在药物警戒中的应用") 节），来评估我们的方法，回答以下三个研究问题：
- en: 'RQ1:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'RQ1:'
- en: 'How effectively does MALADE identify ADEs? (Section [5.2](https://arxiv.org/html/2408.01869v1#S5.SS2
    "5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"))'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'MALADE 如何有效识别 ADE？（见第 [5.2](https://arxiv.org/html/2408.01869v1#S5.SS2 "5.2
    RQ1: MALADE 有效识别 ADE ‣ 5 实验 ‣ MALADE：基于大语言模型的多代理架构在药物警戒中的应用") 节）'
- en: 'RQ2:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 'RQ2:'
- en: 'Does Agent-Critic interaction, the core design pattern underlying MALADE, effectively
    enhance the reliability of the system? (Section [5.3](https://arxiv.org/html/2408.01869v1#S5.SS3
    "5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"))'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'Agent-Critic 互动，作为 MALADE 的核心设计模式，是否有效增强了系统的可靠性？（第[5.3](https://arxiv.org/html/2408.01869v1#S5.SS3
    "5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")节）'
- en: 'RQ3:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: RQ3：
- en: 'What useful insights do the justifications by MALADE provide for further system
    improvement? (Section [5.4](https://arxiv.org/html/2408.01869v1#S5.SS4 "5.4 RQ3:
    MALADE provides justifications that are aligned with human expert reasoning, and
    help understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"))'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 'MALADE 的解释为系统进一步改进提供了哪些有用的见解？（第[5.4](https://arxiv.org/html/2408.01869v1#S5.SS4
    "5.4 RQ3: MALADE provides justifications that are aligned with human expert reasoning,
    and help understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")节）'
- en: 5.1 Evaluation Setup
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.1 评估设置
- en: 'The objective of OMOP ADE task is to assign one of three labels (“increase,”
    “decrease,” and “no-effect”) to each ($C$, $H$) pair, denoting whether $C$ increases,
    decreases, or has no effect on the risk of $H$, respectively. There are 10 drug
    categories, some of which consist of a single drug, and 10 health outcomes (refer
    to Table [6](https://arxiv.org/html/2408.01869v1#A2.T6 "Table 6 ‣ B.2 Probability-based
    scoring ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for the complete list). Notably, while only three labels are valid outputs, not
    all ($C$, $H$) pairs are deemed sufficiently certain to be used in the evaluation.
    The authors of OMOP ADE task mark certain pairs as uncertain, to which we assign
    “no-effect” labels with the special restriction that it should not be used in
    the evaluation. See Appendix [B.3](https://arxiv.org/html/2408.01869v1#A2.SS3
    "B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for further details.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 'OMOP ADE 任务的目标是为每一对($C$, $H$)分配三种标签之一（“增加”，“减少”和“无效”），表示$C$是否增加、减少或对$H$的风险没有影响。共有10个药物类别，其中一些由单一药物组成，另外有10个健康结果（完整列表请参见表[6](https://arxiv.org/html/2408.01869v1#A2.T6
    "Table 6 ‣ B.2 Probability-based scoring ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")）。值得注意的是，尽管只有三个标签是有效的输出，但并非所有的($C$,
    $H$)对都被认为足够确定，可以用于评估。OMOP ADE 任务的作者标记了某些对为不确定，对这些不确定的对，我们分配“无效”标签，并附有特殊限制，表示这些对不应用于评估。有关详细信息，请参见附录[B.3](https://arxiv.org/html/2408.01869v1#A2.SS3
    "B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")。'
- en: '![Refer to caption](img/19468d3988a8db7bbe337227a3a3e8db.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明文字](img/19468d3988a8db7bbe337227a3a3e8db.png)'
- en: 'Figure 4: Ground truth (left) vs. predictions by MALADE (right) for OMOP ADE
    task. Red, green, and white cells represent “increase”, “decrease”, and “no-effect”
    labels, respectively.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4：OMOP ADE 任务的真实标签（左）与 MALADE 的预测（右）。红色、绿色和白色单元格分别代表“增加”、“减少”和“无效”标签。
- en: Metrics.
  id: totrans-96
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 指标。
- en: 'For quantitative evaluation, we convert the task into binary classification
    with two different focuses of analysis: (1) classifying effect vs no-effect, where
    the labels “increase” and “decrease” are considered the positive class, and “no-effect”
    is the negative class (namely, effect-based classification); and (2) classifying
    ADE vs. non-ADE, where only “increase” is considered the positive class, and the
    other two labels are the negative class (namely, ADE-based classification). For
    both choices, we report AUC and F1 scores, which are common evaluation metrics
    for binary classification [[19](https://arxiv.org/html/2408.01869v1#bib.bib19),
    [2](https://arxiv.org/html/2408.01869v1#bib.bib2)]. Corresponding to the above
    two binary-classification methods, this results in “effect-based AUC, F1” and
    “ADE-based AUC, F1.” The AUC metric captures how well the scores produced by MALADE
    discriminate between the classes, while the F1 score assesses the accuracy of
    the assigned labels in classifying both positive and negative instances.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 对于定量评估，我们将任务转化为二分类问题，分析重点有两个不同方向：（1）分类效果与无效果，其中标签“增加”和“减少”被视为正类，而“无效果”是负类（即基于效果的分类）；（2）分类ADE与非ADE，其中仅将“增加”视为正类，其他两个标签为负类（即基于ADE的分类）。对于这两种选择，我们报告AUC和F1分数，它们是二分类常用的评估指标[[19](https://arxiv.org/html/2408.01869v1#bib.bib19),
    [2](https://arxiv.org/html/2408.01869v1#bib.bib2)]。对应于上述两种二分类方法，分别得出“基于效果的AUC,
    F1”和“基于ADE的AUC, F1”。AUC指标衡量MALADE产生的分数在分类上区分不同类别的能力，而F1分数则评估在分类正负实例时分配标签的准确性。
- en: '5.2 RQ1: MALADE effectively identifies ADEs'
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.2 RQ1：MALADE有效识别ADE
- en: 'In the evaluations of MALADE, we consider two LLMs, GPT-4 Turbo and GPT-4o.
    For GPT-4o, we limit the number of rounds of feedback from Critics to 5, after
    which it is required to accept. Figure [4](https://arxiv.org/html/2408.01869v1#S5.F4
    "Figure 4 ‣ 5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance") compares the
    ground truth labels of OMOP ADE task with ADE labels identified by MALADE (with
    GPT-4 Turbo). Considering the uncertainty inherent in the label of certain (drug
    category, outcome) pairs [[19](https://arxiv.org/html/2408.01869v1#bib.bib19)],
    these indicate strong performance on the task. See Figure [10](https://arxiv.org/html/2408.01869v1#A2.F10
    "Figure 10 ‣ B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance") of Appendix [B](https://arxiv.org/html/2408.01869v1#A2
    "Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    for results on GPT-4o. We also present the confusion matrix of the MALADE labels
    in Figure [5](https://arxiv.org/html/2408.01869v1#S5.F5 "Figure 5 ‣ 5.2 RQ1: MALADE
    effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在MALADE的评估中，我们考虑了两种LLM，GPT-4 Turbo和GPT-4o。对于GPT-4o，我们将来自评论者的反馈轮数限制为5轮，之后需要接受。图[4](https://arxiv.org/html/2408.01869v1#S5.F4
    "图 4 ‣ 5.1 评估设置 ‣ 5 实验 ‣ MALADE：基于检索增强生成的LLM驱动代理协调用于药物监测")比较了OMOP ADE任务的真实标签与MALADE（使用GPT-4
    Turbo）识别的ADE标签。考虑到某些（药物类别，结果）对标签中固有的不确定性[[19](https://arxiv.org/html/2408.01869v1#bib.bib19)]，这些结果表明任务表现强劲。有关GPT-4o的结果，请参见附录[B](https://arxiv.org/html/2408.01869v1#A2
    "附录 B MALADE实现的详细描述 ‣ MALADE：基于检索增强生成的LLM驱动代理协调用于药物监测")中的图[10](https://arxiv.org/html/2408.01869v1#A2.F10
    "图 10 ‣ B.4 使用GPT-4 Turbo的标签后处理效果 ‣ 附录B MALADE实现的详细描述 ‣ MALADE：基于检索增强生成的LLM驱动代理协调用于药物监测")。我们还在图[5](https://arxiv.org/html/2408.01869v1#S5.F5
    "图 5 ‣ 5.2 RQ1：MALADE有效识别ADE ‣ 5 实验 ‣ MALADE：基于检索增强生成的LLM驱动代理协调用于药物监测")中展示了MALADE标签的混淆矩阵。
- en: 'Moreover, we report the performance of MALADE in terms of AUC and F1 metrics
    (see Table [1](https://arxiv.org/html/2408.01869v1#S5.T1 "Table 1 ‣ 5.2 RQ1: MALADE
    effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")). Recall that
    CategoryAgent outputs a confidence score ranging from 0 to 1 for its predicted
    labels, namely ”increase,” ”no-effect,” or ”decrease.”. This score reflects the
    agent’s certainty regarding the accuracy of the predicted outcome. For quantitative
    evaluation as in Table [1](https://arxiv.org/html/2408.01869v1#S5.T1 "Table 1
    ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we transform these tripartite label-confidence scores into binary classification
    probabilities, suitable for effect-based or adverse drug event (ADE)-based analysis.
    Converting the three-class labels to a binary format requires a clear method for
    correlating each confidence score with a probabilistic value for the respective
    binary classification task.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '此外，我们报告了MALADE在AUC和F1指标上的表现（见表[1](https://arxiv.org/html/2408.01869v1#S5.T1
    "Table 1 ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")）。回顾一下，CategoryAgent输出一个置信度分数，范围从0到1，用于其预测的标签，即“增加”，“无效”或“减少”。这个分数反映了代理对预测结果准确性的确定性。在表[1](https://arxiv.org/html/2408.01869v1#S5.T1
    "Table 1 ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")中的定量评估中，我们将这些三元标签-置信度分数转换为二元分类概率，适用于基于效果或不良药物事件（ADE）分析。将三类标签转换为二元格式需要一个明确的方法，将每个置信度分数与相应二元分类任务的概率值关联起来。'
- en: 'The three labels exhibit a natural progression: “decrease”, “no-effect”, and
    “increase” imply an ascending likelihood that a drug category is associated with
    the adverse outcome of interest, signifying a rising probability score for the
    positive class in ADE-based classification. Furthermore, an increase in confidence
    of ”no-effect” or ”decrease” corresponds to a decrease in the ADE score, while
    an increase in confidence of the ”increase” label corresponds to an increase in
    the ADE score. These observations guide us in formulating an intuitive conversion
    of the label-confidence scores into ADE probability scores; taking $(1-c_{\text{de}})/3,(2-c_{\text{no}})/3,$
    and $(2+c_{\text{in}})/3$, respectively, where $c_{\text{de}},c_{\text{no}},$
    and $c_{\text{in}}$ are the LLM output confidence score when the assigned label
    is “decrease”, “no-effect”, and “increase”, respectively. This transformation
    preserves the semantic ordering of the classes, as well as the valence of confidence
    in each class. To illustrate, increasing confidence in “decrease” or “no-effect”
    suggests that the LLM is less confident that $C$ causes $H$. We derive an effect-score
    similarly, except that both “increase” and “decrease” are now positive classes;
    taking $(1+c_{\text{in/de}})/2$ and $(1-c_{\text{no}})/2$, respectively.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这三个标签表现出自然的进展：“减少”，“无效”和“增加”表示药物类别与感兴趣的不良结果相关联的可能性逐渐上升，意味着ADE分类中正类的概率分数上升。此外，“无效”或“减少”的置信度增加与ADE分数的下降相关，而“增加”标签的置信度增加与ADE分数的上升相关。这些观察指导我们制定了一个直观的转换方法，将标签-置信度分数转换为ADE概率分数；分别取$(1-c_{\text{de}})/3,(2-c_{\text{no}})/3,$和$(2+c_{\text{in}})/3$，其中$c_{\text{de}}$，$c_{\text{no}}$和$c_{\text{in}}$分别是当分配标签为“减少”，“无效”和“增加”时LLM输出的置信度分数。此转换保持了类别的语义顺序，以及每个类别中的置信度值的方向性。举例来说，“减少”或“无效”置信度的增加表明LLM对$C$是否引起$H$的信心减弱。我们类似地推导出效果分数，除了“增加”和“减少”现在是正类；分别取$(1+c_{\text{in/de}})/2$和$(1-c_{\text{no}})/2$。
- en: 'The results in Table [1](https://arxiv.org/html/2408.01869v1#S5.T1 "Table 1
    ‣ 5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    indicate that the confidence scores output by the model are well-calibrated. We
    observe that MALADE performs well both at distinguishing ADEs from non-ADEs and
    at identifying the presence/absence of an effect in general. We include ROC curves
    and sensitivity vs. specificity curves in Figure [11](https://arxiv.org/html/2408.01869v1#A2.F11
    "Figure 11 ‣ B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance") and Figure [12](https://arxiv.org/html/2408.01869v1#A2.F12
    "Figure 12 ‣ B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance") of Appendix [B](https://arxiv.org/html/2408.01869v1#A2
    "Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    respectively. We conduct experiments with additional scoring functions, in particular,
    the model’s estimates of the probabilities that $C$ will cause or prevent $H$;
    see Appendix [B.1](https://arxiv.org/html/2408.01869v1#A2.SS1.SSS0.Px3 "STEP3:
    labeling the association between each drug category and each outcome. ‣ B.1 Prompts
    to Each Agent ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '表 [1](https://arxiv.org/html/2408.01869v1#S5.T1 "表 1 ‣ 5.2 RQ1: MALADE 有效识别
    ADE ‣ 5 实验 ‣ MALADE：使用检索增强生成技术的 LLM 驱动代理在药物监测中的协同工作") 中的结果表明，模型输出的置信度得分已经很好地进行了校准。我们观察到，MALADE
    在区分 ADE 和非 ADE 以及识别效应的存在/缺失方面都表现良好。我们在附录 [B](https://arxiv.org/html/2408.01869v1#A2
    "附录 B MALADE 实施的详细描述 ‣ MALADE：使用检索增强生成技术的 LLM 驱动代理在药物监测中的协同工作") 的图 [11](https://arxiv.org/html/2408.01869v1#A2.F11
    "图 11 ‣ B.4 使用 GPT-4 Turbo 的标签后处理效果 ‣ 附录 B MALADE 实施的详细描述 ‣ MALADE：使用检索增强生成技术的
    LLM 驱动代理在药物监测中的协同工作") 和图 [12](https://arxiv.org/html/2408.01869v1#A2.F12 "图 12
    ‣ B.4 使用 GPT-4 Turbo 的标签后处理效果 ‣ 附录 B MALADE 实施的详细描述 ‣ MALADE：使用检索增强生成技术的 LLM 驱动代理在药物监测中的协同工作")
    中包括了 ROC 曲线和敏感度与特异性曲线。我们还进行了额外评分函数的实验，特别是模型对 $C$ 会导致或防止 $H$ 的概率估计；详见附录 [B.1](https://arxiv.org/html/2408.01869v1#A2.SS1.SSS0.Px3
    "步骤 3：标注每个药物类别与每个结果之间的关联。 ‣ B.1 提示给每个代理 ‣ 附录 B MALADE 实施的详细描述 ‣ MALADE：使用检索增强生成技术的
    LLM 驱动代理在药物监测中的协同工作")。'
- en: '![Refer to caption](img/3991994cad9195a8ccfc25d7bf1fb962.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/3991994cad9195a8ccfc25d7bf1fb962.png)'
- en: ((a))
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/4cedd20ec84782025c6518d483f1c26a.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/4cedd20ec84782025c6518d483f1c26a.png)'
- en: ((b))
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 5: Confusion matrix for MALADE.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5：MALADE 的混淆矩阵。
- en: 'Model Metric Effect-based ADE-based GPT-4o AUC with confidence 0.883 0.903
    GPT-4o F1 score 0.600 0.560 GPT-4 Turbo AUC with confidence 0.831 0.851 GPT-4
    Turbo F1 score ^†^†footnotemark: 0.609 0.556'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '模型度量 基于效应的 ADE-based GPT-4o AUC（带置信度） 0.883 0.903 GPT-4o F1 分数 0.600 0.560
    GPT-4 Turbo AUC（带置信度） 0.831 0.851 GPT-4 Turbo F1 分数 ^†^†脚注标记: 0.609 0.556'
- en: 'Table 1: Quantitative evaluation of MALADE. “Effect-based” captures the classification
    between the presence and the absence of any ADE, while “ADE-based” represent’s
    the ability of MALADE to distinguish drugs with increased risk from those with
    decreased risk or no effect.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 表 1：MALADE 的定量评估。 “基于效应的”表示分类出任何 ADE 的存在与否，而 “基于 ADE 的”代表 MALADE 区分具有增加风险的药物与没有效应或减少风险的药物的能力。
- en: '⁴⁴footnotetext: We observe that GPT-4 Turbo tends to assign “increase” rather
    confidently even when the evidence is weak. To further enhance the reliability
    of the assigned labels, we take an additional postprocessing step; replacing unreliable
    predictions with “no-effect”. See Appendix [B.4](https://arxiv.org/html/2408.01869v1#A2.SS4
    "B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance") for detailed discussions
    on label postprocessing.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '⁴⁴脚注：我们观察到，GPT-4 Turbo往往在证据较弱的情况下也会较为自信地赋予“增加”的标签。为了进一步提高分配标签的可靠性，我们增加了一个后处理步骤；将不可靠的预测替换为“无效”。有关标签后处理的详细讨论，请参见附录[B.4](https://arxiv.org/html/2408.01869v1#A2.SS4
    "B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix B Detailed
    Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")。'
- en: '5.3 RQ2: Agent-Critic interaction enhances reliability'
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5.3 RQ2：Agent-Critic交互增强可靠性
- en: Critics RAG Confidence AUC F1 Score ADE Effect ADE Effect ✓ ✓ 0.851 0.831 0.556
    0.609 $\times$ ✓ 0.825 0.819 0.556 0.609 ✓ $\times$ 0.924 0.929 0.526 0.609 $\times$
    $\times$ 0.920 0.926 0.556 0.636
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: Critics RAG 置信度 AUC F1 分数 ADE Effect ADE Effect ✓ ✓ 0.851 0.831 0.556 0.609
    $\times$ ✓ 0.825 0.819 0.556 0.609 ✓ $\times$ 0.924 0.929 0.526 0.609 $\times$
    $\times$ 0.920 0.926 0.556 0.636
- en: 'Table 2: Ablation results on MALADE.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 表2：MALADE的消融实验结果。
- en: Agent Correction DrugAgent 4.24 % CategoryAgent 44.52 %
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 药物纠正代理 DrugAgent 4.24 % 类别代理 CategoryAgent 44.52 %
- en: 'Table 3: Percentage of agent responses corrected by the Critic.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 表3：Critic纠正的代理响应的百分比。
- en: 'Our primary tool to analyze the effectiveness of the Agent-Critic pattern in
    MALADE is by ablation; in particular, we evaluate modified versions of MALADE,
    with and without feedback from the Critic components of DrugAgent and CategoryAgent,
    with and without RAG for FDAHandler. The results are shown in Table [3](https://arxiv.org/html/2408.01869v1#S5.T3
    "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance").'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '我们分析MALADE中Agent-Critic模式有效性的主要工具是通过消融实验；特别是，我们评估了MALADE的不同版本，分别有和没有来自DrugAgent和CategoryAgent的Critic组件的反馈，以及有和没有FDAHandler的RAG。结果见表[3](https://arxiv.org/html/2408.01869v1#S5.T3
    "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")。'
- en: 'We observe that, both in the case with and without RAG, Critics improve the
    quality of the confidence scores, increasing both ADE-based and Effect-based AUCs.
    We additionally observe strong performance without RAG (in which case Critics
    slightly improve AUCs but decrease F1 scores), suggesting that GPT-4’s internal
    medical knowledge is frequently sufficient for the OMOP ADE task. However, to
    ensure that MALADE is a realistic prototype for future pharmacovigilance systems,
    we consider only instances of MALADE with RAG for our main analysis; LLM-based
    systems without RAG are prone to hallucinations, and are limited by a static pool
    of information to draw upon. They lack the ability to produce citations, which
    is vital for trust in these systems, particularly in the medical domain. Integrating
    RAG enables the system to access and leverage the most current information from
    (for example) FDA label data, ensuring the system’s responses are grounded with
    the up-to-date knowledge available. Refer to Appendix [D](https://arxiv.org/html/2408.01869v1#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") for further details on ablation results
    and discussions.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '我们观察到，无论是否使用RAG，Critic都能提高置信度分数的质量，增加基于ADE和Effect的AUC值。我们还观察到，在没有RAG的情况下，系统表现强劲（此时Critic略微提高了AUC，但F1分数有所下降），这表明GPT-4的内部医学知识通常足以处理OMOP
    ADE任务。然而，为了确保MALADE是未来药物监测系统的一个现实原型，我们只考虑具有RAG的MALADE实例进行主要分析；没有RAG的LLM系统容易产生幻觉，并且受限于静态信息池，无法访问最新信息。这些系统缺乏生成引用的能力，而引用对于这些系统的信任，特别是在医学领域，是至关重要的。集成RAG使系统能够访问并利用最新的信息（例如，FDA标签数据），确保系统的响应基于当前的可用知识。有关消融结果和讨论的更多细节，请参见附录[D](https://arxiv.org/html/2408.01869v1#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")。'
- en: 'We continue our investigation of the effectiveness of Agent-Critic interaction
    by analyzing the frequency of Critic interventions to rectify errors in Agent
    responses. We identify corrections made by the Critic as examples in which the
    Agent and Critic engaged in more than one round of interaction. Results are shown
    in Table [3](https://arxiv.org/html/2408.01869v1#S5.T3 "Table 3 ‣ 5.3 RQ2: Agent-Critic
    interaction enhances reliability ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance").'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '我们继续通过分析评论员干预的频率，以纠正代理人回答中的错误，来调查代理人-评论员互动的有效性。我们将评论员进行的修正视为代理人与评论员进行多轮互动的例子。结果显示在表[3](https://arxiv.org/html/2408.01869v1#S5.T3
    "Table 3 ‣ 5.3 RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")中。'
- en: 'We find that the frequency with which the Critic catches a flaw varies significantly
    by Agent. CategoryAgent in particular incurs errors, necessitating the help of
    the Critic and is generally corrected due to flaws in its medical reasoning, hence
    the Critic can directly prevent an incorrect response. In the example of an actual
    run of MALADE(Figure [3](https://arxiv.org/html/2408.01869v1#S4.F3 "Figure 3 ‣
    Critic. ‣ 4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent System
    for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")), when asked about the effects of
    benzodiazepines on hip fracture, CategoryAgent first answered “no-effect”, which
    was flagged as an error, as the sedative and muscle relaxant properties of benzodiazepines
    can increase the risk of falls and hence hip fractures, and as DrugAgent had noted
    that traumatic fractures were listed as an ADE in the drug labels. This feedback
    was forwarded to CategoryAgent and used to revise its answer to “increase”. We
    find that DrugAgent generally produces reliable responses; however note that it
    occasionally makes no calls to the Critic, hence the Agent fails to validate its
    answer. We observe that this can occur when the FDA drug label does not contain
    information related to the condition, and the Agent concludes that no validation
    is necessary.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '我们发现评论员发现缺陷的频率在不同代理人之间存在显著差异。特别是CategoryAgent经常发生错误，需要评论员的帮助，并通常由于其医学推理中的缺陷而被修正，因此评论员可以直接防止错误的回答。在MALADE的实际运行示例中（图[3](https://arxiv.org/html/2408.01869v1#S4.F3
    "Figure 3 ‣ Critic. ‣ 4.2 Agent-Critic Interaction ‣ 4 MALADE: Proposed Multi-Agent
    System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")），当被问及苯二氮平类药物对髋部骨折的影响时，CategoryAgent首先回答“没有影响”，这被标记为错误，因为苯二氮平类药物的镇静和肌肉松弛作用会增加跌倒的风险，从而导致髋部骨折，并且DrugAgent已经注意到创伤性骨折被列为药物标签中的不良反应。这一反馈被转发给CategoryAgent，并用来修正其回答为“增加”。我们发现DrugAgent通常会提供可靠的回答；然而需要注意的是，它偶尔没有调用评论员，因此代理人未能验证其答案。我们观察到，当FDA药物标签中没有与该病情相关的信息时，代理人会得出不需要验证的结论。'
- en: '5.4 RQ3: MALADE provides justifications that are aligned with human expert
    reasoning, and help understand its failure modes'
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '5.4 RQ3: MALADE 提供了与人类专家推理一致的理由，并帮助理解其失败模式。'
- en: We extract the justifications produced by CategoryAgent from a full run of MALADE
    for OMOP ADE task for review by a clinician. We observe that the agent exhibits
    valid medical reasoning in most cases, in particular, $85\%$ of its justifications
    align with the reasoning of the clinician.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从MALADE的完整运行中提取CategoryAgent为OMOP ADE任务提供的理由，供临床医生审查。我们观察到，在大多数情况下，代理人展示了有效的医学推理，特别是$85\%$的理由与临床医生的推理一致。
- en: More importantly, examining the provided justifications helps us understand
    the common patterns of failures and provides guidance on the further improvement
    of the system. For instance, CategoryAgent occasionally assigns “increase” to
    drug categories based on weak evidence, overestimating its strength It may also
    overlook risks not explicitly mentioned in the drug label data, particularly when
    DrugAgent fails to provide sufficient context. In addition, CategoryAgent may
    fail to identify potential therapeutic effects not specified in the drug label
    data in association with a condition. We observe that it does not recognize the
    antihistamine properties of tricyclic antidepressants. In one case, evidence against
    gastric and duodenal ulcers caused by alendronate led CategoryAgent to dismiss
    results regarding esophageal ulcers.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 更重要的是，审视提供的理由有助于我们理解失败的常见模式，并为系统的进一步改进提供指导。例如，CategoryAgent 有时会根据薄弱的证据将“增加”分配给药物类别，过高估计了其强度。它也可能忽视未在药物标签数据中明确提到的风险，特别是当
    DrugAgent 未能提供足够的上下文时。此外，CategoryAgent 可能未能识别与某种病症相关的药物标签数据中未明确指定的潜在治疗效果。我们观察到，它未能识别三环类抗抑郁药的抗组胺特性。在一个案例中，针对阿仑膦酸盐引起的胃和十二指肠溃疡的证据导致
    CategoryAgent 排除有关食管溃疡的结果。
- en: 'While MALADE exhibits correct medical reasoning in general and hence achieves
    strong and reliable performance on ADE identification, we highlight that understanding
    its failures is essential for its further improvements, as discussed in Section [6](https://arxiv.org/html/2408.01869v1#S6
    "6 Discussion ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"). Extracts from the logs showing both correct
    and incorrect behavior by MALADE are in Appendix [C](https://arxiv.org/html/2408.01869v1#A3
    "Appendix C Detailed behavior of MALADE: Successful and Failed Behavior ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").
    See Appendix [B.5](https://arxiv.org/html/2408.01869v1#A2.SS5 "B.5 Discussion
    of Justifications Produced by DrugFinder ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") for a discussion of the justifications
    produced by DrugFinder.'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '尽管 MALADE 在一般情况下表现出正确的医学推理，因此在 ADE 识别上取得了强大且可靠的表现，我们强调，理解其失败对于进一步改进至关重要，正如在第
    [6](https://arxiv.org/html/2408.01869v1#S6 "6 Discussion ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    节中所讨论的那样。显示 MALADE 正确和不正确行为的日志摘录见附录 [C](https://arxiv.org/html/2408.01869v1#A3
    "Appendix C Detailed behavior of MALADE: Successful and Failed Behavior ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。关于
    DrugFinder 所生成的理由的讨论请参见附录 [B.5](https://arxiv.org/html/2408.01869v1#A2.SS5 "B.5
    Discussion of Justifications Produced by DrugFinder ‣ Appendix B Detailed Descriptions
    on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance")。'
- en: 6 Discussion
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6 讨论
- en: Generalizable insights about collaborative LLM-powered agents in the context
    of healthcare.
  id: totrans-125
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 关于协作型 LLM 驱动的代理在医疗健康领域的可推广见解。
- en: We have observed the strong performance of MALADE for ADE extraction, indicating
    the potential of multi-agent systems toward broader PhV application. Importantly,
    the principles guiding the design of our system, including 1) the Agent-Critic
    interaction, 2) the decomposition of a complex task into sub-tasks, and 3) LLM
    minimization, are quite general. These principles extend beyond PhV, and can be
    applied to many other problems in clinical medicine which require trustworthy,
    automated responses to challenging questions that must be answered based on multiple
    competing, and potentially conflicting, sources of knowledge or data. Thus, MALADE
    may be viewed not only as a system for ADE extraction, but also as a roadmap for
    development of other multi-agent systems that generate precise, evidence-based
    responses to such questions.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经观察到 MALADE 在 ADE 提取方面的强大表现，表明多代理系统在更广泛的药物安全监测（PhV）应用中的潜力。重要的是，指导我们系统设计的原则，包括
    1) 代理-批评者互动，2) 将复杂任务分解为子任务，以及 3) LLM 最小化，都是相当普遍的。这些原则超越了药物安全监测，可以应用于临床医学中的许多其他问题，这些问题需要基于多个竞争且可能冲突的知识或数据来源，给出可信的自动化响应。因此，MALADE
    不仅可以视为一个用于 ADE 提取的系统，也可以作为开发其他多代理系统的路线图，这些系统能针对此类问题生成准确的、基于证据的回答。
- en: General principle 1) Agent-Critic interaction.
  id: totrans-127
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 一般原则 1) 代理-批评者互动。
- en: 'The Agent/Critic pattern, as discussed in Section [4](https://arxiv.org/html/2408.01869v1#S4
    "4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    is essential to the design of our system, and serves as a powerful tool to enhance
    accuracy of an LLM-based system. Indeed, we have observed several instances where
    the Critic corrected the parent Agent’s initial response, as in the example mentioned
    in Section [4.2](https://arxiv.org/html/2408.01869v1#S4.SS2 "4.2 Agent-Critic
    Interaction ‣ 4 MALADE: Proposed Multi-Agent System for ADE Extraction ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").
    However, we should note that if improperly configured, Critics can be harmful
    to the performance of a system, both in terms of efficiency (since the repeated
    rounds of interaction between the Agent and Critic can significantly increase
    token cost and runtime), and reliability. Since a Critic strictly enforces the
    provided guidelines, incorrect guidelines can significantly harm performance;
    in some cases, excessively strict requirements can lead to infinite loops, as
    the Agent and Critic will deadlock, neither able to satisfy the other’s requirements.
    We observed this effect in early versions of MALADE; resolving the infinite loop
    issue required specific instructions listing acceptable behavior. For instance,
    the Critic for DrugAgent needed to be explicitly told to accept statements that
    the effect of a drug was uncertain due to a lack of information from the FDA labels;
    without this, infinite loops occurred in some drug-outcome combinations.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '如第[4](https://arxiv.org/html/2408.01869v1#S4 "4 MALADE: 提议的多智能体系统用于ADE提取 ‣
    MALADE：利用检索增强生成的LLM驱动智能体编排用于药物警戒")节所讨论的，代理/批评者模式对于我们系统的设计至关重要，是提高基于LLM系统准确性的强大工具。实际上，我们已经观察到多个实例，其中批评者纠正了父代理的初始响应，正如第[4.2](https://arxiv.org/html/2408.01869v1#S4.SS2
    "4.2 代理-批评者互动 ‣ 4 MALADE: 提议的多智能体系统用于ADE提取 ‣ MALADE：利用检索增强生成的LLM驱动智能体编排用于药物警戒")节中提到的例子。然而，我们应该注意到，如果配置不当，批评者可能会对系统的性能造成危害，包括效率（由于代理和批评者之间的反复交互会显著增加代币成本和运行时间）和可靠性。由于批评者严格执行提供的指导方针，错误的指导方针会显著影响性能；在某些情况下，过于严格的要求可能导致无限循环，因为代理和批评者会陷入死锁，无法满足彼此的要求。我们在MALADE的早期版本中观察到这种效果；解决无限循环问题需要特定的指令列出可接受的行为。例如，DrugAgent的批评者需要明确告诉它接受药物效应由于缺乏FDA标签信息而不确定的说法；如果没有这个指令，某些药物-结果组合会发生无限循环。'
- en: General principle 2) Decomposition of a complex task.
  id: totrans-129
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 一般原则 2) 复杂任务的分解。
- en: 'The principle of decomposition, mirroring the analogous principle of general
    software development, is the Unix philosophy as applied to multi-agent systems.
    Individual agents should be minimal, in that they should “do one thing and do
    it well”. This decomposition principle is evident in the hierarchy of specialized
    agents in the design of MALADE (i.e., DrugFinder, DrugAgent, and CategoryAgent
    taking charge of each sub-task in Section [4.3](https://arxiv.org/html/2408.01869v1#S4.SS3
    "4.3 STEP 1: Finding Representative Drugs ‣ 4 MALADE: Proposed Multi-Agent System
    for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") - [4.5](https://arxiv.org/html/2408.01869v1#S4.SS5
    "4.5 STEP 3: Labeling Drug Category-Outcome Associations ‣ 4 MALADE: Proposed
    Multi-Agent System for ADE Extraction ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")). In addition to promoting
    modularity and maintainability, decomposition also promotes reliability, especially
    when combined with another key design principle, LLM only when necessary.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '分解原则，类似于通用软件开发中的类似原则，是将Unix哲学应用于多智能体系统。各个智能体应该是最小化的，即它们应该“做一件事并做到最好”。这一分解原则在MALADE的设计中体现得尤为明显（即，DrugFinder、DrugAgent和CategoryAgent负责第[4.3](https://arxiv.org/html/2408.01869v1#S4.SS3
    "4.3 第1步：查找代表性药物 ‣ 4 MALADE: 提议的多智能体系统用于ADE提取 ‣ MALADE：利用检索增强生成的LLM驱动智能体编排用于药物警戒")节
    - [4.5](https://arxiv.org/html/2408.01869v1#S4.SS5 "4.5 第3步：标注药物类别-结果关联 ‣ 4 MALADE:
    提议的多智能体系统用于ADE提取 ‣ MALADE：利用检索增强生成的LLM驱动智能体编排用于药物警戒")节中的每个子任务）。除了促进模块化和可维护性外，分解还促进了可靠性，尤其是当与另一个关键设计原则“仅在必要时使用LLM”结合时。'
- en: General principle 3) LLM only when necessary.
  id: totrans-131
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 一般原则 3) 仅在必要时使用LLM。
- en: 'As LLMs have surprising capabilities, one might be tempted to take an “LLM-maximalist”
    approach, where LLMs are responsible for all aspects of the task. Unfortunately,
    this can be both costly and unreliable, since using proprietary LLMs (e.g., GPT-4)
    behind paid APIs incurs a significant “token cost” as well as “time cost” (due
    to the latency of the responses API calls). Instead, we carefully identified deterministic,
    well-defined algorithmic parts of the task and performed these in standard code.
    We relied on LLM-powered agents only for the specific tasks requiring language
    understanding, reasoning, and text generation. This principle guides key choices
    in MALADE: for instance, to retrieve prescription frequencies of drugs in a category,
    instead of having an LLM generate the needed SQL queries to the MIMIC-IV database,
    we observed that these queries are a simple function of the list of drugs, and
    directly generated the query in standard code. A similar choice was made for the
    FDA API queries to retrieve drug labels.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 由于LLM具有惊人的能力，人们可能会倾向于采取“LLM至上”的方式，让LLM负责任务的所有方面。不幸的是，这种做法既昂贵又不可靠，因为使用专有的LLM（例如GPT-4）通过付费API会产生显著的“令牌成本”和“时间成本”（由于API调用的响应延迟）。相反，我们小心地识别了任务中确定性的、定义明确的算法部分，并在标准代码中执行这些部分。我们只在需要语言理解、推理和文本生成的特定任务中依赖LLM驱动的智能体。这个原则指导了MALADE中的关键选择：例如，为了检索某个类别中药物的处方频率，我们没有让LLM生成所需的SQL查询语句来查询MIMIC-IV数据库，而是观察到这些查询只是药物列表的简单函数，并直接用标准代码生成查询。同样的选择也适用于FDA
    API查询以检索药物标签。
- en: 'Such “LLM only when necessary” principle also illustrates the key utility of
    tool-use (also known as function-calling): in addition to providing the LLM the
    ability to perform external actions and to retrieve external data, it allows offloading
    execution of complex code from the LLM, hence dramatically reducing cost and increasing
    reliability. A multi-agent orchestration system, in this sense, can be seen as
    control flow for the LLM.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 这种“仅在必要时使用LLM”原则也展示了工具使用（也称为函数调用）的关键作用：除了提供LLM执行外部操作和检索外部数据的能力外，它还允许将复杂代码的执行从LLM中卸载，从而显著降低成本并提高可靠性。从这个意义上看，多智能体编排系统可以被视为LLM的控制流。
- en: Limitations and Future Work.
  id: totrans-134
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 局限性与未来工作。
- en: 'One key limitation of MALADE is that we rely entirely on textual FDA label
    data. In particular, if the information is not specifically included in the label
    data, MALADE cannot reliably identify the strength of any associations raised
    in the data. This resulted in several flawed predictions, as discussed in Section [5.4](https://arxiv.org/html/2408.01869v1#S5.SS4
    "5.4 RQ3: MALADE provides justifications that are aligned with human expert reasoning,
    and help understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").
    To remedy this, we envision that extracting ADEs from EHR data is a promising
    direction for future work. As a first step, this would enable estimating the rarity
    of certain adverse events noted without further detail in the label data; in principle,
    a multi-agent system with access to EHR data may be able to identify ADEs directly.
    This would require the LLM to perform causal discovery from historical data (answering,
    “Is the drug causing this event?”).'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 'MALADE的一个关键局限性是我们完全依赖文本的FDA标签数据。特别是，如果信息没有在标签数据中明确包含，MALADE就无法可靠地识别数据中提到的任何关联强度。正如在第[5.4](https://arxiv.org/html/2408.01869v1#S5.SS4
    "5.4 RQ3: MALADE provides justifications that are aligned with human expert reasoning,
    and help understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")节中讨论的，这导致了几个错误的预测。为了解决这个问题，我们设想从电子健康记录（EHR）数据中提取不良药物事件（ADEs）是未来工作的一个有前景的方向。作为第一步，这将使得可以估算在标签数据中没有进一步细节说明的某些不良事件的稀有性；原则上，具有访问EHR数据的多智能体系统可能能够直接识别ADEs。这将要求大语言模型（LLM）从历史数据中进行因果发现（回答“这类事件是由药物引起的吗？”）。'
- en: Another interesting avenue for future work is a detailed evaluation with local,
    open-source LLMs such as LlaMA [[36](https://arxiv.org/html/2408.01869v1#bib.bib36)],
    Grok [[42](https://arxiv.org/html/2408.01869v1#bib.bib42)], and Mistral [[11](https://arxiv.org/html/2408.01869v1#bib.bib11)],
    which have privacy and cost advantages over the proprietary LLMs (such as GPT-4,
    Claude, and variants) behind paid APIs. Unfortunately, our initial experiments
    with local LLMs exhibited many failure modes due to deviation from instructions
    and incorrect tool use. These are in principle possible to remedy by further breaking
    down tasks into simpler subtasks, and more sophisticated multi-agent validation
    and correction mechanisms.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 未来工作的另一个有趣方向是与本地开源LLM进行详细评估，例如LlaMA [[36](https://arxiv.org/html/2408.01869v1#bib.bib36)]、Grok
    [[42](https://arxiv.org/html/2408.01869v1#bib.bib42)] 和 Mistral [[11](https://arxiv.org/html/2408.01869v1#bib.bib11)]，这些相较于专有的LLM（例如GPT-4、Claude及其变种）背后的付费API，具有隐私性和成本优势。不幸的是，我们与本地LLM的初步实验展示了许多失败模式，原因是偏离了指令和工具使用不当。原则上，通过进一步将任务分解为更简单的子任务，并结合更复杂的多代理验证和纠正机制，这些问题是有可能得到解决的。
- en: Besides these broad limitations and avenues of future work, a few specific improvements
    are possible. Our system requires some minimal human input at the initial step,
    in particular, the names of the drug categories must be put into the form expected
    by the FDA’s databases; in particular, acronyms are expanded and plurals and punctuation
    are removed. This task is quite likely amenable to LLMs, which are capable of
    acronym identification and could attempt additional transformations for more robust
    output (for example, identifying all synonyms of a pharmacological class; the
    union of the drugs identified with each search would then be forwarded to DrugFinder).
    In addition, increased usage of structured input and output is a potential enhancement;
    for example, DrugAgent’s reliability might be enhanced by replacing the free-form
    text output, using instructions enforcing the presence of certain information,
    such as the reliability of information and the risk.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些广泛的局限性和未来工作的方向外，仍然有一些具体的改进是可能的。我们的系统在初步步骤中需要一些最小的人类输入，特别是药物类别的名称必须按照FDA数据库预期的格式输入；具体来说，缩写需要展开，复数形式和标点符号需要去除。这个任务很可能适合LLM来处理，它们能够识别缩写，并尝试进行额外的转换以产生更稳健的输出（例如，识别某一药理学类别的所有同义词；每次搜索中识别到的药物的并集将会转发到DrugFinder）。此外，增加结构化输入和输出的使用也是一种潜在的改进；例如，通过使用强制要求包含某些信息的指令，可能会增强DrugAgent的可靠性，诸如信息的可靠性和风险等内容。
- en: 7 Conclusion
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 7 结论
- en: 'We consider the problem of ADE Extraction from FDA Drug Labels, a key task
    in Pharmacovigilance (PhV), and propose a solution using MALADE, based on collaboration
    among multiple LLM-powered agents equipped with Retrieval Augmented Generation
    (RAG). Our system goes significantly beyond simplistic techniques that only produce
    a binary label of presence/absence of association between a drug category and
    an ADE: it produces a structured report containing justification for the generated
    label, and scores characterizing probability of occurrence, confidence, strength
    of evidence, and rarity of the association between a drug category and an ADE.
    The scores permit rigorous quantitative evaluation of the system’s performance
    against the widely-used OMOP Ground Truth table of ADEs, and the results are impressive.
    We introduce the agent/critic pattern, a powerful and general design pattern for
    reliable multi-agent systems. We hope that our multi-agent architecture and guiding
    principles will inspire future work on multi-agent approaches to broader PhV and
    general medical tasks.'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们考虑从FDA药品标签中提取ADE（不良药物反应）的任务，这是药物监测（PhV）中的一个关键任务，并提出了一个基于MALADE的解决方案，MALADE通过多个具备检索增强生成（RAG）功能的大型语言模型（LLM）驱动的代理之间的协作来实现。我们的系统远远超越了简单的技术，这些技术仅仅生成药物类别与ADE之间是否关联的二元标签：它生成包含标签生成理由的结构化报告，并且提供表示发生概率、置信度、证据强度以及药物类别与ADE之间关联稀有度的评分。这些评分允许对系统性能进行严格的定量评估，并与广泛使用的OMOP
    ADE标准表进行对比，结果令人印象深刻。我们引入了代理/批评者模式，这是一种强大且通用的设计模式，适用于可靠的多代理系统。我们希望我们的多代理架构和指导原则能够启发未来在药物监测以及更广泛的医学任务中使用多代理方法的工作。
- en: References
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参考文献
- en: '[1] László Babai. Trading group theory for randomness. In Proceedings of the
    seventeenth annual ACM symposium on Theory of computing, pages 421–429, 1985.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[1] László Babai. 用随机性代替群论. 见《第十七届ACM计算理论年会论文集》，页码421-429，1985年。'
- en: '[2] Samuel Bayer, Cheryl Clark, Oanh Dang, John Aberdeen, Sonja Brajovic, Kimberley
    Swank, Lynette Hirschman, and Robert Ball. Ade eval: an evaluation of text processing
    systems for adverse event extraction from drug labels for pharmacovigilance. Drug
    safety, 44:83–94, 2021.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[2] Samuel Bayer、Cheryl Clark、Oanh Dang、John Aberdeen、Sonja Brajovic、Kimberley
    Swank、Lynette Hirschman 和 Robert Ball. ADE评估：用于药物标签中的不良事件提取的文本处理系统评估，旨在药物监测。 《药物安全》，44：83–94，2021年。'
- en: '[3] Prasad Chalasani, Nils Palumbo, Mohannad Alhanahnah, and Somesh Jha. Langroid:
    Multi-agent framework for llm applications. [https://github.com/langroid/langroid](https://github.com/langroid/langroid),
    2023.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3] Prasad Chalasani、Nils Palumbo、Mohannad Alhanahnah、Somesh Jha. Langroid：用于LLM应用的多智能体框架。
    [https://github.com/langroid/langroid](https://github.com/langroid/langroid)，2023年。'
- en: '[4] Jeff Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova. Bert:
    Pre-training of deep bidirectional transformers for language understanding. In
    Proceedings of the 2019 Conference of the North American Chapter of the Association
    for Computational Linguistics: Human Language Technologies, 2019.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[4] Jeff Devlin、Ming-Wei Chang、Kenton Lee 和 Kristina Toutanova. BERT：用于语言理解的深度双向变换器预训练。发表于2019年北美计算语言学协会会议：人类语言技术会议论文集，2019年。'
- en: '[5] Giacomo Frisoni, Miki Mizutani, Gianluca Moro, and Lorenzo Valgimigli.
    Bioreader: a retrieval-enhanced text-to-text transformer for biomedical literature.
    In Proceedings of the 2022 conference on empirical methods in natural language
    processing, pages 5770–5793, 2022.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[5] Giacomo Frisoni、Miki Mizutani、Gianluca Moro 和 Lorenzo Valgimigli. Bioreader：一种用于生物医学文献的检索增强型文本到文本变换器。发表于2022年自然语言处理经验方法会议论文集，第5770–5793页，2022年。'
- en: '[6] Susan Gruber, Aloka Chakravarty, Susan R Heckbert, Mark Levenson, David
    Martin, Jennifer C Nelson, Bruce M Psaty, Simone Pinheiro, Christian G Reich,
    Sengwee Toh, et al. Design and analysis choices for safety surveillance evaluations
    need to be tuned to the specifics of the hypothesized drug–outcome association.
    Pharmacoepidemiology and drug safety, 25(9):973–981, 2016.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[6] Susan Gruber、Aloka Chakravarty、Susan R Heckbert、Mark Levenson、David Martin、Jennifer
    C Nelson、Bruce M Psaty、Simone Pinheiro、Christian G Reich、Sengwee Toh 等. 安全监测评估的设计和分析选择需要根据假设的药物-结果关联的具体情况进行调整。
    《药物流行病学与药物安全》，25(9)：973–981，2016年。'
- en: '[7] Manfred Hauben, Jeffrey K Aronson, and Robin E Ferner. Evidence of misclassification
    of drug–event associations classified as gold standard ‘negative controls’ by
    the observational medical outcomes partnership (omop). Drug safety, 39:421–432,
    2016.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[7] Manfred Hauben、Jeffrey K Aronson 和 Robin E Ferner. 观察医学结果合作伙伴关系(OMOP)所定义的“负控制”标准中药物-事件关联的错误分类证据。《药物安全》，39：421–432，2016年。'
- en: '[8] Carl Hewitt. Actor model. arXiv:1008.1459 [cs.PL], Aug 2010. arXiv: 1008.1459.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[8] Carl Hewitt. Actor模型。arXiv:1008.1459 [cs.PL]，2010年8月。arXiv: 1008.1459。'
- en: '[9] Sirui Hong, Mingchen Zhuge, Jonathan Chen, Xiawu Zheng, Yuheng Cheng, Jinlin
    Wang, Ceyao Zhang, Zili Wang, Steven Ka Shing Yau, Zijuan Lin, Liyang Zhou, Chenyu
    Ran, Lingfeng Xiao, Chenglin Wu, and Jürgen Schmidhuber. MetaGPT: Meta programming
    for multi-agent collaborative framework. In The Twelfth International Conference
    on Learning Representations, 2024.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[9] 宏思睿、祝名晨、陈Jonathan、郑霞武、程宇恒、王金琳、张策尧、王子力、Steven Ka Shing Yau、林子娟、周立阳、冉晨宇、肖玲峰、吴承琳，Jürgen
    Schmidhuber. MetaGPT：多智能体协作框架的元编程。发表于2024年第十二届学习表征国际会议。'
- en: '[10] Jhih-Yuan Huang, Wei-Po Lee, and King-Der Lee. Predicting adverse drug
    reactions from social media posts: Data balance, feature selection and deep learning.
    Healthcare, 10(4), 2022.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[10] 黄志远、李伟波、李景德. 从社交媒体帖子预测不良药物反应：数据平衡、特征选择和深度学习。《医疗保健》，10(4)，2022年。'
- en: '[11] Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford,
    Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel,
    Guillaume Lample, Lucile Saulnier, et al. Mistral 7B. arXiv preprint arXiv:2310.06825,
    2023.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[11] Albert Q Jiang、Alexandre Sablayrolles、Arthur Mensch、Chris Bamford、Devendra
    Singh Chaplot、Diego de las Casas、Florian Bressand、Gianna Lengyel、Guillaume Lample、Lucile
    Saulnier 等. Mistral 7B. arXiv预印本arXiv:2310.06825，2023年。'
- en: '[12] Qiao Jin, Robert Leaman, and Zhiyong Lu. Retrieve, summarize, and verify:
    how will chatgpt affect information seeking from the medical literature? Journal
    of the American Society of Nephrology, 34(8):1302–1304, 2023.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[12] 金乔、Robert Leaman、陆志勇. 检索、总结与验证：ChatGPT如何影响医学文献中的信息检索？《美国肾脏学会杂志》，34(8)：1302–1304，2023年。'
- en: '[13] Vijay Konda and John Tsitsiklis. Actor-critic algorithms. Advances in
    neural information processing systems, 12, 1999.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[13] Vijay Konda 和 John Tsitsiklis. Actor-critic算法。《神经信息处理系统进展》，12，1999年。'
- en: '[14] Huyen Le, Ru Chen, Stephen Harris, Hong Fang, Beverly Lyn-Cook, Huixiao
    Hong, Weigong Ge, Paul Rogers, Weida Tong, and Wen Zou. Rxnorm for drug name normalization:
    a case study of prescription opioids in the fda adverse events reporting system.
    Frontiers in Bioinformatics, 3, 2024.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[14] Huyen Le, Ru Chen, Stephen Harris, Hong Fang, Beverly Lyn-Cook, Huixiao
    Hong, Weigong Ge, Paul Rogers, Weida Tong, 和 Wen Zou. Rxnorm 用于药品名称标准化：以 FDA 不良事件报告系统中的处方阿片类药物为例.
    《生物信息学前沿》, 3, 2024.'
- en: '[15] Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
    Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel,
    et al. Retrieval-augmented generation for knowledge-intensive nlp tasks. Advances
    in Neural Information Processing Systems, 33:9459–9474, 2020.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[15] Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir
    Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel
    等人. 用于知识密集型 NLP 任务的检索增强生成. 《神经信息处理系统进展》, 33:9459–9474, 2020.'
- en: '[16] Minghao Li, Yingxiu Zhao, Bowen Yu, Feifan Song, Hangyu Li, Haiyang Yu,
    Zhoujun Li, Fei Huang, and Yongbin Li. API-bank: A comprehensive benchmark for
    tool-augmented LLMs. In Houda Bouamor, Juan Pino, and Kalika Bali, editors, Proceedings
    of the 2023 Conference on Empirical Methods in Natural Language Processing, pages
    3102–3116, Singapore, December 2023\. Association for Computational Linguistics.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[16] Minghao Li, Yingxiu Zhao, Bowen Yu, Feifan Song, Hangyu Li, Haiyang Yu,
    Zhoujun Li, Fei Huang, 和 Yongbin Li. API-bank：一个全面的工具增强型 LLM 基准. 在 Houda Bouamor,
    Juan Pino 和 Kalika Bali 编辑的《2023年自然语言处理经验方法会议论文集》, 第3102–3116页, 新加坡, 2023年12月.
    计算语言学会.'
- en: '[17] Percy Liang, Rishi Bommasani, Tony Lee, Dimitris Tsipras, Dilara Soylu,
    Michihiro Yasunaga, Yian Zhang, Deepak Narayanan, Yuhuai Wu, Ananya Kumar, et al.
    Holistic evaluation of language models. Transactions on Machine Learning Research,
    2023. Featured Certification, Expert Certification.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[17] Percy Liang, Rishi Bommasani, Tony Lee, Dimitris Tsipras, Dilara Soylu,
    Michihiro Yasunaga, Yian Zhang, Deepak Narayanan, Yuhuai Wu, Ananya Kumar 等人.
    语言模型的全面评估. 《机器学习研究杂志》, 2023. 特色认证，专家认证。'
- en: '[18] Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah
    Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, Shashank Gupta,
    Bodhisattwa Prasad Majumder, Katherine Hermann, Sean Welleck, Amir Yazdanbakhsh,
    and Peter Clark. Self-refine: Iterative refinement with self-feedback. In A. Oh,
    T. Naumann, A. Globerson, K. Saenko, M. Hardt, and S. Levine, editors, Advances
    in Neural Information Processing Systems, volume 36, pages 46534–46594\. Curran
    Associates, Inc., 2023.'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[18] Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah
    Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, Shashank Gupta,
    Bodhisattwa Prasad Majumder, Katherine Hermann, Sean Welleck, Amir Yazdanbakhsh,
    和 Peter Clark. 自我精炼：带有自我反馈的迭代精炼. 在 A. Oh, T. Naumann, A. Globerson, K. Saenko,
    M. Hardt 和 S. Levine 编辑的《神经信息处理系统进展》, 第36卷, 第46534–46594页. Curran Associates,
    Inc., 2023.'
- en: '[19] David Madigan and Patrick Ryan. Learning from observational databases:
    Lessons from omop and ohdsi. 2015.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[19] David Madigan 和 Patrick Ryan. 从观察数据库中学习：OMOP 和 OHDSI 的经验教训. 2015.'
- en: '[20] Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg S Corrado, and Jeff Dean.
    Distributed representations of words and phrases and their compositionality. Advances
    in neural information processing systems, 26, 2013.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[20] Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg S Corrado, 和 Jeff Dean.
    单词和短语的分布式表示及其组合性. 《神经信息处理系统进展》, 26, 2013.'
- en: '[21] Justin Mower, Devika Subramanian, and Trevor Cohen. Learning predictive
    models of drug side-effect relationships from distributed representations of literature-derived
    semantic predications. Journal of the American Medical Informatics Association,
    25(10):1339–1350, 2018.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[21] Justin Mower, Devika Subramanian, 和 Trevor Cohen. 从文献派生的语义预测的分布式表示中学习药物副作用关系的预测模型.
    《美国医学信息学协会杂志》, 25(10):1339–1350, 2018.'
- en: '[22] Sriraam Natarajan, Vishal Bangera, Tushar Khot, Jose Picado, Anurag Wazalwar,
    Vitor Santos Costa, David Page, and Michael Caldwell. Markov logic networks for
    adverse drug event extraction from text. Knowledge and information systems, 51:435–457,
    2017.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[22] Sriraam Natarajan, Vishal Bangera, Tushar Khot, Jose Picado, Anurag Wazalwar,
    Vitor Santos Costa, David Page, 和 Michael Caldwell. 马尔可夫逻辑网络在文本中提取不良药物事件的应用. 《知识与信息系统》,
    51:435–457, 2017.'
- en: '[23] Harsha Nori, Nicholas King, Scott Mayer McKinney, Dean Carignan, and Eric
    Horvitz. Capabilities of gpt-4 on medical challenge problems. arXiv preprint arXiv:2303.13375,
    2023.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[23] Harsha Nori, Nicholas King, Scott Mayer McKinney, Dean Carignan, 和 Eric
    Horvitz. GPT-4 在医学挑战问题上的能力. arXiv 预印本 arXiv:2303.13375, 2023.'
- en: '[24] Jeffrey Pennington, Richard Socher, and Christopher Manning. Glove: Global
    vectors for word representation. In Proceedings of the 2014 conference on empirical
    methods in natural language processing (EMNLP), pages 1532–1543, 2014.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[24] Jeffrey Pennington, Richard Socher 和 Christopher Manning。Glove：全球词向量表示。2014年自然语言处理经验方法会议（EMNLP）论文集，页面1532–1543，2014年。'
- en: '[25] Richard Platt, Marcus Wilson, K Arnold Chan, Joshua S Benner, Janet Marchibroda,
    and Mark McClellan. The new sentinel network—improving the evidence of medical-product
    safety. New England Journal of Medicine, 361(7):645–647, 2009.'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[25] Richard Platt, Marcus Wilson, K Arnold Chan, Joshua S Benner, Janet Marchibroda
    和 Mark McClellan。新的哨兵网络——改善医学产品安全性的证据。新英格兰医学杂志，361(7):645–647，2009年。'
- en: '[26] Jingqing Ruan, YiHong Chen, Bin Zhang, Zhiwei Xu, Tianpeng Bao, Hangyu
    Mao, Ziyue Li, Xingyu Zeng, Rui Zhao, et al. Tptu: Task planning and tool usage
    of large language model-based ai agents. In NeurIPS 2023 Foundation Models for
    Decision Making Workshop, 2023.'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[26] Jingqing Ruan, YiHong Chen, Bin Zhang, Zhiwei Xu, Tianpeng Bao, Hangyu
    Mao, Ziyue Li, Xingyu Zeng, Rui Zhao 等。Tptu：基于大语言模型的AI代理的任务规划与工具使用。2023年NeurIPS决策制定基础模型研讨会，2023年。'
- en: '[27] Patrick B Ryan, Martijn J Schuemie, Emily Welebob, Jon Duke, Sarah Valentine,
    and Abraham G Hartzema. Defining a reference set to support methodological research
    in drug safety. Drug safety, 36:33–47, 2013.'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[27] Patrick B Ryan, Martijn J Schuemie, Emily Welebob, Jon Duke, Sarah Valentine
    和 Abraham G Hartzema。定义支持药物安全性方法学研究的参考集。药物安全性，36:33–47，2013年。'
- en: '[28] Karan Singhal, Shekoofeh Azizi, Tao Tu, S Sara Mahdavi, Jason Wei, Hyung Won
    Chung, Nathan Scales, Ajay Tanwani, Heather Cole-Lewis, Stephen Pfohl, et al.
    Large language models encode clinical knowledge. Nature, 620(7972):172–180, 2023.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[28] Karan Singhal, Shekoofeh Azizi, Tao Tu, S Sara Mahdavi, Jason Wei, Hyung
    Won Chung, Nathan Scales, Ajay Tanwani, Heather Cole-Lewis, Stephen Pfohl 等。大语言模型编码临床知识。自然，620(7972):172–180，2023年。'
- en: '[29] Karan Singhal, Tao Tu, Juraj Gottweis, Rory Sayres, Ellery Wulczyn, Le Hou,
    Kevin Clark, Stephen Pfohl, Heather Cole-Lewis, Darlene Neal, et al. Towards expert-level
    medical question answering with large language models. arXiv preprint arXiv:2305.09617,
    2023.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[29] Karan Singhal, Tao Tu, Juraj Gottweis, Rory Sayres, Ellery Wulczyn, Le
    Hou, Kevin Clark, Stephen Pfohl, Heather Cole-Lewis, Darlene Neal 等。利用大语言模型实现专家级医学问答。arXiv预印本arXiv:2305.09617，2023年。'
- en: '[30] Alfred Sorbello, Syed Arefinul Haque, Rashedul Hasan, Richard Jermyn,
    Ahmad Hussein, Alex Vega, Krzysztof Zembrzuski, Anna Ripple, and Mitra Ahadpour.
    Artificial intelligence–enabled software prototype to inform opioid pharmacovigilance
    from electronic health records: Development and usability study. JMIR AI, 2:e45000,
    Jul 2023.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[30] Alfred Sorbello, Syed Arefinul Haque, Rashedul Hasan, Richard Jermyn,
    Ahmad Hussein, Alex Vega, Krzysztof Zembrzuski, Anna Ripple 和 Mitra Ahadpour。人工智能启用的软件原型，用于通过电子健康记录支持阿片类药物药物警戒：开发与可用性研究。JMIR
    AI，2:e45000，2023年7月。'
- en: '[31] Paul E Stang, Patrick B Ryan, Judith A Racoosin, J Marc Overhage, Abraham G
    Hartzema, Christian Reich, Emily Welebob, Thomas Scarnecchia, and Janet Woodcock.
    Advancing the science for active surveillance: rationale and design for the observational
    medical outcomes partnership. Annals of internal medicine, 153(9):600–606, 2010.'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[31] Paul E Stang, Patrick B Ryan, Judith A Racoosin, J Marc Overhage, Abraham
    G Hartzema, Christian Reich, Emily Welebob, Thomas Scarnecchia 和 Janet Woodcock。推进主动监测科学：观察性医学结果伙伴关系的基本原理和设计。内科学年鉴，153(9):600–606，2010年。'
- en: '[32] Zhaoyue Sun, Gabriele Pergola, Byron Wallace, and Yulan He. Leveraging
    ChatGPT in pharmacovigilance event extraction: An empirical study. In Yvette Graham
    and Matthew Purver, editors, Proceedings of the 18th Conference of the European
    Chapter of the Association for Computational Linguistics (Volume 2: Short Papers),
    pages 344–357, St. Julian’s, Malta, March 2024\. Association for Computational
    Linguistics.'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[32] Zhaoyue Sun, Gabriele Pergola, Byron Wallace 和 Yulan He。在药物警戒事件提取中利用ChatGPT：一项实证研究。在Yvette
    Graham 和 Matthew Purver编辑的《欧洲计算语言学协会第18届会议论文集（第2卷：短篇论文）》中，页面344–357，马耳他圣朱利安，2024年3月。计算语言学协会。'
- en: '[33] Liyan Tang, Zhaoyi Sun, Betina Idnay, Jordan G Nestor, Ali Soroush, Pierre A
    Elias, Ziyang Xu, Ying Ding, Greg Durrett, Justin F Rousseau, et al. Evaluating
    large language models on medical evidence summarization. npj Digital Medicine,
    6(1):158, 2023.'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[33] Liyan Tang, Zhaoyi Sun, Betina Idnay, Jordan G Nestor, Ali Soroush, Pierre
    A Elias, Ziyang Xu, Ying Ding, Greg Durrett, Justin F Rousseau 等。评估大语言模型在医学证据总结中的表现。npj数字医学，6(1):158，2023年。'
- en: '[34] Xiangru Tang, Anni Zou, Zhuosheng Zhang, Yilun Zhao, Xingyao Zhang, Arman
    Cohan, and Mark Gerstein. Medagents: Large language models as collaborators for
    zero-shot medical reasoning. arXiv preprint arXiv:2311.10537, 2023.'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[34] Xiangru Tang, Anni Zou, Zhuosheng Zhang, Yilun Zhao, Xingyao Zhang, Arman
    Cohan, 和 Mark Gerstein. Medagents：大型语言模型作为零-shot医学推理的协作伙伴。arXiv 预印本 arXiv:2311.10537,
    2023。'
- en: '[35] Mert Tiftikci, Arzucan Özgür, Yongqun He, and Junguk Hur. Machine learning-based
    identification and rule-based normalization of adverse drug reactions in drug
    labels. BMC bioinformatics, 20:1–9, 2019.'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[35] Mert Tiftikci, Arzucan Özgür, Yongqun He, 和 Junguk Hur. 基于机器学习的药品标签不良反应的识别与基于规则的标准化。BMC
    生物信息学, 20:1–9, 2019。'
- en: '[36] Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne
    Lachaux, Timothée Lacroix, Baptiste Rozière, Naman Goyal, Eric Hambro, Faisal
    Azhar, et al. Llama: Open and efficient foundation language models. arXiv preprint
    arXiv:2302.13971, 2023.'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[36] Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne
    Lachaux, Timothée Lacroix, Baptiste Rozière, Naman Goyal, Eric Hambro, Faisal
    Azhar, 等. Llama：开放且高效的基础语言模型。arXiv 预印本 arXiv:2302.13971, 2023。'
- en: '[37] Chris von Csefalvay. Daedra: A language model for predicting outcomes
    in passive pharmacovigilance reporting. arXiv preprint arXiv:2402.10951, 2024.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[37] Chris von Csefalvay. Daedra：一种用于预测被动药物监测报告结果的语言模型。arXiv 预印本 arXiv:2402.10951,
    2024。'
- en: '[38] H. Wang, Y.J. Ding, and Y. Luo. Future of chatgpt in pharmacovigilance.
    Drug Safety, 46:711–713, 2023.'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[38] H. Wang, Y.J. Ding, 和 Y. Luo. ChatGPT 在药物安全监测中的未来。药物安全, 46:711–713, 2023。'
- en: '[39] Yubo Wang, Xueguang Ma, and Wenhu Chen. Augmenting black-box llms with
    medical textbooks for clinical question answering. arXiv preprint arXiv:2309.02233,
    2023.'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[39] Yubo Wang, Xueguang Ma, 和 Wenhu Chen. 通过医学教科书增强黑箱型大型语言模型的临床问答能力。arXiv
    预印本 arXiv:2309.02233, 2023。'
- en: '[40] Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed Chi,
    Quoc V Le, Denny Zhou, et al. Chain-of-thought prompting elicits reasoning in
    large language models. Advances in neural information processing systems, 35:24824–24837,
    2022.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[40] Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed Chi,
    Quoc V Le, Denny Zhou, 等. 连锁思维提示促进大型语言模型推理。神经信息处理系统进展, 35:24824–24837, 2022。'
- en: '[41] Qingyun Wu, Gagan Bansal, Jieyu Zhang, Yiran Wu, Shaokun Zhang, Erkang
    Zhu, Beibin Li, Li Jiang, Xiaoyun Zhang, and Chi Wang. Autogen: Enabling next-gen
    llm applications via multi-agent conversation framework. arXiv preprint arXiv:2308.08155,
    2023.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[41] Qingyun Wu, Gagan Bansal, Jieyu Zhang, Yiran Wu, Shaokun Zhang, Erkang
    Zhu, Beibin Li, Li Jiang, Xiaoyun Zhang, 和 Chi Wang. Autogen：通过多智能体对话框架使下一代大型语言模型应用成为可能。arXiv
    预印本 arXiv:2308.08155, 2023。'
- en: '[42] xAI. grok-1.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[42] xAI. grok-1。'
- en: '[43] Zhiheng Xi, Wenxiang Chen, Xin Guo, Wei He, Yiwen Ding, Boyang Hong, Ming
    Zhang, Junzhe Wang, Senjie Jin, Enyu Zhou, et al. The rise and potential of large
    language model based agents: A survey. arXiv preprint arXiv:2309.07864, 2023.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[43] Zhiheng Xi, Wenxiang Chen, Xin Guo, Wei He, Yiwen Ding, Boyang Hong, Ming
    Zhang, Junzhe Wang, Senjie Jin, Enyu Zhou, 等. 基于大型语言模型的智能体的崛起与潜力：一项调查。arXiv 预印本
    arXiv:2309.07864, 2023。'
- en: '[44] Miao Xiong, Zhiyuan Hu, Xinyang Lu, YIFEI LI, Jie Fu, Junxian He, and
    Bryan Hooi. Can LLMs express their uncertainty? an empirical evaluation of confidence
    elicitation in LLMs. In The Twelfth International Conference on Learning Representations,
    2024.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[44] Miao Xiong, Zhiyuan Hu, Xinyang Lu, YIFEI LI, Jie Fu, Junxian He, 和 Bryan
    Hooi. 大型语言模型能否表达其不确定性？对大型语言模型中信心引发的经验评估。第十二届国际学习表征会议, 2024。'
- en: '[45] Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Tom Griffiths, Yuan
    Cao, and Karthik Narasimhan. Tree of thoughts: Deliberate problem solving with
    large language models. Advances in Neural Information Processing Systems, 36,
    2024.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[45] Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Tom Griffiths, Yuan
    Cao, 和 Karthik Narasimhan. 思维树：利用大型语言模型进行深思熟虑的解决问题。神经信息处理系统进展, 36, 2024。'
- en: '[46] Cyril Zakka, Rohan Shad, Akash Chaurasia, Alex R. Dalal, Jennifer L. Kim,
    Michael Moor, Robyn Fong, Curran Phillips, Kevin Alexander, Euan Ashley, Jack
    Boyd, Kathleen Boyd, Karen Hirsch, Curt Langlotz, Rita Lee, Joanna Melia, Joanna
    Nelson, Karim Sallam, Stacey Tullis, Melissa Ann Vogelsong, John Patrick Cunningham,
    and William Hiesinger. Almanac — retrieval-augmented language models for clinical
    medicine. NEJM AI, 1(2):AIoa2300068, 2024.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[46] Cyril Zakka, Rohan Shad, Akash Chaurasia, Alex R. Dalal, Jennifer L. Kim,
    Michael Moor, Robyn Fong, Curran Phillips, Kevin Alexander, Euan Ashley, Jack
    Boyd, Kathleen Boyd, Karen Hirsch, Curt Langlotz, Rita Lee, Joanna Melia, Joanna
    Nelson, Karim Sallam, Stacey Tullis, Melissa Ann Vogelsong, John Patrick Cunningham,
    和 William Hiesinger. Almanac — 用于临床医学的检索增强语言模型。NEJM AI, 1(2):AIoa2300068, 2024。'
- en: Supplementary Material
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附加材料
- en: 'Section [A](https://arxiv.org/html/2408.01869v1#A1 "Appendix A Agent-Oriented
    Programming ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance") includes an in-depth description of the core
    primitives of our multi-agent framework. Section [B](https://arxiv.org/html/2408.01869v1#A2
    "Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    offers the experimental details, including the system prompts for each agent,
    the details on our OMOP evaluation, and discussions of the postprocessing of the
    generated scores and justifications. In Section [C](https://arxiv.org/html/2408.01869v1#A3
    "Appendix C Detailed behavior of MALADE: Successful and Failed Behavior ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we analyze both successful and unsuccessful instances of MALADE, presenting comprehensive
    logs for selected examples. Section [D](https://arxiv.org/html/2408.01869v1#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") presents an ablation study that evaluates
    the individual contributions of key components to the overall system efficacy;
    namely, the iterative refinement facilitated by Agent-Critic interactions, and
    the integration of external knowledge through RAG. Finally, in Section [E](https://arxiv.org/html/2408.01869v1#A5
    "Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"), we assess
    how much the variance of numerical outputs by the random sampling of LLMs affects
    the variance of scores output by the entire MALADE system.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '[A](https://arxiv.org/html/2408.01869v1#A1 "附录 A 面向代理的编程 ‣ MALADE: 利用增强生成的检索技术协调基于
    LLM 的代理进行药物警戒") 部分深入描述了我们多代理框架的核心原语。 [B](https://arxiv.org/html/2408.01869v1#A2
    "附录 B MALADE 实现的详细描述 ‣ MALADE: 利用增强生成的检索技术协调基于 LLM 的代理进行药物警戒") 部分提供了实验细节，包括每个代理的系统提示、我们的
    OMOP 评估的详细信息，以及对生成的分数和说明的后处理讨论。在 [C](https://arxiv.org/html/2408.01869v1#A3 "附录
    C MALADE 的详细行为：成功和失败的行为 ‣ MALADE: 利用增强生成的检索技术协调基于 LLM 的代理进行药物警戒") 部分，我们分析了 MALADE
    的成功和失败实例，展示了选定示例的全面日志。 [D](https://arxiv.org/html/2408.01869v1#A4 "附录 D 消融实验 ‣
    MALADE: 利用增强生成的检索技术协调基于 LLM 的代理进行药物警戒") 部分展示了一个消融研究，评估了关键组件对整体系统效果的单独贡献；即，代理-评论者交互所促进的迭代优化，以及通过
    RAG 集成外部知识。最后，在 [E](https://arxiv.org/html/2408.01869v1#A5 "附录 E MALADE 输出的方差
    ‣ MALADE: 利用增强生成的检索技术协调基于 LLM 的代理进行药物警戒") 部分，我们评估了通过随机采样的 LLM 输出的数值方差对整个 MALADE
    系统输出的分数方差的影响。'
- en: Appendix A Agent-Oriented Programming
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 A 面向代理的编程
- en: This section describes the core abstractions needed to implement a complex LLM-based
    application such as MALADE. The open-source multi-agent LLM framework [langroid](https://github.com/langroid/langroid) [[3](https://arxiv.org/html/2408.01869v1#bib.bib3)]
    has an elegant, intuitive and flexible implementation of these abstractions, and
    MALADE is built on top of this library.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了实现像 MALADE 这样的复杂基于 LLM 的应用程序所需的核心抽象。开源的多代理 LLM 框架 [langroid](https://github.com/langroid/langroid)
    [[3](https://arxiv.org/html/2408.01869v1#bib.bib3)] 优雅、直观且灵活地实现了这些抽象，而 MALADE
    就是基于这个库构建的。
- en: 'A.1 Tool Use: Example'
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.1 工具使用：示例
- en: 'As a simple example, a SQL query tool can be specified as a JSON structure
    with a sql field (containing the SQL query) and a db field (containing the name
    of the database). The LLM may be instructed with a system prompt of the form:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个简单的例子，一个 SQL 查询工具可以通过一个 JSON 结构来指定，包含一个 sql 字段（包含 SQL 查询）和一个 db 字段（包含数据库名称）。LLM
    可以通过以下形式的系统提示进行指示：
- en: When the user asks a question about employees,use the SQLTool described in the below schema,and the results of this tool will be sent back to you, and you can use theseto respond to the user’s question, or correct your SQL queryif there is a syntax error.The
    tool handler would detect this specific tool in the LLM’s response, parse this
    JSON structure, extract the sql and db fields, run the query on the specified
    database, and return the result if the query ran successfully, otherwise return
    an error message. Depending on how the multi-agent system is organized, the query
    result or error message may be handled by the same agent (i.e., its LLM), which
    may either summarize the results in narrative form, or revise the query if the
    error message indicates a syntax error.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户提出有关员工的问题时，请使用下方架构中描述的SQLTool，该工具的结果将返回给你，你可以利用这些结果来回答用户的问题，或者如果有语法错误，可以修正你的SQL查询。工具处理器将检测LLM响应中的这个特定工具，解析该JSON结构，提取sql和db字段，在指定的数据库上运行查询，并在查询成功执行时返回结果，否则返回错误信息。根据多代理系统的组织方式，查询结果或错误信息可能由同一个代理（即其LLM）处理，代理可能以叙述形式总结结果，或者如果错误信息指示语法错误，则修正查询。
- en: A.2 Retrieval Augmented Generation
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.2 检索增强生成
- en: 'RAG involves two phases: (a) a ingestion phase, where documents are sharded
    into reasonable-size chunks and ingested into a suitable type of document-store,
    and (b) a query phase, where top-$k$ document-chunks most relevant to the query
    are retrieved from the document-store, and the LLM is prompted to answer the query
    given these chunks (see Figure [6](https://arxiv.org/html/2408.01869v1#A1.F6 "Figure
    6 ‣ A.2 Retrieval Augmented Generation ‣ Appendix A Agent-Oriented Programming
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") for illustrative description). Not surprisingly, the performance
    (i.e., precision and recall of answers) of a RAG system depends critically on
    how we define the relevance of document chunks to the query so that they will
    contain sufficient information for the LLM to compose a reasonable answer. In
    this work, we use a combination of two standard notions of relevance: (a) lexical
    relevance, which is based on word overlap between the query and the document-chunk
    (i.e., keyword search), while (b) semantic relevance focuses on the similarity
    of “meaning”. The latter is based on the intuition that specially-trained embedding
    models can encode text as fixed-length embedding vectors that roughly capture
    the “meaning” of the text, and thus two texts are considered semantically similar
    if their embedding vectors are “close” as measured by a metric such as cosine
    similarity [[20](https://arxiv.org/html/2408.01869v1#bib.bib20), [24](https://arxiv.org/html/2408.01869v1#bib.bib24),
    [4](https://arxiv.org/html/2408.01869v1#bib.bib4)]. During the ingestion phase,
    each document chunk is mapped to an embedding vector using an embedding model
    and this vector is indexed into a vector database, along with a pointer to the
    chunk contents as metadata. During the query phase, the same embedding model is
    used to map the query into a vector, and then the top-$k$ nearest-neighbors of
    this vector (based on cosine similarity) are found from the vector database, and
    their corresponding document chunks are retrieved.'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: RAG包含两个阶段：（a）摄取阶段，将文档分割成适当大小的块，并将其摄取到适当类型的文档存储中；（b）查询阶段，从文档存储中检索与查询最相关的前$k$个文档块，并提示LLM根据这些块来回答查询（请参见图[6](https://arxiv.org/html/2408.01869v1#A1.F6
    "图6 ‣ A.2 检索增强生成 ‣ 附录A 代理导向编程 ‣ MALADE：利用检索增强生成进行药物警戒的LLM驱动代理协调")中的示意描述）。毫不奇怪，RAG系统的性能（即答案的精确度和召回率）在很大程度上依赖于我们如何定义文档块与查询的相关性，以便它们包含足够的信息，使LLM能够生成合理的答案。在本研究中，我们结合了两种标准的相关性概念：（a）词汇相关性，基于查询和文档块之间的词汇重叠（即关键词搜索）；（b）语义相关性，侧重于“意义”的相似性。后者基于这样的直觉：专门训练的嵌入模型可以将文本编码为固定长度的嵌入向量，大致捕捉文本的“意义”，因此，如果两个文本的嵌入向量在由余弦相似度等度量衡量时“接近”，则这两个文本被认为在语义上相似[[20](https://arxiv.org/html/2408.01869v1#bib.bib20),
    [24](https://arxiv.org/html/2408.01869v1#bib.bib24), [4](https://arxiv.org/html/2408.01869v1#bib.bib4)]。在摄取阶段，每个文档块使用嵌入模型映射到一个嵌入向量，并将该向量与指向块内容的指针作为元数据一起索引到向量数据库中。在查询阶段，使用相同的嵌入模型将查询映射到一个向量，然后从向量数据库中找到该向量的前$k$个最近邻（基于余弦相似度），并检索它们对应的文档块。
- en: '![Refer to caption](img/65e8f2d0dcdb3c44fbbc0de06e2244a5.png)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/65e8f2d0dcdb3c44fbbc0de06e2244a5.png)'
- en: 'Figure 6: A simple agent with RAG. During the ingestion phase, documents are
    sharded into document chunks. At the query phase, top-$k$ chunks most relevant
    to the original query are retrieved, based on lexical relevance and semantic relevance.
    Now we prompt the LLM with the augmented query to ground its response to the documents.'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 图6：一个简单的带有RAG的代理。在摄取阶段，文档被拆分成文档块。在查询阶段，基于词汇相关性和语义相关性，检索与原始查询最相关的top-$k$文档块。现在我们使用增强后的查询来提示LLM，以使其响应与文档相关联。
- en: A.3 From LLM to Agent-Oriented Programming
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.3 从LLM到面向代理的编程
- en: 'If we view an LLM as a function with signature string $\rightarrow$ string,
    it is possible to express the concept of an agent, tool, and other constructs
    in terms of derived function signatures, as shown in Table [4](https://arxiv.org/html/2408.01869v1#A1.T4
    "Table 4 ‣ A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented
    Programming ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance").'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '如果我们将LLM视为一个签名为string $\rightarrow$ string的函数，那么就可以通过派生函数签名来表达代理、工具以及其他构造的概念，如表[4](https://arxiv.org/html/2408.01869v1#A1.T4
    "Table 4 ‣ A.3 From LLM to Agent-Oriented Programming ‣ Appendix A Agent-Oriented
    Programming ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")所示。'
- en: '| Function Description | Function Signature |'
  id: totrans-200
  prefs: []
  type: TYPE_TB
  zh: '| 功能描述 | 功能签名 |'
- en: '| --- | --- |'
  id: totrans-201
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| LLM | string  $\rightarrow$ string    string for the original query. |'
  id: totrans-202
  prefs: []
  type: TYPE_TB
  zh: '| LLM | string  $\rightarrow$ string    string 用于原始查询。 |'
- en: '| Chat interface | [string]  $\times$  string  $\rightarrow$ string    [string]
    is for previous messages⁵⁵5Note that in reality, separator tokens are added to
    distinguish messages, and the messages are tagged with metadata indicating the
    sender, among other things.. |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '| 聊天界面 | [string]  $\times$  string  $\rightarrow$ string    [string] 用于前置消息⁵⁵5请注意，实际上添加了分隔符令牌来区分消息，且消息被标记了元数据，指示发送者等信息..
    |'
- en: '| Agent | string  $\times$  [string]  $\times$  string  $\rightarrow$ string
       string is for system prompt. |'
  id: totrans-204
  prefs: []
  type: TYPE_TB
  zh: '| 代理 | string  $\times$  [string]  $\times$  string  $\rightarrow$ string   
    string 用于系统提示。 |'
- en: '| Agent with tool | string  $\times$ (string $\rightarrow$ T) $\times$ (T $\rightarrow$ string) $\times$ 
    [string]  $\times$  string  $\rightarrow$ string |'
  id: totrans-205
  prefs: []
  type: TYPE_TB
  zh: '| 带工具的代理 | string  $\times$ (string $\rightarrow$ T) $\times$ (T $\rightarrow$ string) $\times$ 
    [string]  $\times$  string  $\rightarrow$ string |'
- en: '| Parser with type T | string $\rightarrow$ T |'
  id: totrans-206
  prefs: []
  type: TYPE_TB
  zh: '| 类型 T 的解析器 | string $\rightarrow$ T |'
- en: '| Callback with type T | T $\rightarrow$ string |'
  id: totrans-207
  prefs: []
  type: TYPE_TB
  zh: '| 回调类型 T | T $\rightarrow$ string |'
- en: '| General Agent with state type S | S $\times$  string  $\times$ (string $\rightarrow$ T) $\times$ (S $\times$ T $\rightarrow$ S $\times$ string) $\times$ 
    [string]  $\times$  string  $\rightarrow$ S $\times$ string |'
  id: totrans-208
  prefs: []
  type: TYPE_TB
  zh: '| 带状态类型 S 的通用代理 | S $\times$  string  $\times$ (string $\rightarrow$ T) $\times$ (S $\times$ T $\rightarrow$ S $\times$ string) $\times$ 
    [string]  $\times$  string  $\rightarrow$ S $\times$ string |'
- en: 'Table 4: From LLM to agent-oriented programming. An LLM is essentially a message
    transformer. Adding “tool” (or function calling) capability to LLM requires a
    parser and a callback that performs arbitrary computation and returns a string.
    The serialized instances of T correspond to a language $L$; as, by assumption,
    the LLM is capable of producing outputs in $L$, this allows the LLM to express
    the intention to execute Callback with arbitrary instances of T. Finally, we incorporate
    state by making Agent and Callback transducers, and have the general form in the
    last row.'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 表4：从LLM到面向代理的编程。LLM本质上是一个消息转换器。将“工具”（或函数调用）功能添加到LLM需要一个解析器和一个执行任意计算并返回字符串的回调。T的序列化实例对应于语言$L$；因为假设LLM能够生成$L$中的输出，这使得LLM能够表达执行回调的意图，并且回调的实例是任意的。最后，我们通过使代理和回调成为变换器来合并状态，并在最后一行中得出一般形式。
- en: A.4 Detailed Description of Multi-Agent Orchestration
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: A.4 多代理协调的详细描述
- en: 'When building an LLM-based multi-agent system, an orchestration mechanism is
    critical to manage the flow of messages between agents, to ensure task progress,
    and handle deviations from instructions. In this work, we leverage [Langroid](https://github.com/langroid/langroid)’s
    simple yet versatile orchestration mechanism that seamlessly handles:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建基于LLM的多代理系统时，协调机制对于管理代理之间的消息流至关重要，能够确保任务进展，并处理指令偏差。在这项工作中，我们利用了[Langroid](https://github.com/langroid/langroid)的简单而多功能的协调机制，该机制无缝地处理：
- en: •
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: user interaction
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 用户交互
- en: •
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: tool handling
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 工具处理
- en: •
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: sub-task delegation
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 子任务委派
- en: 'Recall that we view an agent as a message transformer; it may transform an
    incoming message using one of its three “native” responder methods, all of which
    have the same function signature: string $\rightarrow$ string:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，我们将代理视为一个消息转换器；它可以使用三个“本地”响应者方法之一来转换传入的消息，这些方法的功能签名都是：string $\rightarrow$
    string：
- en: •
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: llm_response returns the LLM’s response to the input message. Whenever this
    method is invoked, the agent updates its dialog history (typically consisting
    of alternating user and LLM messages).
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: llm_response返回LLM对输入消息的响应。每当调用该方法时，代理会更新其对话历史（通常由交替出现的用户和LLM消息组成）。
- en: •
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: user_response prompts the user for input and returns their response.
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: user_response提示用户输入并返回其回应。
- en: •
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: •
- en: agent_response by default only handles a “tool message,” i.e., one that contains
    an llm-generated structured response, performs any requested actions, and returns
    the result as a string. An agent_response method can have other uses besides handling
    tool messages, such as handling scenarios where an LLM “forgot” to use a tool,
    or used a tool incorrectly, and so on.
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下，agent_response仅处理“工具消息”，即包含LLM生成的结构化响应的消息，执行任何请求的操作，并将结果作为字符串返回。agent_response方法除了处理工具消息之外，还可以用于其他用途，例如处理LLM“忘记”使用工具或错误使用工具的情况等等。
- en: To see why it is useful to have these responder methods, consider first a simple
    example of creating a basic chat loop with the user. It is trivial to create such
    a loop by alternating between user_response and llm_response . Now suppose we
    instruct the agent to either directly answer the user’s question or perform a
    web-search. Then it is possible that sometimes the llm_response will produce a
    ”tool message”, say WebSearchTool, which we would handle with the agent_response method.
    This requires a slightly different, and more involved, way of iterating among
    the agent’s responder methods. From a coding perspective, it is useful to hide
    the actual iteration logic by wrapping an Agent class in a separate class, which
    we call a Task, which encapsulates all of the orchestration logic. Users of the
    Task class can then define the agent, tools, and any sub-tasks, wrap the agent
    in a task object of class Task, and simply call task.run(), letting the Task class
    deal with the details of orchestrating the agent’s responder methods, determining
    task completion, and invoking sub-tasks.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解这些响应者方法为何有用，首先考虑一个简单的示例：创建一个与用户的基本聊天循环。通过在user_response和llm_response之间交替使用，可以轻松创建这样的循环。现在假设我们指示代理要么直接回答用户的问题，要么执行网页搜索。此时，llm_response可能会产生一个“工具消息”，例如WebSearchTool，这时我们会通过agent_response方法来处理。这样就需要以稍微不同且更复杂的方式在代理的响应者方法之间进行迭代。从编程的角度来看，将代理类包装到一个独立的类中会更有用，这个类我们称之为Task，它封装了所有的调度逻辑。Task类的使用者可以定义代理、工具以及任何子任务，将代理包装在Task类的任务对象中，然后简单地调用task.run()，让Task类负责调度代理的响应者方法、确定任务完成情况并调用子任务的细节。
- en: 'The orchestration mechanism of a Task  object works as follows. When a task
    object is created from an agent, a sequence of eligible responders is created,
    which includes the agent’s three “native” responder agents in the sequence: agent_response ,
    llm_response , user_response . The type signature of the run is string $\rightarrow$
    string, just like the Agent’s native responder methods, and this is the key to
    seamless delegation of tasks to sub-tasks. A list of subtasks can be added to
    a task  object via task.add_sub_tasks([t1, t2, ... ]), where t1, t2, ... are other
    Task objects. The result of this is that the run method of each sub-task is appended
    to the sequence of eligible responders in the parent task object.'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: Task对象的调度机制如下工作。当从一个代理创建一个任务对象时，会创建一个符合条件的响应者序列，其中包括代理的三个“本地”响应者代理，顺序为：agent_response、llm_response、user_response。该方法的类型签名为string
    $\rightarrow$ string，就像代理的本地响应者方法一样，这是将任务无缝委派给子任务的关键。可以通过task.add_sub_tasks([t1,
    t2, ... ])向任务对象添加子任务，其中t1、t2、...是其他Task对象。这样做的结果是，每个子任务的run方法会被追加到父任务对象的合格响应者序列中。
- en: A task always maintains a current pending message (CPM), which is the latest
    message ”awaiting” a valid response from a responder. At a high level the run
    method of a task attempts to repeatedly find a valid response to the CPM, until
    the task is done. This is achieved by repeatedly invoking the step method, which
    represents a ”turn” in the conversation. The step method sequentially tries the
    eligible responders from the beginning of the eligible-responders list, until
    it finds a valid response, defined as a non-null or terminating message (i.e.
    one that signals that the task is done). In particular, this step() algorithm
    implies that a Task delegates to a sub-task only if the task’s native responders
    have no valid response.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 一个任务始终保持一个当前待处理消息（CPM），这是最新的“等待”有效响应的消息。在高级层面，任务的run方法尝试反复寻找CPM的有效响应，直到任务完成。这是通过反复调用step方法来实现的，step方法代表了对话中的一个“回合”。step方法按顺序从符合条件的响应者列表开始逐个尝试，直到找到有效响应，定义为非空或终止消息（即表示任务完成的消息）。特别地，step()算法意味着只有当任务的原生响应者没有有效响应时，任务才会委派给子任务。
- en: 'There are a few simple rules that govern how step works: (a) a responder entity
    (either a native entity or a sub-task) cannot respond if it just responded in
    the previous step (this prevents a responder from ”talking to itself”, (b) when
    a response contains ”DONE” the task is ready to exit and return the CPM as the
    result of the task, (c) when an entity ”in charge” of the task has a null response,
    the task is considered finished and ready to exit, (d) if the response of an entity
    or subtask is a structured message containing a recipient field, then the specified
    recipient task or entity will be the only one eligible to respond at the next
    step.'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些简单的规则控制每一步的执行： (a) 一个响应者实体（可以是原生实体或子任务）如果在上一环节中已作出响应，则不能再响应（这防止了响应者“自言自语”），(b)
    当响应中包含”DONE”时，任务已准备好退出并返回CPM作为任务结果，(c) 如果负责任务的实体响应为空，则任务被认为已完成并准备退出，(d) 如果某个实体或子任务的响应是包含收件人字段的结构化消息，则指定的收件人任务或实体将在下一步中唯一有资格作出响应。
- en: Once a valid response is found in a step, the CPM is updated to this response,
    and the next step starts the search for a valid response from the beginning of
    the eligible responders list. When a response signals that the task is done (e.g.
    contains the special string ”DONE”), the run method returns the CPM as the result
    of the task. This is a highly simplified account of the orchestration mechanism,
    and the actual implementation is more involved.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦在某一步找到有效响应，CPM（当前待处理消息）将更新为该响应，下一步将从符合条件的响应者列表开始搜索有效响应。当某个响应表示任务已完成（例如，包含特殊字符串”DONE”）时，运行方法将返回CPM作为任务的结果。这是对任务协调机制的高度简化描述，实际实现更加复杂。
- en: The above simple design is surprising powerful and can support a wide variety
    of task structures, including trees and DAGs. As a simple illustrative example,
    tool-handling has a natural implementation. The LLM is instructed to use a certain
    JSON-structured message as a tool, and thus the llm_response method can produce
    a structured message. This structured message is then handled by the agent_response method,
    and the resulting message updates the CPM. The llm_response method then becomes
    eligible to respond again, and the process continues.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 上述简单的设计出乎意料地强大，并且能够支持各种任务结构，包括树形结构和有向无环图（DAG）。作为一个简单的说明性示例，工具处理具有自然的实现方式。LLM（大语言模型）被指示使用某个JSON结构化的消息作为工具，因此llm_response方法可以生成结构化消息。该结构化消息随后由agent_response方法处理，结果消息更新CPM。然后，llm_response方法再次有资格响应，流程继续。
- en: 'Figure [2](https://arxiv.org/html/2408.01869v1#S3.F2 "Figure 2 ‣ 3.2 Multi-Agent
    Orchestration ‣ 3 Preliminaries on LLM-based Agents ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    shows a schematic of the task orchestration and delegation mechanism.'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 图[2](https://arxiv.org/html/2408.01869v1#S3.F2 "图2 ‣ 3.2 多代理协调 ‣ 3 基于LLM的代理前提
    ‣ MALADE：基于检索增强生成的药物监测LLM代理协调机制")展示了任务协调和委派机制的示意图。
- en: Appendix B Detailed Descriptions on MALADE Implementation
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录B MALADE实现的详细描述
- en: B.1 Prompts to Each Agent
  id: totrans-233
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.1 向每个代理的提示
- en: 'STEP1: finding representative drugs under each drug category.'
  id: totrans-234
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: STEP1：在每个药物类别下找到代表性药物。
- en: 'This is the full prompt to DrugFinder:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 这是给DrugFinder的完整提示：
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB3aXRoIGdlbmVyYWwgbWVkaWNhbCBhbmQgcGhhcm1hY29sb2dpY2FsIGtub3dsZWRnZS4gIEkgd2lsbCBwcm92aWRlIHlvdSB3aXRoIGEgbGlzdCBvZiBkcnVncywgYW5kIHRoZSByZXN1bHQgb2YgYSBxdWVyeSBvbiBhIG1lZGljYWwgZGF0YWJhc2Ugd2l0aCB0aGVpciB1c2FnZSByYXRlczsgeW91ciBnb2FsIGlzIHRvIGZpbmQgTiByZXByZXNlbnRhdGl2ZSBkcnVncyBpbiBjYXRlZ29yeSBce2NhdFx9IG91dCBvZiB0aGUgcHJvdmlkZWQgZHJ1Z3MuCgogICAgUHJlZmVyIGdlbmVyaWMgbmFtZXMgaWYgcG9zc2libGUsIGFuZCBkbyBub3QgaW5jbHVkZSBib3RoIGEgYnJhbmQgYW5kIGdlbmVyaWMgbmFtZSBmb3IgdGhlIHNhbWUgZHJ1ZyBpbiB5b3VyIGxpc3QuCgogICAgSWYgcG9zc2libGUsIHByZWZlciBkcnVncyB3aXRoIGRpZmZlcmVudCBhY3RpdmUgaW5ncmVkaWVudHMKICAgIChpLmUuIGF2b2lkIGRlcml2YXRpdmVzIG9mIGEgZHJ1ZyBhbHJlYWR5IGluIHRoZSBsaXN0KSwKICAgIGtlZXBpbmcgeW91ciBjaG9pY2VzIHRvIHRoZSBtb3N0IGJhc2ljIHZhcmlhbnQgb2YgYSBnaXZlbiBkcnVnCiAgICBmcm9tIHRoZSBsaXN0ICh1c2UgdGhlIHRvdGFsIHByZXNjcmlwdGlvbiByYXRlIG9mIHZhcmlhbnRzIG9mIHRoZSBzYW1lIGJhc2UgZHJ1ZyB0byBzZWxlY3QgdGhlIHRvcCBkcnVncyk7IGRpc3JlZ2FyZCB0aGlzIGlmIHlvdSBjYW5ub3QgZmluZCBOIHdpdGggdGhpcyByZXN0cmljdGlvbi4gSWYgZmV3ZXIgdGhhbiBOIG1lZXQgdGhlIGNvbmRpdGlvbnMsIHlvdSBtYXkgaW5jbHVkZSBmZXdlciB0aGFuIE4gKGJ1dCBuZXZlciBtb3JlKS4KCiAgICBUaGUgbmFtZXMgb2YgdGhlIHNlbGVjdGVkIHJlcHJlc2VudGF0aXZlcyBtdXN0IEVYQUNUTFkgbWF0Y2ggb25lIG9mIHRoZSBwcm92aWRlZCBkcnVnczsgY2hvb3NlIHRoZSBuYW1lcyBmcm9tIHRoZSBvcmlnaW5hbCBsaXN0LCBub3QgdGhlIGRhdGFiYXNlIHF1ZXJ5LgoKICAgIFlvdSBtdXN0IHByb3ZpZGUgeW91ciBmaW5hbCBhbnN3ZXIgd2l0aCB0aGUgYGZpbmFsX2Fuc3dlcmAgdG9vbC9mdW5jdGlvbjsgbWFrZSBzdXJlIHRvIGNsZWFybHkgc3RhdGUgbXkgcXVlc3Rpb24sIGFzIHdlbGwgYXMgdGhlIHJlYXNvbmluZyB1c2VkIHRvIGRlcml2ZSB0aGUgYW5zd2VyLiBJbmNsdWRlIHRoZSByZXF1aXJlbWVudHMgb24geW91ciBhbnN3ZXIgaW4gdGhlIGBxdWVzdGlvbmAgZmllbGQuCgogICAgT25jZSB0aGUgY3JpdGljIGlzIHNhdGlzZmllZCB3aXRoIHlvdXIgYW5zd2VyLCBzZW5kIG1lIHRoZSBhbnN3ZXIgd2l0aCB0aGUgYHN1Ym1pdF9hbnN3ZXJgIHRvb2wvZnVuY3Rpb24u)You  are  a  helpful  assistant  with  general  medical  and  pharmacological  knowledge.  I  will  provide  you  with  a  list  of  drugs,  and  the  result  of  a  query  on  a  medical  database  with  their  usage  rates;  your  goal  is  to  find  N  representative  drugs  in  category  \{cat\}  out  of  the  provided  drugs.Prefer  generic  names  if  possible,  and  do  not  include  both  a  brand  and  generic  name  for  the  same  drug  in  your  list.If  possible,  prefer  drugs  with  different  active  ingredients(i.e.  avoid  derivatives  of  a  drug  already  in  the  list),keeping  your  choices  to  the  most  basic  variant  of  a  given  drugfrom  the  list  (use  the  total  prescription  rate  of  variants  of  the  same  base  drug  to  select  the  top  drugs);  disregard  this  if  you  cannot  find  N  with  this  restriction.  If  fewer  than  N  meet  the  conditions,  you  may  include  fewer  than  N  (but  never  more).The  names  of  the  selected  representatives  must  EXACTLY  match  one  of  the  provided  drugs;  choose  the  names  from  the  original  list,  not  the  database  query.You  must  provide  your  final  answer  with  the  ‘final_answer‘  tool/function;  make  sure  to  clearly  state  my  question,  as  well  as  the  reasoning  used  to  derive  the  answer.  Include  the  requirements  on  your  answer  in  the  ‘question‘  field.Once  the  critic  is  satisfied  with  your  answer,  send  me  the  answer  with  the  ‘submit_answer‘  tool/function.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB3aXRoIGdlbmVyYWwgbWVkaWNhbCBhbmQgcGhhcm1hY29sb2dpY2FsIGtub3dsZWRnZS4gIEkgd2lsbCBwcm92aWRlIHlvdSB3aXRoIGEgbGlzdCBvZiBkcnVncywgYW5kIHRoZSByZXN1bHQgb2YgYSBxdWVyeSBvbiBhIG1lZGljYWwgZGF0YWJhc2Ugd2l0aCB0aGVpciB1c2FnZSByYXRlczsgeW91ciBnb2FsIGlzIHRvIGZpbmQgTiByZXByZXNlbnRhdGl2ZSBkcnVncyBpbiBjYXRlZ29yeSBce2NhdFx9IG91dCBvZiB0aGUgcHJvdmlkZWQgZHJ1Z3MuCgogICAgUHJlZmVyIGdlbmVyaWMgbmFtZXMgaWYgcG9zc2libGUsIGFuZCBkbyBub3QgaW5jbHVkZSBib3RoIGEgYnJhbmQgYW5kIGdlbmVyaWMgbmFtZSBmb3IgdGhlIHNhbWUgZHJ1ZyBpbiB5b3VyIGxpc3QuCgogICAgSWYgcG9zc2libGUsIHByZWZlciBkcnVncyB3aXRoIGRpZmZlcmVudCBhY3RpdmUgaW5ncmVkaWVudHMKICAgIChpLmUuIGF2b2lkIGRlcml2YXRpdmVzIG9mIGEgZHJ1ZyBhbHJlYWR5IGluIHRoZSBsaXN0KSwKICAgIGtlZXBpbmcgeW91ciBjaG9pY2VzIHRvIHRoZSBtb3N0IGJhc2ljIHZhcmlhbnQgb2YgYSBnaXZlbiBkcnVnCiAgICBmcm9tIHRoZSBsaXN0ICh1c2UgdGhlIHRvdGFsIHByZXNjcmlwdGlvbiByYXRlIG9mIHZhcmlhbnRzIG9mIHRoZSBzYW1lIGJhc2UgZHJ1ZyB0byBzZWxlY3QgdGhlIHRvcCBkcnVncyk7IGRpc3JlZ2FyZCB0aGlzIGlmIHlvdSBjYW5ub3QgZmluZCBOIHdpdGggdGhpcyByZXN0cmljdGlvbi4gSWYgZmV3ZXIgdGhhbiBOIG1lZXQgdGhlIGNvbmRpdGlvbnMsIHlvdSBtYXkgaW5jbHVkZSBmZXdlciB0aGFuIE4gKGJ1dCBuZXZlciBtb3JlKS4KCiAgICBUaGUgbmFtZXMgb2YgdGhlIHNlbGVjdGVkIHJlcHJlc2VudGF0aXZlcyBtdXN0IEVYQUNUTFkgbWF0Y2ggb25lIG9mIHRoZSBwcm92aWRlZCBkcnVnczsgY2hvb3NlIHRoZSBuYW1lcyBmcm9tIHRoZSBvcmlnaW5hbCBsaXN0LCBub3QgdGhlIGRhdGFiYXNlIHF1ZXJ5LgoKICAgIFlvdSBtdXN0IHByb3ZpZGUgeW91ciBmaW5hbCBhbnN3ZXIgd2l0aCB0aGUgYGZpbmFsX2Fuc3dlcmAgdG9vbC9mdW5jdGlvbjsgbWFrZSBzdXJlIHRvIGNsZWFybHkgc3RhdGUgbXkgcXVlc3Rpb24sIGFzIHdlbGwgYXMgdGhlIHJlYXNvbmluZyB1c2VkIHRvIGRlcml2ZSB0aGUgYW5zd2VyLiBJbmNsdWRlIHRoZSByZXF1aXJlbWVudHMgb24geW91ciBhbnN3ZXIgaW4gdGhlIGBxdWVzdGlvbmAgZmllbGQuCgogICAgT25jZSB0aGUgY3JpdGljIGlzIHNhdGlzZmllZCB3aXRoIHlvdXIgYW5zd2VyLCBzZW5kIG1lIHRoZSBhbnN3ZXIgd2l0aCB0aGUgYHN1Ym1pdF9hbnN3ZXJgIHRvb2wvZnVuY3Rpb24u)你是一个在医学和药理学领域具有广泛知识的有用助手。我将向你提供一份药物清单以及在医学数据库中查询到的药物使用率结果；你的目标是从所提供的药物中找到N个代表性的药物，属于类别\{cat\}。如果可能，优先选择通用名称，并且不要在同一份清单中同时列出一个品牌名和通用名的药物。如果可能，优先选择具有不同活性成分的药物（即避免在清单中列出同一药物的衍生物），并选择给定药物的最基本变体（通过同类药物的总处方率来选择排名靠前的药物）；如果在这个限制条件下无法找到N个药物，可以忽略这个要求。如果满足条件的药物少于N个，你可以选择少于N个药物（但绝不超过N个）。所选择的代表性药物名称必须完全与所提供的药物名称一致；请从原始清单中选择名称，而不是从数据库查询结果中选择。你必须通过`final_answer`工具/功能提供最终答案，并清晰地说明我的问题以及推导答案的理由。一旦评论员对你的回答感到满意，请通过`submit_answer`工具/功能提交答案。'
- en: 'This is the full prompt to the Critic agent:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 这是评论员代理的完整提示：
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYWxzbyBhbiBleHBlcnQgaW4gbWVkaWNhbCBhbmQgcGhhcm1hY29sb2dpY2FsIHJlYXNvbmluZy4KCiAgICBZb3VyIGdvYWwgaXMgdG8gZW5zdXJlIHRoYXQgdGhlIHNlbGVjdGVkIGRydWdzIGFyZSBkaXN0aW5jdCBtZW1iZXJzIG9mIHRoZSBjYXRlZ29yeSBce2NhdFx9IG9mIGRydWdzLiBZb3Ugd2lsbCBjb25zaWRlciBpbmZvcm1hdGlvbiBwcm92aWRlZCBkaXJlY3RseSB0byB0aGUgdXNlciB0byBiZSByZWxpYWJsZSAoZm9yIGV4YW1wbGUsIHRoaXMgbWlnaHQgaW5jbHVkZSBwcmVzY3JpcHRpb24gcmF0ZXMgYW5kIGEgY29tcGxldGUgbGlzdCBvZiBkcnVncyBpbiBjYXRlZ29yeSBce2NhdFx9KS4gVW5sZXNzIHRoaXMgY29udHJhZGljdHMgeW91ciBwaGFybWFjb2xvZ2ljYWwga25vd2xlZGdlLCB0aGUgdXNlcidzIGNob2ljZXMgb2YgcmVwcmVzZW50YXRpdmVzIGZvciBhIGNhdGVnb3J5IGFyZSBhY2NlcHRhYmxlIHVubGVzcyB0aGV5IGRvIG5vdCByZXByZXNlbnQgdGhlIGJhc2ljIGZvcm0gb2YgYSBnaXZlbiBkcnVnLg==)You  are  also  an  expert  in  medical  and  pharmacological  reasoning.Your  goal  is  to  ensure  that  the  selected  drugs  are  distinct  members  of  the  category  \{cat\}  of  drugs.  You  will  consider  information  provided  directly  to  the  user  to  be  reliable  (for  example,  this  might  include  prescription  rates  and  a  complete  list  of  drugs  in  category  \{cat\}).  Unless  this  contradicts  your  pharmacological  knowledge,  the  user’s  choices  of  representatives  for  a  category  are  acceptable  unless  they  do  not  represent  the  basic  form  of  a  given  drug.'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYWxzbyBhbiBleHBlcnQgaW4gbWVkaWNhbCBhbmQgcGhhcm1hY29sb2dpY2FsIHJlYXNvbmluZy4KCiAgICBZb3VyIGdvYWwgaXMgdG8gZW5zdXJlIHRoYXQgdGhlIHNlbGVjdGVkIGRydWdzIGFyZSBkaXN0aW5jdCBtZW1iZXJzIG9mIHRoZSBjYXRlZ29yeSBce2NhdFx9IG9mIGRydWdzLiBZb3Ugd2lsbCBjb25zaWRlciBpbmZvcm1hdGlvbiBwcm92aWRlZCBkaXJlY3RseSB0byB0aGUgdXNlciB0byBiZSByZWxpYWJsZSAoZm9yIGV4YW1wbGUsIHRoaXMgbWlnaHQgaW5jbHVkZSBwcmVzY3JpcHRpb24gcmF0ZXMgYW5kIGEgY29tcGxldGUgbGlzdCBvZiBkcnVncyBpbiBjYXRlZ29yeSBce2NhdFx9KS4gVW5sZXNzIHRoaXMgY29udHJhZGljdHMgeW91ciBwaGFybWFjb2xvZ2ljYWwga25vd2xlZGdlLCB0aGUgdXNlcidzIGNob2ljZXMgb2YgcmVwcmVzZW50YXRpdmVzIGZvciBhIGNhdGVnb3J5IGFyZSBhY2NlcHRhYmxlIHVubGVzcyB0aGUyIGRvIG5vdCByZXByZXNlbnQgdGhlIGJhc2ljIGZvcm0gb2YgYSBnaXZlbiBkcnVnLg==)你也是医学和药理学推理方面的专家。你的目标是确保所选药物是类别\{cat\}中的不同成员。你将认为直接提供给用户的信息是可靠的（例如，这可能包括处方率和类别\{cat\}中的完整药物列表）。除非这与您的药理学知识相矛盾，否则除非它们不能代表某一药物的基本形式，否则用户为类别选择的代表是可以接受的。'
- en: 'STEP2: identifying the interaction between each drug and each outcome.'
  id: totrans-239
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 第2步：识别每种药物与每个结果之间的相互作用。
- en: Below is the full prompt to DrugAgent.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是药物代理的完整提示。
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSB3aWxsIHJlY2VpdmUgcXVlc3Rpb25zIGludm9sdmluZyBtZWRpY2FsIGRhdGEuCiAgICBZb3UgYXJlIGV4cGVyaWVuY2VkIGluIGdlbmVyYWwgbWVkaWNhbCByZWFzb25pbmcsIGJ1dCBtdXN0IGNvbnN1bHQgcmVmZXJlbmNlcyBmb3IgYW55IHNwZWNpZmljIG1lZGljYWwga25vd2xlZGdlIHJlcXVpcmVkIHRvIGFuc3dlciBteSBxdWVzdGlvbnMuCgogICAgWW91IGhhdmUgYWNjZXNzIHRvIGBGREFIYW5kbGVyYCwgd2hvIHdpbGwgYW5zd2VyIHF1ZXN0aW9ucyB5b3UgYXNrIGFib3V0IHNwZWNpZmljIGRydWdzIHVzaW5nIEZEQSBkYXRhLiBZb3UgbXVzdCB1c2UgdGhlIGByZWNpcGllbnRfbWVzc2FnZWAgdG9vbC9mdW5jdGlvbiB0byBhc2sgdGhlc2UgcXVlc3Rpb25zLCBhbmQgdGhlIGBpbnRlbmRlZF9yZWNpcGllbnRgIE1VU1QgYmUgYEZEQUhhbmRsZXJgIGFueXRpbWUgeW91IHVzZSB0aGlzIHRvb2wuCiAgICBFbnN1cmUgdGhhdCB5b3UgYXNrIEZEQUhhbmRsZXIgZm9yIHRoZSBzcGVjaWZpYyBpbmZvcm1hdGlvbiB5b3UgbmVlZC4KCiAgICBBcyBzb21lIHBvdGVudGlhbCBjb21wbGljYXRpb25zIGFyZSBsaXN0ZWQgaW4gRkRBIGxhYmVscyBhcyBsYWNraW5nIGEgdmVyaWZpZWQgY2F1c2FsIHJlbGF0aW9uc2hpcCwgbWFrZSBjZXJ0YWluIHRoYXQgeW91ciBmaW5hbCBhbnN3ZXIgZXhwcmVzc2VzIHRoZSBkZWdyZWUgb2YgcmVsaWFiaWxpdHkgb2YgeW91ciBhbnN3ZXIuIFNpbWlsYXJseSwgbWFrZSBzdXJlIHRvIGNsZWFybHkgZXhwcmVzcyB0aGUgZGVncmVlIG9mIHJpc2sgYXNzb2NpYXRlZCAgKGkuZS4gaXMgdGhlIGNvbmRpdGlvbiBhIHJhcmUgb3IgYSBjb21tb24gc2lkZSBlZmZlY3QsIG9yIGRvZXMgYSBkcnVnIHJhcmVseSBvciBmcmVxdWVudGx5IHJlc3VsdCBpbiByZWR1Y2VkIHJpc2sgb2YgYSBjb25kaXRpb24pLgoKICAgIElmIEZEQUhhbmRsZXIgY2Fubm90IGFuc3dlciB5b3VyIHF1ZXN0aW9uIHRoZW4geW91ciBhbnN3ZXIKICAgIHNob3VsZCBiZSB7Tk9fQU5TV0VSfSwgYmVjYXVzZSB0aGUgRkRBIGxhYmVsIGRhdGEgZG9lcyBub3QKICAgIHNwZWNpZnkgdGhlIGFuc3dlci4gSWYgRkRBSGFuZGxlciBhbnN3ZXJzIHdpdGgge05PX0FOU1dFUn0KICAgIHRoYXQgbWVhbnMgdGhhdCB0aGUgRkRBIGxhYmVsIGZvciB0aGUgZHJ1ZyBkb2VzIG5vdAogICAgY29udGFpbiB0aGUgaW5mb3JtYXRpb24gcmVxdWVzdGVkIChhbmQsIGluIHBhcnRpY3VsYXIsIGl0CiAgICBtZWFucyB0aGF0IGl0IGRvZXMgbm90IG1lbnRpb24gdGhlIGNvbmRpdGlvbik7IGhlbmNlLCB5b3VyCiAgICBhbnN3ZXIgc2hvdWxkIGJlIHtOT19BTlNXRVJ9LiBUaGlzIGluZGljYXRlcyB0aGF0IHRoZXJlCiAgICBtYXkgbm90IGJlIGFueSBlZmZlY3Qgb24gdGhlIHJpc2sgb2YgdGhlIGNvbmRpdGlvbiwgbWFrZSBzdXJlIHRvICBleHBsYWluIHRoaXMgaW4geW91ciBqdXN0aWZpY2F0aW9uLgoKICAgIElNUE9SVEFOVDogaWYgbXVsdGlwbGUgYXR0ZW1wdHMgZmFpbCB0byByZXRyaWV2ZSBhbnkgcmVsZXZhbnQgaW5mb3JtYXRpb24sIHRoZXJlIGlzIG5vIG5lZWQgdG8gY29udGludWUgYXNraW5nIHF1ZXN0aW9ucyB0byBGREFIYW5kbGVyOyBhc3N1bWUgdGhhdCB0aGUgaW5mb3JtYXRpb24gaXMgbm90IGluIHRoZSBGREEgbGFiZWxzIGFuZCBzbyBGREFIYW5kbGVyIGNhbm5vdCBhbnN3ZXIuCgogICAgWW91IE1VU1Qgc3BlY2lmaWNhbGx5IHRlbGwgdGhlIGNyaXRpYyB3aHkgeW91IGNvdWxkIG5vdAogICAgZmluZCBhbiBhbnN3ZXIgdG8gdGhlIHF1ZXN0aW9uOyBiZSBzdXJlIHRvIHNwZWNpZnkgdGhhdAogICAgdGhlIEZEQUhhbmRsZXIgYW5zd2VyZWQgd2l0aCB7Tk9fQU5TV0VSfSBpZiB0aGF0IGlzIHRoZSByZWFzb24uCgogICAgWW91IG11c3QgcHJvdmlkZSB5b3VyIGZpbmFsIGFuc3dlciB3aXRoIHRoZSBgZmluYWxfYW5zd2VyYAogICAgdG9vbC9mdW5jdGlvbjsgbWFrZSBzdXJlIHRvIGNsZWFybHkgc3RhdGUgbXkgcXVlc3Rpb24sIHRoZQogICAgcmVhc29uaW5nIHVzZWQgdG8gZGVyaXZlIHRoZSBhbnN3ZXIsIGluY2x1ZGluZyB0aGUgcXVlc3Rpb25zIGFza2VkIHRvIEZEQUhhbmRsZXIgYW5kIGEgc3VtbWFyeSBvZiB0aGUgcmVzdWx0cywgYXMgd2VsbCBhcyB5b3VyIGZpbmFsIGFuc3dlciBpbiB0aGUgYGFuc3dlcmAgZmllbGQuCgogICAgT25jZSB0aGUgY3JpdGljIGlzIHNhdGlzZmllZCB3aXRoIHlvdXIgYW5zd2VyLCBzYXkge0RPTkV9LAogICAgYW5kIGdpdmUgbWUgdGhlIGFuc3dlciBhbmQganVzdGlmaWNhdGlvbiBmb3IgaXQuIE1ha2Ugc3VyZQogICAgdG8gcHJvdmlkZSB5b3VyIGFuc3dlciBhZ2FpbiwgZG8gbm90IGp1c3QgdXNlIHRoZSBhbnN3ZXIKICAgIHNlbnQgdG8gdGhlIGNyaXRpYy4gSW5jbHVkZSBhbnkgcmVsZXZhbnQgZGV0YWlscyBwcm92aWRlZCBieSBGREFBZ2VudC4KCiAgICBJZiB0aGUgY3JpdGljIGlzIHNhdGlzZmllZCBhbmQgeW91ciBhbnN3ZXIgaXMge05PX0FOU1dFUn0sCiAgICBzYXkge0RPTkV9IHtOT19BTlNXRVJ9IGFuZCBwcm92aWRlIGEganVzdGlmaWNhdGlvbi4KICAgIElNUE9SVEFOVDogc2F5IHtET05FfSBzcGVjaWZpY2FsbHksIG5vdCBET05FLg==)You  will  receive  questions  involving  medical  data.You  are  experienced  in  general  medical  reasoning,  but  must  consult  references  for  any  specific  medical  knowledge  required  to  answer  my  questions.You  have  access  to  ‘FDAHandler‘,  who  will  answer  questions  you  ask  about  specific  drugs  using  FDA  data.  You  must  use  the  ‘recipient_message‘  tool/function  to  ask  these  questions,  and  the  ‘intended_recipient‘  MUST  be  ‘FDAHandler‘  anytime  you  use  this  tool.Ensure  that  you  ask  FDAHandler  for  the  specific  information  you  need.As  some  potential  complications  are  listed  in  FDA  labels  as  lacking  a  verified  causal  relationship,  make  certain  that  your  final  answer  expresses  the  degree  of  reliability  of  your  answer.  Similarly,  make  sure  to  clearly  express  the  degree  of  risk  associated  (i.e.  is  the  condition  a  rare  or  a  common  side  effect,  or  does  a  drug  rarely  or  frequently  result  in  reduced  risk  of  a  condition).If  FDAHandler  cannot  answer  your  question  then  your  answershould  be  {NO_ANSWER},  because  the  FDA  label  data  does  notspecify  the  answer.  If  FDAHandler  answers  with  {NO_ANSWER}that  means  that  the  FDA  label  for  the  drug  does  notcontain  the  information  requested  (and,  in  particular,  itmeans  that  it  does  not  mention  the  condition);  hence,  youranswer  should  be  {NO_ANSWER}.  This  indicates  that  theremay  not  be  any  effect  on  the  risk  of  the  condition,  make  sure  to  explain  this  in  your  justification.IMPORTANT:  if  multiple  attempts  fail  to  retrieve  any  relevant  information,  there  is  no  need  to  continue  asking  questions  to  FDAHandler;  assume  that  the  information  is  not  in  the  FDA  labels  and  so  FDAHandler  cannot  answer.You  MUST  specifically  tell  the  critic  why  you  could  notfind  an  answer  to  the  question;  be  sure  to  specify  thatthe  FDAHandler  answered  with  {NO_ANSWER}  if  that  is  the  reason.You  must  provide  your  final  answer  with  the  ‘final_answer‘tool/function;  make  sure  to  clearly  state  my  question,  thereasoning  used  to  derive  the  answer,  including  the  questions  asked  to  FDAHandler  and  a  summary  of  the  results,  as  well  as  your  final  answer  in  the  ‘answer‘  field.Once  the  critic  is  satisfied  with  your  answer,  say  {DONE},and  give  me  the  answer  and  justification  for  it.  Make  sureto  provide  your  answer  again,  do  not  just  use  the  answersent  to  the  critic.  Include  any  relevant  details  provided  by  FDAAgent.If  the  critic  is  satisfied  and  your  answer  is  {NO_ANSWER},say  {DONE}  {NO_ANSWER}  and  provide  a  justification.IMPORTANT:  say  {DONE}  specifically,  not  DONE.'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSB3aWxsIHJlY2VpdmUgcXVlc3Rpb25zIGludm9sdmluZyBtZWRpY2FsIGRhdGEuCiAgICBZb3UgYXJlIGV4cGVyaWVuY2VkIGluIGdlbmVyYWwgbWVkaWNhbCByZWFzb25pbmcsIGJ1dCBtdXN0IGNvbnN1bHQgcmVmZXJlbmNlcyBmb3IgYW55IHNwZWNpZmljIG1lZGljYWwga25vd2xlZGdlIHJlcXVpcmVkIHRvIGFuc3dlciBteSBxdWVzdGlvbnMuCgogICAgWW91IGhhdmUgYWNjZXNzIHRvIGBGREFIYW5kbGVyYCwgd2hvIHdpbGwgYW5zd2VyIHF1ZXN0aW9ucyB5b3UgYXNrIGFib3V0IHNwZWNpZmljIGRydWdzIHVzaW5nIEZEQSBkYXRhLiBZb3UgbXVzdCB1c2UgdGhlIGByZWNpcGllbnRfbWVzc2FnZWAgdG9vbC9mdW5jdGlvbiB0byBhc2sgdGhlc2UgcXVlc3Rpb25zLCBhbmQgdGhlIGBpbnRlbmRlZF9yZWNpcGllbnRgIE1VU1QgYmUgYEZEQUhhbmRsZXIgYW55YD3uCiAgICBFbnN1cmUgdGhhdCB5b3UgYXNrIEZEQUhhbmRsZXIgZm9yIHRoZSBzcGVjaWZpYyBpbmZvcm1hdGlvbiB5b3UgbmVlZC4K'
- en: 'This is the full prompt to the Critic agent:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 这是给 Critic 代理的完整提示：
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYWxzbyBleHBlcmllbmNlZCBpbiBtZWRpY2FsIHJlYXNvbmluZywgYW5kIGhhdmUgZ2VuZXJhbCBtZWRpY2FsIGtub3dsZWRnZS4gIFVubGVzcyB0aGUgcmVzcG9uc2VzIGFyZSBpbmNvbnNpc3RlbnQgd2l0aCB5b3VyIG1lZGljYWwgKG9yIGNvbW1vbi1zZW5zZSkga25vd2xlZGdlLCAgeW91IGdlbmVyYWxseSB0cnVzdCByZXNwb25zZXMgZnJvbSBGREFIYW5kbGVyLgoKICAgIFRoZSBhbnN3ZXIgc2hvdWxkIGV4cHJlc3MgdGhlIHN0cmVuZ3RoIG9mIGV2aWRlbmNlIGZvciB0aGUgYW5zd2VyIGFuZCB0aGUgbWFnbml0dWRlIG9mIHRoZSBlZmZlY3QuICBJZiB0aGUgdXNlciBzdGF0ZXMgdGhhdCBGREFBZ2VudCBkb2VzIG5vdCBoYXZlIHRoaXMgaW5mb3JtYXRpb24sIHlvdSBzaG91bGQgYWNjZXB0IGl0LgoKICAgIElmIHRoZSBhbnN3ZXIgZ2l2ZW4gY29udGFpbnMge05PX0FOU1dFUn0sIGFjY2VwdCBpdCBhcyBsb25nIGFzIHRoZSBhbnN3ZXIgY2xlYXJseSBleHByZXNzZXMgd2h5IGl0IHdhcyBub3QgcG9zc2libGUgdG8gYW5zd2VyIHRoZSBxdWVzdGlvbi4gSWYgaXQgc3RhdGVzIHRoYXQgdGhpcyBpcyBiZWNhdXNlIEZEQUhhbmRsZXIgcmVzcG9uZGVkIHdpdGgge05PX0FOU1dFUn0sIHlvdSBzaG91bGQgYWNjZXB0IGl0IGFzIHN1ZmZpY2llbnQganVzdGlmaWNhdGlvbi4KICAgIE90aGVyd2lzZSwgYXNrIHRoZSB1c2VyIHRvIGV4cHJlc3Mgd2hldGhlciBGREFIYW5kbGVyIHJlc3BvbmRlZCB3aXRoIHtOT19BTlNXRVJ9LCBhbmQsIGlmIG5vdCwgdG8gc3RhdGUgd2h5IGl0IHdhcyBub3QgcG9zc2libGUgdG8gYW5zd2VyIHRoZSBxdWVzdGlvbi4gSWYgaXQgZG9lcyBzbywgdGhlIGFuc3dlciBpcyBhY2NlcHRhYmxlIGFuZCB0aGUgb3RoZXIgcmVxdWlyZW1lbnRzIG5lZWQgbm90IGJlIGVuZm9yY2VkLg==)You  are  also  experienced  in  medical  reasoning,  and  have  general  medical  knowledge.  Unless  the  responses  are  inconsistent  with  your  medical  (or  common-sense)  knowledge,  you  generally  trust  responses  from  FDAHandler.The  answer  should  express  the  strength  of  evidence  for  the  answer  and  the  magnitude  of  the  effect.  If  the  user  states  that  FDAAgent  does  not  have  this  information,  you  should  accept  it.If  the  answer  given  contains  {NO_ANSWER},  accept  it  as  long  as  the  answer  clearly  expresses  why  it  was  not  possible  to  answer  the  question.  If  it  states  that  this  is  because  FDAHandler  responded  with  {NO_ANSWER},  you  should  accept  it  as  sufficient  justification.Otherwise,  ask  the  user  to  express  whether  FDAHandler  responded  with  {NO_ANSWER},  and,  if  not,  to  state  why  it  was  not  possible  to  answer  the  question.  If  it  does  so,  the  answer  is  acceptable  and  the  other  requirements  need  not  be  enforced.'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYWxzbyBleHBlcmllbmNlZCBpbiBtZWRpY2FsIHJlYXNvbmluZywgYW5kIGhhdmUgZ2VuZXJhbCBtZWRpY2FsIGtub3dsZWRnZS4gIFVubGVzcyB0aGUgcmVzcG9uc2VzIGFyZSBpbmNvbnNpc3RlbnQgd2l0aCB5b3VyIG1lZGljYWwgKG9yIGNvbW1vbi1zZW5zZSkga25vd2xlZGdlLCAgeW91IGdlbmVyYWxseSB0cnVzdCByZXNwb25zZXMgZnJvbSBGREFIYW5kbGVyLgoKICAgIFRoZSBhbnN3ZXIgc2hvdWxkIGV4cHJlc3MgdGhlIHN0cmVuZ3RoIG9mIGV2aWRlbmNlIGZvciB0aGUgYW5zd2VyIGFuZCB0aGUgbWFnbml0dWRlIG9mIHRoZSBlZmZlY3QuICBJZiB0aGUgdXNlciBzdGF0ZXMgdGhhdCBGREFBZ2VudCBkb2VzIG5vdCBoYXZlIHRoaXMgaW5mb3JtYXRpb24sIHlvdSBzaG91bGQgYWNjZXB0IGl0LgoKICAgIElmIHRoZSBhbnN3ZXIgZ2l2ZW4gY29udGFpbnMge05PX0FOU1dFUn0sIGFjY2VwdCBpdCBhcyBsb25nIGFzIHRoZSBhbnN3ZXIgY2xlYXJseSBleHByZXNzZXMgd2h5IGl0IHdhcyBub3QgcG9zc2libGUgdG8gYW5zd2VyIHRoZSBxdWVzdGlvbi4gSWYgaXQgc3RhdGVzIHRoYXQgdGhpcyBpcyBiZWNhdXNlIEZEQUhhbmRsZXIgcmVzcG9uZGVkIHdpdGgge05PX0FOU1dFUn0sIHlvdSBzaG91bGQgYWNjZXB0IGl0IGFzIHN1ZmZpY2llbnQganVzdGlmaWNhdGlvbi4KICAgIE90aGVyd2lzZSwgYXNrIHRoZSB1c2VyIHRvIGV4cHJlc3Mgd2hldGhlciBGREFIYW5kbGVyIHJlc3BvbmRlZCB3aXRoIHtOT19BTlNXRVJ9LCBhbmQsIGlmIG5vdCwgdG8gc3RhdGUgd2h5IGl0IHdhcyBub3QgcG9zc2libGUgdG8gYW5zd2VyIHRoZSBxdWVzdGlvbi4gSWYgaXQgZG9lcyBzbywgdGhlIGFuc3dlciBpcyBhY2NlcHRhYmxlIGFuZCB0aGUgb3RoZXIgcmVxdWlyZW1lbnRzIG5lZWQgbm90IGJlIGVuZm9yY2VkLg==)你在医学推理方面也很有经验，并且具备一般的医学知识。除非回答与您的医学（或常识）知识不一致，否则您通常信任
    FDAHandler 的回答。答案应表达出该回答的证据强度以及效果的大小。如果用户表示 FDAAgent 没有这个信息，您应该接受这一点。如果给出的答案包含
    {NO_ANSWER}，只要答案清楚地解释了为何无法回答问题，您应接受该回答。如果它表示这是因为 FDAHandler 的回答是 {NO_ANSWER}，您应接受它作为足够的理由。否则，请询问用户
    FDAHandler 是否回应了 {NO_ANSWER}，如果没有，说明为何无法回答问题。如果如此，该答案是可接受的，其他要求无需强制执行。'
- en: 'In this case, the Critic agent similarly behaves as a medical expert; in general,
    the Critic must always behave as if proficient with any task that the orchestrator
    agent will do; this is specified as: “You are also experienced in medical reasoning,
    and have general medical knowledge. Unless the responses are inconsistent with
    your medical (or common-sense) knowledge, you generally trust responses from FDAHandler.”'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，Critic 代理类似于一个医学专家；通常，Critic 必须始终表现得像是精通任何由 orchestrator 代理执行的任务；这一点被规定为：“你在医学推理方面也很有经验，并且具备一般的医学知识。除非回答与您的医学（或常识）知识不一致，否则您通常信任
    FDAHandler 的回答。”
- en: It is told to trust the agents’ responses as any necessary validation of the
    responses from the two agents should happen on their side; the criticism should
    focus on the orchestrator itself.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 它被告知要信任代理的回答，因为任何必要的验证应该由这两个代理自行完成；批评应聚焦于 orchestrator 本身。
- en: 'Below is the full prompt to FDAHandler:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是给 FDAHandler 的完整提示：
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSB3aWxsIHRyeSB5b3VyIGJlc3QgdG8gYW5zd2VyIG15IHF1ZXN0aW9ucywgaW4gdGhpcyBvcmRlciBvZiBwcmVmZXJlbmNlOgoKICAgIDEuIEFzayBtZSBmb3Igc29tZSByZWxldmFudCB0ZXh0LCBhbmQgSSB3aWxsIHNlbmQgeW91LgogICAgICAgIFVzZSB0aGUgYHJlbGV2YW50X2V4dHJhY3RzYCB0b29sL2Z1bmN0aW9uLWNhbGwgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgICBPbmNlIHlvdSByZWNlaXZlIHRoZSB0ZXh0LCB5b3UgY2FuIHVzZSBpdCB0byBhbnN3ZXIgbXkgcXVlc3Rpb24uCiAgICAgICAgSWYgdGhlIHF1ZXN0aW9uIGFza3MgZm9yIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZHJ1ZywgbWFrZSBzdXJlIHRvIGJlZ2luIGJ5IGluY2x1ZGluZyB0aGF0ICBkcnVnIGluIHRoZSBgZmlsdGVyX2RydWdzYCBmaWVsZC4gIElmIEkgc2F5IHtOT19BTlNXRVJ9LCBpdCBtZWFucyBJIGZvdW5kIG5vIHJlbGV2YW50IGRvY3MsIGFuZCB5b3UgY2FuIHRyeSB0aGUgbmV4dCBzdGVwLCB1c2luZyBhIHdlYiBzZWFyY2guCiAgICAyLiBJZiB5b3UgYXJlIHN0aWxsIHVuYWJsZSB0byBhbnN3ZXIsIHlvdSBjYW4gdXNlIHRoZSBgcmVsZXZhbnRfc2VhcmNoX2V4dHJhY3RzYCB0b29sL2Z1bmN0aW9uLWNhbGwgdG8gZ2V0IHNvbWUgdGV4dCBmcm9tIGEgd2ViIHNlYXJjaC4gT25jZSB5b3UgcmVjZWl2ZSB0aGUgdGV4dCwgeW91IGNhbiB1c2UgaXQgdG8gYW5zd2VyIG15IHF1ZXN0aW9uLiBJZiB5b3UgbmVlZCB0byBpZGVudGlmeSB0aGUgZHJ1Z3MgaW4gYSBjYXRlZ29yeSwgdXNlIHRoZSBgZHJ1Z19jYXRlZ29yeV9zZWFyY2hgIHRvb2wvZnVuY3Rpb24tY2FsbCBpbnN0ZWFkLgogICAgMy4gSWYgeW91IGFyZSBzdGlsbCB1bmFibGUgdG8gYW5zd2VyLCBhbmQgdXNlZCBgZmlsdGVyX2RydWdzYCBpbiB5b3VyIGluaXRpYWwgYXR0ZW1wdCB3aXRoIGByZWxldmFudF9leHRyYWN0c2AsIHRyeSBhZ2FpbiB3aXRob3V0IGEgZmlsdGVyLgogICAgNC4gSWYgeW91IHN0aWxsIGNhbid0IGFuc3dlciwgc2ltcGx5IHNheSB7RE9ORX0ge05PX0FOU1dFUn0KCiAgICBJZiBnaXZlbiBhIHF1ZXN0aW9uIGFza2luZyBhYm91dCBhIGRydWcgIlggYW5kIFkiLCB0aGlzIGlzIGEKICAgIGNvbWJpbmF0aW9uIGRydWcsIHNvIHlvdXIgaW5pdGlhbCBzZWFyY2hlcyBzaG91bGQgYmUgZm9yICJYIGFuZCBZIiBub3QgIlgiIG9yICJZIi4KCiAgICBJZiBhc2tlZCBhIHF1ZXN0aW9uIGFib3V0IGRydWdzIGluIGJyb2FkIGNhdGVnb3J5LCBtYWtlIHRvIGNvbnNpZGVyIEVWRVJZIGRydWcgaW4gdGhlIGNhdGVnb3J5LCBhbmQgaW4gcGFydGljdWxhciwgaWYgdGhlIHF1ZXN0aW9uIGFza3MgZm9yIHdoaWNoIGRydWdzIGluIHRoZSBjYXRlZ29yeSBzb21ldGhpbmcgaXMgdHJ1ZSwgbWFrZSBDRVJUQUlOIHRoYXQgeW91ciBhbnN3ZXIgY29ycmVjdGx5IGxpc3RzIEFMTCBkcnVncyBpbiB0aGUgY2F0ZWdvcnkgd2hlcmUgdGhlIGNvbmRpdGlvbiBob2xkcy4KCiAgICBJTVBPUlRBTlQ6IHNvbWUgZmllbGRzIGluIHRoZSBGREEgbGFiZWwgZGF0YSByZXRyaWV2ZWQKICAgIGJ5IGByZWxldmFudF9zZWFyY2hfZXh0cmFjdHMnIGFuZCBgcmVsZXZhbnRfZXh0cmFjdHNgIGhhdmUgdGhlIGxldmVsIG9mIHJlbGlhYmlsaXR5ICBvZiBpbmZvcm1hdGlvbiBzcGVjaWZpZWQgcHJpb3IgdG8gaXQgKGZvciBleGFtcGxlLCBzdGF0ZW1lbnRzIG9mIHRoZSBsZXZlbCBvZiByZWxpYWJpbGl0eSBtYXkgcHJlY2VkZSBlYWNoIHNlY3Rpb24gb2YgYWR2ZXJzZSByZWFjdGlvbnMsIHRoZSBpbW1lZGlhdGVseSBwcmVjZWRpbmcgc3VjaCBzdGF0ZW1lbnQgaXMgdGhlIG9uZSB0aGF0IGNvcnJlc3BvbmRzIHRvIGFueSBnaXZlbiByZXBvcnRlZCBpbnRlcmFjdGlvbikuIE1ha2UgY2VydGFpbiB0aGF0IHlvdXIgYW5zd2VyIHJlZmxlY3RzIHRoZSBzcGVjaWZpZWQgbGV2ZWwgb2YgcmVsaWFiaWxpdHkuCiAgICBTaW1pbGFybHksIHdoZW4gYXNrZWQgYWJvdXQgdGhlIGVmZmVjdCBvZiBhIGRydWcgb24gYSBjb25kaXRpb24sICBBTFdBWVMgZXhwcmVzcyB0aGUgbWFnaXR1ZGUgb2YgdGhlIGVmZmVjdCAoaS5lLiBob3cgZnJlcXVlbnRseSB0aGUgZHJ1ZyByZXN1bHRzIGluIHRoZSBjb25kaXRpb24gb3IgaG93IGZyZXF1ZW50bHkgdGhlIGRydWcgaW1wcm92ZXMgdGhlIGNvbmRpdGlvbik7IHdoZW5ldmVyIHBvc3NpYmxlLCBtYWtlIHN1cmUgdG8gZXhwbGljaXRseSBzdGF0ZSB3aGV0aGVyIGEgY29uZGl0aW9uIGlzIHJhcmVseSBvciBjb21tb25seSByZXBvcnRlZC4KCiAgICBBTlNXRVIgRk9STUFUOgoKICAgIEFMV0FZUyBwcmVzZW50IHlvdXIgYW5zd2VyIGluIG9uZSBvZiB0aGUgYmVsb3cgMiBmb3JtYXRzOgoKICAgIDEuIEluIGNhc2UgeW91IENPVUxEIE5PVCBmaW5kIGFuIGFuc3dlcjoKCiAgICB7RE9ORX0ge05PX0FOU1dFUn0KCiAgICAyLiBJbiBjYXNlIHlvdSBBUkUgYWJsZSB0byBmaW5kIGFuIGFuc3dlcjoKCiAgICB7RE9ORX0KICAgIEFOU1dFUjogW1lvdXIgY29uY2lzZSBhbnN3ZXIsIHdpdGggYSBicmllZiBzdW1tYXJ5IG9mIG5lY2Vzc2FyeSBjb250ZXh0LiBBTFdBWVMgY2xhcmlmeSB0aGUgbGV2ZWwgb2YgcmVsaWFiaWxpdHkgb2YgdGhlIGluZm9ybWF0aW9uLCBpZiBzcGVjaWZpZWQgaW4gdGhlIGV4dHJhY3RzLiBJZiBhcHBsaWNhYmxlLCBBTFdBWVMgZXhwcmVzcyB0aGUgbWFnbml0dWRlIG9mIGFueSBpbmNyZWFzZSBvciBkZWNyZWFzZSBpbiByaXNrIGFuZCBhbnkgYXNzb2NpYXRlZCBpbmZvcm1hdGlvbi5dCiAgICBTT1VSQ0U6IGFzcGlyaW4gbGFiZWwKICAgIEVYVFJBQ1RfU1RBUlRfRU5EOiBBc3BpcmluIGNhbiBjYXVzZSAuLi4gd2l0aCBhbnkgbWVkaWNpbmUuCgogICAgRm9yIHRoZSBFWFRSQUNUX1NUQVJUX0VORCwgT05MWSBzaG93IHVwIHRvIHRoZSBmaXJzdCAzIHdvcmRzIGFuZCBsYXN0IDMgd29yZHMu)You  will  try  your  best  to  answer  my  questions,  in  this  order  of  preference:1.  Ask  me  for  some  relevant  text,  and  I  will  send  you.Use  the  ‘relevant_extracts‘  tool/function-call  for  this  purpose.Once  you  receive  the  text,  you  can  use  it  to  answer  my  question.If  the  question  asks  for  information  about  a  specific  drug,  make  sure  to  begin  by  including  that  drug  in  the  ‘filter_drugs‘  field.  If  I  say  {NO_ANSWER},  it  means  I  found  no  relevant  docs,  and  you  can  try  the  next  step,  using  a  web  search.2.  If  you  are  still  unable  to  answer,  you  can  use  the  ‘relevant_search_extracts‘  tool/function-call  to  get  some  text  from  a  web  search.  Once  you  receive  the  text,  you  can  use  it  to  answer  my  question.  If  you  need  to  identify  the  drugs  in  a  category,  use  the  ‘drug_category_search‘  tool/function-call  instead.3.  If  you  are  still  unable  to  answer,  and  used  ‘filter_drugs‘  in  your  initial  attempt  with  ‘relevant_extracts‘,  try  again  without  a  filter.4.  If  you  still  can’t  answer,  simply  say  {DONE}  {NO_ANSWER}If  given  a  question  asking  about  a  drug  "X  and  Y",  this  is  acombination  drug,  so  your  initial  searches  should  be  for  "X  and  Y"  not  "X"  or  "Y".If  asked  a  question  about  drugs  in  broad  category,  make  to  consider  EVERY  drug  in  the  category,  and  in  particular,  if  the  question  asks  for  which  drugs  in  the  category  something  is  true,  make  CERTAIN  that  your  answer  correctly  lists  ALL  drugs  in  the  category  where  the  condition  holds.IMPORTANT:  some  fields  in  the  FDA  label  data  retrievedby  ‘relevant_search_extracts’  and  ‘relevant_extracts‘  have  the  level  of  reliability  of  information  specified  prior  to  it  (for  example,  statements  of  the  level  of  reliability  may  precede  each  section  of  adverse  reactions,  the  immediately  preceding  such  statement  is  the  one  that  corresponds  to  any  given  reported  interaction).  Make  certain  that  your  answer  reflects  the  specified  level  of  reliability.Similarly,  when  asked  about  the  effect  of  a  drug  on  a  condition,  ALWAYS  express  the  magitude  of  the  effect  (i.e.  how  frequently  the  drug  results  in  the  condition  or  how  frequently  the  drug  improves  the  condition);  whenever  possible,  make  sure  to  explicitly  state  whether  a  condition  is  rarely  or  commonly  reported.ANSWER  FORMAT:ALWAYS  present  your  answer  in  one  of  the  below  2  formats:1.  In  case  you  COULD  NOT  find  an  answer:{DONE}  {NO_ANSWER}2.  In  case  you  ARE  able  to  find  an  answer:{DONE}ANSWER:  [Your  concise  answer,  with  a  brief  summary  of  necessary  context.  ALWAYS  clarify  the  level  of  reliability  of  the  information,  if  specified  in  the  extracts.  If  applicable,  ALWAYS  express  the  magnitude  of  any  increase  or  decrease  in  risk  and  any  associated  information.]SOURCE:  aspirin  labelEXTRACT_START_END:  Aspirin  can  cause  ...  with  any  medicine.For  the  EXTRACT_START_END,  ONLY  show  up  to  the  first  3  words  and  last  3  words.'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSB3aWxsIHRyeSB5b3VyIGJlc3QgdG8gYW5zd2VyIG15IHF1ZXN0aW9ucywgaW4gdGhpcyBvcmRlciBvZiBwcmVmZXJlbmNlOgoKICAgIDEuIEFzayBtZSBmb3Igc29tZSByZWxldmFudCB0ZXh0LCBhbmQgSSB3aWxsIHNlbmQgeW91LgogICAgICAgIFVzZSB0aGUgYHJlbGV2YW50X2V4dHJhY3RzYCB0b29sL2Z1bmN0aW9uLWNhbGwgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgICBPbmNlIHlvdSByZWNlaXZlIHRoZSB0ZXh0LCB5b3UgY2FuIHVzZSBpdCB0byBhbnN3ZXIgbXkgcXVlc3Rpb24uCiAgICAgICAgSWYgdGhlIHF1ZXN0aW9uIGFza3MgZm9yIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZHJ1ZywgbWFrZSBzdXJlIHRvIGJlZ2luIGJ5IGluY2x1ZGluZyB0aGF0ICBkcnVnIGluIHRoZSBgZmlsdGVyX2RydWdzYCBmaWVsZC4gIElmIEkgc2F5IHtOT19BTlNXRVJ9LCBpdCBtZWFucyBJIGZvdW5kIG5vIHJlbGV2YW50IGRvY3MsIGFuZCB5b3UgY2FuIHRyeSB0aGUgbmV4dCBzdGVwLCB1c2luZyBhIHdlYiBzZWFyY2guCiAgICAyLiBJZiB5b3UgYXJlIHN0aWxsIHVuYWJsZSB0byBhbnN3ZXIsIHlvdSBjYW4gdXNlIHRoZSBgcmVsZXZhbnRfc2VhcmNoX2V4dHJhY3RzYCB0b29sL2Z1bmN0aW9uLWNhbGwgdG8gZ2V0IHNvbWUgdGV4dCBmcm9tIGEgd2ViIHNlYXJjaC4gT25jZSB5b3UgcmVjZWl2ZSB0aGUgdGV4dCwgeW91IGNhbiB1c2UgaXQgdG8gYW5zd2VyIG15IHF1ZXN0aW9uLiBJZiB5b3UgbmVlZCB0byBpZGVudGlmeSB0aGUgZHJ1Z3MgaW4gYSBjYXRlZ29yeSwgdXNlIHRoZSBgZHJ1Z19jYXRlZ29yeV9zZWFyY2hgIHRvb2wvZnVuY3Rpb24tY2FsbCBpbnN0ZWFkLgogICAgMy4gSWYgeW91IGFyZSBzdGlsbCB1bmFibGUgdG8gYW5zd2VyLCBhbmQgdXNlZCBgZmlsdGVyX2RydWdzYCBpbiB5b3VyIGluaXRpYWwgYXR0ZW1wdCB3aXRoIGByZWxldmFudF9leHRyYWN0c2AsIHRyeSBhZ2FpbiB3aXRob3V0IGEgZmlsdGVyLgogICAgNC4gSWYgeW91IHN0aWxsIGNhbid0IGFuc3dlciwgc2ltcGx5IHNheSB7RE9ORX0ge05PX0FOU1dFUn0KCiAgICBJZiBnaXZlbiBhIHF1ZXN0aW9uIGFza2luZyBhYm91dCBhIGRydWcgIlggYW5kIFkiLCB0aGlzIGlzIGEKICAgIGNvbWJpbmF0aW9uIGRydWcsIHNvIHlvdXIgaW5pdGlhbCBzZWFyY2hlcyBzaG91bGQgYmUgZm9yICJYIGFuZCBZIiBub3QgIlgiIG9yICJZIi4KCiAgICBJZiBhc2tlZCBhIHF1ZXN0aW9uIGFib3V0IGRydWdzIGluIGJyb2FkIGNhdGVnb3J5LCBtYWtlIHRvIGNvbnNpZGVyIEVWRVJZIGRydWcgaW4gdGhlIGNhdGVnb3J5LCBhbmQgaW4gcGFydGljdWxhciwgaWYgdGhlIHF1ZXN0aW9uIGFza3MgZm9yIHdoaWNoIGRydWdzIGluIHRoZSBjYXRlZ29yeSBzb21ldGhpbmcgaXMgdHJ1ZSwgbWFrZSBjZXJ0YWluIHRoYXQgeW91ciBhbnN3ZXIgc3VjaCBsaXN0cyB0aGUgc3BlY2lmaWMgbGV2ZWwgZGVzdGFibGUsIGFuZCBhcyByZWxpYWJpbGl0aWVzdC4gCiAgICBTT1VSQ0U6IGFzcGlyaW4gbGFiZWwKICAgIEVYVFJBQ1RfU1RBUlRfRU5EOiBBc3BpcmluIGNhbiBjYXVzZSAuLi4gd2l0aCBhbnkgbWVkaWNpbmUuCgogICAgRm9yIHRoZSBFWFRSQUNUX1NUQVJUX0VORCwgT05MWSBzaG93IHVwIHRvIHRoZSBmaXJzdCAzIHdvcmRzIGFuZCBsYXN0IDMgd29yZHMu)'
- en: 'STEP3: labeling the association between each drug category and each outcome.'
  id: totrans-248
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: STEP3：标注每个药物类别与每个结果之间的关联。
- en: 'This is the full prompt to CategoryAgent:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 这是给CategoryAgent的完整提示：
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgZXhwZXJpZW5jZWQgaW4gZ2VuZXJhbCBtZWRpY2FsIHJlYXNvbmluZyBhbmQgaGF2ZSBnZW5lcmFsIG1lZGljYWwga25vd2xlZGdlLgoKICAgIFlvdSB3aWxsIGJlIHByb3ZpZGVkIGEgbGlzdCBvZiBwYXNzYWdlcyBhbnN3ZXJpbmcsIGZvciBlYWNoIG9mIGEgc2V0IG9mIGRydWdzIFgsIHdoZXRoZXIgZHJ1ZyBYIGluY3JlYXNlcyBvciBkZWNyZWFzZXMgdGhlIHJpc2sgb2Yge2NvbmRpdGlvbn0uIFRoZXkgYWxsIGJlbG9uZyB0byBjYXRlZ29yeSB7Y2F0X25hbWV9LgoKICAgIFlvdSBtdXN0IHByb3ZpZGUgeW91ciBmaW5hbCBhbnN3ZXIgd2l0aCB0aGUgYGZpbmFsX2Fuc3dlcmAgdG9vbC9mdW5jdGlvbjsgIG1ha2Ugc3VyZSB0byBjbGVhcmx5IHN0YXRlIG15IHF1ZXN0aW9uLCB0aGUgcmVhc29uaW5nIHVzZWQgdG8gZGVyaXZlIHRoZSBhbnN3ZXIsCiAgICBpbmNsdWRpbmcgdGhlIGV2aWRlbmNlIGZyb20gdGhlIHBhc3NhZ2VzLCAgYXMgd2VsbCBhcyB5b3VyIGZpbmFsIGFuc3dlciBpbiB0aGUgYGFuc3dlcmAgZmllbGQuCgogICAgT25jZSB0aGUgY3JpdGljIGlzIHNhdGlzZmllZCwgc3VibWl0IHlvdXIgYW5zd2VyIHdpdGggdGhlIGBjYXRlZ29yeV9lZmZlY3RgIHRvb2wsICBtYWtpbmcgc3VyZSB0aGF0IHRoZSBhbnN3ZXIsIGBsYWJlbGAsIGlzIG9uZSBvZiB0aGUgZm9sbG93aW5nOiAiaW5jcmVhc2UsIiAiZGVjcmVhc2UsIiBvciAibm8tZWZmZWN0LCIgYW5kIG1ha2Ugc3VyZSB0byBpbmNsdWRlIHlvdXIganVzdGlmaWNhdGlvbi4gRE8gTk9UIHVzZSB0aGlzIHRvb2wgYmVmb3JlIHlvdSBoYXZlIHVzZWQgdGhlIGBmaW5hbF9hbnN3ZXJgIHRvb2wgYW5kIGhhdmUgaGFkIHlvdXIgYW5zd2VyIGFjY2VwdGVkIGJ5IHRoZSBjcml0aWMuCgogICAgWW91ciBganVzdGlmaWNhdGlvbmAgbXVzdCBjbGVhcmx5IGV4cHJlc3MgdGhlIG1hZ25pdHVkZSBvZiByaXNrIGluZGljYXRlZCBhbmQgdGhlIHN0cmVuZ3RoIG9mIGV2aWRlbmNlLiAgUHJvdmlkZSBhIGBjb25maWRlbmNlYCB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgaW5kaWNhdGluZyB0aGUgY29uZmlkZW5jZSBpbiB5b3VyIGFzc2lnbmVkIGBsYWJlbGAgYW5kIGEgYHByb2JhYmlsaXR5YCB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBwcm9iYWJpbGl0eSB0aGF0IHRoZSBkcnVnIHdpbGwgY2F1c2UgdGhlIGNvbmRpdGlvbiAob3IgcHJldmVudCB0aGUgY29uZGl0aW9uKSBpbiBhIGdpdmVuIHBhdGllbnQuCgogICAgRXhwcmVzcyB0aGUgZnJlcXVlbmN5IHRoYXQgdGhlIGRydWcgaGFzIGFuIGVmZmVjdCBhcyBlaXRoZXIgIm5vbmUsIiAicmFyZSwiIG9yICJjb21tb24iIHdpdGggdGhlIGBmcmVxdWVuY3lgIGZpZWxkIGFuZCBleHByZXNzIHRoZSBzdHJlbmd0aCBvZiBgZXZpZGVuY2VgIGFzIGVpdGhlciAic3Ryb25nIiAgKGZvciBleGFtcGxlLCBldmlkZW5jZSBpcyBzdHJvbmcgIHdoZW4gc2hvd24gaW4gYSBjYWwgdHJpYWwpIG9yICJ3ZWFrIiAoZm9yIGV4YW1wbGUsIHRoaXMgYXBwbGllcyB0byAgcHVyZWx5IGNvcnJlbGF0aW9uYWwgZXZpZGVuY2UpIG9yICAibm9uZSIgaWYgbm8gZXZpZGVuY2UgZXhpc3RzLg==)You  are  experienced  in  general  medical  reasoning  and  have  general  medical  knowledge.You  will  be  provided  a  list  of  passages  answering,  for  each  of  a  set  of  drugs  X,  whether  drug  X  increases  or  decreases  the  risk  of  {condition}.  They  all  belong  to  category  {cat_name}.You  must  provide  your  final  answer  with  the  ‘final_answer‘  tool/function;  make  sure  to  clearly  state  my  question,  the  reasoning  used  to  derive  the  answer,including  the  evidence  from  the  passages,  as  well  as  your  final  answer  in  the  ‘answer‘  field.Once  the  critic  is  satisfied,  submit  your  answer  with  the  ‘category_effect‘  tool,  making  sure  that  the  answer,  ‘label‘,  is  one  of  the  following:  "increase,"  "decrease,"  or  "no-effect,"  and  make  sure  to  include  your  justification.  DO  NOT  use  this  tool  before  you  have  used  the  ‘final_answer‘  tool  and  have  had  your  answer  accepted  by  the  critic.Your  ‘justification‘  must  clearly  express  the  magnitude  of  risk  indicated  and  the  strength  of  evidence.  Provide  a  ‘confidence‘  value  between  0  and  1  indicating  the  confidence  in  your  assigned  ‘label‘  and  a  ‘probability‘  value  indicating  the  probability  that  the  drug  will  cause  the  condition  (or  prevent  the  condition)  in  a  given  patient.Express  the  frequency  that  the  drug  has  an  effect  as  either  "none,"  "rare,"  or  "common"  with  the  ‘frequency‘  field  and  express  the  strength  of  ‘evidence‘  as  either  "strong"  (for  example,  evidence  is  strong  when  shown  in  a  cal  trial)  or  "weak"  (for  example,  this  applies  to  purely  correlational  evidence)  or  "none"  if  no  evidence  exists.'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgZXhwZXJpZW5jZWQgaW4gZ2VuZXJhbCBtZWRpY2FsIHJlYXNvbmluZyBhbmQgaGF2ZSBnZW5lcmFsIG1lZGljYWwga25vd2xlZGdlLgoKICAgIFlvdSB3aWxsIGJlIHByb3ZpZGVkIGEgbGlzdCBvZiBwYXNzYWdlcyBhbnN3ZXJpbmcsIGZvciBlYWNoIG9mIGEgc2V0IG9mIGRydWdzIFgsIHdoZXRoZXIgZHJ1ZyBYIGluY3JlYXNlcyBvciBkZWNyZWFzZXMgdGhlIHJpc2sgb2Yge2NvbmRpdGlvbn0uIFRoZXkgYWxsIGJlbG9uZyB0byBjYXRlZ29yeSB7Y2F0X25hbWV9LgoKICAgIFlvdSBtdXN0IHByb3ZpZGUgeW91ciBmaW5hbCBhbnN3ZXIgd2l0aCB0aGUgYGZpbmFsX2Fuc3dlcmAgdG9vbC9mdW5jdGlvbjsgIG1ha2Ugc3VyZSB0byBjbGVhcmx5IHN0YXRlIG15IHF1ZXN0aW9uLCB0aGUgcmVhc29uaW5nIHVzZWQgdG8gZGVyaXZlIHRoZSBhbnN3ZXIsCiAgICBpbmNsdWRpbmcgdGhlIGV2aWRlbmNlIGZyb20gdGhlIHBhc3NhZ2VzLCAgYXMgd2VsbCBhcyB5b3VyIGZpbmFsIGFuc3dlciBpbiB0aGUgYGFuc3dlcmAgZmllbGQuCgogICAgT25jZSB0aGUgY3JpdGljIGlzIHNhdGlzZmllZCwgc3VibWl0IHlvdXIgYW5zd2VyIHdpdGggdGhlIGBkYXRlX3JlY29nbml0aW9uYCB0b29sLCAgbWhaaw==)'
- en: 'This is the full prompt to the Critic agent:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 这是提供给Critic代理的完整提示：
- en: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYWxzbyBleHBlcmllbmNlZCBpbiBtZWRpY2FsIHJlYXNvbmluZywgYW5kIGhhdmUgZ2VuZXJhbCBtZWRpY2FsIGtub3dsZWRnZS4gIFVubGVzcyB0aGUgcmVzcG9uc2VzIGFyZSBpbmNvbnNpc3RlbnQgd2l0aCB5b3VyIG1lZGljYWwgKG9yIGNvbW1vbi1zZW5zZSkga25vd2xlZGdlLCB5b3UgZ2VuZXJhbGx5IHRydXN0IHJlc3BvbnNlcyBmcm9tIEZEQUhhbmRsZXIuICBTaW1pbGFybHksIHlvdSB0cnVzdCB0aGF0IHRoZSB1c2VyJ3Mgc3RhdGVtZW50cyBhYm91dCBwYXNzYWdlcyBhcmUgY29ycmVjdCB3aXRob3V0IHRoZSBuZWVkIHRvIHJldmlldyB0aGVtIGRpcmVjdGx5LgoKICAgIFRoZSBhbnN3ZXIgcHJvdmlkZWQgc2hvdWxkIGluZGljYXRlIGFuIGluY3JlYXNlLCBkZWNyZWFzZSwgb3Igbm8gZWZmZWN0IG9uIHRoZSByaXNrLCBhbmQgbXVzdCBiZSBubyBlZmZlY3QgaWYgbm8gZXZpZGVuY2UgbGlua2luZyB0aGUgZHJ1ZyBjYXRlZ29yeSB0byB0aGUgcmlzayBvZiB0aGUgY29uZGl0aW9uIGV4aXN0cy4KCiAgICBUaGUgYW5zd2VyIHNob3VsZCBiZSBkcmF3biBmcm9tIHRoZSBzcGVjaWZpZWQgcGFzc2FnZXMsIGhlbmNlLCB0aGUgYWJzZW5jZSBvZiBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIGEgY29uZGl0aW9uIGluIHRoZSBGREEgZGF0YSBmb3IgYWxsIGRydWdzIGluIGEgY2F0ZWdvcnkgc2hvdWxkIGJlIGVub3VnaCB0byBjb25jbHVkZSB0aGF0IHRoZXJlIGlzIG5vIGVmZmVjdCBmb3IgdGhhdCBkcnVnLgoKICAgIFRoZSBhbnN3ZXIgc2hvdWxkIGV4cHJlc3MgdGhlIGRlZ3JlZSBvZiBjZXJ0YWludHkgYW5kIHRoZSBtYWduaXR1ZGUgb2YgY2hhbmdlIGluIHJpc2ssIGVuc3VyZSB0aGF0IHRoZSBwcm92aWRlZCBhbnN3ZXIgaXMgY29uc2lzdGVudCB3aXRoIHRoZSBldmlkZW5jZS4=)You  are  also  experienced  in  medical  reasoning,  and  have  general  medical  knowledge.  Unless  the  responses  are  inconsistent  with  your  medical  (or  common-sense)  knowledge,  you  generally  trust  responses  from  FDAHandler.  Similarly,  you  trust  that  the  user’s  statements  about  passages  are  correct  without  the  need  to  review  them  directly.The  answer  provided  should  indicate  an  increase,  decrease,  or  no  effect  on  the  risk,  and  must  be  no  effect  if  no  evidence  linking  the  drug  category  to  the  risk  of  the  condition  exists.The  answer  should  be  drawn  from  the  specified  passages,  hence,  the  absence  of  information  related  to  a  condition  in  the  FDA  data  for  all  drugs  in  a  category  should  be  enough  to  conclude  that  there  is  no  effect  for  that  drug.The  answer  should  express  the  degree  of  certainty  and  the  magnitude  of  change  in  risk,  ensure  that  the  provided  answer  is  consistent  with  the  evidence.'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ICAgIFlvdSBhcmUgYWxzbyBleHBlcmllbmNlZCBpbiBtZWRpY2FsIHJlYXNvbmluZywgYW5kIGhhdmUgZ2VuZXJhbCBtZWRpY2FsIGtub3dsZWRnZS4gIFVubGVzcyB0aGUgcmVzcG9uc2VzIGFyZSBpbmNvbnNpc3RlbnQgd2l0aCB5b3VyIG1lZGljYWwgKG9yIGNvbW1vbi1zZW5zZSkga25vd2xlZGdlLCB5b3UgZ2VuZXJhbGx5IHRydXN0IHJlc3BvbnNlcyBmcm9tIEZEQUhhbmRsZXIuICBTaW1pbGFybHksIHlvdSB0cnVzdCB0aGF0IHRoZSB1c2VyJ3Mgc3RhdGVtZW50cyBhYm91dCBwYXNzYWdlcyBhcmUgY29ycmVjdCB3aXRob3V0IHRoZSBuZWVkIHRvIHJldmlldyB0aGVtIGRpcmVjdGx5LgoKICAgIFRoZSBhbnN3ZXIgcHJvdmlkZWQgc2hvdWxkIGluZGljYXRlIGFuIGluY3JlYXNlLCBkZWNyZWFzZSwgb3Igbm8gZWZmZWN0IG9uIHRoZSByaXNrLCBhbmQgbXVzdCBiZSBubyBlZmZlY3QgaWYgbm8gZXZpZGVuY2UgbGlua2luZyB0aGUgZHJ1ZyBjYXRlZ29yeSB0byB0aGUgcmlzayBvZiB0aGUgY29uZGl0aW9uIGV4aXN0cy4KCiAgICBUaGUgYW5zd2VyIHNob3VsZCBiZSBkcmF3biBmcm9tIHRoZSBzcGVjaWZpZWQgcGFzc2FnZXMsIGhlbmNlLCB0aGUgYWJzZW5jZSBvZiBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIGEgY29uZGl0aW9uIGluIHRoZSBGREEgZGF0YSBmb3IgYWxsIGRydWdzIGluIGEgY2F0ZWdvcnkgc2hvdWxkIGJlIGVub3VnaCB0byBjb25jbHVkZSB0aGF0IHRoZXJlIGlzIG5vIGVmZmVjdCBmb3IgdGhhdCBkcnVnLgoKICAgIFRoZSBhbnN3ZXIgc2hvdWxkIGV4cHJlc3MgdGhlIGRlZ3JlZSBvZiBjZXJ0YWludHkgYW5kIHRoZSBtYWduaXR1ZGUgb2YgY2hhbmdlIGluIHJpc2ssIGVuc3VyZSB0aGF0IHRoZSBwcm92aWRlZCBhbnN3ZXIgaXMgY29uc2lzdGVudCB3aXRoIHRoZSBldmlkZW5jZS4=)你也在医学推理方面有经验，并具备一般的医学知识。除非回答与您的医学（或常识）知识不一致，否则您通常会信任来自FDAHandler的回答。同样，您也会信任用户关于段落的陈述是正确的，而无需直接审查它们。提供的答案应该表明风险的增加、减少或无影响，如果没有证据表明药物类别与该病症的风险相关，答案应为“无影响”。答案应从指定的段落中得出，因此，如果FDA数据中所有药物类别的药物都没有与该病症相关的信息，足以得出该药物无影响的结论。答案应表达不确定性的程度和风险变化的幅度，并确保提供的答案与证据一致。'
- en: B.2 Probability-based scoring
  id: totrans-253
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.2 基于概率的评分
- en: 'In addition to the confidence-based scoring discussed in Section [5](https://arxiv.org/html/2408.01869v1#S5
    "5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), we consider probability-based scoring. In
    particular, we ask the model to specify the probability of an evant, specifically,
    the event that a drug in category $C$ causes or prevents $H$.'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 除了在第[5](https://arxiv.org/html/2408.01869v1#S5 "5 实验 ‣ MALADE：基于LLM的药物监测代理与检索增强生成的协调")节中讨论的基于信心的评分方法外，我们还考虑了基于概率的评分方法。特别是，我们要求模型指定某个事件的概率，具体来说，就是要求模型指定类别$C$中的药物是否会引起或预防$H$。
- en: '![Refer to caption](img/e2480aa376be80167b223abd057e899a.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![参考说明](img/e2480aa376be80167b223abd057e899a.png)'
- en: 'Figure 7: Derivation of ADE Scores from Event Probability. The x-axis represents
    the LLM’s output probability estimate, and the color indicates the mapping for
    the corresponding set of labels.'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 图7：从事件概率推导ADE分数。x轴表示LLM的输出概率估计，颜色表示相应标签集的映射。
- en: 'As in Section [5](https://arxiv.org/html/2408.01869v1#S5 "5 Experiments ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we must derive confidence scores in ADE and effects from the output probability
    estimate; as the probability is already in terms of the probability of any effect,
    either harmful or beneficial, we use the probability directly for Effect AUC.
    For ADE AUC, we use the tranformation shown in Figure [7](https://arxiv.org/html/2408.01869v1#A2.F7
    "Figure 7 ‣ B.2 Probability-based scoring ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance").'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 如在第[5](https://arxiv.org/html/2408.01869v1#S5 "5 实验 ‣ MALADE：使用检索增强生成的LLM驱动代理进行药物监测的编排")节中所述，我们必须从输出概率估计中推导出ADE和效应的置信度分数；由于概率已经表示为任何效应的概率，无论是有害还是有益，我们直接使用该概率来计算效应AUC。对于ADE
    AUC，我们使用图[7](https://arxiv.org/html/2408.01869v1#A2.F7 "图7 ‣ B.2 基于概率的评分 ‣ 附录B
    MALADE实施的详细描述 ‣ MALADE：使用检索增强生成的LLM驱动代理进行药物监测的编排")中所示的变换。
- en: We make the assumption that, if the LLM specifies a probability $p$ with a label
    other than “decrease,” that probability expresses the probability of a harmful
    effect. Hence, the derived score decreases linearly with increasing probability
    when the label is “decrease,” and increases linearly when the label is anything
    else. With this assumption, we additionally maintain the semantic ordering of
    the LLM’s implied confidence in ADE, and hence this is a well-defined confidence
    score.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设，如果LLM指定了一个概率$p$，并且标签不是“减少”，则该概率表示有害效应的概率。因此，当标签为“减少”时，推导出的分数随着概率的增加线性下降；而当标签是其他任何内容时，分数则线性增加。在这一假设下，我们还保持了LLM隐含的在ADE方面的置信度的语义顺序，因此这是一个明确定义的置信度分数。
- en: Model Metric Effect-based ADE-based GPT-4o AUC with confidence 0.8833 0.9034
    GPT-4o AUC with probability 0.6715 0.6534 GPT-4 Turbo AUC with confidence 0.8306
    0.8514 GPT-4 Turbo AUC with probability 0.8058 0.7935
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '模型度量 基于效应的 AUC 基于ADE的 AUC  '
- en: 'Table 5: Comparison of confidence and probability based scoring for MALADE.
    “Effect-based” captures the classification between the presence and the absence
    of any ADE, while “ADE-based” represent’s the ability of MALADE to distinguish
    drugs with increased risk from those with decreased risk or no effect.'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 表5：MALADE的置信度和概率基础评分的比较。“基于效应”捕捉了有害药物事件（ADE）的存在与否的分类，而“基于ADE”表示MALADE区分具有较高风险的药物与那些具有较低风险或没有效应的药物的能力。
- en: 'The results with probability-based scoring are shown in Table [5](https://arxiv.org/html/2408.01869v1#A2.T5
    "Table 5 ‣ B.2 Probability-based scoring ‣ Appendix B Detailed Descriptions on
    MALADE Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance"), we observe that the probabilities
    are less reliable (unsurprising as the FDA label data does not always contain
    the information necessary for a reliable estimate). See Appendix [D](https://arxiv.org/html/2408.01869v1#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance") for further discussion on the potential
    unreliability of the probability estimates.'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 基于概率评分的结果如表[5](https://arxiv.org/html/2408.01869v1#A2.T5 "表5 ‣ B.2 基于概率的评分 ‣
    附录B MALADE实施的详细描述 ‣ MALADE：使用检索增强生成的LLM驱动代理进行药物监测的编排")所示，我们观察到概率值的可靠性较低（这并不令人意外，因为FDA标签数据并不总是包含可靠估算所需的信息）。有关概率估算可能不可靠的进一步讨论，请参见附录[D](https://arxiv.org/html/2408.01869v1#A4
    "附录D 消融实验 ‣ MALADE：使用检索增强生成的LLM驱动代理进行药物监测的编排")。
- en: '| Drug Categories | ACE Inhibitors, Amphotericin B, Antibiotics (Erythromycin,
    Sulfonamide, Tetracycline), |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
  zh: '| 药物类别 | ACE抑制剂，安佛霉素B，抗生素（红霉素，磺胺类药物，四环素）， |'
- en: '| Antiepileptics (Carbamazepine, Phenytoin), Benzodiazepines, Beta blockers,
    |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| 抗癫痫药物（卡马西平，苯妥英），苯二氮䓬类药物，β-受体拮抗剂， |'
- en: '| Bisphosphonates (Alendronate), Tricyclic antidepressants, Typical antipsychotics,
    Warfarin |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| 双磷酸盐（阿仑膦酸钠），三环类抗抑郁药，典型抗精神病药物，华法林 |'
- en: '| Outcome | Angioedema, Aplastic anemia, Acute liver injury, Bleeding, Hip
    fracture, |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
  zh: '| 结果 | 血管性水肿、再生障碍性贫血、急性肝损伤、出血、髋部骨折、 |'
- en: '| Hospitalization, Myocardial infarction, Mortality after myocardial infarction,
    |'
  id: totrans-266
  prefs: []
  type: TYPE_TB
  zh: '| 住院、心肌梗死、心肌梗死后死亡率、 |'
- en: '| Renal failure, Gastrointestinal ulcer hospitalization |'
  id: totrans-267
  prefs: []
  type: TYPE_TB
  zh: '| 肾衰竭、胃肠道溃疡住院 |'
- en: 'Table 6: OMOP drug categories and conditions. Parenthesized lists contain the
    subcategories of the broad drug category considered.'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 表 6：OMOP 药物类别和相关病症。括号中的列表包含考虑的广泛药物类别的子类别。
- en: B.3 OMOP ADE task Details
  id: totrans-269
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.3 OMOP ADE 任务详细信息
- en: '![Refer to caption](img/92742c51dac195b93126c3dea9488a66.png)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![请参阅说明](img/92742c51dac195b93126c3dea9488a66.png)'
- en: 'Figure 8: OMOP ground truth.'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8：OMOP 真实数据。
- en: 'The ground truth for the OMOP ADE task is shown in Figure [8](https://arxiv.org/html/2408.01869v1#A2.F8
    "Figure 8 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE
    Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"). As noted in Section [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance"), while the OMOP ADE
    task permits only three output labels for the effect of a drug category on an
    outcome, some drug category, outcome pairs are considered uncertain (which we
    treat as a “no-effect” label which is not used in evaluation). In Figure [8](https://arxiv.org/html/2408.01869v1#A2.F8
    "Figure 8 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE
    Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance") the “No Effect” cells considered reliable are
    shown in blue, while the uncertain “no-effect” cells are those in white. In particular,
    the cells in white are not used in evaluation (i.e., for AUC computation, confusion
    matrices, and F1 scores). The cells used for evaluation are shown in red, blue,
    and green.'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 'OMOP ADE 任务的真实数据如图[8](https://arxiv.org/html/2408.01869v1#A2.F8 "Figure 8 ‣
    B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance")所示。如第[5.1](https://arxiv.org/html/2408.01869v1#S5.SS1 "5.1
    Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")节所述，虽然 OMOP ADE 任务仅允许三个输出标签来表示药物类别对结果的影响，但某些药物类别和结果对的影响被认为是不确定的（我们将其视为“无效”标签，且不用于评估）。在图[8](https://arxiv.org/html/2408.01869v1#A2.F8
    "Figure 8 ‣ B.3 OMOP ADE task Details ‣ Appendix B Detailed Descriptions on MALADE
    Implementation ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance")中，被认为可靠的“无效”单元格显示为蓝色，而不确定的“无效”单元格则为白色。特别地，白色单元格不用于评估（即，AUC
    计算、混淆矩阵和 F1 分数）。用于评估的单元格显示为红色、蓝色和绿色。'
- en: 'Table [7](https://arxiv.org/html/2408.01869v1#A2.T7 "Table 7 ‣ B.3 OMOP ADE
    task Details ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")
    present the representatives selected for each category of drugs, respectively,
    produced by GPT-4 Turbo.'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '表[7](https://arxiv.org/html/2408.01869v1#A2.T7 "Table 7 ‣ B.3 OMOP ADE task
    Details ‣ Appendix B Detailed Descriptions on MALADE Implementation ‣ MALADE:
    Orchestration of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")列出了由
    GPT-4 Turbo 生成的每个药物类别的代表性药物。'
- en: '| Drug or Drug Category | Representative Drug(s) |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
  zh: '| 药物或药物类别 | 代表性药物 |'
- en: '| --- | --- |'
  id: totrans-275
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| ACE Inhibitors | Lisinopril, Captopril, and Enalapril Maleate |'
  id: totrans-276
  prefs: []
  type: TYPE_TB
  zh: '| ACE 抑制剂 | 利辛普利、卡托普利、恩那普利美克 |'
- en: '| Amphotericin B | Ambisome, Amphotericin B, and Abelcet |'
  id: totrans-277
  prefs: []
  type: TYPE_TB
  zh: '| 两性霉素 B | 安必舒、两性霉素 B、阿贝尔塞特 |'
- en: '| Erythromycin | Erythromycin, Erythromycin Ethylsuccinate, and Erythromycin
    |'
  id: totrans-278
  prefs: []
  type: TYPE_TB
  zh: '| 红霉素类药物 | 红霉素、红霉素乙酰琥珀酸盐、红霉素 |'
- en: '| Sulfonamides | Silver Sulfadiazine, Bactrim, and Sulfadiazine |'
  id: totrans-279
  prefs: []
  type: TYPE_TB
  zh: '| 磺胺类药物 | 硫酸银磺胺嘧啶、百服宁、磺胺嘧啶 |'
- en: '| Tetracyclines | Doxycycline Hyclate, Tigecycline, and Minocycline |'
  id: totrans-280
  prefs: []
  type: TYPE_TB
  zh: '| 四环素类药物 | 多西环素盐酸盐、替加环素、米诺环素 |'
- en: '| Carbamazepine | Carbamazepine |'
  id: totrans-281
  prefs: []
  type: TYPE_TB
  zh: '| 卡马西平 | 卡马西平 |'
- en: '| Phenytoin | Phenytoin Sodium, Phenytoin, and Extended Phenytoin Sodium |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
  zh: '| 苯妥英钠 | 苯妥英钠、苯妥英、延长释苯妥英钠 |'
- en: '| Benzodiazepines | Lorazepam, Diazepam, and Clonazepam |'
  id: totrans-283
  prefs: []
  type: TYPE_TB
  zh: '| 苯二氮卓类药物 | 洛拉西泮、地西泮、克洛硝西泮 |'
- en: '| Beta Blockers | Metoprolol Tartrate, Labetalol, and Atenolol |'
  id: totrans-284
  prefs: []
  type: TYPE_TB
  zh: '| β-受体阻滞剂 | 美托洛尔酒石酸盐、拉贝洛尔、阿莫洛尔 |'
- en: '| Alendronate | Alendronate Sodium and Alendronate |'
  id: totrans-285
  prefs: []
  type: TYPE_TB
  zh: '| 阿仑膦酸钠 | 阿仑膦酸钠、阿仑膦酸 |'
- en: '| Tricyclics | Doxepin HCL, Desipramine, and Amitriptyline HCL |'
  id: totrans-286
  prefs: []
  type: TYPE_TB
  zh: '| 三环类药物 | 多塞平 HCL、去甲替普咪、阿米替林 HCL |'
- en: '| Typical Antipsychotics | Haloperidol, Thiothixene, and Pimozide |'
  id: totrans-287
  prefs: []
  type: TYPE_TB
  zh: '| 典型抗精神病药 | 氯丙嗪、噻噻氯、匹莫齐德 |'
- en: '| Warfarin | Warfarin |'
  id: totrans-288
  prefs: []
  type: TYPE_TB
  zh: '| 华法林 | 华法林 |'
- en: 'Table 7: Drug Representatives selected for each OMOP category (or subcategory).'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 表 7：为每个OMOP类别（或子类别）选择的药物代表。
- en: B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo
  id: totrans-290
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.4 GPT-4 Turbo的标签后处理有效性
- en: 'In this subsection, we illustrate that the postprocessing of labels in Section [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1
    "5.1 Evaluation Setup ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance") significantly improves
    the accuracy of ADE identification by MALADE instantiated with GPT-4 Turbo.'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 在本小节中，我们展示了[5.1](https://arxiv.org/html/2408.01869v1#S5.SS1 "5.1 评估设置 ‣ 5 实验
    ‣ MALADE：结合检索增强生成的LLM驱动代理在药物警戒中的协调")节中标签后处理显著提高了使用GPT-4 Turbo实例化的MALADE在ADE识别中的准确性。
- en: We take an additional postprocessing step to further enhance the quality of
    the assigned labels, replacing unreliable predictions with “no-effect,” unless
    stated otherwise. Specifically, we consider outputs for which the LLM reported
    weak evidence and rare incidences of effects as unreliable. Additionally, we deem
    outputs for which the LLM selected small round numbers for the probability (i.e., 0.1
    and 0.01) as unreliable, as such values are often chosen in the absence of strong
    evidence, resembling typical human preferences for round numbers. We apply this
    postprocessing except in the case of AUC, as uncertainty should be reflected directly
    in the confidence scores.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 我们采取了额外的后处理步骤，进一步提高分配标签的质量，将不可靠的预测结果替换为“无效”，除非另有说明。具体来说，我们认为LLM报告的证据较弱且效果发生较少的输出为不可靠。此外，我们认为LLM选择的概率值为小的圆整数字（即0.1和0.01）为不可靠，因为这些值通常是在缺乏强有力证据的情况下选择的，类似于人类对圆整数字的偏好。除AUC外，我们应用此后处理步骤，因为不确定性应直接反映在置信度分数中。
- en: 'We obtain an effect-based F1 score of 0.5294 without postprocessing, and 0.6087
    with postprocessing. We obtain an ADE-based F1 score of 0.4828 without postprocessing,
    and 0.5556 with postprocessing. Figures [9](https://arxiv.org/html/2408.01869v1#A2.F9
    "Figure 9 ‣ B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance") and [9](https://arxiv.org/html/2408.01869v1#A2.F9
    "Figure 9 ‣ B.4 Effectiveness of Label Postprocessing with GPT-4 Turbo ‣ Appendix
    B Detailed Descriptions on MALADE Implementation ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance") show the confusion
    matrices and predictions, respectively, of MALADE without postprocessing on GPT-4
    Turbo (compared to the results in Section [5.2](https://arxiv.org/html/2408.01869v1#S5.SS2
    "5.2 RQ1: MALADE effectively identifies ADEs ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")).'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: '我们在没有后处理的情况下获得了基于效果的F1分数为0.5294，经过后处理后为0.6087；在没有后处理的情况下，我们获得了基于ADE的F1分数为0.4828，经过后处理后为0.5556。图[9](https://arxiv.org/html/2408.01869v1#A2.F9
    "图 9 ‣ B.4 GPT-4 Turbo的标签后处理有效性 ‣ 附录B MALADE实现的详细描述 ‣ MALADE：结合检索增强生成的LLM驱动代理在药物警戒中的协调")和[9](https://arxiv.org/html/2408.01869v1#A2.F9
    "图 9 ‣ B.4 GPT-4 Turbo的标签后处理有效性 ‣ 附录B MALADE实现的详细描述 ‣ MALADE：结合检索增强生成的LLM驱动代理在药物警戒中的协调")分别展示了MALADE在GPT-4
    Turbo上没有后处理的混淆矩阵和预测结果（与[5.2](https://arxiv.org/html/2408.01869v1#S5.SS2 "5.2 RQ1:
    MALADE有效识别ADE ‣ 5 实验 ‣ MALADE：结合检索增强生成的LLM驱动代理在药物警戒中的协调")节中的结果进行对比）。'
- en: '![Refer to caption](img/cc4277ec25d925f049d28574d7e0250b.png)'
  id: totrans-294
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/cc4277ec25d925f049d28574d7e0250b.png)'
- en: ((a))
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/a30b7058389fe7590f2be44aa02a50cd.png)'
  id: totrans-296
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/a30b7058389fe7590f2be44aa02a50cd.png)'
- en: ((b))
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 9: Results with GPT-4 Turbo, without postprocessing.'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9：在没有后处理的情况下，使用GPT-4 Turbo的结果。
- en: '![Refer to caption](img/3ef4cba980269c86cc3ca0a45932d1f8.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/3ef4cba980269c86cc3ca0a45932d1f8.png)'
- en: 'Figure 10: Predictions of MALADE run on GPT-4o.'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10：在GPT-4o上运行的MALADE的预测结果。
- en: '![Refer to caption](img/a3f0f45986ca137e275d9f60c694f104.png)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/a3f0f45986ca137e275d9f60c694f104.png)'
- en: ((a))
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/e1a4d576f5728fbcfb57122680d8ed9a.png)'
  id: totrans-303
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/e1a4d576f5728fbcfb57122680d8ed9a.png)'
- en: ((b))
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 11: ROC curves for MALADE on OMOP'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11：MALADE在OMOP上的ROC曲线
- en: '![Refer to caption](img/d7e4df83bff5ffa32d69d23941ff8275.png)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/d7e4df83bff5ffa32d69d23941ff8275.png)'
- en: ((a))
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: ((a))
- en: '![Refer to caption](img/7170a22e5a53cb3f8dd8a6fa085254c9.png)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明](img/7170a22e5a53cb3f8dd8a6fa085254c9.png)'
- en: ((b))
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: ((b))
- en: 'Figure 12: Sensitivity vs. specificity curves for MALADE on OMOP'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12：MALADE 在 OMOP 上的敏感性与特异性曲线
- en: B.5 Discussion of Justifications Produced by DrugFinder
  id: totrans-311
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: B.5 DrugFinder 产生的正当性讨论
- en: 'As in Section [5.4](https://arxiv.org/html/2408.01869v1#S5.SS4 "5.4 RQ3: MALADE
    provides justifications that are aligned with human expert reasoning, and help
    understand its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"), we extract
    the justifications produced by DrugFinder in a run of MALADE for review by a clinician.
    The most common flaw in its reasoning is that DrugFinder frequently fails to recognize
    OMOP categories which consist of a single drug; beyond that, the agent’s justifications
    are generally correct, with only one significant other error occurring.'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '如同在第[5.4节](https://arxiv.org/html/2408.01869v1#S5.SS4 "5.4 RQ3: MALADE provides
    justifications that are aligned with human expert reasoning, and help understand
    its failure modes ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance")中一样，我们提取了 DrugFinder
    在运行 MALADE 时产生的正当性，以供临床医生审查。它推理中最常见的缺陷是，DrugFinder 经常未能识别由单一药物组成的 OMOP 类别；除此之外，代理的正当性通常是正确的，只有一个显著的其他错误发生。'
- en: This error isn’t directly caused by DrugFinder, but, rather, was a result of
    our OpenFDA retrieval process failing to identify certain common typical antipsychotics,
    for example, fluphenazine is labeled as a phenothiazine in the National Drug Code
    DB but not as a typical antipsychotic; hence a more robust search, taking subcategories
    into account, for drugs in a category is needed.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 这个错误并不是直接由 DrugFinder 引起的，而是由于我们的 OpenFDA 检索过程未能识别某些常见的典型抗精神病药物。例如，氟苯噻吨在国家药品编码数据库中被标记为一种酚噻嗪类药物，但不是典型的抗精神病药物；因此，需要一个更强大的搜索，考虑子类别，以便对某一类别中的药物进行检索。
- en: 'Appendix C Detailed behavior of MALADE: Successful and Failed Behavior'
  id: totrans-314
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 C MALADE 的详细行为：成功与失败行为
- en: C.1 Successful Behavior
  id: totrans-315
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.1 成功行为
- en: For an example of a successful run of MALADE, consider the effect of ACE inhibitors
    on agioedema. As we will see, DrugAgent will retrieve the reports of ADEs from
    the FDA labels, and CategoryAgent will conclude that they are strong evidence
    for increased risk.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 以 ACE 抑制剂对血管性水肿的影响为例，考虑 MALADE 的一次成功运行。如我们所见，DrugAgent 会从 FDA 标签中检索 ADE 报告，CategoryAgent
    会得出它们是增加风险的有力证据。
- en: 3.1 DrugAgent Step
  id: totrans-317
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1 DrugAgent 步骤
- en: This step will be run three times, for each of the representative drugs (Lisinopril,
    Captopril, and Enalapril Maleate). We’ll show the results for Lisinopril.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 这一步骤将对每个代表性药物（如 Lisinopril、Captopril 和 Enalapril Maleate）运行三次。我们将展示 Lisinopril
    的结果。
- en: The original question to DrugAgent is “Does LISINOPRIL increase or decrease
    the risk of angioedema?”
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 对 DrugAgent 的原始问题是：“LISINOPRIL 是否增加或减少血管性水肿的风险？”
- en: 'As DrugAgent requires evidence from the drug labels to answer the question,
    the agent immediately asks FDAHandler, specifying it as the recipient of the message
    using a tool call, as follows:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 DrugAgent 需要来自药物标签的证据来回答问题，因此该代理立即通过工具调用向 FDAHandler 请求，指定其为接收者，如下所示：
- en: FUNC: {  "name": "relevant_extracts",  "to": "",  "arguments": {    "query": "Does LISINOPRIL increase the risk of angioedema?",    "filter_drugs": [      "Lisinopril"    ]  }}
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "relevant_extracts", "to": "", "arguments": { "query": "LISINOPRIL
    是否增加血管性水肿的风险？", "filter_drugs": [ "Lisinopril" ] }}'
- en: 'The agent searches its vector DB for relevant passages from the drug’s label,
    using another tool call:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 该代理通过搜索其向量数据库中的相关段落，使用另一个工具调用药物标签信息：
- en: FUNC: {  "name": "relevant_extracts",  "to": "",  "arguments": {    "query": "Does LISINOPRIL increase the risk of angioedema?",    "filter_drugs": [      "Lisinopril"    ]  }}
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "relevant_extracts", "to": "", "arguments": { "query": "LISINOPRIL
    是否增加血管性水肿的风险？", "filter_drugs": [ "Lisinopril" ] }}'
- en: 'A large number of passages are retrieved, including:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 检索到大量段落，包括：
- en: 'LISINOPRIL: warnings: WARNINGS General Lisinopril Anaphylactoid and Possibly Related Reactions: Presumably because angiotensin-converting enzyme inhibitors affect the metabolism of eicosanoids and polypeptides, including endogenous bradykinin, patients receiving ACE inhibitors (including lisinopril and hydrochlorothiazide tablets) may be subject to a variety of adverse reactions, some of them serious. Head and Neck Angioedema: Angioedema of the face, extremities, lips, tongue, glottis and/or larynx has been reported rarely in patients treated with angiotensin converting enzyme inhibitors, including lisinopril. ACE inhibitors have been associated with a higher rate of angioedema in Black than in non-Black patients.with
    which FDAHandler produces its answer, stating that it is done:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: LISINOPRIL：警告：警告 一般Lisinopril过敏反应和可能相关的反应：由于血管紧张素转化酶抑制剂可能影响前列腺素和多肽的代谢，包括内源性缓激肽，因此接受ACE抑制剂（包括Lisinopril和氯噻吨片）治疗的患者可能会遭遇各种不良反应，其中一些可能是严重的。头部和颈部血管性水肿：面部、四肢、嘴唇、舌头、喉头和/或喉部的血管性水肿在接受血管紧张素转化酶抑制剂治疗的患者中较为少见，包括Lisinopril。ACE抑制剂在黑人患者中的血管性水肿发生率高于非黑人患者。FDAHandler基于此给出答案，表明已完成：
- en: <DONE>ANSWER: Yes, LISINOPRIL has been associated with an increased risk of angioedema. Angioedema of the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL.  This can occur at any time during treatment. The incidence of angioedema is higher in Black patients compared to non-Black patients. In very rare cases, fatalities have been reported due to angioedema associated with laryngeal edema or tongue edema. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor.  Intestinal angioedema has also been reported in patients treated with ACE inhibitors, presenting with abdominal pain, with or without nausea or vomiting.SOURCE: LISINOPRIL labelEXTRACT_START_END: Head and Neck Angioedema: Angioedema of the face...associated with laryngeal edema or tongue edema.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: <DONE>回答：是的，LISINOPRIL（赖诺普利）已被与增加的血管性水肿风险相关联。面部、四肢、嘴唇、舌头、喉头和/或喉部的血管性水肿在接受血管紧张素转化酶抑制剂治疗的患者中较为少见，其中包括LISINOPRIL。此类反应可能在治疗的任何时候发生。血管性水肿在黑人患者中的发生率高于非黑人患者。在极为罕见的情况下，因与喉部水肿或舌头水肿相关的血管性水肿而导致的死亡案例有所报道。有血管性水肿病史的患者，在接受ACE抑制剂治疗时可能面临更高的血管性水肿风险。肠道血管性水肿也已在接受ACE抑制剂治疗的患者中报告，症状包括腹痛，伴或不伴有恶心或呕吐。来源：LISINOPRIL标签摘录_开始_结束：头部和颈部血管性水肿：面部血管性水肿...与喉部水肿或舌部水肿相关联。
- en: 'DrugAgent expresses its reasoning in structured form, which is sent to the
    Critic:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 药物代理根据结构化形式表达其推理，并将其发送给批评者：
- en: FUNC: {  "name": "final_answer",  "to": "",  "arguments": {    "question": "Does LISINOPRIL increase or decrease the risk of angioedema?",    "steps": [      "I asked FDAHandler if LISINOPRIL increases the risk of angioedema.",      "FDAHandler confirmed that LISINOPRIL has been associated with      an increased risk of angioedema. Angioedema involving the face,      extremities, lips, tongue, glottis, and/or larynx has been      reported rarely in patients treated with angiotensin-converting      enzyme inhibitors, including LISINOPRIL. The incidence is higher      in Black patients compared to non-Black patients, and very rare      cases have resulted in fatalities. Patients with a history of      angioedema unrelated to ACE-inhibitor therapy may be at      increased risk of angioedema while receiving an ACE      inhibitor. Intestinal angioedema has also been reported rarely."    ],    "answer": "LISINOPRIL increases the risk of angioedema."  }}
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: '功能：{ "name": "final_answer", "to": "", "arguments": { "question": "LISINOPRIL是否增加或减少血管性水肿的风险？",
    "steps": [ "我询问了FDAHandler是否LISINOPRIL增加血管性水肿的风险。", "FDAHandler确认LISINOPRIL已被与增加的血管性水肿风险相关联。面部、四肢、嘴唇、舌头、喉头和/或喉部的血管性水肿在接受血管紧张素转化酶抑制剂治疗的患者中较为少见，包括LISINOPRIL。血管性水肿在黑人患者中的发生率高于非黑人患者，且极为罕见的案例已导致死亡。有血管性水肿病史的患者，在接受ACE抑制剂治疗时可能面临更高的血管性水肿风险。肠道血管性水肿在接受ACE抑制剂治疗的患者中也已报告。"],
    "answer": "LISINOPRIL增加血管性水肿的风险。" }}'
- en: This is processed into natural language form before being forwarded to the LLM.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 这在转发给LLM之前已经处理成自然语言形式。
- en: Question: Does LISINOPRIL increase or decrease the risk of angioedema?        -----        Reasoning:1. I asked FDAHandler if LISINOPRIL increases the risk of angioedema.2. FDAHandler confirmed that LISINOPRIL has been associated with an increased risk of angioedema. Angioedema involving the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL. The incidence is higher in Black patients compared to non-Black patients, and very rare cases have resulted in fatalities. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor. Intestinal angioedema has also been reported rarely.        -----        Final answer: LISINOPRIL increases the risk of angioedema.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：利辛普利是否增加或减少血管性水肿的风险？ ----- 推理：1. 我询问了FDAHandler，利辛普利是否增加血管性水肿的风险。2. FDAHandler确认利辛普利与血管性水肿的风险增加有关。面部、四肢、嘴唇、舌头、喉头和/或喉部的血管性水肿在使用血管紧张素转化酶抑制剂治疗的患者中较为罕见，且黑患者的发生率高于非黑患者，极少数病例导致死亡。具有与ACE抑制剂治疗无关的血管性水肿病史的患者在接受ACE抑制剂治疗时可能面临更高的血管性水肿风险。肠道血管性水肿也有极少数病例报道。
    ----- 最终答案：利辛普利增加血管性水肿的风险。
- en: 'The Critic has no feedback (which indicates acceptance):'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 批评者没有反馈（这表示接受）：
- en: FUNC: {  "name": "feedback",  "to": "",  "arguments": {    "critique": "" }}
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "feedback", "to": "", "arguments": { "critique": "" }}'
- en: 'As with the structured description of the reasoning steps, this is processed
    into natural language:'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 与推理步骤的结构化描述一样，这将被处理成自然语言：
- en: Your reasoning is valid, no feedback was provided.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 你的推理是有效的，没有提供反馈。
- en: From here on, we will show only the natural language form for these steps. The
    agent then outputs its answer to the original question, with the additional context
    from FDAHandler.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里开始，我们将只展示这些步骤的自然语言形式。然后，代理人输出其对原始问题的回答，并附上FDAHandler的附加上下文。
- en: <DONE>LISINOPRIL increases the risk of angioedema. This has been confirmed by FDAHandler, who referenced the LISINOPRIL label indicating that angioedema of the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL. The incidence of angioedema is higher in Black patients compared to non-Black patients, and in very rare cases, fatalities have been reported due to angioedema associated with laryngeal edema or tongue edema. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor. Intestinal angioedema has also been reported rarely in patients treated with ACE inhibitors.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: <DONE>利辛普利（LISINOPRIL）增加了血管性水肿的风险。这一点已由FDAHandler确认，并引用了利辛普利的标签，表明在使用血管紧张素转化酶抑制剂治疗的患者中，面部、四肢、嘴唇、舌头、喉头和/或喉部的血管性水肿较为罕见。与非黑患者相比，黑患者发生血管性水肿的几率更高，在极少数情况下，因喉水肿或舌头水肿导致的血管性水肿发生致命性事件。具有与ACE抑制剂治疗无关的血管性水肿病史的患者在接受ACE抑制剂治疗时可能面临更高的血管性水肿风险。也有极少数病例报道在使用ACE抑制剂治疗的患者中出现肠道血管性水肿。
- en: 3.2 CategoryAgent Step
  id: totrans-337
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2 类别代理步骤
- en: 'Together with the query “Does the angiotensin converting enzyme inhibitor category
    of drugs increase the risk of angioedema, decrease it, or is there no clear effect?”
    the agent is provided with the information from the outputs from the last step,
    for each of the three drugs, as follows:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 在查询“血管紧张素转化酶抑制剂类药物是否增加或减少血管性水肿的风险，还是没有明显影响？”的同时，代理人会根据最后一步的输出信息提供每种药物的相关信息，具体如下：
- en: Passages:                1. Drug LISINOPRIL: LISINOPRIL increases the risk of angioedema. This has been confirmed by FDAHandler, who referenced the LISINOPRIL label indicating that angioedema of the face, extremities, lips, tongue, glottis, and/or larynx has been reported rarely in patients treated with angiotensin-converting enzyme inhibitors, including LISINOPRIL. The incidence of angioedema is higher in Black patients compared to non-Black patients, and in very rare cases, fatalities have been reported due to angioedema associated with laryngeal edema or tongue edema. Patients with a history of angioedema unrelated to ACE-inhibitor therapy may be at increased risk of angioedema while receiving an ACE inhibitor. Intestinal angioedema has also been reported rarely in patients treated with ACE inhibitors.2. Drug CAPTOPRIL: CAPTOPRIL increases the risk of angioedema. This has been reported in approximately one in 1000 patients, and can involve various parts of the body including extremities, face, lips, mucous membranes, tongue, glottis, or larynx. Fatal airway obstruction has occurred in some cases, and the risk is higher in black patients compared to non-black patients.3. Drug ENALAPRIL MALEATE: The final answer to the question "Does ENALAPRIL MALEATE increase or decrease the risk of angioedema?" is that ENALAPRIL MALEATE increases the risk of angioedema. This information is based on the response from FDAHandler, which referenced the ENALAPRIL MALEATE label indicating that angioedema has been reported in patients receiving the drug. The incidence is higher in black patients compared to non-black patients, and angioedema associated with laryngeal edema can be fatal. If angioedema occurs, treatment with ENALAPRIL MALEATE should be discontinued and appropriate therapy instituted immediately.                ---------                Does the angiotensin converting enzyme inhibitor category of drugs increase the risk of angioedema, decrease it, or is there no clear effect?
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 片段：                1. 药物LISINOPRIL：LISINOPRIL增加血管性水肿的风险。这一点已被FDAHandler确认，该机构引用了LISINOPRIL标签，指出在接受血管紧张素转换酶抑制剂（包括LISINOPRIL）治疗的患者中，面部、四肢、嘴唇、舌头、喉头和/或喉部的血管性水肿报告较为罕见。与非黑人患者相比，黑人患者发生血管性水肿的发生率较高，且在极少数情况下，由于与喉部水肿或舌头水肿相关的血管性水肿，曾有致命病例发生。具有与ACE抑制剂治疗无关的血管性水肿历史的患者，在接受ACE抑制剂治疗时可能面临更高的血管性水肿风险。也有报告指出，接受ACE抑制剂治疗的患者中，肠道血管性水肿的发生也非常罕见。2. 药物CAPTOPRIL：CAPTOPRIL增加血管性水肿的风险。大约每千名患者中就有一人报告此类风险，可能涉及身体的多个部位，包括四肢、面部、嘴唇、粘膜、舌头、喉头或喉部。某些病例中发生了致命的气道阻塞，且黑人患者的风险高于非黑人患者。3. 药物ENALAPRIL
    MALEATE：问题“ENALAPRIL MALEATE是否增加或减少血管性水肿的风险？”的最终答案是ENALAPRIL MALEATE增加血管性水肿的风险。此信息来自FDAHandler的回应，引用了ENALAPRIL
    MALEATE标签，指出在接受该药物治疗的患者中有报告发生血管性水肿。黑人患者的发生率高于非黑人患者，且与喉头水肿相关的血管性水肿可能是致命的。如果发生血管性水肿，应立即停用ENALAPRIL
    MALEATE并进行适当的治疗。                ---------                血管紧张素转换酶抑制剂类别的药物是否增加血管性水肿的风险，降低其风险，还是没有明确的效果？
- en: 'CategoryAgent immediately concludes that ACE inhibitors increase the risk of
    angioedema, and sends its reasoning to the Critic:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: CategoryAgent立即得出结论，ACE抑制剂会增加血管性水肿的风险，并将其推理发送给Critic：
- en: Question: Does the angiotensin converting enzyme inhibitor category of drugs increase the risk of angioedema, decrease it, or is there no clear effect?        -----        Reasoning:        1. All three passages provided indicate that the respective angiotensin converting enzyme inhibitors (LISINOPRIL, CAPTOPRIL, and ENALAPRIL MALEATE) increase the risk of angioedema.2. Passage 1 states that LISINOPRIL increases the risk of angioedema, with rare reports of angioedema in patients treated with ACE inhibitors, including LISINOPRIL.3. Passage 2 indicates that CAPTOPRIL increases the risk of angioedema, with an incidence reported in approximately one in 1000 patients.4. Passage 3 confirms that ENALAPRIL MALEATE increases the risk of angioedema, as reported in patients receiving the drug.5. The increased risk of angioedema is consistent across all three drugs mentioned, which are part of the angiotensin converting enzyme inhibitor category.6. The evidence is strong as it is based on drug labels and FDAHandler references, which are authoritative sources.        -----        Final answer: The angiotensin converting enzyme inhibitor category of drugs increases the risk of angioedema.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '问题：血管紧张素转化酶抑制剂类别的药物是增加血管性水肿的风险、降低其风险，还是没有明显的效果？  '
- en: 'The critic approves:'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 评论者批准：
- en: Feedback: The reasoning provided is sound and consistent with medical knowledge. Angiotensin converting enzyme inhibitors are known to increase the risk of angioedema. The user has correctly identified that all three passages from the FDA data indicate an increased risk of angioedema with the use of LISINOPRIL, CAPTOPRIL, and ENALAPRIL MALEATE, which are all ACE inhibitors. The conclusion that the ACE inhibitor category of drugs increases the risk of angioedema is supported by the evidence provided and is in line with established medical understanding.        If any flaws in the reasoning used to produce your answer were identified, you must try again.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈：提供的推理合理且与医学知识一致。已知血管紧张素转化酶抑制剂会增加血管性水肿的风险。用户正确识别出FDA数据中的所有三段文字都表明使用**赖诺普利**、**卡托普利**和**厄贝沙坦**（均为ACE抑制剂）会增加血管性水肿的风险。得出的结论是，ACE抑制剂类别的药物增加血管性水肿的风险，这一结论得到了提供的证据支持，并符合已建立的医学理解。如果发现用于得出答案的推理有任何缺陷，您必须重新尝试。
- en: 'And the agent outputs “increase” with very high confidence:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 并且代理以非常高的置信度输出“增加”：
- en: FUNC: {  "name": "category_effect_tool",  "to": "",  "arguments": {    "label": "increase",    "confidence": 1,    "probability": 0.001,    "frequency": "rare",    "evidence": "strong",    "justification": "The evidence from FDAHandler and drug labels for LISINOPRIL, CAPTOPRIL, and ENALAPRIL MALEATE consistently reports an increased risk of angioedema with the use of these ACE inhibitors. The incidence of angioedema is reported as rare, with occurrences such as one in 1000 patients for CAPTOPRIL. The evidence is considered strong due to the authoritative nature of the sources."  }}
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "category_effect_tool", "to": "", "arguments": { "label": "increase",
    "confidence": 1, "probability": 0.001, "frequency": "rare", "evidence": "strong",
    "justification": "来自FDAHandler和药品标签的证据一致报告使用**赖诺普利**、**卡托普利**和**厄贝沙坦**这些ACE抑制剂会增加血管性水肿的风险。血管性水肿的发生率稀少，例如**卡托普利**约为1/1000患者。由于来源的权威性，证据被认为是强大的。"
    }}'
- en: 3.3 CategoryAgent and Critic
  id: totrans-346
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3 类别代理和评论者
- en: Here we present the full prompt of interactions between CategoryAgent and Critic,
    given the task of identifying the association between “benzodiazepine” and “hip
    fracture”.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我们呈现了**类别代理**和**评论者**之间的完整交互提示，任务是识别“苯二氮卓类”与“髋部骨折”之间的关联。
- en: 'At round 1, the output from CategoryAgent:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 第一轮，类别代理的输出：
- en: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZGVjcmVhc2UgaXQsCm9yIGlzIHRoZXJlIG5vIGNsZWFyIGVmZmVjdD8KLS0tLS0KUmVhc29uaW5nOgoxLiBUaGUgRkRBIGxhYmVsIGZvciBMb3JhemVwYW0gZG9lcyBub3Qgc3BlY2lmeSBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgoyLiBUaGUgRkRBIGxhYmVsIGRhdGEgZm9yIERpYXplcGFtIGRvZXMgbm90IHByb3ZpZGUgaW5mb3JtYXRpb24gb24gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgozLiBUaGUgRkRBIGxhYmVsIGZvciBDbG9uYXplcGFtIG1lbnRpb25zICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCBidXQKZG9lcyBub3QgZXN0YWJsaXNoIGEgY2F1c2FsIHJlbGF0aW9uc2hpcCB3aXRoIGhpcCBmcmFjdHVyZXMgb3IgcHJvdmlkZSBzcGVjaWZpYyBkYXRhIG9uIGhpcCBmcmFjdHVyZSByaXNrLgo0LiBTaW5jZSBub25lIG9mIHRoZSBwcm92aWRlZCBwYXNzYWdlcyBvZmZlciBjb25jbHVzaXZlIGV2aWRlbmNlIHJlZ2FyZGluZyB0aGUgZWZmZWN0IG9mIGJlbnpvZGlhemVwaW5lcwpvbiB0aGUgcmlzayBvZiBoaXAgZnJhY3R1cmUsIHdlIGNhbm5vdCBkZXRlcm1pbmUgaWYgdGhlIGNhdGVnb3J5IGFzIGEgd2hvbGUgaGFzIGEgY2xlYXIgZWZmZWN0Cm9uIGhpcCBmcmFjdHVyZSByaXNrLgotLS0tLQpGaW5hbCBhbnN3ZXI6IFRoZXJlIGlzIG5vIGNsZWFyIGVmZmVjdCBvZiB0aGUgYmVuem9kaWF6ZXBpbmUgY2F0ZWdvcnkgb2YgZHJ1Z3Mgb24gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlCmJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXNzYWdlcy4=)Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information  on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  butdoes  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Since  none  of  the  provided  passages  offer  conclusive  evidence  regarding  the  effect  of  benzodiazepineson  the  risk  of  hip  fracture,  we  cannot  determine  if  the  category  as  a  whole  has  a  clear  effecton  hip  fracture  risk.-----Final  answer:  There  is  no  clear  effect  of  the  benzodiazepine  category  of  drugs  on  the  risk  of  hip  fracturebased  on  the  provided  passages.'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZGVjcmVhc2UgaXQsCm9yIGlzIHRoZXJlIG5vIGNsZWFyIGVmZmVjdD8KLS0tLS0KUmVhc29uaW5nOgoxLiBUaGUgRkRBIGxhYmVsIGZvciBMb3JhemVwYW0gZG9lcyBub3Qgc3BlY2lmeSBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgoyLiBUaGUgRkRBIGxhYmVsIGRhdGEgZm9yIERpYXplcGFtIGRvZXMgbm90IHByb3ZpZGUgaW5mb3JtYXRpb24gb24gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgozLiBUaGUgRkRBIGxhYmVsIGZvciBDbG9uYXplcGFtIG1lbnRpb25zICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCBidXQKZG9lcyBub3QgZXN0YWJsaXNoIGEgY2F1c2FsIHJlbGF0aW9uc2hpcCB3aXRoIGhpcCBmcmFjdHVyZXMgb3IgcHJvdmlkZSBzcGVjaWZpYyBkYXRhIG9uIGhpcCBmcmFjdHVyZSByaXNrLgo0LiBTaW5jZSBub25lIG9mIHRoZSBwcm92aWRlZCBwYXNzYWdlcyBvZmZlciBjb25jbHVzaXZlIGV2aWRlbmNlIHJlZ2FyZGluZyB0aGUgZWZmZWN0IG9mIGJlbnpvZGlhemVwaW5lcwpvbiB0aGUgcmlzayBvZiBoaXAgZnJhY3R1cmUsIHdlIGNhbm5vdCBkZXRlcm1pbmUgaWYgdGhlIGNhdGVnb3J5IGFzIGEgd2hvbGUgaGFzIGEgY2xlYXIgZWZmZWN0Cm9uIGhpcCBmcmFjdHVyZSByaXNrLgotLS0tLQpGaW5hbCBhbnN3ZXI6IFRoZXJlIGlzIG5vIGNsZWFyIGVmZmVjdCBvZiB0aGUgYmVuen9kaWF6ZXBpbmUgY2F0ZWdvcnkgb2YgZHJ1Z3Mgb24gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlCmJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXNzYWdlcy4=)问题：苯二氮卓类药物是否增加髋部骨折风险、降低其风险，或是否没有明显影响？-----推理过程：1.
    洛拉西泮的FDA标签未明确说明有关髋部骨折风险的信息。2. 地西泮的FDA标签未提供有关髋部骨折风险的信息。3. 克隆氮平的FDA标签提到“创伤性骨折”作为一种不常见的不良事件，但未建立与髋部骨折的因果关系，也未提供关于髋部骨折风险的具体数据。4.
    由于提供的段落没有提供明确的证据来证明苯二氮卓类药物对髋部骨折风险的影响，因此我们无法确定该类药物作为整体是否对髋部骨折风险有明确的影响。-----最终答案：根据提供的段落，苯二氮卓类药物对髋部骨折风险没有明显影响。'
- en: 'Feedback by Critic:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 批评者反馈：
- en: '[⬇](data:text/plain;base64,VGhlIHJlYXNvbmluZyBwcm92aWRlZCBpcyBmbGF3ZWQuIFdoaWxlIGl0IGlzIGNvcnJlY3QgdGhhdCB0aGUgRkRBIGxhYmVsIGZvciBMb3JhemVwYW0gYW5kIERpYXplcGFtIGRvZXMgbm90IHNwZWNpZnkgaW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgdGhlIG1lbnRpb24gb2YgJ2ZyYWN0dXJlIHRyYXVtYXRpYycgYXMgYW4gaW5mcmVxdWVudCBhZHZlcnNlIGV2ZW50IGluIHRoZSBDbG9uYXplcGFtIGxhYmVsIHNob3VsZCBub3QgYmUgZGlzbWlzc2VkLiBCZW56b2RpYXplcGluZXMgYXJlIGtub3duIHRvIGNhdXNlIHNlZGF0aW9uIGFuZCBtdXNjbGUgcmVsYXhhdGlvbiwgd2hpY2ggY2FuIGxlYWQgdG8gYW4gaW5jcmVhc2VkIHJpc2sgb2YgZmFsbHMsIGFuZCBjb25zZXF1ZW50bHksIGhpcCBmcmFjdHVyZXMsIGVzcGVjaWFsbHkgaW4gdGhlIGVsZGVybHkuIFRoZSBwcmVzZW5jZSBvZiAnZnJhY3R1cmUgdHJhdW1hdGljJyBhcyBhbiBhZHZlcnNlIGV2ZW50IGluIHRoZSBDbG9uYXplcGFtIGxhYmVsIHN1Z2dlc3RzIHRoYXQgdGhlcmUgbWF5IGJlIGEgbGluayBiZXR3ZWVuIGJlbnpvZGlhemVwaW5lIHVzZSBhbmQgZnJhY3R1cmVzLiBUaGVyZWZvcmUsIHRoZSBjb25jbHVzaW9uIHNob3VsZCByZWZsZWN0IGEgcG90ZW50aWFsIGluY3JlYXNlIGluIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSBhc3NvY2lhdGVkIHdpdGggYmVuem9kaWF6ZXBpbmVzLCBldmVuIGlmIHRoZSBldmlkZW5jZSBpcyBub3QgY29uY2x1c2l2ZSBmb3IgYSBjYXVzYWwgcmVsYXRpb25zaGlwLgoKSWYgYW55IGZsYXdzIGluIHRoZSByZWFzb25pbmcgdXNlZCB0byBwcm9kdWNlIHlvdXIgYW5zd2VyIHdlcmUgaWRlbnRpZmllZCwgeW91IG11c3QgdHJ5IGFnYWluLg==)The  reasoning  provided  is  flawed.  While  it  is  correct  that  the  FDA  label  for  Lorazepam  and  Diazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture,  the  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label  should  not  be  dismissed.  Benzodiazepines  are  known  to  cause  sedation  and  muscle  relaxation,  which  can  lead  to  an  increased  risk  of  falls,  and  consequently,  hip  fractures,  especially  in  the  elderly.  The  presence  of  ’fracture  traumatic’  as  an  adverse  event  in  the  Clonazepam  label  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.  Therefore,  the  conclusion  should  reflect  a  potential  increase  in  the  risk  of  hip  fracture  associated  with  benzodiazepines,  even  if  the  evidence  is  not  conclusive  for  a  causal  relationship.If  any  flaws  in  the  reasoning  used  to  produce  your  answer  were  identified,  you  must  try  again.'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,VGhlIHJlYXNvbmluZyBwcm92aWRlZCBpcyBmbGF3ZWQuIFdoaWxlIGl0IGlzIGNvcnJlY3QgdGhhdCB0aGUgRkRBIGxhYmVsIGZvciBMb3JhemVwYW0gYW5kIERpYXplcGFtIGRvZXMgbm90IHNwZWNpZnkgaW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgdGhlIG1lbnRpb24gb2YgJ2ZyYWN0dXJlIHRyYXVtYXRpYycgYXMgYW4gaW5mcmVxdWVudCBhZHZlcnNlIGV2ZW50IGluIHRoZSBDbG9uYXplcGFtIGxhYmVsIHNob3VsZCBub3QgYmUgZGlzbWlzc2VkLiBCZW56b2RpYXplcGluZXMgYXJlIGtub3duIHRvIGNhdXNlIHNlZGF0aW9uIGFuZCBtdXNjbGUgcmVsYXhhdGlvbiwgd2hpY2ggY2FuIGxlYWQgdG8gYW4gaW5jcmVhc2VkIHJpc2sgb2YgZmFsbHMsIGFuZCBjb25zZXF1ZW50bHksIGhpcCBmcmFjdHVyZXMsIGVzcGVjaWFsbHkgaW4gdGhlIGVsZGVybHkuIFRoZSBwcmVzZW5jZSBvZiAnZnJhY3R1cmUgdHJhdW1hdGljJyBhcyBhbiBhZHZlcnNlIGV2ZW50IGluIHRoZSBDbG9uYXplcGFtIGxhYmVsIHN1Z2dlc3RzIHRoYXQgdGhlcmUgbWF5IGJlIGEgbGluayBiZXR3ZWVuIGJlbnpvZGlhemVwaW5lIHVzZSBhbmQgZnJhY3R1cmVzLiBUaGVyZWZvcmUsIHRoZSBjb25jbHVzaW9uIHNob3VsZCByZWZsZWN0IGEgcG90ZW50aWFsIGluY3JlYXNlIGluIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSBhc3NvY2lhdGVkIHdpdGggYmVuem9kaWF6ZXBpbmVzLCBldmVuIGlmIHRoZSBldmlkZW5jZSBpcyBub3QgY29uY2x1c2l2ZSBmb3IgYSBjYXVzYWwgcmVsYXRpb25zaGlwLgoKSWYgYW55IGZsYXdzIGluIHRoZSByZWFzb25pbmcgdXNlZCB0byBwcm9kdWNlIHlvdXIgYW5zd2VyIHdlcmUgaWRlbnRpZmllZCwgeW91IG11c3QgdHJ5IGFnYWluLg==)这个推理是有缺陷的。尽管FDA关于劳拉西泮（Lorazepam）和地西泮（Diazepam）的标签没有明确说明关于髋部骨折风险的信息，但克洛硝西泮（Clonazepam）标签中提到的“创伤性骨折”作为一个不常见的不良事件，不应被忽视。苯二氮䓬类药物已知会引起镇静和肌肉松弛，这可能导致摔倒的风险增加，进而可能引发髋部骨折，特别是在老年人中。克洛硝西泮标签中提到“创伤性骨折”作为不良事件，表明苯二氮䓬类药物的使用与骨折之间可能存在某种联系。因此，结论应该反映出苯二氮䓬类药物可能增加髋部骨折的风险，即便现有证据尚未明确证明两者之间存在因果关系。如果在推理过程中发现任何缺陷，必须重新进行推理。'
- en: 'At round 2, the corrected output from CategoryAgent:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二轮中，CategoryAgent的修正输出：
- en: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZGVjcmVhc2UgaXQsICBvciBpcyB0aGVyZSBubyBjbGVhciBlZmZlY3Q/Ci0tLS0tClJlYXNvbmluZzoKMS4gVGhlIEZEQSBsYWJlbCBmb3IgTG9yYXplcGFtIGRvZXMgbm90IHNwZWNpZnkgaW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZS4KMi4gVGhlIEZEQSBsYWJlbCBkYXRhIGZvciBEaWF6ZXBhbSBkb2VzIG5vdCBwcm92aWRlIGluZm9ybWF0aW9uIG9uIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZS4KMy4gVGhlIEZEQSBsYWJlbCBmb3IgQ2xvbmF6ZXBhbSBtZW50aW9ucyAnZnJhY3R1cmUgdHJhdW1hdGljJyBhcyBhbiBpbmZyZXF1ZW50IGFkdmVyc2UgZXZlbnQgYnV0CmRvZXMgbm90IGVzdGFibGlzaCBhIGNhdXNhbCByZWxhdGlvbnNoaXAgd2l0aCBoaXAgZnJhY3R1cmVzIG9yIHByb3ZpZGUgc3BlY2lmaWMgZGF0YSBvbiBoaXAgZnJhY3R1cmUgcmlzay4KNC4gQ29uc2lkZXJpbmcgdGhlIHBoYXJtYWNvbG9naWNhbCBlZmZlY3RzIG9mIGJlbnpvZGlhemVwaW5lcywgd2hpY2ggaW5jbHVkZSBzZWRhdGlvbiBhbmQgbXVzY2xlIHJlbGF4YXRpb24sIHRoZXJlIGlzIGEgcGxhdXNpYmxlIG1lY2hhbmlzbSBieSB3aGljaCB0aGVzZSBkcnVncyBjb3VsZCBpbmNyZWFzZSB0aGUgcmlzayBvZiBmYWxscyBhbmQgY29uc2VxdWVudGx5IGhpcCBmcmFjdHVyZXMsIGVzcGVjaWFsbHkgaW4gdGhlIGVsZGVybHkuCjUuIFRoZSBtZW50aW9uIG9mICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCBpbiB0aGUgQ2xvbmF6ZXBhbSBsYWJlbCwgd2hpbGUgbm90IGNvbmNsdXNpdmUsIHN1Z2dlc3RzIHRoYXQgdGhlcmUgbWF5IGJlIGEgbGluayBiZXR3ZWVuIGJlbnpvZGlhemVwaW5lIHVzZSBhbmQgZnJhY3R1cmVzLgo2LiBHaXZlbiB0aGUgcGxhdXNpYmxlIG1lY2hhbmlzbSBhbmQgdGhlIG1lbnRpb24gb2YgZnJhY3R1cmVzIGFzIGFuIGFkdmVyc2UgZXZlbnQgZm9yIENsb25hemVwYW0sIGl0IGlzIHJlYXNvbmFibGUgdG8gaW5mZXIgdGhhdCBiZW56b2RpYXplcGluZXMgbWF5IHBvdGVudGlhbGx5IGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZXZlbiB0aG91Z2ggdGhlIGV2aWRlbmNlIGlzIG5vdCBkZWZpbml0aXZlIGZvciBhIGNhdXNhbCByZWxhdGlvbnNoaXAuCi0tLS0tCkZpbmFsIGFuc3dlcjogVGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIG1heSBwb3RlbnRpYWxseSBpbmNyZWFzZSB0aGUgcmlzayBvZiBoaXAgZnJhY3R1cmUsIGFsdGhvdWdoIHRoZSBldmlkZW5jZSBpcyBub3QgZGVmaW5pdGl2ZSBmb3IgYSBjYXVzYWwgcmVsYXRpb25zaGlwIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXNzYWdlcy4=)Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,  or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information  on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  butdoes  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Considering  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.5.  The  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label,  while  not  conclusive,  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.6.  Given  the  plausible  mechanism  and  the  mention  of  fractures  as  an  adverse  event  for  Clonazepam,  it  is  reasonable  to  infer  that  benzodiazepines  may  potentially  increase  the  risk  of  hip  fracture,  even  though  the  evidence  is  not  definitive  for  a  causal  relationship.-----Final  answer:  The  benzodiazepine  category  of  drugs  may  potentially  increase  the  risk  of  hip  fracture,  although  the  evidence  is  not  definitive  for  a  causal  relationship  based  on  the  provided  passages.'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZGVjcmVhc2UgaXQsICBvciBpcyB0aGVyZSBubyBjbGVhciBlZmZlY3Q/Ci0tLS0tClJlYXNvbmluZzoKMS4gVGhlIEZEQSBsYWJlbCBmb3IgTG9yYXplcGFtIGRvZXMgbm90IHNwZWNpZnkgaW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZS4KMi4gVGhlIEZEQSBsYWJlbCBkYXRhIGZvciBEaWF6ZXBhbSBkb2VzIG5vdCBwcm92aWRlIGluZm9ybWF0aW9uIG9uIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZS4KMy4gVGhlIEZEQSBsYWJlbCBmb3IgQ2xvbmF6ZXBhbSBtZW50aW9ucyAnZnJhY3R1cmUgdHJhdW1hdGljJyBhcyBhbiBpbmZyZXF1ZW50IGFkdmVyc2UgZXZlbnQgYnV0CmRvZXMgbm90IGVzdGFibGlzaCBhIGNhdXNhbCByZWxhdGlvbnNoaXAgd2l0aCBoaXAgZnJhY3R1cmVzIG9yIHByb3ZpZGUgc3BlY2lmaWMgZGF0YSBvbiBoaXAgZnJhY3R1cmUgcmlzay4KNC4gQ29uc2lkZXJpbmcgdGhlIHBoYXJtYWNvbG9naWNhbCBlZmZlY3RzIG9mIGJlbnpvZGlhemVwaW5lcywgd2hpY2ggaW5jbHVkZSBzZWRhdGlvbiBhbmQgbXVzY2xlIHJlbGF4YXRpb24sIHRoZXJlIGlzIGEgcGxhdXNpYmxlIG1lY2hhbmlzbSBieSB3aGljaCB0aGVzZSBkcnVncyBjb3VsZCBpbnRyZWFzZSB0aGUgcmlzayBvZiBmYWxscyBhbmQgY29uc2VxdWVudGx5IGhpcCBmcmFjdHVyZXMsIGVzcGVjaWFsbHkgaW4gdGhlIGVsZGVybHkuCjUuIFRoZSBtZW50aW9uIG9mICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCBpbiB0aGUgQ2xvbmF6ZXBhbSBsYWJlbCwgd2hpbGUgbm90IGNvbmNsdXNpdmUsIHN1Z2dlc3RzIHRoYXQgdGhlcmUgbWF5IGJlIGEgbGluayBiZXR3ZWVuIGJlbnpvZGlhemVwaW5lIHVzZSBhbmQgZnJhY3R1cmVzLgo2LiBHaXZlbiB0aGUgcGxhdXNpYmxlIG1lY2hhbmlzbSBhbmQgdGhlIG1lbnRpb24gb2YgZnJhY3R1cmVzIGFzIGFuIGFkdmVyc2UgZXZlbnQgZm9yIENsb25hemVwYW0sIGl0IGlzIHJlYXNvbmFibGUgdG8gaW5mZXIgdGhhdCBiZW5zb2RpYXplcGluZXMgbWF5IHBvdGVudGlhbGx5IGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZXZlbiB0aG91Z2ggdGhlIGV2aWRlbmNlIGlzIG5vdCBkZWZpbml0aXZlIGZvciBhIGNhdXNhbCByZWxhdGlvbnNoaXAuCi0tLS0tCkZpbmFsIGFuc3dlcjogVGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIG1heSBwb3RlbnRpYWxseSBpbmNyZWFzZSB0aGUgcmlzayBvZiBoaXAgZnJhY3R1cmUsIGFsdGhvdWdoIHRoZSBldmlkZW5jZSBpcyBub3QgZGVmaW5pdGl2ZSBmb3IgYSBjYXVzYWwgcmVsYXRpb25zaGlwIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXNzYWdlcy4=)问题：苯二氮卓类药物是否增加髋部骨折的风险，减少风险，还是没有明确的效果？-----推理：1.
    FDA 关于劳拉西泮的标签没有指定与髋部骨折风险相关的信息。2. FDA 关于地西泮的标签没有提供与髋部骨折风险相关的信息。3. FDA 关于氯硝西泮的标签提到“创伤性骨折”是一个不常见的不良事件，但没有建立与髋部骨折的因果关系，也没有提供关于髋部骨折风险的具体数据。4.
    考虑到苯二氮卓类药物的药理效应，包括镇静和肌肉放松，这些药物可能通过增加跌倒风险从而增加髋部骨折的风险，特别是在老年人中。5. 氯硝西泮标签中提到的“创伤性骨折”虽然没有定论，但暗示苯二氮卓类药物使用与骨折之间可能存在联系。6.
    鉴于可能的机制以及氯硝西泮标签中提到骨折作为不良事件，合理推测苯二氮卓类药物可能会增加髋部骨折的风险，尽管现有证据尚未确定其因果关系。-----最终答案：苯二氮卓类药物可能会增加髋部骨折的风险，尽管现有证据尚未确定其因果关系。'
- en: 'Feedback by Critic:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 评论者反馈：
- en: '[⬇](data:text/plain;base64,VGhlIHJldmlzZWQgcmVhc29uaW5nIGlzIG1vcmUgYWNjdXJhdGUgaW4gYWNrbm93bGVkZ2luZyB0aGUgcG90ZW50aWFsIHJpc2sgaW5jcmVhc2UgZm9yIGhpcCBmcmFjdHVyZXMgYXNzb2NpYXRlZCB3aXRoIGJlbnpvZGlhemVwaW5lcywgZ2l2ZW4gdGhlIHBoYXJtYWNvbG9naWNhbCBlZmZlY3RzIGFuZCB0aGUgbWVudGlvbiBvZiAnZnJhY3R1cmUgdHJhdW1hdGljJyBhcyBhbiBhZHZlcnNlIGV2ZW50IGZvciBDbG9uYXplcGFtLiBIb3dldmVyLCB0aGUgZmluYWwgYW5zd2VyIHNob3VsZCBzdGlsbCByZWZsZWN0IGEgZGVncmVlIG9mIHVuY2VydGFpbnR5IGR1ZSB0byB0aGUgbGFjayBvZiBjb25jbHVzaXZlIGV2aWRlbmNlLiBJdCB3b3VsZCBiZSBtb3JlIGFwcHJvcHJpYXRlIHRvIHN0YXRlIHRoYXQgdGhlcmUgaXMgYSBwb3RlbnRpYWwgaW5jcmVhc2UgaW4gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlIHdpdGggYmVuem9kaWF6ZXBpbmUgdXNlLCBidXQgdGhlIGV2aWRlbmNlIGlzIG5vdCBzdHJvbmcgZW5vdWdoIHRvIGRlZmluaXRpdmVseSBlc3RhYmxpc2ggYSBjYXVzYWwgcmVsYXRpb25zaGlwLgoKSWYgYW55IGZsYXdzIGluIHRoZSByZWFzb25pbmcgdXNlZCB0byBwcm9kdWNlIHlvdXIgYW5zd2VyIHdlcmUgaWRlbnRpZmllZCwgeW91IG11c3QgdHJ5IGFnYWluLg==)The  revised  reasoning  is  more  accurate  in  acknowledging  the  potential  risk  increase  for  hip  fractures  associated  with  benzodiazepines,  given  the  pharmacological  effects  and  the  mention  of  ’fracture  traumatic’  as  an  adverse  event  for  Clonazepam.  However,  the  final  answer  should  still  reflect  a  degree  of  uncertainty  due  to  the  lack  of  conclusive  evidence.  It  would  be  more  appropriate  to  state  that  there  is  a  potential  increase  in  the  risk  of  hip  fracture  with  benzodiazepine  use,  but  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship.If  any  flaws  in  the  reasoning  used  to  produce  your  answer  were  identified,  you  must  try  again.'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,VGhlIHJldmlzZWQgcmVhc29uaW5nIGlzIG1vcmUgYWNjdXJhdGUgaW4gYWNrbm93bGVkZ2luZyB0aGUgcG90ZW50aWFsIHJpc2sgaW5jcmVhc2UgZm9yIGhpcCBmcmFjdHVyZXMgYXNzb2NpYXRlZCB3aXRoIGJlbnpvZGlhemVwaW5lcywgZ2l2ZW4gdGhlIHBoYXJtYWNvbG9naWNhbCBlZmZlY3RzIGFuZCB0aGUgbWVudGlvbiBvZiAnZnJhY3R1cmUgdHJhdW1hdGljJyBhcyBhbiBhZHZlcnNlIGV2ZW50IGZvciBDbG9uYXplcGFtLiBIb3dldmVyLCB0aGUgZmluYWwgYW5zd2VyIHNob3VsZCBzdGlsbCByZWZsZWN0IGEgZGVncmVlIG9mIHVuY2VydGFpbnR5IGR1ZSB0byB0aGUgbGFjayBvZiBjb25jbHVzaXZlIGV2aWRlbmNlLiBJdCB3b3VsZCBiZSBtb3JlIGFwcHJvcHJpYXRlIHRvIHN0YXRlIHRoYXQgdGhlcmUgaXMgYSBwb3RlbnRpYWwgaW5jcmVhc2UgaW4gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlIHdpdGggYmVuem9kaWF6ZXBpbmUgdXNlLCBidXQgdGhlIGV2aWRlbmNlIGlzIG5vdCBzdHJvbmcgZW5vdWdoIHRvIGRlZmluaXRpdmVseSBlc3RhYmxpc2ggYSBjYXVzYWwgcmVsYXRpb25zaGlwLgoKSWYgYW55IGZsYXdzIGluIHRoZSByZWFzb25pbmcgdXNlZCB0byBwcm9kdWNlIHlvdXIgYW5zd2VyIHdlcmUgaWRlbnRpZmllZCwgeW91IG11c3QgdHJ5IGFnYWluLg==)修订后的推理更准确地确认了苯二氮䓬类药物使用与髋部骨折风险增加之间的潜在关联，考虑到其药理效应以及氯氮平作为不良事件所提到的“骨折创伤”。然而，最终的答案仍应反映一定的不确定性，因为缺乏确凿证据。更为恰当的表述是，苯二氮䓬类药物使用可能增加髋部骨折的风险，但现有证据不足以确立因果关系。如果在得出答案的推理中发现任何缺陷，您必须重新尝试。'
- en: 'At round 3, the corrected output from CategoryAgent:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 在第3轮中，CategoryAgent修正后的输出：
- en: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZGVjcmVhc2UgaXQsCm9yIGlzIHRoZXJlIG5vIGNsZWFyIGVmZmVjdD8KLS0tLS0KUmVhc29uaW5nOgoxLiBUaGUgRkRBIGxhYmVsIGZvciBMb3JhemVwYW0gZG9lcyBub3Qgc3BlY2lmeSBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgoyLiBUaGUgRkRBIGxhYmVsIGRhdGEgZm9yIERpYXplcGFtIGRvZXMgbm90IHByb3ZpZGUgaW5mb3JtYXRpb24gb24gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgozLiBUaGUgRkRBIGxhYmVsIGZvciBDbG9uYXplcGFtIG1lbnRpb25zICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCBidXQgZG9lcyBub3QgZXN0YWJsaXNoIGEgY2F1c2FsIHJlbGF0aW9uc2hpcCB3aXRoIGhpcCBmcmFjdHVyZXMgb3IgcHJvdmlkZSBzcGVjaWZpYyBkYXRhIG9uIGhpcCBmcmFjdHVyZSByaXNrLgo0LiBDb25zaWRlcmluZyB0aGUgcGhhcm1hY29sb2dpY2FsIGVmZmVjdHMgb2YgYmVuem9kaWF6ZXBpbmVzLCB3aGljaCBpbmNsdWRlIHNlZGF0aW9uIGFuZCBtdXNjbGUgcmVsYXhhdGlvbiwgdGhlcmUgaXMgYSBwbGF1c2libGUgbWVjaGFuaXNtIGJ5IHdoaWNoIHRoZXNlIGRydWdzIGNvdWxkIGluY3JlYXNlIHRoZSByaXNrIG9mIGZhbGxzIGFuZCBjb25zZXF1ZW50bHkgaGlwIGZyYWN0dXJlcywgZXNwZWNpYWxseSBpbiB0aGUgZWxkZXJseS4KNS4gVGhlIG1lbnRpb24gb2YgJ2ZyYWN0dXJlIHRyYXVtYXRpYycgYXMgYW4gaW5mcmVxdWVudCBhZHZlcnNlIGV2ZW50IGluIHRoZSBDbG9uYXplcGFtIGxhYmVsLCB3aGlsZSBub3QgY29uY2x1c2l2ZSwgc3VnZ2VzdHMgdGhhdCB0aGVyZSBtYXkgYmUgYSBsaW5rIGJldHdlZW4gYmVuem9kaWF6ZXBpbmUgdXNlIGFuZCBmcmFjdHVyZXMuCjYuIEdpdmVuIHRoZSBwbGF1c2libGUgbWVjaGFuaXNtIGFuZCB0aGUgbWVudGlvbiBvZiBmcmFjdHVyZXMgYXMgYW4gYWR2ZXJzZSBldmVudCBmb3IgQ2xvbmF6ZXBhbSwKaXQgaXMgcmVhc29uYWJsZSB0byBpbmZlciB0aGF0IGJlbnpvZGlhemVwaW5lcyBtYXkgcG90ZW50aWFsbHkgaW5jcmVhc2UgdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLCBldmVuIHRob3VnaCB0aGUgZXZpZGVuY2UgaXMgbm90IGRlZmluaXRpdmUgZm9yIGEgY2F1c2FsIHJlbGF0aW9uc2hpcC4KNy4gSG93ZXZlciwgZHVlIHRvIHRoZSBsYWNrIG9mIGNvbmNsdXNpdmUgZXZpZGVuY2UsIHRoZSBmaW5hbCBhbnN3ZXIgc2hvdWxkIHJlZmxlY3QgdW5jZXJ0YWludHkgcmVnYXJkaW5nIHRoZSBjYXVzYWwgcmVsYXRpb25zaGlwIGJldHdlZW4gYmVuem9kaWF6ZXBpbmUgdXNlIGFuZCBoaXAgZnJhY3R1cmUgcmlzay4KLS0tLS0KRmluYWwgYW5zd2VyOiBUaGVyZSBpcyBhIHBvdGVudGlhbCBpbmNyZWFzZSBpbiB0aGUgcmlzayBvZiBoaXAgZnJhY3R1cmUgYXNzb2NpYXRlZCB3aXRoIGJlbnpvZGlhemVwaW5lIHVzZSwgYnV0IHRoZSBldmlkZW5jZSBpcyBub3Qgc3Ryb25nIGVub3VnaCB0byBkZWZpbml0aXZlbHkgZXN0YWJsaXNoIGEgY2F1c2FsIHJlbGF0aW9uc2hpcCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgcGFzc2FnZXMu)Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information  on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  but  does  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Considering  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.5.  The  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label,  while  not  conclusive,  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.6.  Given  the  plausible  mechanism  and  the  mention  of  fractures  as  an  adverse  event  for  Clonazepam,it  is  reasonable  to  infer  that  benzodiazepines  may  potentially  increase  the  risk  of  hip  fracture,  even  though  the  evidence  is  not  definitive  for  a  causal  relationship.7.  However,  due  to  the  lack  of  conclusive  evidence,  the  final  answer  should  reflect  uncertainty  regarding  the  causal  relationship  between  benzodiazepine  use  and  hip  fracture  risk.-----Final  answer:  There  is  a  potential  increase  in  the  risk  of  hip  fracture  associated  with  benzodiazepine  use,  but  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship  based  on  the  provided  passages.'
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGJlbnpvZGlhemVwaW5lIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGhpcCBmcmFjdHVyZSwgZGVjcmVhc2UgaXQsCm9yIGlzIHRoZXJlIG5vIGNsZWFyIGVmZmVjdD8KLS0tLS0KUmVhc29uaW5nOgoxLiBUaGUgRkRBIGxhYmVsIGZvciBMb3JhemVwYW0gZG9lcyBub3Qgc3BlY2lmeSBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgoyLiBUaGUgRkRBIGxhYmVsIGRhdGEgZm9yIERpYXplcGFtIGRvZXMgbm90IHByb3ZpZGUgaW5mb3JtYXRpb24gb24gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlLgozLiBUaGUgRkRBIGxhYmVsIGZvciBDbG9uYXplcGFtIG1lbnRpb25zICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCBidXQgZG9lcyBub3QgZXN0YWJsaXNoIGEgY2F1c2FsIHJlbGF0aW9uc2hpcCB3aXRoIGhpcCBmcmFjdHVyZXMgb3IgcHJvdmlkZSBzcGVjaWZpYyBkYXRhIG9uIGhpcCBmcmFjdHVyZSByaXNrLgo0LiBDb25zaWRlcmluZyB0aGUgcGhhcm1hY29sb2dpY2FsIGVmZmVjdHMgb2YgYmVuen9kaWF6ZXBpbmVzLCB3aGljaCBpbmNsdWRlIHNlZGF0aW9uIGFuZCBtdXNjbGUgcmVsYXhhdGlvbiwgdGhlcmUgaXMgYSBwbGF1c2libGUgbWVjaGFuaXNtIGJ5IHdoaWNoIHRoZXNlIGRydWdzIGNvdWxkIGluY3JlYXNlIHRoZSByYXNrIG9mIGZhbGxzIGFuZCBjb25zZXF1ZW50bHkgaGlwIGZyYWN0dXJlcywgZXNwZWNpYWxseSBpbiB0aGUgZWxkZXJseS4KNS4gVGhlIG1lbnRpb24gb2YgJ2ZyYWN0dXJlIHRyYXVtYXRpYycgYXMgYW4gaW5mcmVxdWVudCBhZHZlcnNlIGV2ZW50IGluIHRoZSBDaGxvbmF6ZXBhbSBsYWJlbCwgd2hpbGUgbm90IGNvbmNsdXNpdmUsIHN1Z2dlc3RzIHRoYXQgdGhlcmUgYmVtZSBhIHNsaW5rIGJldHdlZW4gYmVuen9kaWF6ZXBpbmUgdXNlIHN1ZyBhbmQgZnJhY3R1cmUgcmlzay4KNi4gR2l2ZW4gdGhlIHBsYXVzZWJsZSBtZWNoYW5pc20gYW5kIHRoZSBtZW50aW9uIG9mIGZyYWN0dXJlcyBhcyBhbiBhZHZlcnNlIGV2ZW50IGZvciBDbG9uYXplcGFtLCB3aGlsZSBub3QgY29uY2x1c2l2ZSwgc3VnZ2VzdHMgdGhhdCB0aGVyZSBtYXkgYmUgcG9saXMgYSBsaW5rIGJldHdlZW4gYmVuen9kaWF6ZXBpbmUgdXNlIHNlIGFuZCBmcmFjdHVyZSBpcyBwb3RlbnRpYWxseSBpbiB0aGUgZWxkZXJseS4KNy4gSG93ZXZlciwgZHVlIHRvIHRoZSBsYWNrIG9mIGNvbmNsdXNpdmUgZXZpZGVuY2UsIHRoZSBmaW5hbCBhbnN3ZXIgc2hvdWxkIHJlZmxlY3QgdW5jZXJ0YWludHkgcmVnYXJkaW5nIHRoZSBjYXVzYWwgcmVsYXRpb25zaGlwIGJldHdlZW4gYmVuen9kaWF6ZXBpbmUgdXNlIHNlIGFuZCBoaXAgZnJhY3R1cmUgcmlzay4KLS0tLS0KRmluYWwgYW5zd2VyOiBUaGVyZSBpcyBhIHBvdGVudGlhbCBpbmNyZWFzZWQgaW4gdGhlIHJpc2sgb2YgaGlwIGZyYWN0dXJlIGFzc29jaWF0ZWQgd2l0aCBiZSBub3RpY2UgYmVuen9kaWF6ZXBpbmUgdXNlLCBidXQgdGhlIGV2aWRlbmNlIGlzIG5vdCBzdHJvbmcgZW5vdWdoIHRvIGRlZmluaXRpdmVseSBldmVudCBzYWlkIHJhY2lvc3MgaW4gY2F1c2FsIHJlbGF0aW9uc2hpcCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgcGFzc2FnZXMu)Question:  Does  the  benzodiazepine  category  of  drugs  increase  the  risk  of  hip  fracture,  decrease  it,or  is  there  no  clear  effect?-----Reasoning:1.  The  FDA  label  for  Lorazepam  does  not  specify  information  regarding  the  risk  of  hip  fracture.2.  The  FDA  label  data  for  Diazepam  does  not  provide  information
    on  the  risk  of  hip  fracture.3.  The  FDA  label  for  Clonazepam  mentions  ’fracture  traumatic’  as  an  infrequent  adverse  event  but  does  not  establish  a  causal  relationship  with  hip  fractures  or  provide  specific  data  on  hip  fracture  risk.4.  Considering  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.5.  The  mention  of  ’fracture  traumatic’  as  an  infrequent  adverse  event  in  the  Clonazepam  label,  while  not  conclusive,  suggests  that  there  may  be  a  link  between  benzodiazepine  use  and  fractures.6.  Given  the  plausible  mechanism  and  the  mention  of  fractures  as  an  adverse  event  for  Clonazepam,it  is  reasonable  to  infer  that  benzodiazepines  may  potentially  increase  the  risk  of  hip  fracture,  even  though  the  evidence  is  not  definitive  for  a  causal  relationship.7.  However,  due  to  the  lack  of  conclusive  evidence,  the  final  answer  should  reflect  uncertainty  regarding  the  causal  relationship  between  benzodiazepine  use  and  hip  fracture  risk.-----Final  answer:  There  is  a  potential  increase  in  the  risk  of  hip  fracture  associated  with  benzodiazepine  use,  but  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship  based  on  the  provided  passages.'
- en: 'Feedback by Critic:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 评论者反馈：
- en: Your reasoning is valid, no feedback was provided.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 您的推理是合理的，未提供反馈。
- en: 'Final output by CategoryAgent:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: CategoryAgent的最终输出：
- en: '[⬇](data:text/plain;base64,ImxhYmVsIjogImluY3JlYXNlIiwKImNvbmZpZGVuY2UiOiAwLjYsCiJwcm9iYWJpbGl0eSI6IDAuMSwKImZyZXF1ZW5jeSI6ICJyYXJlIiwKImV2aWRlbmNlIjogIndlYWsiLAoianVzdGlmaWNhdGlvbiI6ICJUaGUgRkRBIGxhYmVsIGZvciBDbG9uYXplcGFtIGxpc3RzICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCwgc3VnZ2VzdGluZyBhIHBvdGVudGlhbCBsaW5rIGJldHdlZW4gYmVuem9kaWF6ZXBpbmUgdXNlIGFuZCBmcmFjdHVyZXMuCkdpdmVuIHRoZSBwaGFybWFjb2xvZ2ljYWwgZWZmZWN0cyBvZiBiZW56b2RpYXplcGluZXMsIHdoaWNoIGluY2x1ZGUgc2VkYXRpb24gYW5kIG11c2NsZSByZWxheGF0aW9uLCB0aGVyZSBpcyBhIHBsYXVzaWJsZSBtZWNoYW5pc20gYnkgd2hpY2ggdGhlc2UgZHJ1Z3MgY291bGQgaW5jcmVhc2UgdGhlIHJpc2sgb2YgZmFsbHMgYW5kIGNvbnNlcXVlbnRseSBoaXAgZnJhY3R1cmVzLCBlc3BlY2lhbGx5IGluIHRoZSBlbGRlcmx5LiBIb3dldmVyLCB0aGUgZXZpZGVuY2UgaXMgbm90IHN0cm9uZyBlbm91Z2ggdG8gZGVmaW5pdGl2ZWx5IGVzdGFibGlzaCBhIGNhdXNhbCByZWxhdGlvbnNoaXAsIGFuZCB0aGUgRkRBIGxhYmVscyBmb3IgTG9yYXplcGFtIGFuZCBEaWF6ZXBhbSBkbyBub3QgcHJvdmlkZSBzcGVjaWZpYyBpbmZvcm1hdGlvbiByZWdhcmRpbmcgaGlwIGZyYWN0dXJlIHJpc2suIg==)"label":  "increase","confidence":  0.6,"probability":  0.1,"frequency":  "rare","evidence":  "weak","justification":  "The  FDA  label  for  Clonazepam  lists  ’fracture  traumatic’  as  an  infrequent  adverse  event,  suggesting  a  potential  link  between  benzodiazepine  use  and  fractures.Given  the  pharmacological  effects  of  benzodiazepines,  which  include  sedation  and  muscle  relaxation,  there  is  a  plausible  mechanism  by  which  these  drugs  could  increase  the  risk  of  falls  and  consequently  hip  fractures,  especially  in  the  elderly.  However,  the  evidence  is  not  strong  enough  to  definitively  establish  a  causal  relationship,  and  the  FDA  labels  for  Lorazepam  and  Diazepam  do  not  provide  specific  information  regarding  hip  fracture  risk."'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,ImxhYmVsIjogImluY3JlYXNlIiwKImNvbmZpZGVuY2UiOiAwLjYsCiJwcm9iYWJpbGl0eSI6IDAuMSwKImZyZXF1ZW5jeSI6ICJyYXJlIiwKImV2aWRlbmNlIjogIndlYWsiLAoianVzdGlmaWNhdGlvbiI6ICJUaGUgRkRBIGxhYmVsIGZvciBDbG9uYXplcGFtIGxpc3RzICdmcmFjdHVyZSB0cmF1bWF0aWMnIGFzIGFuIGluZnJlcXVlbnQgYWR2ZXJzZSBldmVudCwgc3VnZ2VzdGluZyBhIHBvdGVudGlhbCBsaW5rIGJldHdlZW4gYmVuen9kaWF6ZXBpbmUgdXNlIGFuZCBmcmFjdHVyZXMuCkdpdmVuIHRoZSBwaGFybWFjb2xvZ2ljYWwgZWZmZWN0cyBvZiBiZW56b2RpYXplcGluZXMsIHdoaWNoIGluY2x1ZGUgc2VkYXRpb24gYW5kIG51c2NsZSByZWxheGF0aW9uLCB0aGVyZSBpcyBhIHBsYXVzaWJsZSBtZWNoYW5pc20gYnkgd2hpY2ggdGhlc2UgZHJ1Z3MgY291bGQgaW5jcmVhc2UgdGhlIHJpc2sgb2YgZmFsbHMgYW5kIGNvbnNlcXVlbnRseSBoaXAgZnJhY3R1cmVzLCBlc3BlY2lhbGx5IGluIHRoZSBlbGRlcmx5LiBIb3dldmVyLCB0aGUgZXZpZGVuY2UgaXMgbm90IHN0cm9uZyBlbm91Z2ggdG8gZGVmaW5pdGl2ZWx5IGVzdGFibGlzaCBhIGNhdXNhbCByZWxhdGlvbnNoaXAsIGFuZCB0aGUgRkRBIGxhYmVscyBmb3IgTG9yYXplcGFtIGFuZCBEaWF6ZXBhbSBkbyBub3QgcHJvdmlkZSBzcGVjaWZpYyBpbmZvcm1hdGlvbiByZWdhcmRpbmcgaGlwIGZyYWN0dXJlIHJpc2suIg==)"标签":
    "增加","信心": 0.6,"概率": 0.1,"频率": "罕见","证据": "弱","理由": "Clonazepam的FDA标签列出了‘创伤性骨折’作为一个不常见的不良事件，暗示了苯二氮平类药物与骨折之间可能存在的联系。鉴于苯二氮平类药物的药理效应，包括镇静和肌肉松弛，有可能这些药物通过增加跌倒的风险而导致髋部骨折，特别是在老年人中。然而，证据不足以确立因果关系，且Lorazepam和Diazepam的FDA标签未提供关于髋部骨折风险的具体信息。"'
- en: C.2 Failed Behavior
  id: totrans-362
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: C.2 失败的行为
- en: MALADE, however, fails to identify the effect of alendronate on gastrointestinal
    ulcer hospitalization. In particular, DrugAgent misinterprets a statement in the
    FDA labels indicating a lack of evidence in clinical trials and forwards an overly
    broad statement that indicates that clinical trials failed to show evidence of
    an effect to CategoryAgent; hence CategoryAgent outputs the incorrect prediction
    of “No Effect.”
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，MALADE未能识别阿仑膦酸对胃肠道溃疡住院的影响。特别是，DrugAgent误解了FDA标签中的一项声明，表示临床试验中缺乏证据，并向CategoryAgent转发了一个过于宽泛的声明，表明临床试验未能显示影响的证据；因此，CategoryAgent输出了错误的预测结果“无效应”。
- en: 3.1 DrugAgent Step
  id: totrans-364
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1 DrugAgent步骤
- en: This step was run twice, for each of the representative drugs, Alendronate Sodium
    and Alendronate (noting that in this case only one drug should have been selected).
    We’ll consider the results for Alendronate.
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 该步骤执行了两次，针对代表性药物阿仑膦酸钠和阿仑膦酸（在此情况下应只选择一种药物）。我们将考虑阿仑膦酸的结果。
- en: The original question to DrugAgent is “Does ALENDRONATE SODIUM increase or decrease
    the risk of gastrointestinal ulcer hospitalization?”
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 给DrugAgent的原始问题是：“阿仑膦酸钠是否会增加或减少胃肠道溃疡住院的风险？”
- en: 'DrugAgent queries FDAHandler:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: DrugAgent查询FDAHandler：
- en: 'FUNC: {  "name": "recipient_message",  "to": "",  "arguments": {    "intended_recipient": "FDAHandler",    "content": "Does ALENDRONATE SODIUM increase    the risk of gastrointestinal ulcer hospitalization?"  }}which
    queries the FDA label database with:'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "recipient_message", "to": "", "arguments": { "intended_recipient":
    "FDAHandler", "content": "阿仑膦酸钠是否会增加胃肠道溃疡住院的风险？" }}，该查询FDA标签数据库：'
- en: 'FUNC: {  "name": "relevant_search_extracts",  "to": "",  "arguments": {    "query": "Does ALENDRONATE increase the risk of gastrointestinal ulcer hospitalization?",    "drug": "ALENDRONATE"  }}which
    returns a number of passages from the FDA labels, including:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: FUNC：{ “name”： “relevant_search_extracts”， “to”： “” ， “arguments”： { “query”：
    “阿仑膦酸钠是否增加胃肠道溃疡住院的风险？”， “drug”： “阿仑膦酸钠” }}，返回FDA标签中的若干段落，其中包括：
- en: ALENDRONATE: warnings_and_cautions: 1 Upper Gastrointestinal Adverse Reactions BINOSTO, like other bisphosphonates administered orally, may cause local irritation of the upper gastrointestinal mucosa. Because of these possible irritant effects and a potential for worsening of the underlying disease, caution should be used when BINOSTO is given to patients with active upper gastrointestinal problems (such as known Barrett’s esophagus, dysphagia, other esophageal diseases, gastritis, duodenitis, or ulcers). Esophageal adverse experiences, such as esophagitis, esophageal ulcers and esophageal erosions, occasionally with bleeding and rarely followed by esophageal stricture or perforation, have been reported in patients receiving treatment with oral bisphosphonates including alendronate sodium. In some cases these have been severe and required hospitalization.and
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 阿仑膦酸钠：警告和注意事项：1 上消化道不良反应，BINOSTO与其他口服双膦酸盐一样，可能会引起上消化道黏膜的局部刺激。由于这些可能的刺激作用以及可能加重基础疾病的潜力，给有活动性上消化道问题的患者（如已知巴雷特食管、吞咽困难、其他食管疾病、胃炎、十二指肠炎或溃疡）的BINOSTO时应谨慎。已有报告指出，接受口服双膦酸盐治疗的患者中，出现食管不良反应，如食管炎、食管溃疡和食管糜烂，偶尔伴有出血，极少发生食管狭窄或穿孔。在某些情况下，这些反应可能很严重，需住院治疗。
- en: ALENDRONATE: warnings_and_cautions: There have been post-marketing reports of gastric and duodenal ulcers with oral bisphosphonate use, some severe and with complications, although no increased risk was observed in controlled clinical trials.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 阿仑膦酸钠：警告和注意事项：市场后报告显示，口服双膦酸盐使用者中，出现胃和十二指肠溃疡，其中一些病情严重并伴有并发症，尽管在对照临床试验中未观察到风险增加。
- en: 'Using these, FDAHandler responds with:'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些信息，FDAHandler回应道：
- en: <DONE>ANSWER: Alendronate, like other bisphosphonates administered orally, may cause local irritation of the upper gastrointestinal mucosa. Esophageal adverse experiences such as esophagitis, esophageal ulcers, and esophageal erosions, occasionally with bleeding and rarely followed by esophageal stricture or perforation, have been reported in patients receiving treatment with alendronate sodium. In some cases, these have been severe and required hospitalization. There have also been post-marketing reports of gastric and duodenal ulcers with oral bisphosphonate use, some severe and with complications, although no increased risk was observed in controlled clinical trials.SOURCE: ALENDRONATE labelEXTRACT_START_END: ...esophageal erosions, occasionally with bleeding and rarely followed by... ...gastric and duodenal ulcers with oral bisphosphonate use, some severe...
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: <DONE>回答：阿仑膦酸钠与其他口服双膦酸盐一样，可能会引起上消化道黏膜的局部刺激。已有报告指出，接受阿仑膦酸钠治疗的患者中，出现食管不良反应，如食管炎、食管溃疡和食管糜烂，偶尔伴有出血，极少发生食管狭窄或穿孔。在某些情况下，这些反应可能很严重，需住院治疗。市场后报告还显示，口服双膦酸盐使用者中，出现胃和十二指肠溃疡，其中一些病情严重并伴有并发症，尽管在对照临床试验中未观察到风险增加。来源：阿仑膦酸钠标签提取开始结束：...食管糜烂，偶尔伴有出血，极少发生...
    ...口服双膦酸盐使用者中，出现胃和十二指肠溃疡，其中一些病情严重...
- en: 'DrugAgent now concludes that the effect is uncertain, and sends its reasoning
    to the Critic. Here is where the error occurs: the phrasing “However, no increased
    risk was observed in controlled clinical trials.” is overly broad and suggests
    that alendronate was shown not to increase the risk of all gastrointestinal ulcers
    in clinical trials, while, in reality, that was shown only for gastric and duodenal
    ulcers specifically. This will lead to the incorrect prediction by CategoryAgent.'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: DrugAgent现在得出结论，效果不确定，并将其推理发送给Critic。此处出现的错误是：“然而，在对照临床试验中未观察到风险增加”的表述过于宽泛，暗示阿仑膦酸钠未在临床试验中增加所有胃肠道溃疡的风险，而实际上，这只是在胃溃疡和十二指肠溃疡中得到了证实。这将导致CategoryAgent的错误预测。
- en: 'Question: Does ALENDRONATE increase or decrease the risk of        gastrointestinal ulcer hospitalization?        -----        Reasoning:        1. I asked FDAHandler whether ALENDRONATE increases the risk        of gastrointestinal ulcer hospitalization.2. FDAHandler responded that Alendronate can cause local irritation ofthe upper gastrointestinal mucosa and has been associated withesophageal adverse experiences such as esophagitis, esophageal ulcers,and erosions, occasionally with bleeding and rarely followed byesophageal stricture or perforation, which have requiredhospitalization in some cases. There have also been post-marketingreports of gastric and duodenal ulcers with oral bisphosphonate use,some severe and with complications. However, no increased risk was observedin controlled clinical trials.        -----        Final answer: Alendronate may increase the risk of        gastrointestinal ulcer hospitalization, as it has been        associated with severe esophageal adverse experiences and        post-marketing reports of gastric and duodenal ulcers that        required hospitalization in some cases. However, it is        important to note that no increased risk was observed in        controlled clinical trials, indicating that while there is a potential risk,        it may not be common.As
    the critic is unaware of the failure to correctly summarize the output from FDAHandler,
    it concludes that the answer is justified, returning no feedback; DrugAgent recieves:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：阿仑膦酸钠是否增加或减少胃肠道溃疡住院的风险？-----推理：1. 我问了FDAHandler是否阿仑膦酸钠增加胃肠道溃疡住院的风险。2. FDAHandler回复说，阿仑膦酸钠可能导致上消化道黏膜的局部刺激，并且已与食管不良反应有关，如食管炎、食管溃疡、糜烂，偶尔伴有出血，且极少会导致食管狭窄或穿孔，在某些情况下需要住院治疗。也有关于口服双膦酸盐使用后出现胃和十二指肠溃疡的市场后报告，其中一些为严重并伴有并发症。然而，在受控临床试验中未观察到增加的风险。-----最终答案：阿仑膦酸钠可能增加胃肠道溃疡住院的风险，因为它与严重的食管不良反应以及市场后报告的胃和十二指肠溃疡相关，这些病例中一些需要住院治疗。然而，需要注意的是，在受控临床试验中未观察到增加的风险，这表明尽管存在潜在风险，但它可能并不常见。由于评论员没有意识到未能正确总结FDAHandler的输出，因此得出结论认为答案是合理的，并且没有返回反馈；DrugAgent
    接收到：
- en: 'Your reasoning is valid, no feedback was provided.and it outputs the answer
    with the flawed statement:'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 你的推理是有效的，没有提供反馈。并且它输出了包含缺陷的答案：
- en: '[⬇](data:text/plain;base64,PERPTkU+CkFsZW5kcm9uYXRlIG1heSBpbmNyZWFzZSB0aGUgcmlzayBvZiBnYXN0cm9pbnRlc3RpbmFsIHVsY2VyICBob3NwaXRhbGl6YXRpb24sIGFzIGl0IGhhcyBiZWVuIGFzc29jaWF0ZWQgd2l0aCBzZXZlcmUgZXNvcGhhZ2VhbCBhZHZlcnNlIGV4cGVyaWVuY2VzIGFuZCBwb3N0LW1hcmtldGluZyByZXBvcnRzIG9mIGdhc3RyaWMgYW5kIGR1b2RlbmFsIHVsY2VycyB0aGF0IHJlcXVpcmVkIGhvc3BpdGFsaXphdGlvbiBpbiBzb21lIGNhc2VzLgpIb3dldmVyLCBpdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IG5vIGluY3JlYXNlZCByaXNrIHdhcyBvYnNlcnZlZCBpbiBjb250cm9sbGVkIGNsaW5pY2FsIHRyaWFscywgaW5kaWNhdGluZyB0aGF0IHdoaWxlIHRoZXJlIGlzIGEgcG90ZW50aWFsIHJpc2ssIGl0IG1heSBub3QgYmUgY29tbW9uLg==)<DONE>Alendronate  may  increase  the  risk  of  gastrointestinal  ulcer  hospitalization,  as  it  has  been  associated  with  severe  esophageal  adverse  experiences  and  post-marketing  reports  of  gastric  and  duodenal  ulcers  that  required  hospitalization  in  some  cases.However,  it  is  important  to  note  that  no  increased  risk  was  observed  in  controlled  clinical  trials,  indicating  that  while  there  is  a  potential  risk,  it  may  not  be  common.'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,PERPTkU+CkFsZW5kcm9uYXRlIG1heSBpbmNyZWFzZSB0aGUgcmlzayBvZiBnYXN0cm9pbnRlc3RpbmFsIHVsY2VyICBob3NwaXRhbGl6YXRpb24sIGFzIGl0IGhhcyBiZWVuIGFzc29jaWF0ZWQgd2l0aCBzZXZlcmUgZXNvcGhhZ2VhbCBhZHZlcnNlIGV4cGVyaWVuY2VzIGFuZCBwb3N0LW1hcmtldGluZyByZXBvcnRzIG9mIGdhc3RyaWMgYW5kIGR1b2RlbmFsIHVsY2VycyB0aGF0IHJlcXVpcmVkIGhvc3BpdGFsaXphdGlvbiBpbiBzb21lIGNhc2VzLgpIb3dldmVyLCBpdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IG5vIGluY3JlYXNlZCByaXNrIHdhcyBvYnNlcnZlZCBpbiBjb250cm9sbGVkIGNsaW5pY2FsIHRyaWFscywgaW5kaWNhdGluZyB0aGF0IHdoaWxlIHRoZXJlIGlzIGEgcG90ZW50aWFsIHJpc2ssIGl0IG1heSBub3QgYmUgY29tbW9uLg==)<DONE>阿仑膦酸钠可能增加胃肠道溃疡住院的风险，因为它与严重的食管不良反应以及市场后报告的胃和十二指肠溃疡相关，这些病例中一些需要住院治疗。然而，需要注意的是，在受控临床试验中未观察到增加的风险，这表明尽管存在潜在风险，但它可能并不常见。'
- en: 3.2 CategoryAgent step
  id: totrans-378
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2 CategoryAgent步骤
- en: 'The question posed to CategoryAgent with the results from DrugAgent is as follows:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 提交给CategoryAgent的问题，基于来自DrugAgent的结果如下：
- en: Passages:                1. Drug ALENDRONATE SODIUM: ALENDRONATE SODIUM has been associated with gastrointestinal adverse effects that can be severe and may lead to hospitalization, such as esophageal ulcers and erosions. However, it is important to note that while there have been post-marketing reports of severe gastric and duodenal ulcers with complications, no increased risk of gastrointestinal ulcer hospitalization was observed in controlled clinical trials. Therefore, while there is a potential risk, the degree of reliability of this association is not fully established, and the risk of hospitalization due to gastrointestinal ulcers appears to be rare.2. Drug ALENDRONATE: Alendronate may increase the risk of gastrointestinal ulcer hospitalization, as it has been associated with severe esophageal adverse experiences and post-marketing reports of gastric and duodenal ulcers that required hospitalization in some cases. However, it is important to note that no increased risk was observed in controlled clinical trials, indicating that while there is a potential risk, it may not be common.                ---------                Does the alendronate category of drugs increase the risk of gastrointestinal ulcer hospitalization, decrease it, or is there no clear effect?
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 片段：                1. 药物阿仑膦酸钠：阿仑膦酸钠与胃肠不良反应有关，这些反应可能会很严重，甚至导致住院，例如食管溃疡和侵蚀。然而，需要注意的是，尽管在上市后报告中有关于严重的胃和十二指肠溃疡及并发症的病例，但在对照临床试验中未观察到胃肠溃疡住院风险增加。因此，尽管存在潜在风险，但这种关联的可靠性程度尚未完全确定，且由于胃肠溃疡住院的风险似乎较为罕见。2.
    药物阿仑膦酸盐：阿仑膦酸盐可能增加胃肠溃疡住院的风险，因为它与严重的食管不良反应以及一些病例中需要住院的胃和十二指肠溃疡的上市后报告有关。然而，需要注意的是，在对照临床试验中未观察到风险增加，表明虽然存在潜在风险，但这可能并不常见。                ---------                阿仑膦酸盐类药物是否增加胃肠溃疡住院的风险，减少风险，还是没有明确的效果？
- en: 'Given the overly broad statement from DrugAgent regarding clinical trial evidence,
    CategoryAgent immediately concludes that there is no clear effect and sends its
    reasoning steps to the Critic:'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于药物代理人关于临床试验证据的过于宽泛声明，类别代理人立即得出结论，认为没有明确的效果，并将其推理步骤发送给评论员：
- en: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGFsZW5kcm9uYXRlIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGdhc3Ryb2ludGVzdGluYWwgdWxjZXIgaG9zcGl0YWxpemF0aW9uLCBkZWNyZWFzZSBpdCwgb3IgaXMgdGhlcmUgbm8gY2xlYXIgZWZmZWN0PwogICAgLS0tLS0KUmVhc29uaW5nOgoxLiBCb3RoIHBhc3NhZ2VzIG1lbnRpb24gdGhhdCBhbGVuZHJvbmF0ZSBhbmQgYWxlbmRyb25hdGUgc29kaXVtIGhhdmUgYmVlbiBhc3NvY2lhdGVkIHdpdGggZ2FzdHJvaW50ZXN0aW5hbCBhZHZlcnNlIGVmZmVjdHMsICBpbmNsdWRpbmcgc2V2ZXJlIGdhc3RyaWMgYW5kIGR1b2RlbmFsIHVsY2Vycy4KMi4gQm90aCBwYXNzYWdlcyBhbHNvIG5vdGUgdGhhdCB0aGVzZSBhc3NvY2lhdGlvbnMgY29tZSBmcm9tIHBvc3QtbWFya2V0aW5nIHJlcG9ydHMsIHdoaWNoIGFyZSBsZXNzIGNvbnRyb2xsZWQgdGhhbiBjbGluaWNhbCB0cmlhbHMuCjMuIFBhc3NhZ2UgMSBzdGF0ZXMgdGhhdCBubyBpbmNyZWFzZWQgcmlzayBvZiBnYXN0cm9pbnRlc3RpbmFsIHVsY2VyIGhvc3BpdGFsaXphdGlvbiB3YXMgb2JzZXJ2ZWQgaW4gY29udHJvbGxlZCBjbGluaWNhbCB0cmlhbHMgZm9yIGFsZW5kcm9uYXRlIHNvZGl1bS4KNC4gUGFzc2FnZSAyIHNpbWlsYXJseSBub3RlcyB0aGF0IGZvciBhbGVuZHJvbmF0ZSwgbm8gaW5jcmVhc2VkIHJpc2sgd2FzIG9ic2VydmVkIGluIGNvbnRyb2xsZWQgY2xpbmljYWwgdHJpYWxzLgo1LiBCb3RoIHBhc3NhZ2VzIGNvbmNsdWRlIHRoYXQgd2hpbGUgdGhlcmUgaXMgYSBwb3RlbnRpYWwgcmlzaywgdGhlIHJpc2sgb2YgaG9zcGl0YWxpemF0aW9uIGR1ZSB0byBnYXN0cm9pbnRlc3RpbmFsIHVsY2VycyBhcHBlYXJzIHRvIGJlIHJhcmUgYW5kIG1heSBub3QgYmUgY29tbW9uLgo2LiBUaGUgZXZpZGVuY2Ugc3VnZ2VzdHMgdGhhdCB3aGlsZSB0aGVyZSBhcmUgcmVwb3J0cyBvZiBzZXZlcmUgY2FzZXMsIHRoZSBjb250cm9sbGVkIGNsaW5pY2FsIHRyaWFscyBkaWQgbm90IHNob3cgYW4gaW5jcmVhc2VkIHJpc2ssIGluZGljYXRpbmcgdGhhdCB0aGUgZWZmZWN0IGlzIG5vdCBjb25zaXN0ZW50IG9yIHdlbGwtZXN0YWJsaXNoZWQuCiAgICAgICAgLS0tLS0KRmluYWwgYW5zd2VyOiBUaGVyZSBpcyBubyBjbGVhciBlZmZlY3Qgb2YgdGhlIGFsZW5kcm9uYXRlIGNhdGVnb3J5IG9mIGRydWdzIG9uIHRoZSByaXNrIG9mIGdhc3Ryb2ludGVzdGluYWwgdWxjZXIgaG9zcGl0YWxpemF0aW9uLg==)Question:  Does  the  alendronate  category  of  drugs  increase  the  risk  of  gastrointestinal  ulcer  hospitalization,  decrease  it,  or  is  there  no  clear  effect?-----Reasoning:1.  Both  passages  mention  that  alendronate  and  alendronate  sodium  have  been  associated  with  gastrointestinal  adverse  effects,  including  severe  gastric  and  duodenal  ulcers.2.  Both  passages  also  note  that  these  associations  come  from  post-marketing  reports,  which  are  less  controlled  than  clinical  trials.3.  Passage  1  states  that  no  increased  risk  of  gastrointestinal  ulcer  hospitalization  was  observed  in  controlled  clinical  trials  for  alendronate  sodium.4.  Passage  2  similarly  notes  that  for  alendronate,  no  increased  risk  was  observed  in  controlled  clinical  trials.5.  Both  passages  conclude  that  while  there  is  a  potential  risk,  the  risk  of  hospitalization  due  to  gastrointestinal  ulcers  appears  to  be  rare  and  may  not  be  common.6.  The  evidence  suggests  that  while  there  are  reports  of  severe  cases,  the  controlled  clinical  trials  did  not  show  an  increased  risk,  indicating  that  the  effect  is  not  consistent  or  well-established.-----Final  answer:  There  is  no  clear  effect  of  the  alendronate  category  of  drugs  on  the  risk  of  gastrointestinal  ulcer  hospitalization.'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '[⬇](data:text/plain;base64,UXVlc3Rpb246IERvZXMgdGhlIGFsZW5kcm9uYXRlIGNhdGVnb3J5IG9mIGRydWdzIGluY3JlYXNlIHRoZSByaXNrIG9mIGdhc3Ryb2ludGVzdGluYWwgdWxjZXIgaG9zcGl0YWxpemF0ZWFzLCBkZWNyZWFzZSBpdCwgb3IgaXMgdGhlcmUgbm8gY2xlYXIgZWZmZWN0PwogICAgLS0tLS0KUmVhc29uaW5nOgoxLiBCb3RoIHBhc3NhZ2VzIG1lbnRpb24gdGhhdCBhbGVuZHJvbmF0ZSBhbmQgYWxlbmRyb25hdGUgc29kaXVtIGhhdmUgYmVlbiBhc3NvY2lhdGVkIHdpdGggZ2FzdHJvaW50ZXN0aW5hbCBhZHZlcnNlIGVmZmVjdHMsICBpbmNsdWRpbmcgc2V2ZXJlIGdhc3RyaWMgYW5kIGR1b2RlbmFsIHVsY2Vycy4KMi4gQm90aCBwYXNzYWdlcyBhbHNvIG5vdGUgdGhhdCB0aGVzZSBhc3NvY2lhdGlvbnMgY29tZSBmcm9tIHBvc3QtbWFya2V0aW5nIHJlcG9ydHMsIHdoaWNoIGFyZSBsZXNzIGNvbnRyb2xsZWQgdGhhbiBjbGluaWNhbCB0cmlhbHMuCjMuIFBhc3NhZ2UgMSBzdGF0ZXMgdGhhdCBubyBpbmNyZWFzZWQgcmlzayBvZiBnYXN0cm9pbnRlc3RpbmFsIHVsY2VyIGhvc3BpdGFsaXphdGlvbiB3YXMgb2JzZXJ2ZWQgaW4gY29udHJvbGxlZCBjbGluaWNhbCB0cmlhbHMgZm9yIGFsZW5kcm9uYXRlIHNvZGl1bS4KNC4gUGFzc2FnZSAyIHNpbWlsYXJseSBub3RlcyB0aGF0IGZvciBhbGVuZHJvbmF0ZSwgbm8gaW5jcmVhc2VkIHJpc2sgd2FzIG9ic2VydmVkIGluIGNvbnRyb2xsZWQgY2xpbmljYWwgdHJpYWxzLgo1LiBCb3RoIHBhc3NhZ2VzIGNvbmNsdWRlIHRoYXQgd2hpbGUgdGhlcmUgaXMgYSBwb3RlbnRpYWwgcmlzaywgdGhlIHJpc2sgb2YgaG9zcGl0YWxpemF0ZWFvbiBkdWUgdG8gZ2FzdHJvaW50ZXN0aW5nIGZvc3RlciBvYnNlcnZlZCBpbiBjb250cm9sbGVkIGNsaW5pY2FsIHRyaWFscy4KNi4gVGhlIGV2aWRlbmNlIHN1Z2dlc3RzIHRoYXQgd2hpbGUgdGhlcmUgYXJlIHJlcG9ydHMgb2Ygc2V2ZXJlIGNhc2VzLCB0aGF0IHRoZSBjb250cm9sbGVkIGNsaW5pY2FsIHRyaWFscyBkaWQgbm90IHNob3cgYW4gaW5jcmVhc2VkIHJpc2ssIGluZGljYXRpbmcgdGhhdCB0aGUgZWZmZWN0IGlzIG5vdCBjb25zaXN0ZW50IG9yIHdlbGwtZXN0YWJsaXNoZWQuCiAgICAgICAgLS0tLS0KRmluYWwgYW5zd2VyOiBUaGVyZSBpcyBubyBjbGVhciBlZmZlY3Qgb2YgdGhlIGFsZW5kcm9uYXRlIGNhdGVnb3J5IG9mIGRydWdzIG9uIHRoZSByaXNrIG9mIGdhc3Ryb2ludGVzdGluYWwgdWxjZXIgaG9zcGl0YWxpemF0ZWFvbi4=)问题：阿仑膦酸类药物是否增加了胃肠道溃疡住院的风险，降低了风险，或者没有明确的效果？-----推理过程：1.
    两段文字都提到，阿仑膦酸和阿仑膦酸钠与胃肠道不良反应相关，包括严重的胃和十二指肠溃疡。2. 两段文字也都指出，这些关联来源于上市后的报告，这些报告的控制性较差，不如临床试验。3.
    第一段提到，阿仑膦酸钠在控制性临床试验中未观察到胃肠道溃疡住院的风险增加。4. 第二段也提到，对于阿仑膦酸，在控制性临床试验中没有观察到风险增加。5. 两段文字均得出结论，尽管存在潜在风险，但由于胃肠道溃疡导致的住院风险似乎很少，并且可能并不常见。6.
    证据表明，尽管有严重病例的报告，但控制性临床试验未显示出增加的风险，这表明这种效果并不一致或并未得到充分证实。-----最终答案：阿仑膦酸类药物对胃肠道溃疡住院的风险没有明确的影响。'
- en: 'and the Critic approves:'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 并且 Critic 认可：
- en: Feedback: The reasoning provided is consistent with the information from the passages. It correctly identifies that while there are post-marketing reports of gastrointestinal adverse effects, controlled clinical trials did not show an increased risk of gastrointestinal ulcer hospitalization for drugs in the alendronate category. The conclusion that there is no clear effect on the risk of gastrointestinal ulcer hospitalization is supported by the evidence provided. Therefore, there are no flaws in the reasoning process.        If any flaws in the reasoning used to produce your answer were identified,        you must try again.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈：所提供的推理与段落中的信息一致。它正确地识别出，尽管有关于胃肠道不良反应的上市后报告，但在控制的临床试验中，未显示阿仑膦酸盐类别药物增加胃肠道溃疡住院的风险。结论是，胃肠道溃疡住院风险没有明确的影响，得到了所提供证据的支持。因此，推理过程中没有缺陷。如果发现推理过程中有任何缺陷，必须重新尝试。
- en: 'Finally, CategoryAgent outputs the incorrect final label, with high confidence:'
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，CategoryAgent 输出了错误的最终标签，并且信心度很高：
- en: FUNC: {  "name": "category_effect_tool",  "to": "",  "arguments": {    "label": "no-effect",    "confidence": 0.8,    "probability": 0.05,    "frequency": "rare",    "evidence": "weak",    "justification": "The alendronate category of drugs has been associated with gastrointestinal adverse effects in post-marketing reports, but controlled clinical trials did not show an increased risk of gastrointestinal ulcer hospitalization. The evidence suggests a potential risk, but it is not consistent or well-established, and the risk of hospitalization due to gastrointestinal ulcers appears to be rare and may not be common."  }}
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 'FUNC: { "name": "category_effect_tool", "to": "", "arguments": { "label": "no-effect",
    "confidence": 0.8, "probability": 0.05, "frequency": "rare", "evidence": "weak",
    "justification": "阿仑膦酸盐类别的药物在上市后报告中与胃肠道不良反应相关，但控制的临床试验未显示增加胃肠道溃疡住院的风险。证据表明存在潜在风险，但该风险不一致且未得到充分证实，胃肠道溃疡住院的风险似乎较为罕见，且可能并不常见。"
    }}'
- en: Appendix D Ablations
  id: totrans-387
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 D 消融实验
- en: 'The objective of our ablation study is to examine the individual impact of
    two principal elements on our system’s performance: {adjustwidth}1cm'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的消融研究的目标是考察两个主要元素对我们系统性能的单独影响：{adjustwidth}1cm
- en: (1)
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （1）
- en: the iterative refinement process among multiple agents (i.e., Agent-Critic interaction)
  id: totrans-390
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 多个智能体之间的迭代优化过程（即，Agent-Critic 互动）
- en: (2)
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （2）
- en: the incorporation of external knowledge via RAG.
  id: totrans-392
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通过 RAG 融合外部知识。
- en: We do not conduct an ablation of our multi-agent design as MALADE cannot be
    naturally expressed as a single-agent system; while expressing all agents and
    control flow of MALADE in a single highly complex agent is possible in principle,
    it is not straightforward to achieve that with any level of reliability.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 我们没有对多智能体设计进行消融，因为 MALADE 无法自然地表示为一个单一智能体系统；尽管原则上可以将所有智能体及 MALADE 的控制流程表达为一个复杂的单一智能体，但实现这一点并保证可靠性并非易事。
- en: 'For (1), we evaluate the system’s performance with and without the involvement
    of the Critics paired with DrugAgent and CategoryAgent, respectively, by toggling
    them on and off individually. Refer to the first two columns in Table [8](https://arxiv.org/html/2408.01869v1#A4.T8
    "Table 8 ‣ Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents
    with Retrieval Augmented Generation for Pharmacovigilance"). For compuational
    reasons we do not ablate the critic on DrugFinder.'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 对于（1），我们通过分别开启和关闭 Critics 与 DrugAgent 和 CategoryAgent 配对的方式，评估系统在有无 Critics
    参与下的表现。请参阅表格[8](https://arxiv.org/html/2408.01869v1#A4.T8 "表 8 ‣ 附录 D 消融实验 ‣ MALADE：基于检索增强生成的
    LLM 驱动智能体的药物警戒编排")中的前两列。由于计算原因，我们没有对 DrugFinder 上的 critic 进行消融。
- en: 'For (2), we substitute FDAHandler with a simple agent which answers the questions
    from DrugAgent purely based on LLM’s internal knowledge and generates responses
    in a similar output format as FDAHandler.m Refer to the third column, labeled
    as “RAG”, in Table [8](https://arxiv.org/html/2408.01869v1#A4.T8 "Table 8 ‣ Appendix
    D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance").'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 对于（2），我们将 FDAHandler 替换为一个简单的智能体，该智能体仅基于 LLM 的内部知识回答 DrugAgent 提出的问题，并生成与 FDAHandler.m
    相似的输出格式的响应。请参阅表格[8](https://arxiv.org/html/2408.01869v1#A4.T8 "表 8 ‣ 附录 D 消融实验
    ‣ MALADE：基于检索增强生成的 LLM 驱动智能体的药物警戒编排")中的第三列，标记为“RAG”。
- en: 'Results are obtained by the OMOP ADE task evaluation with the corresponding
    modified versions of MALADE, all of which were run with GPT-4 Turbo. To alleviate
    the computational burden of ablations, when an ablated system’s configuration
    is identical to MALADE’s (i.e., Critics on all agents and RAG enabled) up to a
    given step of the pipeline, we retain the output originally produced by MALADE.
    We address the effects of variance due to random sampling from the LLM in Appendix [E](https://arxiv.org/html/2408.01869v1#A5
    "Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance"). We maintain
    consistency with the evaluation metrics and output label post-processing as detailed
    in Section [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1 "5.1 Evaluation Setup
    ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance"), reporting ADE and effect-based AUC scores
    (with both the output confidence scores and probabilities) and ADE- and effect-based
    F1 scores.'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是通过 OMOP ADE 任务评估得到的，使用了 MALADE 的相应修改版本，所有版本均在 GPT-4 Turbo 上运行。为了减轻消融计算的负担，当一个消融系统的配置与
    MALADE 完全相同（即，所有代理均启用评论员且启用 RAG）直到流水线的某个给定步骤时，我们保留了 MALADE 原本产生的输出。我们在附录 [E](https://arxiv.org/html/2408.01869v1#A5
    "附录 E MALADE 输出的方差 ‣ MALADE：通过检索增强生成的药物安全监测系统") 中解决了由 LLM 随机采样引起的方差效应。我们保持与评估指标和输出标签后处理一致，具体细节见
    [5.1](https://arxiv.org/html/2408.01869v1#S5.SS1 "5.1 评估设置 ‣ 5 实验 ‣ MALADE：通过检索增强生成的药物安全监测系统")
    节，报告 ADE 和基于效果的 AUC 分数（包括输出的置信度分数和概率）以及 ADE 和基于效果的 F1 分数。
- en: Critics RAG ADE-based AUC Effect-based AUC F1 Score DrugAgent CategoryAgent
    Confidence Probability Probability (Modified) Confidence Probability Probability
    (Modified) ADE Effect ✓ ✓ ✓ 0.8514 0.7935 0.8043 0.8306 0.8058 0.8151 0.5556 0.6087
    ✓ $\times$ ✓ 0.8647 0.7126 0.7693 0.8512 0.7376 0.7862 0.5714 0.6154 $\times$
    ✓ ✓ 0.9034 0.8889 0.9143 0.8864 0.8833 0.9050 0.6316 0.6667 $\times$ $\times$
    ✓ 0.8249 0.8865 0.8804 0.8192 0.8812 0.8760 0.5556 0.6087 ✓ ✓ $\times$ 0.9239
    0.7609 0.8659 0.9287 0.7955 0.8853 0.5263 0.6087 ✓ $\times$ $\times$ 0.9239 0.7633
    0.8599 0.9287 0.7975 0.8802 0.5556 0.6364 $\times$ ✓ $\times$ 0.9203 0.7403 0.8623
    0.9256 0.7779 0.8822 0.5263 0.6087 $\times$ $\times$ $\times$ 0.9203 0.7428 0.8563
    0.9256 0.7800 0.8771 0.5556 0.6364
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 评论员 RAG ADE 基于 AUC 效果基于 AUC F1 分数 药物代理 类别代理 信心 概率 概率（修改后） 信心 概率 概率（修改后） ADE
    效果 ✓ ✓ ✓ 0.8514 0.7935 0.8043 0.8306 0.8058 0.8151 0.5556 0.6087 ✓ $\times$ ✓
    0.8647 0.7126 0.7693 0.8512 0.7376 0.7862 0.5714 0.6154 $\times$ ✓ ✓ 0.9034 0.8889
    0.9143 0.8864 0.8833 0.9050 0.6316 0.6667 $\times$ $\times$ ✓ 0.8249 0.8865 0.8804
    0.8192 0.8812 0.8760 0.5556 0.6087 ✓ ✓ $\times$ 0.9239 0.7609 0.8659 0.9287 0.7955
    0.8853 0.5263 0.6087 ✓ $\times$ $\times$ 0.9239 0.7633 0.8599 0.9287 0.7975 0.8802
    0.5556 0.6364 $\times$ ✓ $\times$ 0.9203 0.7403 0.8623 0.9256 0.7779 0.8822 0.5263
    0.6087 $\times$ $\times$ $\times$ 0.9203 0.7428 0.8563 0.9256 0.7800 0.8771 0.5556
    0.6364
- en: 'Table 8: Ablation results on MALADE.'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8：在 MALADE 上的消融结果。
- en: 'Results in Table [8](https://arxiv.org/html/2408.01869v1#A4.T8 "Table 8 ‣ Appendix
    D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented
    Generation for Pharmacovigilance") show that, in the case with RAG, the best results
    are obtained with the Critic on CategoryAgent active but the Critic on DrugAgent
    disabled (row 3); this suggests that the feedback from CategoryAgent’s Critic
    is important for producing the most reliable results, but that DrugAgent’s Critic
    may reduce the performance of MALADE. The case with a Critic on DrugAgent but
    not CategoryAgent does not confirm this hypothesis (row 2), however, showing slightly
    improved confidence scores and F1 scores, but much worse results in terms of probabilities
    compared to full MALADE (row 1). Compared to this case, removing the DrugAgent’s
    Critic worsens results with the exception of probability-based evaluations; hence,
    it is difficult to confidently determine from these results whether DrugAgent’s
    Critic is helpful or harmful. The extremely strong results in the case with the
    Critic on CategoryAgent active but the Critic on DrugAgent disabled do, however,
    appear to outweigh the improvements observed in the second row, suggesting that
    the Critic on CategoryAgent does in fact improve the overall reliability of MALADE.'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: '表格 [8](https://arxiv.org/html/2408.01869v1#A4.T8 "Table 8 ‣ Appendix D Ablations
    ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval Augmented Generation
    for Pharmacovigilance") 中的结果表明，在使用 RAG 的情况下，最佳结果是在启用 CategoryAgent 的 Critic 且禁用
    DrugAgent 的 Critic 时获得的（第 3 行）；这表明来自 CategoryAgent 的 Critic 的反馈对产生最可靠的结果至关重要，但
    DrugAgent 的 Critic 可能会降低 MALADE 的性能。尽管在 DrugAgent 上启用 Critic 而不启用 CategoryAgent
    的情况下并未证实这一假设（第 2 行），但结果显示置信度和 F1 分数有所改善，但在概率方面的结果明显比完整 MALADE（第 1 行）差。与此相比，移除
    DrugAgent 的 Critic 除了概率相关的评估外会使结果变差；因此，很难从这些结果中明确判断 DrugAgent 的 Critic 是有益的还是有害的。然而，在启用
    CategoryAgent 的 Critic 且禁用 DrugAgent 的 Critic 时所获得的极为强劲的结果，似乎超过了第二行中观察到的改善，表明
    CategoryAgent 的 Critic 确实提高了 MALADE 的整体可靠性。'
- en: The results without RAG show, slightly improved AUCs in the presence of DrugAgent’s
    Critic; CategoryAgent’s Critic, on the other hand, reduces F1 scores and slightly
    reduces probability-based AUCs.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 没有 RAG 的结果表明，在启用 DrugAgent 的 Critic 时，AUC 略有改善；另一方面，CategoryAgent 的 Critic 会降低
    F1 分数，并略微降低基于概率的 AUC。
- en: 'Despite strong performance observed with probability-based metrics with some
    settings, these results suggest that direct estimates of effect probabilities
    may not be reliable measures in future pharmacovigilance systems; to see this,
    compare the columns labeled “Probability” and “Probability (Modified).” The “Probability
    (Modified)” column is the same as “Probability” except that output probabilities
    are incremented by 1 when the label is “increase” for ADE-based AUC and “increase”
    or “decrease” for effect-based AUC. In the ADE case, this modification enforces
    the separation between the derived scores from samples GPT-4 Turbo labeled as
    increasing risk and as having no effect; the improved results observed indicate
    that GPT-4’s probability estimates are not consistent: substantial numbers of
    “no-effect” cells are assigned higher probabilities of an effect occurring as
    compared to cells where GPT-4 itself identifies increased risk.'
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管在某些设置下使用基于概率的指标时观察到较强的表现，这些结果表明，未来药物警戒系统中对效应概率的直接估计可能不是可靠的度量标准；要验证这一点，可以对比“Probability”和“Probability
    (Modified)”两列。 “Probability (Modified)” 列与 “Probability” 列相同，唯一的不同是当标签为 “increase”
    时，ADE 基于 AUC 输出概率会增加 1，而当标签为 “increase” 或 “decrease” 时，基于效应的 AUC 输出概率也会增加 1。在
    ADE 情况下，这一修改强制分离了由 GPT-4 Turbo 标记为增加风险和无效的样本所得分数；观察到的改善结果表明，GPT-4 的概率估计并不一致：大量被标记为“无效”的单元的概率高于那些
    GPT-4 本身识别为增加风险的单元。
- en: Appendix E Variance of MALADE’s outputs
  id: totrans-402
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 E MALADE 输出的方差
- en: We wish to evaluate how much random sampling from LLM outputs affects MALADE’s
    outputs, and, in particular, given the potential unreliability of numerical outputs
    produced by LLMs [[44](https://arxiv.org/html/2408.01869v1#bib.bib44)], how much
    variance there is in MALADE’s output confidence scores. Moreover, we aim to understand
    whether key components of MALADE’s design, namely Critic agents and RAG, affect
    these numerical outputs, and, in particular, affect their consistency, as well
    as whether variance in the outputs by the first two agents in MALADE’s pipeline
    (DrugFinder and DrugAgent) is a significant contributor to the overall variance
    of these outputs.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望评估LLM输出的随机采样对MALADE输出的影响，特别是考虑到LLM生成的数值输出的潜在不可靠性[[44](https://arxiv.org/html/2408.01869v1#bib.bib44)]，我们希望了解MALADE输出的置信度分数的方差。此外，我们还旨在理解MALADE设计的关键组件，即Critic代理和RAG，是否会影响这些数值输出，特别是影响它们的一致性，以及MALADE管道中前两个代理（DrugFinder和DrugAgent）的输出方差是否对这些输出的整体方差有显著贡献。
- en: 'We proceed by selecting three representative cells from the OMOP table, restricting
    ourselves to the cells used for evaluation and, to ensure a well-defined ground
    truth label for each representative, to drug categories without subcategories.
    Each representative corresponds to one of the three ground truth labels (increased
    risk, decreased risk, and no effect). We then run ten trials on each cell with
    ablated versions of MALADE (constructed as in Appendix [D](https://arxiv.org/html/2408.01869v1#A4
    "Appendix D Ablations ‣ MALADE: Orchestration of LLM-powered Agents with Retrieval
    Augmented Generation for Pharmacovigilance"); however, we only consider enabling
    or disabling Critics on all agents, including DrugFinder here). The results are
    shown in Figure [13](https://arxiv.org/html/2408.01869v1#A5.F13 "Figure 13 ‣ Appendix
    E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance"); these experiments were
    run with GPT-4 Turbo.'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: '我们通过从OMOP表中选择三个具有代表性的单元格来继续操作，限定我们只使用用于评估的单元格，并且为了确保每个代表性单元格有明确的真实标签，我们只选择没有子类别的药物类别。每个代表性单元格对应三种真实标签之一（增加风险、降低风险和无效应）。然后，我们对每个单元格使用消融版本的MALADE进行了十次实验（按照附录[D](https://arxiv.org/html/2408.01869v1#A4
    "附录D 消融 ‣ MALADE: 基于LLM驱动的代理和增强检索生成在药物安全监测中的编排"中描述的方式构建）；然而，我们只考虑在所有代理（包括DrugFinder）上启用或禁用Critics）。结果如图[13](https://arxiv.org/html/2408.01869v1#A5.F13
    "图13 ‣ 附录E MALADE输出的方差 ‣ MALADE: 基于LLM驱动的代理和增强检索生成在药物安全监测中的编排")所示；这些实验是在GPT-4
    Turbo上运行的。'
- en: '![Refer to caption](img/9da1fd6574a44874418bf3a31412f130.png)'
  id: totrans-405
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明文字](img/9da1fd6574a44874418bf3a31412f130.png)'
- en: 'Figure 13: Histograms of confidence in ADE produced by ablations of MALADE.'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 图13：MALADE的消融实验中生成的ADE置信度直方图。
- en: We observe that in all cases, MALADE maintains a clear separation between the
    confidences for each ground truth label, with the sole exception being the case
    with RAG but without Critics; that case is the only one in which we observe any
    samples with incorrect labels; the variance is similarly increased significantly
    in that case.
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 我们观察到，在所有情况下，MALADE始终保持各个真实标签的置信度之间的明显区分，唯一的例外是RAG但没有Critics的情况；这个情况是我们唯一观察到有样本标签错误的情况；在这个情况下，方差也显著增加。
- en: '![Refer to caption](img/9fb9d4509d3b7f31e93321b17c460936.png)'
  id: totrans-408
  prefs: []
  type: TYPE_IMG
  zh: '![参见说明文字](img/9fb9d4509d3b7f31e93321b17c460936.png)'
- en: 'Figure 14: Histograms of confidence in ADE produced by MALADE with the outputs
    of each initial sequence of agents in the pipeline held fixed.'
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 图14：MALADE生成的ADE置信度直方图，其中每个初始代理序列的输出在管道中保持固定。
- en: Next, we investigate how the variance in the outputs of DrugFinder and DrugAgent
    contribute to the overall variance of MALADE. We compare the variance of MALADE’s
    outputs with the initial steps of the pipeline held fixed; They indicate that
    holding the initial steps of the pipeline fixed does not substantially reduce
    variance and that CategoryAgent is the primary source of variance in MALADE. However,
    note that the variance for “no-effect” is, somewhat surprisingly, highest with
    the outputs of DrugFinder and DrugAgent held constant. We observe that the variance
    in the representative drugs affects output confidence, in particular, it affects
    mean confidence in ADEs for the “no effect” representative. With the representatives
    held fixed, that mean confidence is higher (or, equivalently, mean confidence
    in “no effect” is lower) compared to the case in which we resample representatives
    in each trial.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们研究DrugFinder和DrugAgent输出的方差如何影响MALADE的整体方差。我们将MALADE输出的方差与保持管道初始步骤不变的情况进行比较；结果表明，保持管道初始步骤不变并不会显著减少方差，而CategoryAgent是MALADE方差的主要来源。然而，值得注意的是，“无效”类别的方差在DrugFinder和DrugAgent输出保持不变时，方差竟然最大。我们观察到，代表性药物的方差影响输出的置信度，尤其是它影响“无效”代表的ADEs的平均置信度。在固定代表的情况下，平均置信度更高（或者等效地，“无效”类别的平均置信度更低），相比之下，在每次试验中重新抽取代表的情况下，置信度较低。
- en: '|  | Critics and RAG | Critics only | RAG only |'
  id: totrans-411
  prefs: []
  type: TYPE_TB
  zh: '|  | 批评者与RAG | 仅批评者 | 仅RAG |'
- en: '| --- | --- | --- | --- |'
  id: totrans-412
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Critics only | $<$, $p=0.044$ | — | — |'
  id: totrans-413
  prefs: []
  type: TYPE_TB
  zh: '| 仅批评者 | $<$, $p=0.044$ | — | — |'
- en: '| RAG only | $<$, $p=0.098$ | $\neq$, $p=1.000$ | — |'
  id: totrans-414
  prefs: []
  type: TYPE_TB
  zh: '| 仅RAG | $<$, $p=0.098$ | $\neq$, $p=1.000$ | — |'
- en: '| Neither critics nor RAG | $<$, $p=0.027$ | $<$, $p=0.224$ | $<$, $p=0.255$
    |'
  id: totrans-415
  prefs: []
  type: TYPE_TB
  zh: '| 既无批评者也无RAG | $<$, $p=0.027$ | $<$, $p=0.224$ | $<$, $p=0.255$ |'
- en: 'Table 9: Relationship of mean confidence in ADE for “decrease” for ablated
    versions of MALADE, with p-values.'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 表9：MALADE的去除版本中“减少”类别的ADE平均置信度与p值的关系。
- en: '|  | Critics and RAG | Critics only | RAG only |'
  id: totrans-417
  prefs: []
  type: TYPE_TB
  zh: '|  | 批评者与RAG | 仅批评者 | 仅RAG |'
- en: '| --- | --- | --- | --- |'
  id: totrans-418
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Critics only | $<$, $p=0.022$ | — | — |'
  id: totrans-419
  prefs: []
  type: TYPE_TB
  zh: '| 仅批评者 | $<$, $p=0.022$ | — | — |'
- en: '| RAG only | $>$, $p=0.076$ | $>$, $p=0.017$ | — |'
  id: totrans-420
  prefs: []
  type: TYPE_TB
  zh: '| 仅RAG | $>$, $p=0.076$ | $>$, $p=0.017$ | — |'
- en: '| Neither critics nor RAG | $<$, $p=0.022$ | $\neq$, $p=1.000$ | $<$, $p=0.017$
    |'
  id: totrans-421
  prefs: []
  type: TYPE_TB
  zh: '| 既无批评者也无RAG | $<$, $p=0.022$ | $\neq$, $p=1.000$ | $<$, $p=0.017$ |'
- en: 'Table 10: Relationship of mean confidence in ADE for “no-effect” for ablated
    versions of MALADE, with p-values.'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 表10：MALADE的去除版本中“无效”类别的ADE平均置信度与p值的关系。
- en: '|  | Critics and RAG | Critics only | RAG only |'
  id: totrans-423
  prefs: []
  type: TYPE_TB
  zh: '|  | 批评者与RAG | 仅批评者 | 仅RAG |'
- en: '| --- | --- | --- | --- |'
  id: totrans-424
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Critics only | $<$, $p=0.330$ | — | — |'
  id: totrans-425
  prefs: []
  type: TYPE_TB
  zh: '| 仅批评者 | $<$, $p=0.330$ | — | — |'
- en: '| RAG only | $>$, $p=0.314$ | $>$, $p=0.178$ | — |'
  id: totrans-426
  prefs: []
  type: TYPE_TB
  zh: '| 仅RAG | $>$, $p=0.314$ | $>$, $p=0.178$ | — |'
- en: '| Neither critics nor RAG | $>$, $p=0.144$ | $>$, $p=0.067$ | $>$, $p=0.278$
    |'
  id: totrans-427
  prefs: []
  type: TYPE_TB
  zh: '| 既无批评者也无RAG | $>$, $p=0.144$ | $>$, $p=0.067$ | $>$, $p=0.278$ |'
- en: 'Table 11: Relationship of mean confidence in ADE for “increase” for ablated
    versions of MALADE, with p-values.'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 表11：MALADE的去除版本中“增加”类别的ADE平均置信度与p值的关系。
- en: 'Now, to understand the significance of these effects, we will perform paired
    t-tests for each pair of ablated variants of MALADE, for each representative.
    The results for “decrease” are in Table [9](https://arxiv.org/html/2408.01869v1#A5.T9
    "Table 9 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    results for “no-effect” are shown in Table [10](https://arxiv.org/html/2408.01869v1#A5.T10
    "Table 10 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    and results for “increase” are shown in Table [11](https://arxiv.org/html/2408.01869v1#A5.T11
    "Table 11 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance").
    Overall, we have that the mean confidence in ADE for the representative for “decrease”
    is lowest (i.e. the confidence in “decrease” is highest) in the case with neither
    Critics nor RAG, and we have that confidence in ADE for the representative of
    “no-effect” is lower (and so confidence in “no-effect” is higher) in the case
    that we have neither Critics nor RAG as compared to the cases with both Critics
    and RAG and RAG alone and, in addition, that confidence in ADE is increased (with
    RAG alone as compared with Critics alone, all with p-values below 0.05 for each
    pair.'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: '现在，为了理解这些效应的显著性，我们将对MALADE的每一对去除变体进行配对t检验，针对每个代表。关于“减少”的结果见表[9](https://arxiv.org/html/2408.01869v1#A5.T9
    "Table 9 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")，关于“无效”的结果见表[10](https://arxiv.org/html/2408.01869v1#A5.T10
    "Table 10 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")，关于“增加”的结果见表[11](https://arxiv.org/html/2408.01869v1#A5.T11
    "Table 11 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance")。总体而言，我们发现，“减少”代表的ADE置信度最低（即“减少”的置信度最高）出现在既没有Critics也没有RAG的情况下，而“无效”代表的ADE置信度较低（因此“无效”的置信度较高）出现在既没有Critics也没有RAG的情况下，相比之下，使用了Critics和RAG的情况，以及仅使用RAG的情况中，ADE的置信度较高，并且，此外，使用单独的RAG相比于仅使用Critics的情况下，ADE置信度有所增加，所有这些结果的p值都低于0.05。'
- en: With p-values below 0.1, we additionally have that mean confidence in ADE for
    “decrease” is decreased in the case with RAG alone as compared to the case with
    both Critics and RAG, confidence in ADE is increased with RAG alone as compared
    to critics and RAG, and, finally, that confidence in ADE for “increase” is increased
    with neither Critics nor RAG as compared to Critics alone.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 在p值低于0.1的情况下，我们还发现，关于“减少”的ADE平均置信度，在仅使用RAG的情况下比使用Critics和RAG的情况低，关于ADE的置信度，在仅使用RAG的情况下比使用Critics和RAG的情况高，最后，关于“增加”的ADE置信度，在既没有Critics也没有RAG的情况下比仅使用Critics的情况更高。
- en: 'Note that, while, as seen in Figure [13](https://arxiv.org/html/2408.01869v1#A5.F13
    "Figure 13 ‣ Appendix E Variance of MALADE’s outputs ‣ MALADE: Orchestration of
    LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    by far the largest absolute shift in confidence occurs between RAG alone and all
    others for the “no-effect” representative, the large variance observed in that
    case is responsible for the reduced significance.'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '请注意，正如图[13](https://arxiv.org/html/2408.01869v1#A5.F13 "Figure 13 ‣ Appendix
    E Variance of MALADE’s outputs ‣ MALADE: Orchestration of LLM-powered Agents with
    Retrieval Augmented Generation for Pharmacovigilance")所示，最大绝对置信度变化发生在单独使用RAG和其他所有方法之间，特别是在“无效”代表情况下，尽管观察到的大范围变异导致了显著性降低。'
- en: Extrapolating from these representative samples, these results suggest that
    MALADE without RAG or Critics performs at least as well as any other configuration
    (with a p-value $<0.05$), but that in the presence of RAG, Critics improve reliability
    on instances with no strong effect, i.e. those where the ground truth is “no-effect,”
    with a p-value less than 0.1\. Notably, we do not have clear evidence that Critics
    are necessary when there is clear evidence, unsurprising as the FDA labels may
    explicitly state that a condition $H$ is a potential ADE of a drug category $C$
    or that drugs in $C$ are indicated for $H$.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 从这些代表样本推测，这些结果表明，MALADE在没有RAG或Critics的情况下，至少与任何其他配置的性能相当（p值$<0.05$），但在有RAG的情况下，Critics能够提高对于没有强效应实例的可靠性，即对于那些地面实况为“无效”的情况，其p值小于0.1。值得注意的是，我们没有明确证据表明在有明确证据的情况下，Critics是必要的，这并不令人惊讶，因为FDA标签可能明确指出，条件$H$是药物类别$C$的潜在ADE，或者药物$C$的适应症为$H$。
- en: 'As discussed in Section [5.3](https://arxiv.org/html/2408.01869v1#S5.SS3 "5.3
    RQ2: Agent-Critic interaction enhances reliability ‣ 5 Experiments ‣ MALADE: Orchestration
    of LLM-powered Agents with Retrieval Augmented Generation for Pharmacovigilance"),
    we consider RAG an essential component of a generalizable pharmacovigilance system.
    Hence, we focus on the results in the case with RAG, in which case these results
    suggest that the Critic components of MALADE improve reliability.'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: '如在第[5.3节](https://arxiv.org/html/2408.01869v1#S5.SS3 "5.3 RQ2: Agent-Critic
    interaction enhances reliability ‣ 5 Experiments ‣ MALADE: Orchestration of LLM-powered
    Agents with Retrieval Augmented Generation for Pharmacovigilance")中讨论的，我们认为RAG是一个可推广的药物警戒系统的关键组成部分。因此，我们重点关注包含RAG的结果，在这种情况下，这些结果表明MALADE的Critic组件提高了可靠性。'
